# The tree layout with WITH_SRC is:
#
#   ooo/ [ pointed to by WITH_SRC ]
#     binutils-2.13
#     gcc-3.0.4
#     j2sdk1.3.1
#     ooo-build-$BUILD_VERSION
#     etc.

# shrink this to ENUS,GERM for a faster build
LANGS="ENUS,FREN,GERM,SPAN,ITAL,DTCH,PORT,SWED,POL,RUSS";
LANGS="$LANGS,DAN,GREEK,TURK,CHINSIM,CHINTRAD,JAPN,KOREAN";
LANGS="$LANGS,CAT";

# this undetectable mess rocks:
ARCHITECTURE=unxlngi4.pro
BUILD_MAGIC=645

DISTRO='@DISTRO@'
WITH_SRC='@WITH_SRC@'
VERSION='@OOO_VERSION@'
BINSUFFIX='@OOO_BINSUFFIX@'
CVSTAG='@TAG@'


if test "z$DISTRO" = "zRHFedora"; then
CONFIGURE_OPTIONS="--with-lang=$LANGS \
		   --enable-libart --enable-libsn --enable-crashdump=no \
		   --with-system-zlib --enable-fontconfig";
else
CONFIGURE_OPTIONS="--with-lang=$LANGS \
		   --enable-libart --enable-libsn --enable-crashdump=no \
		   --without-fonts --disable-rpath \
		   --with-system-zlib --enable-fontconfig";
fi

ENABLE_BONOBO=@ENABLE_BONOBO@
ENABLE_JAVA=@ENABLE_JAVA@
# Misc. internal
STAMP=ooo-build-stamp
TOOLSDIR='@TOOLSDIR@'
BASEDIR='@BASEDIR@'
OODESTDIR=$DESTDIR
OOBUILDDIR='@OOBUILDDIR@'
SYSTEM_GCC='@SYSTEM_GCC@'

# clobber bogus env vars. they badly screw things up
unset DESTDIR;
unset CC;
unset CXX;
unset ERROR_FLAGS;
unset MAKE
unset BUILDDIR
unset SRCDIR
unset WARN_CFLAGS

if !(test "z$WITH_SRC" = "z"); then
	# Building in the build system ...
	echo "In the build system ..."
	
	BASEDIR="@WITH_SRC@"
	SRCDIR='<No manual unpacking required>'
	BUILDDIR=$BASEDIR
fi

# Where to install to
PREFIXBASE=@prefix@
PREFIX=$OODESTDIR$PREFIXBASE
SYSCONFBASE=@sysconfdir@
SYSCONFDIR=$OODESTDIR$SYSCONFBASE
OOINSTBASE=@prefix@/lib/ooo-$VERSION
OOINSTDIR=$OODESTDIR$OOINSTBASE

CVSROOT=':pserver:anoncvs@cvs.openoffice.org:/cvs'
TCSH=/bin/tcsh

# Misc directories
if test "z$WITH_SRC" = "z"; then
	SRCDIR=$BASEDIR/src
	BUILDDIR=$BASEDIR/build
fi

# setup paths
PATH="$BUILDDIR/bin:$PATH"
if test "z$ENABLE_JAVA" = "zyes"; then
    PATH="$BUILDDIR/jdk/bin:$PATH"
else
    CONFIGURE_OPTIONS="$CONFIGURE_OPTIONS --disable-java"
fi

LD_LIBRARY_PATH="$BUILDDIR/lib:$LD_LIBRARY_PATH"
RPM_RELEASE=1.ximian.1
CCACHE_DIR=$BUILDDIR/.ccache

export LD_LIBRARY_PATH PATH CVSROOT CVSTAG
export CCACHE_DIR BUILDDIR OOBUILDDIR BUILD_FLAGS
export VERSION RPM_RELEASE TOOLSDIR
export PREFIX PREFIXBASE SYSCONFDIR SYSCONFBASE
export OOINSTDIR OOINSTBASE
export OODESTDIR CONFIGURE_OPTIONS WITH_SRC DISTRO
export BINSUFFIX ARCHITECTURE BUILD_MAGIC
export ENABLE_BONODO BONOBODIR ENABLE_JAVA

echo "Setup:"
echo " Tag:        '$CVSTAG'"
echo " Flags:      '$BUILD_FLAGS'"
echo " Suffix:     '$BINSUFFIX'"
echo " Dir:        '$BUILDDIR'"
echo " DestDir:    '$DESTDIR'"
echo " Path:       '$PATH'"
echo " Prefix:     '$PREFIX'"
echo " Sysconf:    '$SYSCONFDIR'"
echo " OOInBase:   '$OOINSTBASE'"
echo " OOInstall:  '$OOINSTDIR'"
echo " OODestDir:  '$OODESTDIR'"
echo " Config:     '$CONFIGURE_OPTIONS'"
echo " OOo-Bonobo: '$ENABLE_BONOBO'"

if !(test "z$WITH_SRC" = "z"); then
	echo "Build environment:";
	set
fi
