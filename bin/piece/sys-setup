#!/bin/bash

if test "z$OO_INSTDIR" == "z"; then
    echo "Error: missing oo instdir"
    exit 1
fi
# a saneish default directory for the solver
if test "z$OO_SOLVERDIR" == "z"; then
    export OO_SOLVERDIR=$OO_INSTDIR/solver
fi

# installed system libraries
URE_DIR=$OO_INSTDIR/ure
INSTALL_DIR=$OO_INSTDIR/basis3.0/program
DEV_DIR=$OO_SOLVERDIR

PRESERVE_PATH=$PATH
PATH=

# include all the main configured settings by default
. $DEV_DIR/*.[sS]et.sh

# override / extend ones we need to adapt
SRC_ROOT=`pwd`

#  new local solver
export SOLARPIECEVERSION="$SRC_ROOT/solver"
export SOLARPIECE="$SOLARPIECEVERSION"

# system solver bits ...
export SOLARVER="$DEV_DIR"
export SOLARENV="$DEV_DIR/../solenv"
export MAKEDEPEND="$DEV_DIR/bin/makedepend"
export SOLARVERSION="$SOLARVER"
export SOLARENVINC="$SOLARENV/inc"
export LOCALINI="$SOLARENV/config"
export STAR_INIROOT="$SOLARENV/config"
export STAR_INIROOTOLD="$SOLARENV/config"
export STAR_STANDLST="$SOLARENV/config/stand.lst"
export STAR_SSCOMMON="$SOLARENV/config/ssolar.cmn"
export STAR_SSOLARINI="$SOLARENV/config/ssolar.ini"
export DMAKEROOT="$SOLARENVINC/startup"
export UNOINCLUDES="-I$DEV_DIR/inc/offuh -I$SOLARPIECE/$INPATH/inc/offuh"

export LD_LIBRARY_PATH=".:$DEV_DIR/lib:$URE_DIR/lib:$INSTALL_DIR:$SOLARPIECE/$INPATH/lib:$SOLARENV/$INPATH/lib:$JAVA_HOME/jre/lib/i386:$JAVA_HOME/jre/lib/i386/xawt:$JAVA_HOME/jre/lib/i386/client:$JAVA_HOME/jre/lib/i386/native_threads:../lib:$SOLARVER/lib:/opt/OpenOffice/HEAD/build/lib:/opt/mozilla/lib:"
export PATH="$SOLARPIECE/$INPATH/bin:$URE_DIR/bin:$JAVA_HOME/bin:.:$SOLARVER/bin:$SOLARENV/$OUTPATH/bin:$SOLARENV/bin:$PRESERVE_PATH"
SOLARINC=" -I. -I$SOLARVER/inc/stl -I$SOLARVER/inc/external -I$SOLARVER/inc -I$SOLARENV/$OUTPATH/inc -I$DEV_DIR/inc -I$SOLARENV/inc -I$SRC_ROOT/res -I$SOLARENV/inc/Xp31"
SOLARINC="$SOLARINC -I$SOLARPIECE/$INPATH/inc/stl -I$SOLARPIECE/$INPATH/inc/external -I$SOLARPIECE/$INPATH/inc -I$SOLARPIECE/$OUTPATH/inc"
SOLARINC="$SOLARINC -I$JAVA_HOME/include -I$JAVA_HOME/include/linux -I$JAVA_HOME/include/native_threads/include -I/usr/include"
SOLARLIB=" -L../lib -L$SOLARENV/$OUTPATH/lib -L$SOLARVER/lib -L$SOLARENV/$OUTPATH/lib"
SOLARLIB="$SOLARLIB -L$URE_DIR/lib -L$INSTALL_DIR -L$SOLARPIECE/$INPATH/lib"
SOLARLIB="$SOLARLIB -L$JAVA_HOME/lib -L$JAVA_HOME/jre/lib/i386 -L$JAVA_HOME/jre/lib/i386/client -L$JAVA_HOME/jre/lib/i386/native_threads -L/usr/lib -L/usr/lib/xulrunner-1.9"
export SOLARLIB SOLARINC
export SOLARIDLINC="-I$SOLARVERSION/$INPATH/idl$EXT_UPDMINOR -I$SOLARPIECE/$INPATH/idl$EXT_UPDMINOR"

