Index: gtkframe.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/gtk/window/gtkframe.cxx,v
retrieving revision 1.9.8.1
retrieving revision 1.9.8.2
diff -u -r1.9.8.1 -r1.9.8.2
--- vcl/unx/gtk/window/gtkframe.cxx
+++ vcl/unx/gtk/window/gtkframe.cxx
@@ -1308,12 +1308,19 @@
     aEvent.mnCode	= GetModCode( pEvent->state );
 
     bool bClosePopups = false;
-    if( pEvent->type == GDK_BUTTON_PRESS && m_nFloats > 0 )
+    if( pEvent->type == GDK_BUTTON_PRESS )
     {
-        // close popups if user clicks outside our application
-        gint x, y;
-        bClosePopups = (gdk_display_get_window_at_pointer( pThis->getGdkDisplay(), &x, &y ) == NULL);
-        gdk_display_pointer_ungrab( pThis->getGdkDisplay(), GDK_CURRENT_TIME );
+        if( m_nFloats > 0 )
+        {
+            // close popups if user clicks outside our application
+            gint x, y;
+            bClosePopups = (gdk_display_get_window_at_pointer( pThis->getGdkDisplay(), &x, &y ) == NULL);
+        }
+        /*  #i30306# release implicit pointer grab if no popups are open; else
+         *  Drag cannot grab the pointer and will fail.
+         */
+        if( m_nFloats < 1 || bClosePopups )
+            gdk_display_pointer_ungrab( pThis->getGdkDisplay(), GDK_CURRENT_TIME );
     }
 
     GTK_YIELD_GRAB();

--- vcl/unx/gtk/app/gtkdata.cxx	5 Jul 2004 09:19:50 -0000	1.8
+++ vcl/unx/gtk/app/gtkdata.cxx	11 Aug 2004 16:13:32 -0000	1.8.44.1
@@ -151,6 +151,11 @@
     
 	XEvent *pEvent = (XEvent *)sys_event;
 	GtkSalDisplay *pDisplay = (GtkSalDisplay *)data;
+
+    // dispatch all XEvents to event callback
+    if( GetSalData()->pInstance_->
+        CallEventCallback( pEvent, sizeof( XEvent ) ) )
+        aFilterReturn = GDK_FILTER_REMOVE;
 
     if (pDisplay->GetDisplay() == pEvent->xany.display )
     {
