Index: vcl/unx/gtk/window/gtkframe.cxx
===================================================================
--- vcl/unx/gtk/window/gtkframe.cxx	2004-08-14 12:27:48.000000000 +0200
+++ vcl/unx/gtk/window/gtkframe.cxx	2004-08-16 22:45:20.786837104 +0200
@@ -1084,7 +1084,6 @@ void GtkSalFrame::UpdateSettings( AllSet
     // text colors
     Color aTextColor = getColor( pStyle->text[GTK_STATE_NORMAL] );
     aStyleSet.SetDialogTextColor( aTextColor );
-    aStyleSet.SetMenuTextColor( aTextColor );
     aStyleSet.SetButtonTextColor( aTextColor );
     aStyleSet.SetRadioCheckTextColor( aTextColor );
     aStyleSet.SetGroupTextColor( aTextColor );
@@ -1099,8 +1098,6 @@ void GtkSalFrame::UpdateSettings( AllSet
     aStyleSet.Set3DColors( aBackColor );
     aStyleSet.SetFaceColor( aBackColor );
     aStyleSet.SetDialogColor( aBackColor );
-    aStyleSet.SetMenuColor( aBackColor );
-    aStyleSet.SetMenuBarColor( aBackColor );
     aStyleSet.SetFieldColor( aBackFieldColor );
     aStyleSet.SetWindowColor( aBackFieldColor );
     // ancient wisdom tells us a mystic algorithm how to set checked color
@@ -1122,11 +1119,27 @@ void GtkSalFrame::UpdateSettings( AllSet
     aStyleSet.SetHighlightColor( aHighlightColor );
     aStyleSet.SetHighlightTextColor( aHighlightTextColor );
 
-    // menu highlighting
-    aHighlightColor = getColor( pStyle->bg[ GTK_STATE_SELECTED ] );
+    // menu colors
+    GtkWidget* pMenu = gtk_menu_new();
+    GtkWidget* pMenuItem = gtk_menu_item_new_with_label( "blah" );
+    gtk_menu_shell_append( GTK_MENU_SHELL( pMenu ), pMenuItem );
+
+    gtk_widget_ensure_style( pMenu );
+    gtk_widget_ensure_style( pMenuItem );
+    GtkStyle* pMenuStyle = gtk_rc_get_style( pMenu );
+    GtkStyle* pMenuItemStyle = gtk_rc_get_style( pMenuItem );
+    GtkStyle* pMenuTextStyle = gtk_rc_get_style( gtk_bin_get_child( GTK_BIN( pMenuItem )));
+
+    aBackColor = getColor( pMenuStyle->bg[GTK_STATE_NORMAL] );
+    aStyleSet.SetMenuColor( aBackColor );
+    aStyleSet.SetMenuBarColor( aBackColor );
+    aTextColor = getColor( pMenuTextStyle->text[GTK_STATE_NORMAL] );
+    aStyleSet.SetMenuTextColor( aTextColor );
+    aHighlightColor = getColor( pMenuItemStyle->bg[ GTK_STATE_PRELIGHT ] );
     aStyleSet.SetMenuHighlightColor( aHighlightColor );
-    aHighlightTextColor = getColor( pStyle->fg[ GTK_STATE_PRELIGHT ] );
+    aHighlightTextColor = getColor( pMenuTextStyle->fg[ GTK_STATE_PRELIGHT ] );
     aStyleSet.SetMenuHighlightTextColor( aHighlightTextColor );
+    gtk_widget_destroy( pMenu );
 
     // UI font
     ByteString	aFamily	= pango_font_description_get_family( pStyle->font_desc );
