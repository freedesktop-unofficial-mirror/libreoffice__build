--- config_office/configure.in.old	2005-02-24 20:41:22.000000000 +0100
+++ config_office/configure.in	2005-03-02 11:24:02.000000000 +0100
@@ -147,6 +147,9 @@
 			   --with-system-* flags except mozilla, python and
 			   odbc-headers
 ],,)
+AC_ARG_WITH(system-stdcpp,
+[  --with-system-stdcpp      Use standard C++ libraries already on system
+],,)
 AC_ARG_WITH(system-zlib,
 [  --with-system-zlib      Use zlib already on system
 ],,)
@@ -1979,6 +1982,23 @@
 fi
 
 dnl ===================================================================
+dnl Check for system standard C++ libraries
+dnl ===================================================================
+AC_MSG_CHECKING([which standard C++ libraries to use])
+if test -n "$with_system_stdcpp" -o -n "$with_system_libs" && \
+	test "$with_system_stdcpp" != "no"; then
+    AC_MSG_RESULT([external])
+    SYSTEM_STDCPP=YES
+    # explicit test for the libraries is not necessary because
+    # the C++ compiler did not work otherwise
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_STDCPP=NO
+    BUILD_TYPE="$BUILD_TYPE STDCPP"
+fi
+AC_SUBST(SYSTEM_STDCPP)
+
+dnl ===================================================================
 dnl Check for system zlib
 dnl ===================================================================
 AC_MSG_CHECKING([which zlib to use])
--- scp2/source/ooo/file_library_ooo.scp.old	2005-02-28 20:41:35.000000000 +0100
+++ scp2/source/ooo/file_library_ooo.scp	2005-03-02 12:14:29.000000000 +0100
@@ -715,7 +715,7 @@
 STD_UNO_LIB_FILE( gid_File_Lib_Fwl , fwl)
 
 #if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) )
-#if defined( _gcc3 )
+#if defined( _gcc3 ) && !defined (SYSTEM_STDCPP)
 
 File gid_File_Lib_Gcc
     TXT_FILE_BODY;
@@ -729,7 +729,7 @@
 #endif
 
 #if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) )
-#if defined( _gcc3 )
+#if defined( _gcc3 ) && !defined (SYSTEM_STDCPP)
 
 File gid_File_Lib_Stdc
     TXT_FILE_BODY;
--- external/gcc3_specific/makefile.mk.old	2003-06-18 14:44:10.000000000 +0200
+++ external/gcc3_specific/makefile.mk	2005-03-02 11:48:39.000000000 +0100
@@ -7,7 +7,8 @@
 # ------------------------------------------------------------------
 
 
-.IF "$(COMID)"=="gcc3"
+.IF "$(COMID)"=="gcc3" && "$(SYSTEM_STDCPP)"=="NO"
+
 
 .IF "$(OS)"!="MACOSX"
 .IF "$(OS)"!="IRIX"
--- scp2/source/ooo/makefile.mk.old	2005-02-28 20:41:31.000000000 +0100
+++ scp2/source/ooo/makefile.mk	2005-03-02 12:22:33.000000000 +0100
@@ -113,6 +113,10 @@
 SCPDEFS+=-DSYSTEM_FREETYPE
 .ENDIF
 
+.IF "$(SYSTEM_STDCPP)" == "YES"
+SCPDEFS+=-DSYSTEM_STDCPP
+.ENDIF
+
 .IF "$(SYSTEM_LIBXML)" == "YES"
 SCPDEFS+=-DSYSTEM_LIBXML
 .ENDIF
--- config_office/set_soenv.in.old	2005-02-28 20:41:31.000000000 +0100
+++ config_office/set_soenv.in	2005-03-01 20:27:34.000000000 +0100
@@ -1761,6 +1761,7 @@
   ToFile( "LINKFLAGSRUNPATH",'',                   "e" );
 }
 ToFile( "EPM",               "@EPM@",              "e" );
+ToFile( "SYSTEM_STDCPP",     "@SYSTEM_STDCPP@",    "e" );
 ToFile( "SYSTEM_ZLIB",       "@SYSTEM_ZLIB@",      "e" );
 ToFile( "SYSTEM_PYTHON",     "@SYSTEM_PYTHON@",    "e" );
 ToFile( "PYTHON_CFLAGS",     "@PYTHON_CFLAGS@",    "e" );
