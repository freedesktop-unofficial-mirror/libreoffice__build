--- vcl/source/gdi/pngread.cxx	2006-11-02 13:22:04.000000000 +0800
+++ vcl/source/gdi/pngread.cxx	2006-11-02 13:21:56.000000000 +0800
@@ -792,10 +792,15 @@ BOOL PNGReaderImpl::ImplReadTransparent(
     if( mbTransparent && !mbAlphaChannel && !mpMaskBmp )
     {
         if( bNeedAlpha)
+        {
             mpAlphaMask = new AlphaMask( maTargetSize );
+            mpMaskAcc = mpAlphaMask->AcquireWriteAccess();
+        }
         else
+        {
             mpMaskBmp = new Bitmap( maTargetSize, 1 );
-        mpMaskAcc = mpMaskBmp->AcquireWriteAccess();
+            mpMaskAcc = mpMaskBmp->AcquireWriteAccess();
+        }
         mbTransparent = (mpMaskAcc != NULL);
         if( !mbTransparent )
             return FALSE;
