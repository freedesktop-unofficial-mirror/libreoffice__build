diff -Nur config_office.orig/configure.in config_office/configure.in
--- config_office.orig/configure.in	2006-04-29 17:30:48.000000000 +0200
+++ config_office/configure.in	2006-04-29 17:46:34.000000000 +0200
@@ -297,6 +297,10 @@
 [  --with-xalan-jar=JARFILE   Specify path to jarfile manually ],
 [ XALAN_JAR="$withval"
 ])
+AC_ARG_WITH(serializer-jar,
+[  --with-serializer-jar=JARFILE   Specify path to jarfile manually ],
+[ SERIALIZER_JAR="$withval"
+])
 AC_ARG_WITH(system-sablot,
 [  --with-system-sablot    Use sablot already on system
 ],,)
@@ -2908,6 +2912,11 @@
           AC_CHECK_FILE($XALAN_JAR, [],
                [AC_MSG_ERROR(xalan.jar replacement not found.)], [])
         fi
+        if test -n "$SERIALIZER_JAR"; then
+          AC_CHECK_FILE($SERIALIZER_JAR, [],
+               [AC_MSG_ERROR(serializer.jar not found.)], [])
+          AC_SUBST(SERIALIZER_JAR)
+        fi
 else
     AC_MSG_RESULT([internal])
     SYSTEM_XALAN=NO
diff -Nur config_office.orig/set_soenv.in config_office/set_soenv.in
--- config_office.orig/set_soenv.in	2006-04-29 17:31:15.000000000 +0200
+++ config_office/set_soenv.in	2006-04-29 17:47:03.000000000 +0200
@@ -1771,6 +1771,7 @@
 ToFile( "XERCES_JAR",        "@XERCES_JAR@",       "e" );
 ToFile( "SYSTEM_XALAN",      "@SYSTEM_XALAN@",     "e" );
 ToFile( "XALAN_JAR",         "@XALAN_JAR@",        "e" );
+ToFile( "SERIALIZER_JAR",    "@SERIALIZER_JAR@",   "e" );
 ToFile( "SYSTEM_XT",         "@SYSTEM_XT@",        "e" );
 ToFile( "XT_JAR",            "@XT_JAR@",           "e" );
 ToFile( "SYSTEM_SABLOT",     "@SYSTEM_SABLOT@",    "e" );
diff -Nur filter.orig/source/xsltfilter/makefile.mk filter/source/xsltfilter/makefile.mk
--- filter.orig/source/xsltfilter/makefile.mk	2006-04-29 18:08:18.000000000 +0200
+++ filter/source/xsltfilter/makefile.mk	2006-04-29 18:09:56.000000000 +0200
@@ -74,6 +74,9 @@
 
 .IF "$(SYSTEM_XALAN)" == "YES"
 XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.IF "$(SERIALIZER_JAR)" != ""
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(SERIALIZER_JAR)
+.ENDIF
 .ELSE
 JARFILES += xalan.jar
 .ENDIF
--- scp2/source/ooo/makefile.mk.orig	2006-08-29 15:17:52.000000000 +0200
+++ scp2/source/ooo/makefile.mk	2006-08-29 15:19:45.000000000 +0200
@@ -166,6 +166,9 @@
 
 .IF "$(SYSTEM_XALAN)" == "YES"
 SCPDEFS+=-DSYSTEM_XALAN -DXALAN_JAR=\""file://$(XALAN_JAR)"\"
+.IF "$(SERIALIZER_JAR)" != ""
+SCPDEFS+=-DSYSTEM_SERIALIZER -DSERIALIZER_JAR=\""file://$(SERIALIZER_JAR)"\"
+.ENDIF
 .ENDIF
 
 .IF "$(JDK)" == "gcj"
--- scp2/source/ooo/profileitem_ooo.scp.orig	2006-08-29 15:18:04.000000000 +0200
+++ scp2/source/ooo/profileitem_ooo.scp	2006-08-29 15:23:31.000000000 +0200
@@ -841,5 +841,8 @@
 #endif
 #ifdef SYSTEM_XALAN
     ValueList29 = XALAN_JAR;
+#ifdef SYSTEM_SERIALIZER
+    ValueList30 = SERIALIZER_JAR;
+#endif
 #endif
 End
