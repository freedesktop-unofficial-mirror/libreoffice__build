Index: scp2/source/ooo/file_ooo.scp
===================================================================
RCS file: /cvs/installation/scp2/source/ooo/file_ooo.scp,v
retrieving revision 1.58
diff -u -p -u -r1.58 file_ooo.scp
--- scp2/source/ooo/file_ooo.scp	9 Dec 2004 16:16:21 -0000	1.58
+++ scp2/source/ooo/file_ooo.scp	21 Dec 2004 12:04:31 -0000
@@ -631,7 +631,10 @@ File gid_File_Images_Zip
     Styles = (PACKED,SETUPZIP);
 End
 
+// Include any custom image sets
+#include "images.inc"
+
 File gid_File_Inethist_Dat_Delete_Only
     TXT_FILE_BODY;
     Dir = gid_Dir_User_Config;


--- /dev/null	2004-07-26 12:51:14.000000000 +0100
+++ scp2/macros/images.pl	2004-12-21 11:55:33.946715752 +0000
@@ -0,0 +1,37 @@
+my $outfile = "";
+
+while (my $a = shift @ARGV) {
+    if ($a eq '-o') {
+	$outfile = shift @ARGV || die "-o requires filename";
+    }
+}
+
+open OUTFILE, ">$outfile" || die "$0 ERROR: cannot open $outfile for writing!\n";
+
+print OUTFILE << "HEADER"
+// This file is autogenerated by macros/images.pl
+
+HEADER
+;
+
+my @themes = split / /, $ENV{CUSTOM_IMAGE_SETS};
+while (my $theme = shift @themes)
+{
+    $theme =~ /^\s*$/ && next;
+    $themezip = $theme . "_Zip";
+
+    print OUTFILE << "EOFRAG"
+File gid_File_Images_$themezip 
+    Carrier=gid_Datacarrier; 
+    Time="0200"; 
+    Date="29022004"; 
+    UnixRights=444; 
+    Dir=gid_Dir_Share_Config; 
+    Name="images_$theme.zip"; 
+    Styles = (PACKED,SETUPZIP); 
+End
+EOFRAG
+;
+}
+
+close OUTFILE;
