--- xmlhelp/source/com/sun/star/help/aottarget.mk.orig	2006-07-13 14:11:38.000000000 +0200
+++ xmlhelp/source/com/sun/star/help/aottarget.mk	2006-07-13 14:31:28.000000000 +0200
@@ -40,12 +40,31 @@
 AOTTARGETN=$(BIN)$/$(AOTTARGET)
 
 AOTFILES = $(foreach,i,$(NEWCLASS) $(LB)$/lib$(i:b).jar.so)
+
+.IF "$(SYSTEM_DB)"=="YES"
+AOTFILES+= $(LB)$/libdb.jar.so
+$(AOTTARGETN) : $(LB)$/libdb.jar.so
+.ENDIF
+
+.IF "$(SYSTEM_XT)"=="YES"
+AOTFILES+= $(LB)$/libxt.jar.so
+$(AOTTARGETN) : $(LB)$/libxt.jar.so
+.ENDIF
+
 AOTLINKFLAGS=$(subst,.so, $(subst,$(LB)$/lib,-l $(AOTFILES)))
 
 $(LB)$/lib%.jar.so : $(SOLARBINDIR)$/%.jar
 	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
 	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
 
+$(LB)$/libdb.jar.so:
+	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni $(DB_JAR) -o $(LB)$/libdb.jar.so
+
+$(LB)$/libxt.jar.so:
+	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni $(XT_JAR) -o $(LB)$/libxt.jar.so
+
 $(AOTTARGETN) : $(JARTARGETN) $(AOTFILES)
 	$(JAVAAOTCOMPILER) --main=$(AOTTARGET) -o $(BIN)$/$(AOTTARGET) \
 		-Wl,-Bsymbolic -O2 --no-bounds-check -fno-store-check -findirect-dispatch -fjni \
