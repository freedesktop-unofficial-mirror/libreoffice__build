--- jvmfwk/plugins/sunmajor/pluginlib/gnujre.cxx.old	2006-04-30 11:46:38.090510000 +0000
+++ jvmfwk/plugins/sunmajor/pluginlib/gnujre.cxx	2006-04-30 11:50:39.530510000 +0000
@@ -37,6 +37,11 @@
 #include "osl/thread.h"
 #include "gnujre.hxx"
 #include "util.hxx"
+extern "C"
+{
+#include <sys/utsname.h>
+#include <string.h>
+}
 
 using namespace rtl;
 using namespace std;
@@ -72,8 +79,27 @@
         , "/lib/libgcj.so.4"
 #endif
     };
+#if defined(__linux__) && defined (__i386__)
+    struct utsname uts;
+    static char const* ar64[]= {
+          "/lib32/libgcj.so.7",
+          "/lib32/libgcj.so.6"
+    };
+    uname(&uts);
+    if (!strcmp("x86_64", uts.machine))
+    {
+        *size = sizeof(ar64) / sizeof (char*);
+	return ar64;
+    }
+    else
+    {
+        *size = sizeof(ar) / sizeof (char*);
+	return ar;
+    }
+#else
     *size = sizeof(ar) / sizeof (char*);
     return ar;
+#endif
 }
 
 bool GnuInfo::initialize(vector<pair<OUString, OUString> > props)
