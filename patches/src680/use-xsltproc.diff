Index: tg_config.mk
===================================================================
RCS file: /cvs/tools/solenv/inc/tg_config.mk,v
retrieving revision 1.2
diff -u -u -r1.2 tg_config.mk
--- solenv/inc/tg_config.mk	15 Mar 2005 13:00:23 -0000	1.2
+++ solenv/inc/tg_config.mk	10 May 2005 15:01:43 -0000
@@ -84,15 +85,6 @@
 $(PROCESSOUT)$/registry$/schema$/$(PACKAGEDIR)$/%.xcs : %.xcs
     @+echo -------------+ validating and stripping schema files
 	-$(MKDIRHIER) $(@:d)
-.IF "$(SOLAR_JAVA)"!=""
-.IF "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
-.ENDIF			# "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_val.xsl $(@:d)$*.val componentName=$(PACKAGE).$*
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/sanity.xsl $(@:d)$*.san 
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_trim.xsl $(@:d)$*.tmp
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
-.ELSE
 # xsltproc already validates against the dtd.  For additional validation,
 # org.openoffice.configuration.Inspector should be replaced and the
 # replacement should be invoked here.
@@ -106,7 +98,6 @@
 # xsltproc already seems to pretty-print the xml, so
 # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
 	cp $(@:d)$*.tmp $@
-.ENDIF
 	+$(RM) $(@:d)$*.tmp > $(NULLDEV)
 	+$(RM) $(@:d)$*.val > $(NULLDEV)
 	+$(RM) $(@:d)$*.san > $(NULLDEV)
@@ -142,14 +133,6 @@
 $(PROCESSOUT)$/registry$/data$/$(PACKAGEDIR)$/%.xcu : %.xcu
     @+echo -------------+ validating and creating a locale independent file
 	-$(MKDIRHIER) $(@:d) 
-.IF "$(SOLAR_JAVA)"!=""
-.IF "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
-.ENDIF			# "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/data_val.xsl $(@:d)$*.val xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
-.ELSE
 # xsltproc already validates against the dtd.  For additional validation,
 # org.openoffice.configuration.Inspector should be replaced and the
 # replacement should be invoked here.
@@ -164,7 +147,6 @@
 # xsltproc already seems to pretty-print the xml, so
 # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
 	cp $(@:d)$*.tmp $@
-.ENDIF
 	+$(RM) $(@:d)$*.tmp > $(NULLDEV)
 	+$(RM) $(@:d)$*.val > $(NULLDEV)
 
@@ -184,10 +166,6 @@
 $(PROCESSOUT)$/registry$/res$/{$(alllangiso)}$/$(PACKAGEDIR)$/%.xcu :| $(PROCESSOUT)$/merge$/$(PACKAGEDIR)$/%.xcu
     @+echo -------------+ creating locale dependent entries
 	-$(MKDIRHIER) $(@:d)
-.IF "$(SOLAR_JAVA)"!=""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema locale={$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))}	
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
-.ELSE
 	$(XSLTPROC) -o $(@:d)$*.tmp \
 	            --stringparam xcs $(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs \
 	            --stringparam schemaRoot $(XCSROOT)$/registry$/schema \
@@ -196,7 +174,6 @@
 # xsltproc already seems to pretty-print the xml, so
 # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
 	cp $(@:d)$*.tmp $@
-.ENDIF
 	+$(RM) $(@:d)$*.tmp > $(NULLDEV)
 
 # --- languagepack tag modules ---
@@ -220,10 +197,6 @@
 $(PROCESSOUT)$/registry$/spool$/$(PACKAGEDIR)$/%.xcu :| $$(@:b:s/-/./:b).xcu
     @+echo -------------+ creating a module file
 	-$(MKDIRHIER) $(@:d) 
-.IF "$(SOLAR_JAVA)"!=""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$(@:f:s/.xcu/.tmp/) xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$(<:b).xcs schemaRoot=$(XCSROOT)$/registry$/schema module={$(subst,$(<:b)-, $(*))}
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/jaxp.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/parser.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=com.sun.xml.parser.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$(@:f:s/.xcu/.tmp/) $@
-.ELSE
 	$(XSLTPROC) -o $(@:d)$(@:f:s/.xcu/.tmp/) \
 	            --stringparam xcs $(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$(<:b).xcs \
 	            --stringparam schemaRoot $(XCSROOT)$/registry$/schema \
@@ -232,7 +205,6 @@
 # xsltproc already seems to pretty-print the xml, so
 # org.openoffice.helper.PrettyPrinter seems to be unnecessary.
 	cp $(@:d)$(@:f:s/.xcu/.tmp/) $@
-.ENDIF
 	+$(RM) $(@:d)$(@:f:s/.xcu/.tmp/) > $(NULLDEV)
 
 .IF "$(XCUFILES)"!=""
Index: configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.116
diff -u -u -r1.116 configure.in
--- config_office/configure.in	11 Apr 2005 09:31:15 -0000	1.116
+++ config_office/configure.in	10 May 2005 15:03:37 -0000
@@ -1693,11 +1744,9 @@
 if test "$WITH_JAVA" != "no"; then
    AC_MSG_RESULT([yes])
    SOLAR_JAVA="TRUE"
-   NEEDXSLTPROC="no"
 else
    AC_MSG_RESULT([no])
    SOLAR_JAVA=""
-   NEEDXSLTPROC="yes"
 
    AC_MSG_WARN([building without java will mean some features will not be available])
    echo "building without java will mean some features will not be available" >>warn
@@ -1905,14 +1954,10 @@
 fi
 AC_SUBST(JAVACACHE)
 
-if test "$NEEDXSLTPROC" = "no"; then
-   XSLTPROC=NO_XSLTPROC
-else
-   dnl Check for xsltproc
-   AC_PATH_PROG(XSLTPROC, xsltproc, no)
-   if test "$XSLTPROC" = "no"; then
-      AC_MSG_ERROR([xsltproc is required])
-   fi
+dnl Check for xsltproc
+AC_PATH_PROG(XSLTPROC, xsltproc, no)
+if test "$XSLTPROC" = "no"; then
+  AC_MSG_ERROR([xsltproc is required])
 fi
 AC_SUBST(XSLTPROC)
 
Index: util/makefile.pmk
===================================================================
RCS file: /cvs/installation/readlicense/util/makefile.pmk,v
retrieving revision 1.6
diff -u -u -r1.6 makefile.pmk
--- readlicense_oo/util/makefile.pmk	15 Mar 2005 09:05:23 -0000	1.6
+++ readlicense_oo/util/makefile.pmk	10 May 2005 15:08:34 -0000
@@ -62,10 +62,7 @@
 
 # --- Targets ------------------------------------------------------
 
-.IF "$(SOLAR_JAVA)"==""
-# FIXME: Java-disabled case not parallel-build safe yet
 MAXPROCESS=1
-.ENDIF
 
 .IF "$(GUI)"=="UNX"
 SYSDOCS=$(foreach,j,$(READMEFILES) $(j:d)$(j:b:u)$(j:e:s/.txt//))
@@ -96,9 +93,6 @@
    
 $(MISC)$/readme%.html :
     @+-$(MKDIR) $(@:d)
-.IF "$(SOLAR_JAVA)"!=""
-	$(JAVAI) $(JAVACPS) $(COMMON_BUILD_TOOLS)$/xt.jar$(PATH_SEPERATOR)$(COMMON_BUILD_TOOLS)$/parser.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=html file=$@
-.ELSE
 	sed 's|xmlns:xt="http://www.jclark.com/xt"||;s|extension-element-prefixes="xt"||;s|.*xt:document.*||;s|<xsl:output method = "HTML" doctype-public = "-//W3C//DTD HTML 3.2//EN" />|<xsl:output method="html" doctype-public="-//W3C//DTD HTML 3.2//EN" />|' < ..$/readme.xsl > ..$/readme2.xsl
 	xsltproc -o $@ \
 	         --stringparam os1 $(OS) \
@@ -110,13 +104,9 @@
 	         ..$/readme2.xsl \
 	         $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm)
 	rm ..$/readme2.xsl
-.ENDIF
 
 $(MISC)$/readme%.txt :
     @+-$(MKDIR) $(@:d)
-.IF "$(SOLAR_JAVA)"!=""
-	$(JAVAI) $(JAVACPS) $(COMMON_BUILD_TOOLS)$/xt.jar$(PATH_SEPERATOR)$(COMMON_BUILD_TOOLS)$/parser.jar -Dcom.jclark.xsl.sax.parser=com.sun.xml.parser.Parser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=text file=$@
-.ELSE
 	sed 's|xmlns:xt="http://www.jclark.com/xt"||;s|extension-element-prefixes="xt"||;s|.*xt:document.*||;s|<xsl:output method = "HTML" doctype-public = "-//W3C//DTD HTML 3.2//EN" />|<xsl:output method="text" />|' < ..$/readme.xsl > ..$/readme2.xsl
 	xsltproc -o $@ \
 	         --stringparam os1 $(OS) \
@@ -128,5 +118,4 @@
 	         ..$/readme2.xsl \
 	         $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm)
 	rm ..$/readme2.xsl
-.ENDIF
 
