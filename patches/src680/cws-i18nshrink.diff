cvs diff: Diffing i18npool
cvs diff: Diffing i18npool/inc
Index: i18npool/inc/chaptercollator.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/chaptercollator.hxx,v
retrieving revision 1.3
retrieving revision 1.3.20.1
diff -u -p -r1.3 -r1.3.20.1
--- i18npool/inc/chaptercollator.hxx	7 Sep 2005 16:50:19 -0000	1.3
+++ i18npool/inc/chaptercollator.hxx	3 Nov 2005 14:37:31 -0000	1.3.20.1
@@ -35,6 +35,7 @@
 #ifndef _I18N_CHAPTERCOLLATOR_HXX_
 #define _I18N_CHAPTERCOLLATOR_HXX_
 
+#include <i18npooldllapi.h>
 #include <collatorImpl.hxx>
 #include <com/sun/star/i18n/XCharacterClassification.hpp>
 
@@ -43,7 +44,7 @@ namespace com { namespace sun { namespac
 //      ----------------------------------------------------
 //      class ChapterCollator
 //      ----------------------------------------------------
-class ChapterCollator : public CollatorImpl
+class I18NPOOL_DLLPUBLIC ChapterCollator : public CollatorImpl
 {
 public:
 	// Constructors
Index: i18npool/inc/collatorImpl.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/collatorImpl.hxx,v
retrieving revision 1.6
retrieving revision 1.6.20.1
diff -u -p -r1.6 -r1.6.20.1
--- i18npool/inc/collatorImpl.hxx	7 Sep 2005 16:51:06 -0000	1.6
+++ i18npool/inc/collatorImpl.hxx	3 Nov 2005 14:37:31 -0000	1.6.20.1
@@ -35,6 +35,8 @@
 #ifndef _I18N_COLLATORIMPL_HXX_
 #define _I18N_COLLATORIMPL_HXX_
 
+#include <i18npooldllapi.h>
+
 #include <comphelper/processfactory.hxx>
 #include <com/sun/star/lang/XMultiServiceFactory.hpp>
 #include <com/sun/star/uno/Reference.h>
@@ -54,7 +56,7 @@ namespace com { namespace sun { namespac
 //      ----------------------------------------------------
 //      class CollatorImpl
 //      ----------------------------------------------------
-class CollatorImpl : public cppu::WeakImplHelper2
+class I18NPOOL_DLLPUBLIC CollatorImpl : public cppu::WeakImplHelper2
 <
 	XCollator,
 	com::sun::star::lang::XServiceInfo
Index: i18npool/inc/collator_asian.hxx
===================================================================
RCS file: i18npool/inc/collator_asian.hxx
diff -N i18npool/inc/collator_asian.hxx
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/inc/collator_asian.hxx	3 Nov 2005 14:37:31 -0000	1.1.2.1
@@ -0,0 +1,31 @@
+#ifndef _I18N_COLLATOR_ASIAN_HXX_
+#define _I18N_COLLATOR_ASIAN_HXX_
+
+#include <collator_unicode.hxx>
+
+namespace com { namespace sun { namespace star { namespace i18n {
+#define COLLATOR( algorithm ) \
+class Collator_##algorithm : public Collator_Unicode {\
+public:\
+	Collator_##algorithm(); \
+};
+
+COLLATOR( dz_charset )
+COLLATOR( zh_pinyin )
+COLLATOR( zh_radical )
+COLLATOR( zh_stroke )
+COLLATOR( zh_charset )
+COLLATOR( zh_zhuyin )
+COLLATOR( zh_TW_radical )
+COLLATOR( zh_TW_stroke )
+COLLATOR( zh_TW_charset )
+COLLATOR( ne_charset )
+COLLATOR( ko_charset )
+COLLATOR( km_charset )
+COLLATOR( ja_charset )
+COLLATOR( ja_phonetic_alphanumeric_first )
+COLLATOR( ja_phonetic_alphanumeric_last )
+#undef COLLATOR
+} } } }
+
+#endif /* _I18N_COLLATOR_ASIAN_HXX_ */
Index: i18npool/inc/collator_unicode.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/collator_unicode.hxx,v
retrieving revision 1.8
retrieving revision 1.8.20.1
diff -u -p -r1.8 -r1.8.20.1
--- i18npool/inc/collator_unicode.hxx	7 Sep 2005 16:51:23 -0000	1.8
+++ i18npool/inc/collator_unicode.hxx	3 Nov 2005 14:37:31 -0000	1.8.20.1
@@ -35,6 +35,8 @@
 #ifndef _I18N_COLLATOR_UNICODE_HXX_
 #define _I18N_COLLATOR_UNICODE_HXX_
 
+#include <i18npooldllapi.h>
+
 #include <com/sun/star/uno/Reference.h>
 #include <com/sun/star/i18n/XCollator.hpp>
 #include <cppuhelper/implbase1.hxx>
@@ -46,7 +48,7 @@
 
 namespace com { namespace sun { namespace star { namespace i18n {
 
-class Collator_Unicode : public cppu::WeakImplHelper1 < XCollator >
+class I18NPOOL_DLLPUBLIC Collator_Unicode : public cppu::WeakImplHelper1 < XCollator >
 {
 public:
 	// Constructors
@@ -86,28 +88,6 @@ private:
 	RuleBasedCollator *collator;
 };
 
-#define COLLATOR( algorithm ) \
-class Collator_##algorithm : public Collator_Unicode {\
-public:\
-	Collator_##algorithm(); \
-};
-
-COLLATOR( dz_charset )
-COLLATOR( zh_pinyin )
-COLLATOR( zh_radical )
-COLLATOR( zh_stroke )
-COLLATOR( zh_charset )
-COLLATOR( zh_zhuyin )
-COLLATOR( zh_TW_radical )
-COLLATOR( zh_TW_stroke )
-COLLATOR( zh_TW_charset )
-COLLATOR( ne_charset )
-COLLATOR( ko_charset )
-COLLATOR( km_charset )
-COLLATOR( ja_charset )
-COLLATOR( ja_phonetic_alphanumeric_first )
-COLLATOR( ja_phonetic_alphanumeric_last )
-#undef COLLATOR
 } } } }
 
 #endif
Index: i18npool/inc/i18npool.mk
===================================================================
RCS file: i18npool/inc/i18npool.mk
diff -N i18npool/inc/i18npool.mk
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/inc/i18npool.mk	3 Nov 2005 14:37:31 -0000	1.1.2.1
@@ -0,0 +1,12 @@
+# set default symbol visibility / scope to hidden
+.IF "$(COMNAME)" == "gcc3"
+.IF "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
+# CFLAGS += -fvisibility=hidden
+.ENDIF # "$(HAVE_GCC_VISIBILITY_FEATURE)" == "TRUE"
+.ENDIF # gcc3
+
+.IF "$(COMNAME)" == "sunpro5"
+.IF "$(CCNUMVER)" >= "00050005"
+# CFLAGS += -xldscope=hidden
+.ENDIF # 5.5
+.ENDIF # sunpro5
Index: i18npool/inc/i18npooldllapi.h
===================================================================
RCS file: i18npool/inc/i18npooldllapi.h
diff -N i18npool/inc/i18npooldllapi.h
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/inc/i18npooldllapi.h	3 Nov 2005 14:37:32 -0000	1.1.2.1
@@ -0,0 +1,15 @@
+#ifndef INCLUDED_I18NPOOLDLLAPI_H
+#define INCLUDED_I18NPOOLDLLAPI_H
+
+#ifndef _SAL_TYPES_H_
+#include "sal/types.h"
+#endif
+
+#if defined(I18NPOOL_DLLIMPLEMENTATION)
+#define I18NPOOL_DLLPUBLIC  SAL_DLLPUBLIC_EXPORT
+#else
+#define I18NPOOL_DLLPUBLIC  SAL_DLLPUBLIC_IMPORT
+#endif
+#define I18NPOOL_DLLPRIVATE SAL_DLLPRIVATE
+
+#endif /* INCLUDED_I18NPOOLDLLAPI_H */
Index: i18npool/source/localedata/filewriter.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/localedata/filewriter.cxx,v
retrieving revision 1.6
diff -u -r1.6 filewriter.cxx
--- i18npool/source/localedata/filewriter.cxx	7 Sep 2005 17:19:02 -0000	1.6
+++ i18npool/source/localedata/filewriter.cxx	16 Nov 2005 16:03:54 -0000
@@ -72,7 +72,7 @@
 
 void OFileWriter::writeFunction(const char *func, const char *count, const char *array) const
 {
-	fprintf(m_f, "sal_Unicode **  SAL_CALL %s%s(sal_Int16& count)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT sal_Unicode **  SAL_CALL %s%s(sal_Int16& count)\n{\n", func, theLocale);
 	fprintf(m_f, "\tcount = %s;\n", count);
 	fprintf(m_f, "\treturn (sal_Unicode**)%s;\n}\n", array);
 }
@@ -82,13 +82,13 @@
     OString aRefLocale( OUStringToOString(useLocale, RTL_TEXTENCODING_ASCII_US) );
 	const char* locale = aRefLocale.getStr();
 	fprintf(m_f, "extern sal_Unicode **  SAL_CALL %s%s(sal_Int16& count);\n", func, locale);
-	fprintf(m_f, "sal_Unicode **  SAL_CALL %s%s(sal_Int16& count)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT sal_Unicode **  SAL_CALL %s%s(sal_Int16& count)\n{\n", func, theLocale);
 	fprintf(m_f, "\treturn %s%s(count);\n}\n", func, locale);
 }
 
 void OFileWriter::writeFunction(const char *func, const char *count, const char *array, const char *from, const char *to) const
 {
-	fprintf(m_f, "sal_Unicode **  SAL_CALL %s%s(sal_Int16& count, const sal_Unicode*& from, const sal_Unicode*& to)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT sal_Unicode **  SAL_CALL %s%s(sal_Int16& count, const sal_Unicode*& from, const sal_Unicode*& to)\n{\n", func, theLocale);
 	fprintf(m_f, "\tcount = %s;\n", count);
 	fprintf(m_f, "\tfrom = %s;\n", from);
 	fprintf(m_f, "\tto = %s;\n", to);
@@ -100,7 +100,7 @@
     OString aRefLocale( OUStringToOString(useLocale, RTL_TEXTENCODING_ASCII_US) );
 	const char* locale = aRefLocale.getStr();
 	fprintf(m_f, "extern sal_Unicode **  SAL_CALL %s%s(sal_Int16& count, const sal_Unicode*& from, const sal_Unicode*& to);\n", func, locale);
-	fprintf(m_f, "sal_Unicode **  SAL_CALL %s%s(sal_Int16& count, const sal_Unicode*& from, const sal_Unicode*& to)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT sal_Unicode **  SAL_CALL %s%s(sal_Int16& count, const sal_Unicode*& from, const sal_Unicode*& to)\n{\n", func, theLocale);
 	fprintf(m_f, "\tto = %s;\n", to);
 	fprintf(m_f, "\tconst sal_Unicode* tmp;\n");
 	fprintf(m_f, "\treturn %s%s(count, from, tmp);\n}\n", func, locale);
@@ -108,7 +108,7 @@
 
 void OFileWriter::writeFunction2(const char *func, const char *style, const char* attr, const char *array) const
 {
-	fprintf(m_f, "const sal_Unicode ***  SAL_CALL %s%s( sal_Int16& nStyles, sal_Int16& nAttributes )\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT const sal_Unicode ***  SAL_CALL %s%s( sal_Int16& nStyles, sal_Int16& nAttributes )\n{\n", func, theLocale);
 	fprintf(m_f, "\tnStyles     = %s;\n", style);
 	fprintf(m_f, "\tnAttributes = %s;\n", attr);
 	fprintf(m_f, "\treturn %s;\n}\n", array);
@@ -119,13 +119,13 @@
     OString aRefLocale( OUStringToOString(useLocale, RTL_TEXTENCODING_ASCII_US) );
 	const char* locale = aRefLocale.getStr();
 	fprintf(m_f, "extern const sal_Unicode ***  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nAttributes);\n", func, locale);
-	fprintf(m_f, "const sal_Unicode ***  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nAttributes)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT const sal_Unicode ***  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nAttributes)\n{\n", func, theLocale);
 	fprintf(m_f, "\treturn %s%s(nStyles, nAttributes);\n}\n", func, locale);
 }
 
 void OFileWriter::writeFunction3(const char *func, const char *style, const char* levels, const char* attr, const char *array) const
 {
-	fprintf(m_f, "const sal_Unicode ****  SAL_CALL %s%s( sal_Int16& nStyles, sal_Int16& nLevels, sal_Int16& nAttributes )\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT const sal_Unicode ****  SAL_CALL %s%s( sal_Int16& nStyles, sal_Int16& nLevels, sal_Int16& nAttributes )\n{\n", func, theLocale);
 	fprintf(m_f, "\tnStyles     = %s;\n", style);
 	fprintf(m_f, "\tnLevels     = %s;\n", levels);
 	fprintf(m_f, "\tnAttributes = %s;\n", attr);
@@ -137,7 +137,7 @@
     OString aRefLocale( OUStringToOString(useLocale, RTL_TEXTENCODING_ASCII_US) );
 	const char* locale = aRefLocale.getStr();
 	fprintf(m_f, "extern const sal_Unicode ****  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nLevels, sal_Int16& nAttributes);\n", func, locale);
-	fprintf(m_f, "const sal_Unicode ****  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nLevels, sal_Int16& nAttributes)\n{\n", func, theLocale);
+	fprintf(m_f, "SAL_DLLPUBLIC_EXPORT const sal_Unicode ****  SAL_CALL %s%s(sal_Int16& nStyles, sal_Int16& nLevels, sal_Int16& nAttributes)\n{\n", func, theLocale);
 	fprintf(m_f, "\treturn %s%s(nStyles, nLevels, nAttributes);\n}\n", func, locale);
 }
 
Index: i18npool/inc/localedata.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/localedata.hxx,v
retrieving revision 1.12
retrieving revision 1.12.20.2
diff -u -p -r1.12 -r1.12.20.2
--- i18npool/inc/localedata.hxx	7 Sep 2005 16:54:06 -0000	1.12
+++ i18npool/inc/localedata.hxx	3 Nov 2005 18:08:10 -0000	1.12.20.2
@@ -35,6 +35,8 @@
 #ifndef _I18N_LOCALEDATA_HXX_
 #define _I18N_LOCALEDATA_HXX_
 
+#include <i18npooldllapi.h>
+
 #include <com/sun/star/lang/XMultiServiceFactory.hpp>
 
 #include <comphelper/processfactory.hxx>
@@ -88,16 +90,14 @@
 
 namespace com { namespace sun { namespace star { namespace i18n {
 
-class LocaleData : public cppu::WeakImplHelper2
+class I18NPOOL_DLLPUBLIC LocaleData : public cppu::WeakImplHelper2
 <
 	XLocaleData,
 	com::sun::star::lang::XServiceInfo
 >
 {
 public:
-	LocaleData(){
-	    cachedItem = NULL;
-	}
+	LocaleData();
 	~LocaleData();
 
 	virtual LanguageCountryInfo SAL_CALL getLanguageCountryInfo( const com::sun::star::lang::Locale& rLocale ) throw(com::sun::star::uno::RuntimeException);
Index: i18npool/inc/nativenumbersupplier.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/nativenumbersupplier.hxx,v
retrieving revision 1.6
retrieving revision 1.6.20.1
diff -u -p -r1.6 -r1.6.20.1
--- i18npool/inc/nativenumbersupplier.hxx	7 Sep 2005 16:54:21 -0000	1.6
+++ i18npool/inc/nativenumbersupplier.hxx	3 Nov 2005 17:01:12 -0000	1.6.20.1
@@ -35,6 +35,8 @@
 #ifndef _I18N_NATIVENUMBERSUPPLIER_HXX_
 #define _I18N_NATIVENUMBERSUPPLIER_HXX_
 
+#include <i18npooldllapi.h>
+
 #include <com/sun/star/i18n/XNativeNumberSupplier.hpp>
 #include <com/sun/star/i18n/NativeNumberMode.hpp>
 #include <com/sun/star/i18n/NativeNumberXmlAttributes.hpp>
@@ -46,7 +48,7 @@ namespace com { namespace sun { namespac
 //      ----------------------------------------------------
 //      class NativeNumberSupplier
 //      ----------------------------------------------------
-class NativeNumberSupplier : public cppu::WeakImplHelper2 
+class I18NPOOL_DLLPUBLIC NativeNumberSupplier : public cppu::WeakImplHelper2 
 <
         com::sun::star::i18n::XNativeNumberSupplier,
         com::sun::star::lang::XServiceInfo
Index: i18npool/inc/transliteration_Ignore.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/transliteration_Ignore.hxx,v
retrieving revision 1.7
retrieving revision 1.7.20.3
diff -u -p -r1.7 -r1.7.20.3
--- i18npool/inc/transliteration_Ignore.hxx	7 Sep 2005 16:57:47 -0000	1.7
+++ i18npool/inc/transliteration_Ignore.hxx	3 Nov 2005 18:08:10 -0000	1.7.20.3
@@ -35,6 +35,7 @@
 #ifndef _I18N_TRANSLITERATION_TRANSLITERATION_IGNORE_H_
 #define _I18N_TRANSLITERATION_TRANSLITERATION_IGNORE_H_
 
+#include <i18npooldllapi.h>
 #include <transliteration_commonclass.hxx>
 #include <i18nutil/oneToOneMapping.hxx>
 
@@ -49,7 +50,7 @@ typedef struct {
 
 namespace com { namespace sun { namespace star { namespace i18n {
 
-class transliteration_Ignore : public transliteration_commonclass
+class I18NPOOL_DLLPUBLIC transliteration_Ignore : public transliteration_commonclass
 {
 public:
         virtual rtl::OUString SAL_CALL
Index: i18npool/inc/transliteration_commonclass.hxx
===================================================================
RCS file: /cvs/l10n/i18npool/inc/transliteration_commonclass.hxx,v
retrieving revision 1.6
retrieving revision 1.6.20.1
diff -u -p -r1.6 -r1.6.20.1
--- i18npool/inc/transliteration_commonclass.hxx	7 Sep 2005 16:59:23 -0000	1.6
+++ i18npool/inc/transliteration_commonclass.hxx	3 Nov 2005 15:49:30 -0000	1.6.20.1
@@ -35,6 +35,8 @@
 #ifndef _I18N_TRANSLITERATION_TRANSLITERATION_COMMONCLASS_H_
 #define _I18N_TRANSLITERATION_TRANSLITERATION_COMMONCLASS_H_
 
+#include <i18npooldllapi.h>
+
 #include <com/sun/star/i18n/XExtendedTransliteration.hpp>
 #include <com/sun/star/i18n/TransliterationType.hpp>
 #include <cppuhelper/implbase1.hxx>
@@ -44,7 +46,7 @@
 
 namespace com { namespace sun { namespace star { namespace i18n {
 
-class transliteration_commonclass : public cppu::WeakImplHelper1< com::sun::star::i18n::XExtendedTransliteration >
+class I18NPOOL_DLLPUBLIC transliteration_commonclass : public cppu::WeakImplHelper1< com::sun::star::i18n::XExtendedTransliteration >
 {
 public:
         transliteration_commonclass();
cvs diff: Diffing i18npool/prj
Index: i18npool/prj/d.lst
===================================================================
RCS file: /cvs/l10n/i18npool/prj/d.lst,v
retrieving revision 1.9
retrieving revision 1.9.102.1
diff -u -p -r1.9 -r1.9.102.1
--- i18npool/prj/d.lst	2 Feb 2004 19:23:02 -0000	1.9
+++ i18npool/prj/d.lst	3 Nov 2005 14:37:32 -0000	1.9.102.1
@@ -7,9 +7,13 @@ mkdir: %_DEST%\inc%_EXT%\i18npool
 mkdir: %_DEST%\inc%_EXT%\i18npool
 
 ..\%__SRC%\bin\i18npool.uno.dll %_DEST%\bin%_EXT%\i18npool.uno.dll
-..\%__SRC%\lib\i18npool.uno.so %_DEST%\lib%_EXT%\i18npool.uno.so
-..\%__SRC%\lib\i18npool.uno.dylib %_DEST%\lib%_EXT%\i18npool.uno.dylib
+..\%__SRC%\lib\libi18npool.uno.so %_DEST%\lib%_EXT%\libi18npool.uno.so
+..\%__SRC%\lib\libi18npool.uno.dylib %_DEST%\lib%_EXT%\libi18npool.uno.dylib
 
+..\%__SRC%\bin\i18npool_asian.uno.dll %_DEST%\bin%_EXT%\i18npool_asian.uno.dll
+..\%__SRC%\lib\libi18npool_asian.uno.so %_DEST%\lib%_EXT%\libi18npool_asian.uno.so
+..\%__SRC%\lib\libi18npool_asian.uno.dylib %_DEST%\lib%_EXT%\libi18npool_asian.uno.dylib
+
 ..\%__SRC%\bin\i18nsearch.uno.dll %_DEST%\bin%_EXT%\i18nsearch.uno.dll
 ..\%__SRC%\lib\i18nsearch.uno.so %_DEST%\lib%_EXT%\i18nsearch.uno.so
 ..\%__SRC%\lib\i18nsearch.uno.dylib %_DEST%\lib%_EXT%\i18nsearch.uno.dylib
cvs diff: Diffing i18npool/source
cvs diff: Diffing i18npool/source/breakiterator
Index: i18npool/source/breakiterator/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/breakiterator/makefile.mk,v
retrieving revision 1.8
retrieving revision 1.8.20.1
diff -u -p -r1.8 -r1.8.20.1
--- i18npool/source/breakiterator/makefile.mk	7 Sep 2005 17:02:10 -0000	1.8
+++ i18npool/source/breakiterator/makefile.mk	3 Nov 2005 14:37:33 -0000	1.8.20.1
@@ -43,6 +43,7 @@ ENABLE_EXCEPTIONS=TRUE
 
 .INCLUDE :  svpre.mk
 .INCLUDE :  settings.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 .INCLUDE :  sv.mk
 
 # --- Files --------------------------------------------------------
cvs diff: Diffing i18npool/source/breakiterator/data
Index: i18npool/source/breakiterator/data/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/breakiterator/data/makefile.mk,v
retrieving revision 1.5
retrieving revision 1.5.20.1
diff -u -p -r1.5 -r1.5.20.1
--- i18npool/source/breakiterator/data/makefile.mk	7 Sep 2005 17:02:56 -0000	1.5
+++ i18npool/source/breakiterator/data/makefile.mk	3 Nov 2005 14:37:33 -0000	1.5.20.1
@@ -40,6 +40,7 @@ LIBTARGET=NO
 
 # --- Settings -----------------------------------------------------
 .INCLUDE :  settings.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # Fix heap limit problem on MSC
 .IF "$(OS)" == "WNT"
cvs diff: Diffing i18npool/source/calendar
Index: i18npool/source/calendar/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/calendar/makefile.mk,v
retrieving revision 1.3
retrieving revision 1.3.20.1
diff -u -p -r1.3 -r1.3.20.1
--- i18npool/source/calendar/makefile.mk	7 Sep 2005 17:04:30 -0000	1.3
+++ i18npool/source/calendar/makefile.mk	3 Nov 2005 14:37:33 -0000	1.3.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/characterclassification
Index: i18npool/source/characterclassification/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/characterclassification/makefile.mk,v
retrieving revision 1.4
retrieving revision 1.4.20.1
diff -u -p -r1.4 -r1.4.20.1
--- i18npool/source/characterclassification/makefile.mk	7 Sep 2005 17:05:47 -0000	1.4
+++ i18npool/source/characterclassification/makefile.mk	3 Nov 2005 14:37:34 -0000	1.4.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/collator
Index: i18npool/source/collator/chaptercollator.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/collator/chaptercollator.cxx,v
retrieving revision 1.9
retrieving revision 1.9.20.1
diff -u -p -r1.9 -r1.9.20.1
--- i18npool/source/collator/chaptercollator.cxx	7 Sep 2005 17:06:30 -0000	1.9
+++ i18npool/source/collator/chaptercollator.cxx	3 Nov 2005 17:25:36 -0000	1.9.20.1
@@ -33,6 +33,8 @@
  *
  ************************************************************************/
 
+#define I18NPOOL_DLLIMPLEMENTATION
+
 // prevent internal compiler error with MSVC6SP3
 #include <utility>
 
Index: i18npool/source/collator/collatorImpl.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/collator/collatorImpl.cxx,v
retrieving revision 1.8
retrieving revision 1.8.20.1
diff -u -p -r1.8 -r1.8.20.1
--- i18npool/source/collator/collatorImpl.cxx	7 Sep 2005 17:06:53 -0000	1.8
+++ i18npool/source/collator/collatorImpl.cxx	3 Nov 2005 17:25:36 -0000	1.8.20.1
@@ -33,6 +33,8 @@
  *
  ************************************************************************/
 
+#define I18NPOOL_DLLIMPLEMENTATION
+
 #include <collatorImpl.hxx>
 #include <com/sun/star/i18n/CollatorOptions.hpp>
 #include <rtl/ustrbuf.hxx>
Index: i18npool/source/collator/collator_unicode.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/collator/collator_unicode.cxx,v
retrieving revision 1.9
retrieving revision 1.9.12.1
diff -u -p -r1.9 -r1.9.12.1
--- i18npool/source/collator/collator_unicode.cxx	17 Oct 2005 15:43:36 -0000	1.9
+++ i18npool/source/collator/collator_unicode.cxx	3 Nov 2005 17:25:36 -0000	1.9.12.1
@@ -33,6 +33,8 @@
  *
  ************************************************************************/
 
+#define I18NPOOL_DLLIMPLEMENTATION
+
 #include <rtl/ustrbuf.hxx>
 #include <collator_unicode.hxx>
 #include <com/sun/star/i18n/CollatorOptions.hpp>
Index: i18npool/source/collator/gencoll_rule.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/collator/gencoll_rule.cxx,v
retrieving revision 1.5
retrieving revision 1.5.20.1
diff -u -p -r1.5 -r1.5.20.1
--- i18npool/source/collator/gencoll_rule.cxx	7 Sep 2005 17:07:35 -0000	1.5
+++ i18npool/source/collator/gencoll_rule.cxx	3 Nov 2005 14:37:34 -0000	1.5.20.1
@@ -59,7 +59,7 @@ void data_write(char* file, char* name, 
 	fprintf(fp, " * All Rights Reserved.\n");
 	fprintf(fp, " */\n\n");
 	fprintf(fp, "/* !!!The file is generated automatically. DONOT edit the file manually!!! */\n\n");
-	fprintf(fp, "#include <collator_unicode.hxx>\n");
+	fprintf(fp, "#include <collator_asian.hxx>\n");
 	fprintf(fp, "\nnamespace com { namespace sun { namespace star { namespace i18n {\n");
 
 	// generate main dict. data array
Index: i18npool/source/collator/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/collator/makefile.mk,v
retrieving revision 1.8
retrieving revision 1.8.20.2
diff -u -p -r1.8 -r1.8.20.2
--- i18npool/source/collator/makefile.mk	7 Sep 2005 17:07:53 -0000	1.8
+++ i18npool/source/collator/makefile.mk	3 Nov 2005 17:25:38 -0000	1.8.20.2
@@ -37,6 +37,7 @@ PRJ=..$/..
 
 PRJNAME=i18npool
 TARGET=collator
+LIBTARGET=NO
 
 ENABLE_EXCEPTIONS=TRUE
 
@@ -45,13 +46,16 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
-SLOFILES=   \
+COMMON_OBJECTS= \
 		$(SLO)$/collatorImpl.obj \
 		$(SLO)$/chaptercollator.obj \
-		$(SLO)$/collator_unicode.obj \
+		$(SLO)$/collator_unicode.obj
+
+ASIAN_OBJECTS= \
 		$(SLO)$/collator_zh_pinyin.obj \
 		$(SLO)$/collator_dz_charset.obj \
 		$(SLO)$/collator_zh_radical.obj \
@@ -68,6 +72,13 @@ SLOFILES=   \
 		$(SLO)$/collator_ja_phonetic_alphanumeric_first.obj \
 		$(SLO)$/collator_ja_phonetic_alphanumeric_last.obj
 
+SLOFILES= $(COMMON_OBJECTS) $(ASIAN_OBJECTS)
+
+LIB1TARGET= $(SLB)$/$(TARGET).lib
+LIB1OBJFILES= $(COMMON_OBJECTS)
+
+LIB2TARGET= $(SLB)$/$(TARGET)_asian.lib
+LIB2OBJFILES= $(ASIAN_OBJECTS)
 
 APP1TARGET = gencoll_rule
 
@@ -87,6 +98,3 @@ data/%.txt : $(APP1TARGETN)
     +@echo dummy
 $(MISC)$/collator_%.cxx : data/%.txt
 	$(APP1TARGETN)$ $< $@ $*
-
-
-
cvs diff: Diffing i18npool/source/collator/data
cvs diff: Diffing i18npool/source/defaultnumberingprovider
Index: i18npool/source/defaultnumberingprovider/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/defaultnumberingprovider/makefile.mk,v
retrieving revision 1.3
retrieving revision 1.3.20.1
diff -u -p -r1.3 -r1.3.20.1
--- i18npool/source/defaultnumberingprovider/makefile.mk	7 Sep 2005 17:08:35 -0000	1.3
+++ i18npool/source/defaultnumberingprovider/makefile.mk	3 Nov 2005 14:37:35 -0000	1.3.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/indexentry
Index: i18npool/source/indexentry/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/indexentry/makefile.mk,v
retrieving revision 1.12
retrieving revision 1.12.20.1
diff -u -p -r1.12 -r1.12.20.1
--- i18npool/source/indexentry/makefile.mk	7 Sep 2005 17:12:41 -0000	1.12
+++ i18npool/source/indexentry/makefile.mk	3 Nov 2005 14:37:35 -0000	1.12.20.1
@@ -44,6 +44,7 @@ ENABLE_EXCEPTIONS=TRUE
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 
 # --- Files --------------------------------------------------------
cvs diff: Diffing i18npool/source/indexentry/data
cvs diff: Diffing i18npool/source/inputchecker
Index: i18npool/source/inputchecker/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/inputchecker/makefile.mk,v
retrieving revision 1.4
retrieving revision 1.4.20.1
diff -u -p -r1.4 -r1.4.20.1
--- i18npool/source/inputchecker/makefile.mk	7 Sep 2005 17:18:05 -0000	1.4
+++ i18npool/source/inputchecker/makefile.mk	3 Nov 2005 14:37:35 -0000	1.4.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :  svpre.mk
 .INCLUDE :  settings.mk
 .INCLUDE :  sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/localedata
Index: i18npool/source/localedata/localedata.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/localedata/localedata.cxx,v
retrieving revision 1.33
retrieving revision 1.33.18.1
diff -u -p -r1.33 -r1.33.18.1
--- i18npool/source/localedata/localedata.cxx	7 Sep 2005 17:19:23 -0000	1.33
+++ i18npool/source/localedata/localedata.cxx	3 Nov 2005 18:08:11 -0000	1.33.18.1
@@ -1201,3 +1201,8 @@ LocaleData::getSupportedServiceNames() t
         aRet[0] = OUString::createFromAscii(clocaledata);
         return aRet;
 }
+
+LocaleData::LocaleData()
+{
+	    cachedItem = NULL;
+}
Index: i18npool/source/localedata/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/localedata/makefile.mk,v
retrieving revision 1.8
retrieving revision 1.8.20.1
diff -u -p -r1.8 -r1.8.20.1
--- i18npool/source/localedata/makefile.mk	7 Sep 2005 17:19:40 -0000	1.8
+++ i18npool/source/localedata/makefile.mk	3 Nov 2005 14:37:36 -0000	1.8.20.1
@@ -47,6 +47,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :  svpre.mk
 .INCLUDE :  settings.mk
 .INCLUDE :  sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 .IF "$(OS)" == "SOLARIS"
 # the xmlparser build breaks in this header file
@@ -66,6 +67,7 @@ CDEFS+=-D__STD_LIMITS
 
 # --- Files --------------------------------------------------------
 
+CDEFS += -DI18NPOOL_DLLIMPLEMENTATION
 SLOFILES=   $(SLO)$/localedata.obj
 
 APP1TARGET = saxparser
cvs diff: Diffing i18npool/source/localedata/data
Index: i18npool/source/localedata/data/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/localedata/data/makefile.mk,v
retrieving revision 1.29
retrieving revision 1.29.18.1
diff -u -p -r1.29 -r1.29.18.1
--- i18npool/source/localedata/data/makefile.mk	7 Sep 2005 17:20:24 -0000	1.29
+++ i18npool/source/localedata/data/makefile.mk	3 Nov 2005 14:37:36 -0000	1.29.18.1
@@ -47,6 +47,7 @@ debug!=
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :  settings.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # macro to link with localedata_en library
 .IF "$(GUI)" == "WNT"
cvs diff: Diffing i18npool/source/nativenumber
Index: i18npool/source/nativenumber/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/nativenumber/makefile.mk,v
retrieving revision 1.2
retrieving revision 1.2.20.2
diff -u -p -r1.2 -r1.2.20.2
--- i18npool/source/nativenumber/makefile.mk	7 Sep 2005 17:20:41 -0000	1.2
+++ i18npool/source/nativenumber/makefile.mk	3 Nov 2005 17:01:13 -0000	1.2.20.2
@@ -45,9 +45,12 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
+CDEFS += -DI18NPOOL_DLLIMPLEMENTATION
+
 SLOFILES=	\
 			$(SLO)$/nativenumbersupplier.obj \
 
cvs diff: Diffing i18npool/source/nativenumber/data
cvs diff: Diffing i18npool/source/numberformatcode
Index: i18npool/source/numberformatcode/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/numberformatcode/makefile.mk,v
retrieving revision 1.3
retrieving revision 1.3.20.1
diff -u -p -r1.3 -r1.3.20.1
--- i18npool/source/numberformatcode/makefile.mk	7 Sep 2005 17:21:30 -0000	1.3
+++ i18npool/source/numberformatcode/makefile.mk	3 Nov 2005 14:37:37 -0000	1.3.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/registerservices
Index: i18npool/source/registerservices/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/registerservices/makefile.mk,v
retrieving revision 1.6
retrieving revision 1.6.20.1
diff -u -p -r1.6 -r1.6.20.1
--- i18npool/source/registerservices/makefile.mk	7 Sep 2005 17:22:04 -0000	1.6
+++ i18npool/source/registerservices/makefile.mk	3 Nov 2005 14:37:37 -0000	1.6.20.1
@@ -37,6 +37,7 @@ PRJ=..$/..
 
 PRJNAME=i18npool
 TARGET=registerservices
+LIBTARGET=NO
 
 ENABLE_EXCEPTIONS=TRUE
 
@@ -45,11 +46,20 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
-SLOFILES=   \
-			$(SLO)$/registerservices.obj
+COMMON_OBJECTS= $(SLO)$/registerservices.obj
+ASIAN_OBJECTS=  $(SLO)$/registerservices_asian.obj
+
+SLOFILES= $(COMMON_OBJECTS) $(ASIAN_OBJECTS)
+
+LIB1TARGET= $(SLB)$/$(TARGET).lib
+LIB1OBJFILES= $(COMMON_OBJECTS)
+
+LIB2TARGET= $(SLB)$/$(TARGET)_asian.lib
+LIB2OBJFILES= $(ASIAN_OBJECTS)
 
 # --- Targets ------------------------------------------------------
 
Index: i18npool/source/registerservices/registerservices.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/registerservices/registerservices.cxx,v
retrieving revision 1.38
retrieving revision 1.38.12.4
diff -u -p -r1.38 -r1.38.12.4
--- i18npool/source/registerservices/registerservices.cxx	17 Oct 2005 15:44:51 -0000	1.38
+++ i18npool/source/registerservices/registerservices.cxx	4 Nov 2005 10:12:48 -0000	1.38.12.4
@@ -33,24 +33,7 @@
  *
  ************************************************************************/
 
-#ifndef _COM_SUN_STAR_LANG_XSINGLESERVICEFACTORY_HPP_
-#include <com/sun/star/lang/XSingleServiceFactory.hpp>
-#endif
-#ifndef _COM_SUN_STAR_LANG_XMULTISERVICEFACTORY_HPP_
-#include <com/sun/star/lang/XMultiServiceFactory.hpp>
-#endif
-#ifndef _COM_SUN_STAR_REGISTRY_XREGISTRYKEY_HPP_
-#include <com/sun/star/registry/XRegistryKey.hpp>
-#endif
-
-#include <cppuhelper/factory.hxx>
-
-#ifndef _CPPUHELPER_WEAK_HXX_
-#include <cppuhelper/weak.hxx>
-#endif
-#ifndef _OSL_MUTEX_HXX_
-#include <osl/mutex.hxx>
-#endif
+#include <registerservices.hxx>
 
 #include <localedata.hxx>
 #include <numberformatcode.hxx>
@@ -58,13 +41,13 @@
 #include <defaultnumberingprovider.hxx>
 #include <servicename.hxx>
 
+
 #define TRANSLITERATION_ALL
 #include <transliterationImpl.hxx>
 #include <transliteration_body.hxx>
 #include <transliteration_caseignore.hxx>
 #include <transliteration_Ignore.hxx>
 #include <transliteration_OneToOne.hxx>
-#include <textToPronounce_zh.hxx>
 #include <numtotext_cjk.hxx>
 #include <numtochar.hxx>
 #include <texttonum.hxx>
@@ -82,12 +65,6 @@
 #include <breakiterator_hi.hxx>
 #include <breakiterator_unicode.hxx>
 
-#define INDEXENTRYSUPPLIER_ALL
-#include <indexentrysupplier.hxx>
-#include <indexentrysupplier_asian.hxx>
-#include <indexentrysupplier_common.hxx>
-#include <indexentrysupplier_default.hxx>
-
 #define CCLASS_ALL
 #include <characterclassificationImpl.hxx>
 #include <scripttypedetector.hxx>
@@ -102,41 +79,6 @@
 #include <inputsequencechecker_th.hxx>
 #include <inputsequencechecker_hi.hxx>
 
-#include <textconversionImpl.hxx>
-#include <textconversion.hxx>
-
-#define IMPL_CREATEINSTANCE( ImplName ) \
-    ::com::sun::star::uno::Reference< ::com::sun::star::uno::XInterface >   \
-        SAL_CALL ImplName##_CreateInstance(                                 \
-            const ::com::sun::star::uno::Reference<                         \
-                    ::com::sun::star::lang::XMultiServiceFactory >& )       \
-{                                                                           \
-    return ::com::sun::star::uno::Reference <                               \
-            ::com::sun::star::uno::XInterface >( ( ::cppu::OWeakObject* )   \
-                                    new ImplName );                         \
-}
-
-#define IMPL_CREATEINSTANCE_MSF( ImplName ) \
-    ::com::sun::star::uno::Reference< ::com::sun::star::uno::XInterface >   \
-        SAL_CALL ImplName##_CreateInstance(                                 \
-            const ::com::sun::star::uno::Reference<                         \
-                    ::com::sun::star::lang::XMultiServiceFactory >& rxMSF ) \
-{                                                                           \
-    return ::com::sun::star::uno::Reference <                               \
-            ::com::sun::star::uno::XInterface >( ( ::cppu::OWeakObject* )   \
-                                    new ImplName( rxMSF ) );                \
-}
-
-typedef ::com::sun::star::uno::Reference<
-        ::com::sun::star::uno::XInterface > (SAL_CALL *FN_CreateInstance)(
-            const ::com::sun::star::uno::Reference<
-                ::com::sun::star::lang::XMultiServiceFactory >& );
-
-#define IMPL_TRANSLITERATION_ITEM( implName ) \
-    {       TRLT_SERVICELNAME_L10N, \
-        TRLT_IMPLNAME_PREFIX  #implName, \
-        &implName##_CreateInstance }
-
 // -------------------------------------------------------------------------------------
 
 using namespace ::com::sun::star::i18n;
@@ -145,19 +87,6 @@ IMPL_CREATEINSTANCE_MSF( NumberFormatCod
 IMPL_CREATEINSTANCE( NativeNumberSupplier )
 IMPL_CREATEINSTANCE( LocaleData )
 IMPL_CREATEINSTANCE_MSF( DefaultNumberingProvider )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_pinyin )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_radical )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_stroke )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_zhuyin )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_TW_radical )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_TW_stroke )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ko_dict )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_consonant )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_consonant )
-IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_Unicode )
 IMPL_CREATEINSTANCE_MSF( CalendarImpl )
 IMPL_CREATEINSTANCE( Calendar_gregorian )
 IMPL_CREATEINSTANCE( Calendar_hanja )
@@ -176,21 +105,6 @@ IMPL_CREATEINSTANCE( BreakIterator_hi )
 IMPL_CREATEINSTANCE_MSF( ChapterCollator )
 IMPL_CREATEINSTANCE_MSF( CollatorImpl )
 IMPL_CREATEINSTANCE( Collator_Unicode )
-IMPL_CREATEINSTANCE( Collator_dz_charset )
-IMPL_CREATEINSTANCE( Collator_zh_pinyin )
-IMPL_CREATEINSTANCE( Collator_zh_radical )
-IMPL_CREATEINSTANCE( Collator_zh_stroke )
-IMPL_CREATEINSTANCE( Collator_zh_zhuyin )
-IMPL_CREATEINSTANCE( Collator_zh_TW_radical )
-IMPL_CREATEINSTANCE( Collator_zh_TW_stroke )
-IMPL_CREATEINSTANCE( Collator_ko_charset )
-IMPL_CREATEINSTANCE( Collator_zh_charset )
-IMPL_CREATEINSTANCE( Collator_ja_charset )
-IMPL_CREATEINSTANCE( Collator_ja_phonetic_alphanumeric_first )
-IMPL_CREATEINSTANCE( Collator_ja_phonetic_alphanumeric_last )
-IMPL_CREATEINSTANCE( Collator_zh_TW_charset )
-IMPL_CREATEINSTANCE( Collator_ne_charset )
-IMPL_CREATEINSTANCE( Collator_km_charset )
 
 IMPL_CREATEINSTANCE_MSF( CharacterClassificationImpl )
 IMPL_CREATEINSTANCE_MSF( cclass_Unicode )
@@ -201,41 +115,13 @@ IMPL_CREATEINSTANCE_MSF( InputSequenceCh
 IMPL_CREATEINSTANCE( InputSequenceChecker_th )
 IMPL_CREATEINSTANCE( InputSequenceChecker_hi )
 
-IMPL_CREATEINSTANCE_MSF( TextConversionImpl )
-IMPL_CREATEINSTANCE_MSF( TextConversion_ko )
-IMPL_CREATEINSTANCE_MSF( TextConversion_zh )
-
 IMPL_CREATEINSTANCE( Transliteration_u2l )
 IMPL_CREATEINSTANCE( Transliteration_l2u )
 IMPL_CREATEINSTANCE( Transliteration_caseignore )
-IMPL_CREATEINSTANCE( hiraganaToKatakana )
-IMPL_CREATEINSTANCE( katakanaToHiragana )
-IMPL_CREATEINSTANCE( ignoreKana )
 IMPL_CREATEINSTANCE( fullwidthToHalfwidth )
 IMPL_CREATEINSTANCE( halfwidthToFullwidth )
 IMPL_CREATEINSTANCE( ignoreWidth )
 
-IMPL_CREATEINSTANCE( smallToLarge_ja_JP)
-IMPL_CREATEINSTANCE( largeToSmall_ja_JP)
-IMPL_CREATEINSTANCE( ignoreTraditionalKanji_ja_JP)
-IMPL_CREATEINSTANCE( ignoreTraditionalKana_ja_JP)
-IMPL_CREATEINSTANCE( ignoreMinusSign_ja_JP)
-IMPL_CREATEINSTANCE( ignoreIterationMark_ja_JP)
-IMPL_CREATEINSTANCE( ignoreSeparator_ja_JP)
-IMPL_CREATEINSTANCE( ignoreZiZu_ja_JP)
-IMPL_CREATEINSTANCE( ignoreBaFa_ja_JP)
-IMPL_CREATEINSTANCE( ignoreTiJi_ja_JP)
-IMPL_CREATEINSTANCE( ignoreHyuByu_ja_JP)
-IMPL_CREATEINSTANCE( ignoreSeZe_ja_JP)
-IMPL_CREATEINSTANCE( ignoreIandEfollowedByYa_ja_JP)
-IMPL_CREATEINSTANCE( ignoreKiKuFollowedBySa_ja_JP)
-IMPL_CREATEINSTANCE( ignoreSize_ja_JP)
-IMPL_CREATEINSTANCE( ignoreProlongedSoundMark_ja_JP)
-IMPL_CREATEINSTANCE( ignoreMiddleDot_ja_JP)
-IMPL_CREATEINSTANCE( ignoreSpace_ja_JP)
-
-IMPL_CREATEINSTANCE( TextToChuyin_zh_TW )
-IMPL_CREATEINSTANCE( TextToPinyin_zh_CN )
 
 IMPL_CREATEINSTANCE( NumToCharLower_zh_CN )
 IMPL_CREATEINSTANCE( NumToCharUpper_zh_CN )
@@ -312,6 +198,28 @@ IMPL_CREATEINSTANCE( NumToTextHangulCirc
 IMPL_CREATEINSTANCE( NumToTextTianGan_zh )
 IMPL_CREATEINSTANCE( NumToTextDiZi_zh )
 
+IMPL_CREATEINSTANCE( hiraganaToKatakana )
+IMPL_CREATEINSTANCE( katakanaToHiragana )
+IMPL_CREATEINSTANCE( smallToLarge_ja_JP)
+IMPL_CREATEINSTANCE( largeToSmall_ja_JP)
+IMPL_CREATEINSTANCE( ignoreKana )
+IMPL_CREATEINSTANCE( ignoreTraditionalKanji_ja_JP)
+IMPL_CREATEINSTANCE( ignoreTraditionalKana_ja_JP)
+IMPL_CREATEINSTANCE( ignoreMinusSign_ja_JP)
+IMPL_CREATEINSTANCE( ignoreIterationMark_ja_JP)
+IMPL_CREATEINSTANCE( ignoreSeparator_ja_JP)
+IMPL_CREATEINSTANCE( ignoreZiZu_ja_JP)
+IMPL_CREATEINSTANCE( ignoreBaFa_ja_JP)
+IMPL_CREATEINSTANCE( ignoreTiJi_ja_JP)
+IMPL_CREATEINSTANCE( ignoreHyuByu_ja_JP)
+IMPL_CREATEINSTANCE( ignoreSeZe_ja_JP)
+IMPL_CREATEINSTANCE( ignoreIandEfollowedByYa_ja_JP)
+IMPL_CREATEINSTANCE( ignoreKiKuFollowedBySa_ja_JP)
+IMPL_CREATEINSTANCE( ignoreSize_ja_JP)
+IMPL_CREATEINSTANCE( ignoreProlongedSoundMark_ja_JP)
+IMPL_CREATEINSTANCE( ignoreMiddleDot_ja_JP)
+IMPL_CREATEINSTANCE( ignoreSpace_ja_JP)
+
 static const struct InstancesArray {
         const sal_Char* pServiceNm;
         const sal_Char* pImplementationNm;
@@ -329,54 +237,6 @@ static const struct InstancesArray {
     {   "com.sun.star.text.DefaultNumberingProvider",
         "com.sun.star.text.DefaultNumberingProvider",
         &DefaultNumberingProvider_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier",
-        "com.sun.star.i18n.IndexEntrySupplier",
-        &IndexEntrySupplier_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_pinyin",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_pinyin",
-        &IndexEntrySupplier_zh_pinyin_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_radical",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_radical",
-        &IndexEntrySupplier_zh_radical_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_stroke",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_stroke",
-        &IndexEntrySupplier_zh_stroke_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_zhuyin",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_zhuyin",
-        &IndexEntrySupplier_zh_zhuyin_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_TW_radical",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_TW_radical",
-        &IndexEntrySupplier_zh_TW_radical_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_zh_TW_stroke",
-        "com.sun.star.i18n.IndexEntrySupplier_zh_TW_stroke",
-        &IndexEntrySupplier_zh_TW_stroke_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ko_dict",
-        "com.sun.star.i18n.IndexEntrySupplier_ko_dict",
-        &IndexEntrySupplier_ko_dict_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ko_charset",
-        "com.sun.star.i18n.IndexEntrySupplier_ko_charset",
-        &IndexEntrySupplier_ko_dict_CreateInstance },   // share same table with ko_dict
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by syllable)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by syllable)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by consonant)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by consonant)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_consonant_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by syllable)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by syllable)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable_CreateInstance },
-    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by consonant)",
-        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by consonant)",
-        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_consonant_CreateInstance },
-    {       "com.sun.star.i18n.IndexEntrySupplier_Unicode",
-        "com.sun.star.i18n.IndexEntrySupplier_Unicode",
-        &IndexEntrySupplier_Unicode_CreateInstance },
     {   "com.sun.star.i18n.LocaleCalendar",
         "com.sun.star.i18n.CalendarImpl",
         &CalendarImpl_CreateInstance },
@@ -434,45 +294,6 @@ static const struct InstancesArray {
     {   "com.sun.star.i18n.Collator_Unicode",
         "com.sun.star.i18n.Collator_Unicode",
         &Collator_Unicode_CreateInstance },
-    {   "com.sun.star.i18n.Collator_dz_charset",
-        "com.sun.star.i18n.Collator_dz_charset",
-        &Collator_dz_charset_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_pinyin",
-        "com.sun.star.i18n.Collator_zh_pinyin",
-        &Collator_zh_pinyin_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_radical",
-        "com.sun.star.i18n.Collator_zh_radical",
-        &Collator_zh_radical_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_stroke",
-        "com.sun.star.i18n.Collator_zh_stroke",
-        &Collator_zh_stroke_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_zhuyin",
-        "com.sun.star.i18n.Collator_zh_zhuyin",
-        &Collator_zh_zhuyin_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_TW_radical",
-        "com.sun.star.i18n.Collator_zh_TW_radical",
-        &Collator_zh_TW_radical_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_TW_stroke",
-        "com.sun.star.i18n.Collator_zh_TW_stroke",
-        &Collator_zh_TW_stroke_CreateInstance },
-    {   "com.sun.star.i18n.Collator_ko_charset",
-        "com.sun.star.i18n.Collator_ko_charset",
-        &Collator_ko_charset_CreateInstance },
-    {   "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric first)",
-        "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric first)",
-        &Collator_ja_phonetic_alphanumeric_first_CreateInstance },
-    {   "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric last)",
-        "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric last)",
-        &Collator_ja_phonetic_alphanumeric_last_CreateInstance },
-    {   "com.sun.star.i18n.Collator_ja_charset",
-        "com.sun.star.i18n.Collator_ja_charset",
-        &Collator_ja_charset_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_charset",
-        "com.sun.star.i18n.Collator_zh_charset",
-        &Collator_zh_charset_CreateInstance },
-    {   "com.sun.star.i18n.Collator_zh_TW_charset",
-        "com.sun.star.i18n.Collator_zh_TW_charset",
-        &Collator_zh_TW_charset_CreateInstance },
     {   "com.sun.star.i18n.ScriptTypeDetector",
         "com.sun.star.i18n.ScriptTypeDetector",
         &ScriptTypeDetector_CreateInstance },
@@ -491,15 +312,6 @@ static const struct InstancesArray {
     {   "com.sun.star.i18n.InputSequenceChecker_hi",
         "com.sun.star.i18n.InputSequenceChecker_hi",
         &InputSequenceChecker_hi_CreateInstance },  
-    {   "com.sun.star.i18n.TextConversion",
-        "com.sun.star.i18n.TextConversion",
-        &TextConversionImpl_CreateInstance },  
-    {   "com.sun.star.i18n.TextConversion_ko",
-        "com.sun.star.i18n.TextConversion_ko",
-        &TextConversion_ko_CreateInstance },  
-    {   "com.sun.star.i18n.TextConversion_zh",
-        "com.sun.star.i18n.TextConversion_zh",
-        &TextConversion_zh_CreateInstance },  
     {   TRLT_SERVICELNAME,
         TRLT_IMPLNAME ,
         &TransliterationImpl_CreateInstance },
@@ -513,15 +325,6 @@ static const struct InstancesArray {
         TRLT_IMPLNAME_PREFIX  "IGNORE_CASE",
         &Transliteration_caseignore_CreateInstance },
     {   TRLT_SERVICELNAME_L10N,
-        TRLT_IMPLNAME_PREFIX  "HIRAGANA_KATAKANA",
-        &hiraganaToKatakana_CreateInstance },
-    {   TRLT_SERVICELNAME_L10N,
-        TRLT_IMPLNAME_PREFIX  "KATAKANA_HIRAGANA",
-        &katakanaToHiragana_CreateInstance },
-    {   TRLT_SERVICELNAME_L10N,
-        TRLT_IMPLNAME_PREFIX  "IGNORE_KANA",
-        &ignoreKana_CreateInstance },
-    {   TRLT_SERVICELNAME_L10N,
         TRLT_IMPLNAME_PREFIX  "FULLWIDTH_HALFWIDTH",
         &fullwidthToHalfwidth_CreateInstance },
     {   TRLT_SERVICELNAME_L10N,
@@ -530,6 +333,16 @@ static const struct InstancesArray {
     {   TRLT_SERVICELNAME_L10N,
         TRLT_IMPLNAME_PREFIX  "IGNORE_WIDTH",
         &ignoreWidth_CreateInstance },
+    {   TRLT_SERVICELNAME_L10N,
+        TRLT_IMPLNAME_PREFIX  "HIRAGANA_KATAKANA",
+        &hiraganaToKatakana_CreateInstance },
+    {   TRLT_SERVICELNAME_L10N,
+        TRLT_IMPLNAME_PREFIX  "KATAKANA_HIRAGANA",
+        &katakanaToHiragana_CreateInstance },
+    {   TRLT_SERVICELNAME_L10N,
+        TRLT_IMPLNAME_PREFIX  "IGNORE_KANA",
+        &ignoreKana_CreateInstance },
+
     IMPL_TRANSLITERATION_ITEM (smallToLarge_ja_JP),
     IMPL_TRANSLITERATION_ITEM (largeToSmall_ja_JP),
     IMPL_TRANSLITERATION_ITEM (ignoreTraditionalKanji_ja_JP),
@@ -549,8 +362,6 @@ static const struct InstancesArray {
     IMPL_TRANSLITERATION_ITEM (ignoreProlongedSoundMark_ja_JP),
     IMPL_TRANSLITERATION_ITEM (ignoreMiddleDot_ja_JP),
     IMPL_TRANSLITERATION_ITEM (ignoreSpace_ja_JP),
-    IMPL_TRANSLITERATION_ITEM (TextToPinyin_zh_CN),
-    IMPL_TRANSLITERATION_ITEM (TextToChuyin_zh_TW),
 
     IMPL_TRANSLITERATION_ITEM (NumToCharUpper_zh_CN),
     IMPL_TRANSLITERATION_ITEM (NumToCharLower_zh_CN),
@@ -626,15 +437,6 @@ static const struct InstancesArray {
     IMPL_TRANSLITERATION_ITEM (NumToTextHangulCircledSyllable_ko),
     IMPL_TRANSLITERATION_ITEM (NumToTextTianGan_zh),
     IMPL_TRANSLITERATION_ITEM (NumToTextDiZi_zh),
-
-    {   "com.sun.star.i18n.Collator_ne_charset",
-        "com.sun.star.i18n.Collator_ne_charset",
-        &Collator_ne_charset_CreateInstance },
-
-    {   "com.sun.star.i18n.Collator_km_charset",
-        "com.sun.star.i18n.Collator_km_charset",
-        &Collator_km_charset_CreateInstance },
-
 // add here new services !!
     { 0, 0, 0 }
 };
@@ -643,12 +445,12 @@ static const struct InstancesArray {
 extern "C"
 {
 
-void SAL_CALL component_getImplementationEnvironment( const sal_Char** ppEnvTypeName, uno_Environment** ppEnv )
+SAL_DLLPUBLIC_EXPORT void SAL_CALL component_getImplementationEnvironment( const sal_Char** ppEnvTypeName, uno_Environment** ppEnv )
 {
     *ppEnvTypeName = CPPU_CURRENT_LANGUAGE_BINDING_NAME;
 }
 
-sal_Bool SAL_CALL component_writeInfo( void* _pServiceManager, void* _pRegistryKey )
+SAL_DLLPUBLIC_EXPORT sal_Bool SAL_CALL component_writeInfo( void* _pServiceManager, void* _pRegistryKey )
 {
     if (_pRegistryKey)
     {
@@ -671,7 +473,7 @@ sal_Bool SAL_CALL component_writeInfo( v
     return sal_True;
 }
 
-void* SAL_CALL component_getFactory( const sal_Char* sImplementationName, void* _pServiceManager, void* _pRegistryKey )
+SAL_DLLPUBLIC_EXPORT void* SAL_CALL component_getFactory( const sal_Char* sImplementationName, void* _pServiceManager, void* _pRegistryKey )
 {
     void* pRet = NULL;
 
Index: i18npool/source/registerservices/registerservices.hxx
===================================================================
RCS file: i18npool/source/registerservices/registerservices.hxx
diff -N i18npool/source/registerservices/registerservices.hxx
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/source/registerservices/registerservices.hxx	3 Nov 2005 14:37:38 -0000	1.1.2.1
@@ -0,0 +1,50 @@
+#ifndef _COM_SUN_STAR_LANG_XSINGLESERVICEFACTORY_HPP_
+#include <com/sun/star/lang/XSingleServiceFactory.hpp>
+#endif
+#ifndef _COM_SUN_STAR_LANG_XMULTISERVICEFACTORY_HPP_
+#include <com/sun/star/lang/XMultiServiceFactory.hpp>
+#endif
+#ifndef _COM_SUN_STAR_REGISTRY_XREGISTRYKEY_HPP_
+#include <com/sun/star/registry/XRegistryKey.hpp>
+#endif
+
+#include <cppuhelper/factory.hxx>
+
+#ifndef _CPPUHELPER_WEAK_HXX_
+#include <cppuhelper/weak.hxx>
+#endif
+#ifndef _OSL_MUTEX_HXX_
+#include <osl/mutex.hxx>
+#endif
+
+#define IMPL_CREATEINSTANCE( ImplName ) \
+    ::com::sun::star::uno::Reference< ::com::sun::star::uno::XInterface >   \
+        SAL_CALL ImplName##_CreateInstance(                                 \
+            const ::com::sun::star::uno::Reference<                         \
+                    ::com::sun::star::lang::XMultiServiceFactory >& )       \
+{                                                                           \
+    return ::com::sun::star::uno::Reference <                               \
+            ::com::sun::star::uno::XInterface >( ( ::cppu::OWeakObject* )   \
+                                    new ImplName );                         \
+}
+
+#define IMPL_CREATEINSTANCE_MSF( ImplName ) \
+    ::com::sun::star::uno::Reference< ::com::sun::star::uno::XInterface >   \
+        SAL_CALL ImplName##_CreateInstance(                                 \
+            const ::com::sun::star::uno::Reference<                         \
+                    ::com::sun::star::lang::XMultiServiceFactory >& rxMSF ) \
+{                                                                           \
+    return ::com::sun::star::uno::Reference <                               \
+            ::com::sun::star::uno::XInterface >( ( ::cppu::OWeakObject* )   \
+                                    new ImplName( rxMSF ) );                \
+}
+
+typedef ::com::sun::star::uno::Reference<
+        ::com::sun::star::uno::XInterface > (SAL_CALL *FN_CreateInstance)(
+            const ::com::sun::star::uno::Reference<
+                ::com::sun::star::lang::XMultiServiceFactory >& );
+
+#define IMPL_TRANSLITERATION_ITEM( implName ) \
+    {       TRLT_SERVICELNAME_L10N, \
+        TRLT_IMPLNAME_PREFIX  #implName, \
+        &implName##_CreateInstance }
Index: i18npool/source/registerservices/registerservices_asian.cxx
===================================================================
RCS file: i18npool/source/registerservices/registerservices_asian.cxx
diff -N i18npool/source/registerservices/registerservices_asian.cxx
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/source/registerservices/registerservices_asian.cxx	4 Nov 2005 10:12:52 -0000	1.1.2.4
@@ -0,0 +1,296 @@
+/*************************************************************************
+ *
+ *  OpenOffice.org - a multi-platform office productivity suite
+ *
+ *  $RCSfile$
+ *
+ *  $Revision$
+ *
+ *  last change: $Author$ $Date$
+ *
+ *  The Contents of this file are made available subject to
+ *  the terms of GNU Lesser General Public License Version 2.1.
+ *
+ *
+ *    GNU Lesser General Public License Version 2.1
+ *    =============================================
+ *    Copyright 2005 by Sun Microsystems, Inc.
+ *    901 San Antonio Road, Palo Alto, CA 94303, USA
+ *
+ *    This library is free software; you can redistribute it and/or
+ *    modify it under the terms of the GNU Lesser General Public
+ *    License version 2.1, as published by the Free Software Foundation.
+ *
+ *    This library is distributed in the hope that it will be useful,
+ *    but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *    Lesser General Public License for more details.
+ *
+ *    You should have received a copy of the GNU Lesser General Public
+ *    License along with this library; if not, write to the Free Software
+ *    Foundation, Inc., 59 Temple Place, Suite 330, Boston,
+ *    MA  02111-1307  USA
+ *
+ ************************************************************************/
+
+#include <registerservices.hxx>
+
+#include <localedata.hxx>
+#include <numberformatcode.hxx>
+#include <nativenumbersupplier.hxx>
+#include <defaultnumberingprovider.hxx>
+#include <servicename.hxx>
+
+#define TRANSLITERATION_ALL
+#include <textToPronounce_zh.hxx>
+
+#include <calendarImpl.hxx>
+#include <calendar_gregorian.hxx>
+#include <calendar_hijri.hxx>
+#include <calendar_jewish.hxx>
+
+#define INDEXENTRYSUPPLIER_ALL
+#include <indexentrysupplier.hxx>
+#include <indexentrysupplier_asian.hxx>
+#include <indexentrysupplier_common.hxx>
+#include <indexentrysupplier_default.hxx>
+
+#define CCLASS_ALL
+#include <characterclassificationImpl.hxx>
+#include <scripttypedetector.hxx>
+#include <cclass_unicode.hxx>
+
+#define COLLATOR_ALL
+#include <collator_asian.hxx>
+
+#include <inputsequencechecker.hxx>
+#include <inputsequencechecker_th.hxx>
+#include <inputsequencechecker_hi.hxx>
+
+#include <textconversionImpl.hxx>
+#include <textconversion.hxx>
+
+
+// -------------------------------------------------------------------------------------
+
+using namespace ::com::sun::star::i18n;
+
+IMPL_CREATEINSTANCE( TextToChuyin_zh_TW )
+IMPL_CREATEINSTANCE( TextToPinyin_zh_CN )
+
+IMPL_CREATEINSTANCE_MSF( TextConversionImpl )
+IMPL_CREATEINSTANCE_MSF( TextConversion_ko )
+IMPL_CREATEINSTANCE_MSF( TextConversion_zh )
+
+IMPL_CREATEINSTANCE( Collator_dz_charset )
+IMPL_CREATEINSTANCE( Collator_zh_pinyin )
+IMPL_CREATEINSTANCE( Collator_zh_radical )
+IMPL_CREATEINSTANCE( Collator_zh_stroke )
+IMPL_CREATEINSTANCE( Collator_zh_zhuyin )
+IMPL_CREATEINSTANCE( Collator_zh_TW_radical )
+IMPL_CREATEINSTANCE( Collator_zh_TW_stroke )
+IMPL_CREATEINSTANCE( Collator_ko_charset )
+IMPL_CREATEINSTANCE( Collator_zh_charset )
+IMPL_CREATEINSTANCE( Collator_ja_charset )
+IMPL_CREATEINSTANCE( Collator_ja_phonetic_alphanumeric_first )
+IMPL_CREATEINSTANCE( Collator_ja_phonetic_alphanumeric_last )
+IMPL_CREATEINSTANCE( Collator_zh_TW_charset )
+IMPL_CREATEINSTANCE( Collator_ne_charset )
+IMPL_CREATEINSTANCE( Collator_km_charset )
+
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_Unicode )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_pinyin )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_radical )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_stroke )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_zhuyin )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_TW_radical )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_zh_TW_stroke )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ko_dict )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_consonant )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable )
+IMPL_CREATEINSTANCE_MSF( IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_consonant )
+
+static const struct InstancesArray {
+        const sal_Char* pServiceNm;
+        const sal_Char* pImplementationNm;
+        FN_CreateInstance pFn;
+} aInstances[] = {
+    {   "com.sun.star.i18n.Collator_dz_charset",
+        "com.sun.star.i18n.Collator_dz_charset",
+        &Collator_dz_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_pinyin",
+        "com.sun.star.i18n.Collator_zh_pinyin",
+        &Collator_zh_pinyin_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_radical",
+        "com.sun.star.i18n.Collator_zh_radical",
+        &Collator_zh_radical_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_stroke",
+        "com.sun.star.i18n.Collator_zh_stroke",
+        &Collator_zh_stroke_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_zhuyin",
+        "com.sun.star.i18n.Collator_zh_zhuyin",
+        &Collator_zh_zhuyin_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_TW_radical",
+        "com.sun.star.i18n.Collator_zh_TW_radical",
+        &Collator_zh_TW_radical_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_TW_stroke",
+        "com.sun.star.i18n.Collator_zh_TW_stroke",
+        &Collator_zh_TW_stroke_CreateInstance },
+    {   "com.sun.star.i18n.Collator_ko_charset",
+        "com.sun.star.i18n.Collator_ko_charset",
+        &Collator_ko_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric first)",
+        "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric first)",
+        &Collator_ja_phonetic_alphanumeric_first_CreateInstance },
+    {   "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric last)",
+        "com.sun.star.i18n.Collator_ja_phonetic (alphanumeric last)",
+        &Collator_ja_phonetic_alphanumeric_last_CreateInstance },
+    {   "com.sun.star.i18n.Collator_ja_charset",
+        "com.sun.star.i18n.Collator_ja_charset",
+        &Collator_ja_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_charset",
+        "com.sun.star.i18n.Collator_zh_charset",
+        &Collator_zh_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_zh_TW_charset",
+        "com.sun.star.i18n.Collator_zh_TW_charset",
+        &Collator_zh_TW_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_ne_charset",
+        "com.sun.star.i18n.Collator_ne_charset",
+        &Collator_ne_charset_CreateInstance },
+    {   "com.sun.star.i18n.Collator_km_charset",
+        "com.sun.star.i18n.Collator_km_charset",
+        &Collator_km_charset_CreateInstance },
+    IMPL_TRANSLITERATION_ITEM (TextToPinyin_zh_CN),
+    IMPL_TRANSLITERATION_ITEM (TextToChuyin_zh_TW),
+    {   "com.sun.star.i18n.IndexEntrySupplier",
+        "com.sun.star.i18n.IndexEntrySupplier",
+        &IndexEntrySupplier_CreateInstance },
+    {       "com.sun.star.i18n.IndexEntrySupplier_Unicode",
+        "com.sun.star.i18n.IndexEntrySupplier_Unicode",
+        &IndexEntrySupplier_Unicode_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_pinyin",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_pinyin",
+        &IndexEntrySupplier_zh_pinyin_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_radical",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_radical",
+        &IndexEntrySupplier_zh_radical_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_stroke",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_stroke",
+        &IndexEntrySupplier_zh_stroke_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_zhuyin",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_zhuyin",
+        &IndexEntrySupplier_zh_zhuyin_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_TW_radical",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_TW_radical",
+        &IndexEntrySupplier_zh_TW_radical_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_zh_TW_stroke",
+        "com.sun.star.i18n.IndexEntrySupplier_zh_TW_stroke",
+        &IndexEntrySupplier_zh_TW_stroke_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ko_dict",
+        "com.sun.star.i18n.IndexEntrySupplier_ko_dict",
+        &IndexEntrySupplier_ko_dict_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ko_charset",
+        "com.sun.star.i18n.IndexEntrySupplier_ko_charset",
+        &IndexEntrySupplier_ko_dict_CreateInstance },   // share same table with ko_dict
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by syllable)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by syllable)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_syllable_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by consonant)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric first) (grouped by consonant)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_first_by_consonant_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by syllable)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by syllable)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_syllable_CreateInstance },
+    {   "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by consonant)",
+        "com.sun.star.i18n.IndexEntrySupplier_ja_phonetic (alphanumeric last) (grouped by consonant)",
+        &IndexEntrySupplier_ja_phonetic_alphanumeric_last_by_consonant_CreateInstance },
+    {   "com.sun.star.i18n.TextConversion",
+        "com.sun.star.i18n.TextConversion",
+        &TextConversionImpl_CreateInstance },  
+    {   "com.sun.star.i18n.TextConversion_ko",
+        "com.sun.star.i18n.TextConversion_ko",
+        &TextConversion_ko_CreateInstance },  
+    {   "com.sun.star.i18n.TextConversion_zh",
+        "com.sun.star.i18n.TextConversion_zh",
+        &TextConversion_zh_CreateInstance },  
+// add new services here !!
+    { 0, 0, 0 }
+};
+
+
+/*
+ * Cut/paste - ugly - macro generate instead ? have a .impl include ?
+ */
+extern "C"
+{
+
+SAL_DLLPUBLIC_EXPORT void SAL_CALL component_getImplementationEnvironment( const sal_Char** ppEnvTypeName, uno_Environment** ppEnv )
+{
+    *ppEnvTypeName = CPPU_CURRENT_LANGUAGE_BINDING_NAME;
+}
+
+SAL_DLLPUBLIC_EXPORT sal_Bool SAL_CALL component_writeInfo( void* _pServiceManager, void* _pRegistryKey )
+{
+    if (_pRegistryKey)
+    {
+        ::com::sun::star::registry::XRegistryKey * pRegistryKey =
+            reinterpret_cast< ::com::sun::star::registry::XRegistryKey* >(
+                                _pRegistryKey );
+        ::com::sun::star::uno::Reference<
+                        ::com::sun::star::registry::XRegistryKey > xNewKey;
+
+        for( const InstancesArray* pArr = aInstances; pArr->pServiceNm; ++pArr )
+        {
+            xNewKey = pRegistryKey->createKey(
+                    ::rtl::OUString::createFromAscii( pArr->pImplementationNm )  );
+            xNewKey = xNewKey->createKey(
+                    ::rtl::OUString::createFromAscii( "/UNO/SERVICES" ) );
+            xNewKey->createKey(
+                    ::rtl::OUString::createFromAscii( pArr->pServiceNm ) );
+        }
+    }
+    return sal_True;
+}
+
+SAL_DLLPUBLIC_EXPORT void* SAL_CALL component_getFactory( const sal_Char* sImplementationName, void* _pServiceManager, void* _pRegistryKey )
+{
+    void* pRet = NULL;
+
+    ::com::sun::star::lang::XMultiServiceFactory* pServiceManager =
+        reinterpret_cast< ::com::sun::star::lang::XMultiServiceFactory* >
+            ( _pServiceManager );
+    ::com::sun::star::uno::Reference<
+            ::com::sun::star::lang::XSingleServiceFactory > xFactory;
+
+    for( const InstancesArray* pArr = aInstances; pArr->pServiceNm; ++pArr )
+    {
+        if( 0 == rtl_str_compare( sImplementationName, pArr->pImplementationNm ) )
+        {
+            ::com::sun::star::uno::Sequence< ::rtl::OUString > aServiceNames(1);
+            aServiceNames.getArray()[0] =
+                ::rtl::OUString::createFromAscii( pArr->pServiceNm );
+            xFactory = ::cppu::createSingleFactory(
+                    pServiceManager, aServiceNames.getArray()[0],
+                    *pArr->pFn, aServiceNames );
+            break;
+        }
+    }
+
+    if ( xFactory.is() )
+    {
+        xFactory->acquire();
+        pRet = xFactory.get();
+    }
+
+    return pRet;
+}
+
+}   // "C"
cvs diff: Diffing i18npool/source/search
Index: i18npool/source/search/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/search/makefile.mk,v
retrieving revision 1.5
retrieving revision 1.5.20.1
diff -u -p -r1.5 -r1.5.20.1
--- i18npool/source/search/makefile.mk	7 Sep 2005 17:23:09 -0000	1.5
+++ i18npool/source/search/makefile.mk	3 Nov 2005 14:37:39 -0000	1.5.20.1
@@ -43,6 +43,7 @@ LIBTARGET=NO
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 DLLPRE =
 
 # --- Files --------------------------------------------------------
cvs diff: Diffing i18npool/source/textconversion
Index: i18npool/source/search/textsearch.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/search/textsearch.cxx,v
retrieving revision 1.7
diff -u -p -r1.7 textsearch.cxx
--- i18npool/source/search/textsearch.cxx	1 Nov 2005 14:57:03 -0000	1.7
+++ i18npool/source/search/textsearch.cxx	9 Nov 2005 19:24:35 -0000
@@ -996,13 +998,13 @@ SAL_CALL TextSearch_CreateInstance(
 extern "C"
 {
 
-void SAL_CALL component_getImplementationEnvironment(
+SAL_DLLPUBLIC_EXPORT void SAL_CALL component_getImplementationEnvironment(
         const sal_Char** ppEnvTypeName, uno_Environment** ppEnv )
 {
     *ppEnvTypeName = CPPU_CURRENT_LANGUAGE_BINDING_NAME;
 }
 
-sal_Bool SAL_CALL component_writeInfo(
+SAL_DLLPUBLIC_EXPORT sal_Bool SAL_CALL component_writeInfo(
         void* _pServiceManager, void* _pRegistryKey )
 {
     if (_pRegistryKey)
@@ -1021,7 +1023,7 @@ sal_Bool SAL_CALL component_writeInfo(
     return sal_True;
 }
 
-void* SAL_CALL component_getFactory( const sal_Char* sImplementationName,
+SAL_DLLPUBLIC_EXPORT void* SAL_CALL component_getFactory( const sal_Char* sImplementationName,
         void* _pServiceManager, void* _pRegistryKey )
 {
     void* pRet = NULL;
Index: i18npool/source/textconversion/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/textconversion/makefile.mk,v
retrieving revision 1.4
retrieving revision 1.4.20.1
diff -u -p -r1.4 -r1.4.20.1
--- i18npool/source/textconversion/makefile.mk	7 Sep 2005 17:24:25 -0000	1.4
+++ i18npool/source/textconversion/makefile.mk	3 Nov 2005 14:37:40 -0000	1.4.20.1
@@ -45,6 +45,7 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
cvs diff: Diffing i18npool/source/textconversion/data
cvs diff: Diffing i18npool/source/transliteration
Index: i18npool/source/transliteration/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/transliteration/makefile.mk,v
retrieving revision 1.7
retrieving revision 1.7.20.6
diff -u -p -r1.7 -r1.7.20.6
--- i18npool/source/transliteration/makefile.mk	7 Sep 2005 17:33:17 -0000	1.7
+++ i18npool/source/transliteration/makefile.mk	4 Nov 2005 10:12:57 -0000	1.7.20.6
@@ -37,6 +37,7 @@ PRJ=..$/..
 
 PRJNAME=i18npool
 TARGET=transliterationImpl
+LIBTARGET=NO
 
 ENABLE_EXCEPTIONS=TRUE
 
@@ -45,25 +46,30 @@ ENABLE_EXCEPTIONS=TRUE
 .INCLUDE :	svpre.mk
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # --- Files --------------------------------------------------------
 
-SLOFILES=   \
-                        $(SLO)$/transliteration_body.obj \
-                        $(SLO)$/transliteration_caseignore.obj \
+COMMON_OBJECTS= \
                         $(SLO)$/transliterationImpl.obj \
                         $(SLO)$/transliteration_commonclass.obj \
-                        $(SLO)$/transliteration_OneToOne.obj \
                         $(SLO)$/transliteration_Ignore.obj \
-                        $(SLO)$/transliteration_Numeric.obj \
-                        $(SLO)$/hiraganaToKatakana.obj \
-                        $(SLO)$/katakanaToHiragana.obj \
-                        $(SLO)$/ignoreKana.obj \
+                        $(SLO)$/transliteration_body.obj \
+                        $(SLO)$/transliteration_caseignore.obj \
                         $(SLO)$/halfwidthToFullwidth.obj \
                         $(SLO)$/fullwidthToHalfwidth.obj \
+                        $(SLO)$/transliteration_OneToOne.obj \
                         $(SLO)$/ignoreWidth.obj \
+                        $(SLO)$/transliteration_Numeric.obj \
+                        $(SLO)$/numtochar.obj \
+                        $(SLO)$/numtotext_cjk.obj \
+                        $(SLO)$/chartonum.obj \
+                        $(SLO)$/texttonum.obj \
+                        $(SLO)$/hiraganaToKatakana.obj \
+                        $(SLO)$/katakanaToHiragana.obj \
                         $(SLO)$/smallToLarge_ja_JP.obj \
                         $(SLO)$/largeToSmall_ja_JP.obj \
+                        $(SLO)$/ignoreKana.obj \
                         $(SLO)$/ignoreSize_ja_JP.obj \
                         $(SLO)$/ignoreMinusSign_ja_JP.obj \
                         $(SLO)$/ignoreIterationMark_ja_JP.obj \
@@ -79,12 +85,18 @@ SLOFILES=   \
                         $(SLO)$/ignoreKiKuFollowedBySa_ja_JP.obj \
                         $(SLO)$/ignoreSeparator_ja_JP.obj \
                         $(SLO)$/ignoreSpace_ja_JP.obj \
-                        $(SLO)$/ignoreMiddleDot_ja_JP.obj \
-                        $(SLO)$/textToPronounce_zh.obj \
-                        $(SLO)$/numtochar.obj \
-                        $(SLO)$/numtotext_cjk.obj \
-                        $(SLO)$/chartonum.obj \
-                        $(SLO)$/texttonum.obj
+                        $(SLO)$/ignoreMiddleDot_ja_JP.obj
+
+ASIAN_OBJECTS= \
+                        $(SLO)$/textToPronounce_zh.obj # 500k alone
+
+SLOFILES= $(COMMON_OBJECTS) $(ASIAN_OBJECTS)
+
+LIB1TARGET= $(SLB)$/$(TARGET).lib
+LIB1OBJFILES= $(COMMON_OBJECTS)
+
+LIB2TARGET= $(SLB)$/$(TARGET)_asian.lib
+LIB2OBJFILES= $(ASIAN_OBJECTS)
 
 # --- Targets ------------------------------------------------------
 
Index: i18npool/source/transliteration/transliterationImpl.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/transliteration/transliterationImpl.cxx,v
retrieving revision 1.13
retrieving revision 1.13.20.3
diff -u -p -r1.13 -r1.13.20.3
--- i18npool/source/transliteration/transliterationImpl.cxx	7 Sep 2005 17:35:03 -0000	1.13
+++ i18npool/source/transliteration/transliterationImpl.cxx	4 Nov 2005 10:12:58 -0000	1.13.20.3
@@ -599,6 +599,7 @@ static void SAL_CALL loadBody( Reference
     Reference< XContentEnumerationAccess > xEnumAccess( xSMgr, UNO_QUERY );
     Reference< XEnumeration > xEnum(xEnumAccess->createContentEnumeration(
                                     OUString::createFromAscii(TRLT_SERVICELNAME_L10N)));
+
     if (xEnum.is()) {
         while (xEnum->hasMoreElements()) {
             Any a = xEnum->nextElement();
Index: i18npool/source/transliteration/transliteration_Ignore.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/transliteration/transliteration_Ignore.cxx,v
retrieving revision 1.11
retrieving revision 1.11.20.1
diff -u -p -r1.11 -r1.11.20.1
--- i18npool/source/transliteration/transliteration_Ignore.cxx	7 Sep 2005 17:35:18 -0000	1.11
+++ i18npool/source/transliteration/transliteration_Ignore.cxx	3 Nov 2005 18:08:13 -0000	1.11.20.1
@@ -33,6 +33,8 @@
  *
  ************************************************************************/
 
+#define I18NPOOL_DLLIMPLEMENTATION
+
 // prevent internal compiler error with MSVC6SP3
 #include <utility>
 
Index: i18npool/source/transliteration/transliteration_commonclass.cxx
===================================================================
RCS file: /cvs/l10n/i18npool/source/transliteration/transliteration_commonclass.cxx,v
retrieving revision 1.6
retrieving revision 1.6.20.1
diff -u -p -r1.6 -r1.6.20.1
--- i18npool/source/transliteration/transliteration_commonclass.cxx	7 Sep 2005 17:36:36 -0000	1.6
+++ i18npool/source/transliteration/transliteration_commonclass.cxx	3 Nov 2005 17:25:55 -0000	1.6.20.1
@@ -33,6 +33,8 @@
  *
  ************************************************************************/
 
+#define I18NPOOL_DLLIMPLEMENTATION
+
 #include <transliteration_commonclass.hxx>
 #include <com/sun/star/i18n/CollatorOptions.hpp>
 
cvs diff: Diffing i18npool/source/transliteration/data
cvs diff: Diffing i18npool/source/unotypes
Index: i18npool/source/unotypes/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/source/unotypes/makefile.mk,v
retrieving revision 1.12
retrieving revision 1.12.16.1
diff -u -p -r1.12 -r1.12.16.1
--- i18npool/source/unotypes/makefile.mk	7 Sep 2005 17:38:05 -0000	1.12
+++ i18npool/source/unotypes/makefile.mk	3 Nov 2005 14:37:40 -0000	1.12.16.1
@@ -43,6 +43,7 @@ TARGET=     unotypes
 .INCLUDE :  svpre.mk
 .INCLUDE :  settings.mk
 .INCLUDE :  sv.mk
+.INCLUDE :  $(PRJ)$/inc$/i18npool.mk
 
 # ------------------------------------------------------------------
 
cvs diff: Diffing i18npool/util
Index: i18npool/util/i18npool_asian.map
===================================================================
RCS file: i18npool/util/i18npool_asian.map
diff -N i18npool/util/i18npool_asian.map
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ i18npool/util/i18npool_asian.map	3 Nov 2005 14:37:41 -0000	1.1.2.1
@@ -0,0 +1,11 @@
+UDK_3_0_0 {
+global:
+	GetVersionInfo;
+	component_getDescriptionFunc;
+	component_getImplementationEnvironment;
+	component_getFactory;
+	component_writeInfo;
+
+local:
+	*;
+};
Index: i18npool/util/makefile.mk
===================================================================
RCS file: /cvs/l10n/i18npool/util/makefile.mk,v
retrieving revision 1.20
retrieving revision 1.20.20.1
diff -u -p -r1.20 -r1.20.20.1
--- i18npool/util/makefile.mk	7 Sep 2005 17:38:27 -0000	1.20
+++ i18npool/util/makefile.mk	3 Nov 2005 14:37:41 -0000	1.20.20.1
@@ -36,39 +36,35 @@
 PRJ=..
 
 PRJNAME=i18npool
-TARGET=i18npool.uno
+TARGET=i18npool
 
 # --- Settings -----------------------------------------------------------
 
 .INCLUDE :	settings.mk
-DLLPRE =
 
 # --- Allgemein ----------------------------------------------------------
 
-LIB1TARGET= $(SLB)$/$(TARGET).lib
+LIB1TARGET= $(SLB)$/$(TARGET).uno.lib
 LIB1FILES=	$(SLB)$/defaultnumberingprovider.lib	\
 		$(SLB)$/nativenumber.lib		\
 		$(SLB)$/registerservices.lib		\
 		$(SLB)$/numberformatcode.lib		\
 		$(SLB)$/locale.lib			\
-		$(SLB)$/indexentry.lib			\
 		$(SLB)$/calendar.lib		\
 		$(SLB)$/breakiterator.lib \
 		$(SLB)$/transliterationImpl.lib \
 		$(SLB)$/characterclassification.lib \
 		$(SLB)$/collator.lib \
-		$(SLB)$/inputchecker.lib \
-		$(SLB)$/textconversion.lib
+		$(SLB)$/inputchecker.lib
 
-SHL1TARGET= $(TARGET)
+SHL1TARGET= $(TARGET).uno
 # WNT needs implib name even if there is none
 SHL1IMPLIB= i$(SHL1TARGET)
 
 SHL1DEPN=	makefile.mk
-SHL1VERSIONMAP=$(PRJNAME).map
-SHL1DEF=$(MISC)$/$(SHL1TARGET).def
-DEF1NAME=$(SHL1TARGET)
-
+# SHL1VERSIONMAP=$(PRJNAME).map
+# SHL1DEF=$(MISC)$/$(SHL1TARGET).def
+# DEF1NAME=$(SHL1TARGET)
 SHL1LIBS=$(LIB1TARGET)
 SHL1STDLIBS= \
 		$(I18NUTILLIB) \
@@ -78,6 +74,21 @@ SHL1STDLIBS= \
 		$(ICUINLIB) \
 		$(ICUUCLIB)
 
+LIB2TARGET= $(SLB)$/$(TARGET)_asian.uno.lib
+LIB2FILES= $(SLB)$/collator_asian.lib \
+	   $(SLB)$/indexentry.lib \
+	   $(SLB)$/textconversion.lib \
+	   $(SLB)$/registerservices_asian.lib \
+	   $(SLB)$/transliterationImpl_asian.lib
+
+SHL2TARGET= $(TARGET)_asian.uno
+SHL2VERSIONMAP=$(PRJNAME).map
+SHL2DEF=$(MISC)$/$(SHL2TARGET).def
+SHL2NAME=$(MISC)$/$(SHL2TARGET).def
+SHL2LIBS=$(LIB2TARGET)
+SHL2DEPN=$(SHL1TARGETN)
+SHL2STDLIBS=$(SHL1STDLIBS) -l$(SHL1TARGET)
+
 # --- Targets ------------------------------------------------------------
 
 .INCLUDE :	target.mk
cvs diff: Diffing i18npool/xml
cvs diff: cannot open CVS/Entries for reading: No such file or directory
cvs [diff aborted]: no repository
Index: vcl/workben/makefile.mk
===================================================================
RCS file: /cvs/gsl/vcl/workben/makefile.mk,v
retrieving revision 1.12
diff -u -p -u -r1.12 makefile.mk
--- vcl/workben/makefile.mk	9 Sep 2005 14:09:34 -0000	1.12
+++ vcl/workben/makefile.mk	10 Nov 2005 16:22:38 -0000
@@ -83,10 +83,10 @@ ALL : \
 $(BIN)$/applicat.rdb : makefile.mk $(UNOUCRRDB)
 	rm -f $@
 	$(GNUCOPY) $(UNOUCRRDB) $@
- 	+cd $(BIN) && \
- 		regcomp -register -r applicat.rdb \
- 			-c i18nsearch.uno$(DLLPOST) \
- 			-c i18npool.uno$(DLLPOST)
+	+cd $(BIN) && \
+		regcomp -register -r applicat.rdb \
+			-c i18nsearch.uno$(DLLPOST) \
+			-c $(DLLPRE)i18npool.uno$(DLLPOST)
 
 # ------------------------------------------------------------------
 # Windows
Index: goodies/source/inv/makefile.mk
===================================================================
RCS file: /cvs/graphics/goodies/source/inv/makefile.mk,v
retrieving revision 1.7
diff -u -p -u -r1.7 makefile.mk
--- goodies/source/inv/makefile.mk	9 Sep 2005 03:07:29 -0000	1.7
+++ goodies/source/inv/makefile.mk	11 Nov 2005 12:45:25 -0000
@@ -129,7 +129,7 @@ $(BIN)$/applicat.rdb : makefile.mk $(SOL
 	$(GNUCOPY) $(SOLARBINDIR)$/types.rdb $@
 	+cd $(BIN) && \
 		regcomp -register -r applicat.rdb \
-			-c i18npool.uno$(DLLPOST)
+			-c $(DLLPRE)i18npool.uno$(DLLPOST)
 
 # --- Def-File ---
 
Index: svx/source/gengal/makefile.mk
===================================================================
RCS file: /cvs/graphics/svx/source/gengal/makefile.mk,v
retrieving revision 1.3
diff -u -p -u -r1.3 makefile.mk
--- svx/source/gengal/makefile.mk	19 Oct 2005 14:42:19 -0000	1.3
+++ svx/source/gengal/makefile.mk	11 Nov 2005 16:28:45 -0000
@@ -107,7 +107,7 @@ $(BIN)$/gengal.rdb : makefile.mk $(UNOUC
 	+cd $(BIN) && \
 		regcomp -register -r gengal.rdb \
 			-c i18nsearch.uno$(DLLPOST) \
-			-c i18npool.uno$(DLLPOST) \
+			-c $(DLLPRE)i18npool.uno$(DLLPOST) \
 			-c configmgr2.uno$(DLLPOST) \
 			-c servicemgr.uno$(DLLPOST) \
 			-c $(DLLPRE)fwl$(UPD)$(DLLSUFFIX)$(DLLPOST) \
Index: scp2/source/ooo/file_library_ooo.scp
===================================================================
RCS file: /cvs/installation/scp2/source/ooo/file_library_ooo.scp,v
retrieving revision 1.156
retrieving revision 1.156.16.1
diff -u -p -u -r1.156 -r1.156.16.1
--- scp2/source/ooo/file_library_ooo.scp	28 Oct 2005 13:55:50 -0000	1.156
+++ scp2/source/ooo/file_library_ooo.scp	9 Nov 2005 15:29:24 -0000	1.156.16.1
@@ -755,9 +755,21 @@ File gid_File_Lib_I18npool
     RegistryID = gid_Starregistry_Services_Rdb;
     Dir = gid_Dir_Program;
   #ifdef UNX
-    Name = STRING(CONCAT2(i18npool.uno,UNXSUFFIX));
+    Name = STRING(CONCAT2(libi18npool.uno,UNXSUFFIX));
   #else
     Name = STRING(CONCAT2(i18npool.uno,.dll));
+  #endif
+End
+
+File gid_File_Lib_I18npool_Asian
+    TXT_FILE_BODY;
+    Styles = (PACKED,UNO_COMPONENT,PATCH);
+    RegistryID = gid_Starregistry_Services_Rdb;
+    Dir = gid_Dir_Program;
+  #ifdef UNX
+    Name = STRING(CONCAT2(libi18npool_asian.uno,UNXSUFFIX));
+  #else
+    Name = STRING(CONCAT2(i18npool_asian.uno,.dll));
   #endif
 End
 
