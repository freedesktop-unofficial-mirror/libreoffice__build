Index: tools/source/fsys/urlobj.cxx
===================================================================
RCS file: /cvs/util/tools/source/fsys/urlobj.cxx,v
retrieving revision 1.52
diff -u -p -u -r1.52 urlobj.cxx
--- tools/source/fsys/urlobj.cxx	11 Jan 2005 13:14:17 -0000	1.52
+++ tools/source/fsys/urlobj.cxx	24 Feb 2005 15:10:33 -0000
@@ -1493,7 +1493,9 @@ bool INetURLObject::convertRelToAbs(rtl:
 	sal_uInt32 nFragmentDelimiter = '#';
 	Part ePart = PART_VISIBLE;
 
-	if (!pPrefix && bSmart)
+	bool bHasPrefix = ( pEnd != pPrefixBegin );
+
+	if (!bHasPrefix && bSmart)
 	{
 		// If the input matches any of the following productions (for which
 		// the appropriate style bit is set in eStyle), it is assumed to be an
@@ -1593,7 +1595,7 @@ bool INetURLObject::convertRelToAbs(rtl:
 	rWasAbsolute = pPrefix != 0;
 
 	// Fast solution for non-relative URIs:
-	if (pPrefix)
+	if (bHasPrefix)
 	{
 		INetURLObject aNewURI(rTheRelURIRef, eMechanism, eCharset);
 		if (aNewURI.HasError())
