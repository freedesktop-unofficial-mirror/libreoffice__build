Index: offapi/com/sun/star/ui/dialogs/ExtendedFilePickerElementIds.idl
===================================================================
RCS file: /cvs/api/offapi/com/sun/star/ui/dialogs/ExtendedFilePickerElementIds.idl,v
retrieving revision 1.4
diff -u -r1.4 ExtendedFilePickerElementIds.idl
--- offapi/com/sun/star/ui/dialogs/ExtendedFilePickerElementIds.idl	4 Jun 2004 01:47:05 -0000	1.4
+++ offapi/com/sun/star/ui/dialogs/ExtendedFilePickerElementIds.idl	20 Jun 2005 15:34:55 -0000
@@ -147,6 +147,11 @@
 	/** 
 	*/
 	const short LISTBOX_IMAGE_TEMPLATE_LABEL = 209;
+
+	//---------------------------------------------------------------------
+	/** 
+	*/
+	const short LISTBOX_FILTER_SELECTOR = 210;
 };	
 
 //=============================================================================


Index: sfx2/source/dialog/filedlghelper.cxx
===================================================================
RCS file: /cvs/framework/sfx2/source/dialog/filedlghelper.cxx,v
retrieving revision 1.115
diff -u -r1.115 filedlghelper.cxx
--- sfx2/source/dialog/filedlghelper.cxx	21 Feb 2005 16:59:45 -0000	1.115
+++ sfx2/source/dialog/filedlghelper.cxx	20 Jun 2005 15:34:58 -0000
@@ -1224,7 +1224,14 @@
 
 	// Export dialog
 	if ( mbExport )
+	{
 		mxFileDlg->setTitle( OUString( String( SfxResId( STR_SFX_EXPLORERFILE_EXPORT ) ) ) );
+		try {
+				Reference < XFilePickerControlAccess > xCtrlAccess( mxFileDlg, UNO_QUERY_THROW );
+				xCtrlAccess->enableControl( ExtendedFilePickerElementIds::LISTBOX_FILTER_SELECTOR, sal_True );
+		}
+		catch( const Exception &e ) { }
+	}
 
 	// the "insert file" dialog needs another title
 	if ( mbInsert )


Index: fpicker/source/unx/gnome/SalGtkFilePicker.cxx
===================================================================
RCS file: /cvs/gsl/fpicker/source/unx/gnome/SalGtkFilePicker.cxx,v
retrieving revision 1.6
diff -u -r1.6 SalGtkFilePicker.cxx
--- fpicker/source/unx/gnome/SalGtkFilePicker.cxx	3 May 2005 13:47:32 -0000	1.6
+++ fpicker/source/unx/gnome/SalGtkFilePicker.cxx	20 Jun 2005 15:35:00 -0000
@@ -1029,8 +1054,8 @@
 GtkWidget *SalGtkFilePicker::getWidget( sal_Int16 nControlId, GType *pType )
 {
 	OSL_TRACE("control id is %d", nControlId);
 	GType      tType;
-	GtkWidget *pWidget;
+	GtkWidget *pWidget = NULL;
 
 #define MAP_TOGGLE( elem ) \
 		case ExtendedFilePickerElementIds::CHECKBOX_##elem: \
@@ -1294,7 +1322,10 @@
 
 	GtkWidget *pWidget;
 
-	if( ( pWidget = getWidget( nControlId ) ) )
+	if ( nControlId == ExtendedFilePickerElementIds::LISTBOX_FILTER_SELECTOR )
+		gtk_expander_set_expanded( GTK_EXPANDER( m_pFilterExpander ), bEnable );
+
+	else if( ( pWidget = getWidget( nControlId ) ) )
 	{
 		if( bEnable )
 		{
