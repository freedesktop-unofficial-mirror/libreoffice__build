--- vcl/inc/salframe.hxx	2004-11-16 03:50:53.742816920 +0530
+++ vcl/inc/salframe.hxx	2004-11-16 03:51:51.871979944 +0530
@@ -265,6 +265,8 @@
 
     virtual void				Beep( SoundType eSoundType ) = 0;
 
+    virtual void                SetFrameBackground( SalBitmap *pBmp ) = 0;
+
     // returns system data (most prominent: window handle)
     virtual const SystemEnvData*	GetSystemData() const = 0;
 

--- vcl/inc/introwin.hxx	2004-11-16 03:53:13.749532664 +0530
+++ vcl/inc/introwin.hxx	2004-11-16 03:54:28.608152424 +0530
@@ -82,6 +82,8 @@
 public:
     IntroWindow();
     ~IntroWindow();
+    void IntroWindow::SetBackgroundBitmap( const Bitmap &rBitmap );
+    virtual void Paint( const Rectangle& );
 };
 
 #endif // _SV_INTROWIN_HXX
--- vcl/source/window/introwin.cxx	2004-10-28 08:21:03.000000000 +0530
+++ vcl/source/window/introwin.cxx	2004-11-16 04:05:26.937071216 +0530
@@ -91,6 +91,18 @@
 #ifndef _SV_OPENGL_HXX
 #include <opengl.hxx>
 #endif
+#ifndef _SV_BITMAP_HXX
+#include <bitmap.hxx>
+#endif
+#ifndef _SV_BITMAPEX_HXX
+#include <bitmapex.hxx>
+#endif
+#ifndef _SV_IMPBMP_HXX
+#include <impbmp.hxx>
+#endif
+#ifndef _SV_SALBMP_HXX
+#include <salbmp.hxx>
+#endif
 
 #include <introwin.hxx>
 
@@ -106,6 +118,23 @@
 }
 
 // -----------------------------------------------------------------------
+void
+IntroWindow::SetBackgroundBitmap( const Bitmap &rBitmap )
+{
+    SetBackground( Wallpaper( BitmapEx( rBitmap ) ) );
+}
+
+void
+IntroWindow::Paint( const Rectangle &rRect )
+{
+    Bitmap aBmp( GetBackground().GetBitmap().GetBitmap() );
+                                                                                                                           
+       DrawBitmap( Point(), aBmp );
+       ImpBitmap *pImpBmp = aBmp.ImplGetImpBitmap();
+       if( pImpBmp )
+               ImplGetFrame()->SetFrameBackground( pImpBmp->ImplGetSalBitmap () );
+}
+
 
 IntroWindow::IntroWindow( ) :
     WorkWindow( WINDOW_WINDOW )
--- desktop/source/splash/splash.cxx	2004-06-25 18:23:44.000000000 +0530
+++ desktop/source/splash/splash.cxx	2004-11-16 04:08:08.630490080 +0530
@@ -252,6 +252,7 @@
 				_aIntroBmp = Bitmap( aIntroBmpRes );
 			}
 			delete pLabelResMgr;
+		        SetBackgroundBitmap( _aIntroBmp );
 		}
 	}
 }
@@ -262,8 +263,7 @@
 
 	// draw bitmap
 	if (_bPaintBitmap)
-		_vdev.DrawBitmap( Point(), _aIntroBmp );
-
+		IntroWindow::Paint( rRect );
 	if (_bPaintProgress) {
 		// draw progress...
 		long length = (_iProgress * _barwidth / _iMax) - (2 * _barspace);
--- vcl/unx/inc/salbmp.h	2004-06-22 23:12:31.000000000 +0530
+++ vcl/unx/inc/salbmp.h	2004-11-16 04:14:47.160904248 +0530
@@ -80,6 +80,9 @@
 class	SalGraphics;
 class	ImplSalDDB;
 class	ImplSalBitmapCache;
+class   SalFrame;
+class   GtkSalFrame;
+class   X11SalFrame;
 
 // -------------
 // - SalBitmap -
@@ -87,7 +90,10 @@
 
 class X11SalBitmap : public SalBitmap
 {
+
+	friend class   GtkSalFrame;
+ 	friend class   X11SalFrame;
 private:
 
 	static BitmapBuffer*		ImplCreateDIB( const Size& rSize,

--- vcl/unx/source/window/salframe.cxx	2004-10-15 16:18:43.000000000 +0530
+++ vcl/unx/source/window/salframe.cxx	2004-11-16 04:24:51.283063720 +0530
@@ -2293,6 +2293,19 @@
     }
 }
 
+void X11SalFrame::SetFrameBackground( SalBitmap *pSalBmp )
+{
+       Pixmap pPixmap;
+       X11SalBitmap *pBmp = (X11SalBitmap *) pSalBmp;
+
+       if( !pBmp || !pBmp->mpDDB || !GetWindow() )
+               return;
+
+       pPixmap = pBmp->mpDDB->ImplGetPixmap();
+       XSetWindowBackgroundPixmap( GetXDisplay(), GetWindow(),
+                                                               pBmp->mpDDB->ImplGetPixmap () );
+}
+
 // Event Handling
 // -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 static USHORT sal_GetCode( int state )
--- vcl/unx/gtk/window/gtkframe.cxx	2004-10-20 02:02:05.000000000 +0530
+++ vcl/unx/gtk/window/gtkframe.cxx	2004-11-16 04:32:15.646510208 +0530
@@ -2143,3 +2143,18 @@
         pThis->m_pWindow = NULL;
     }
 }
+
+void GtkSalFrame::SetFrameBackground( SalBitmap *pSalBmp )
+{
+       Pixmap pPixmap;
+       X11SalBitmap *pBmp = (X11SalBitmap *) pSalBmp;
+
+       if( !pBmp || !pBmp->mpDDB || !m_pWindow )
+               return;
+
+       pPixmap = pBmp->mpDDB->ImplGetPixmap();
+       XSetWindowBackgroundPixmap( getDisplay()->GetDisplay(),
+                                                               GDK_WINDOW_XWINDOW(GTK_WIDGET(m_pWindow)->window),
+                                                               pBmp->mpDDB->ImplGetPixmap ());
+}
+
--- vcl/win/inc/salframe.h	2004-09-09 21:56:13.000000000 +0530
+++ vcl/win/inc/salframe.h	2004-11-16 04:38:20.284076872 +0530
@@ -166,6 +166,7 @@
     virtual SalBitmap*			SnapShot();
     virtual void				UpdateSettings( AllSettings& rSettings );
     virtual void				Beep( SoundType eSoundType );
+    virtual void                SetFrameBackground( SalBitmap *pBmp );
     virtual const SystemEnvData*	GetSystemData() const;
     virtual SalPointerState		GetPointerState();
     virtual void				SetParent( SalFrame* pNewParent );
--- vcl/win/source/window/salframe.cxx	2004-09-09 21:56:29.000000000 +0530
+++ vcl/win/source/window/salframe.cxx	2004-11-16 04:43:53.734384720 +0530
@@ -357,6 +357,10 @@
     }
 }
 
+void WinSalFrame::SetFrameBackground( SalBitmap *pBmp )
+{
+}
+
 // =======================================================================
 
 SalFrame* ImplSalCreateFrame( WinSalInstance* pInst,
