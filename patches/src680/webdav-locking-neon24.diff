--- ucb/source/ucp/webdav/NeonSession.cxx	2008-02-18 16:16:56.000000000 +0100
+++ ucb/source/ucp/webdav/NeonSession.cxx	2008-02-18 16:25:33.000000000 +0100
@@ -1551,6 +1551,14 @@ void NeonSession::Lockit( ucb::Lock & rL
     ne_uri aUri;
     ne_uri_parse( rtl::OUStringToOString( m_aEnv.m_aRequestURI, RTL_TEXTENCODING_UTF8 ).getStr(),
             &aUri );
+    
+#if NEON_VERSION < 0260
+#define FILLIN( field, val ) aUri.field = aUri.field? aUri.field: strdup( rtl::OUStringToOString( val, RTL_TEXTENCODING_UTF8 ).getStr() )
+    FILLIN( scheme, m_aScheme );
+    FILLIN( host, m_aHostName );
+    aUri.port = aUri.port? aUri.port: m_nPort;
+#undef FILLIN
+#endif
 
     // Create the neon lock
     NeonLock * theLock = ne_lockstore_findbyuri( s_aNeonLockStore, &aUri );
