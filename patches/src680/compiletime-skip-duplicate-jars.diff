--- solenv/bin/deliver.pl.ark	2006-01-20 16:39:41.000000000 +0100
+++ solenv/bin/deliver.pl	2006-01-20 16:42:53.000000000 +0100
@@ -747,6 +747,18 @@
 sub cachejar {
     if (defined($ENV{JAVACACHE}) && $ENV{JAVACACHE} ne '') {
         my $file = shift;
+        my $libdir;
+        if( -d "/usr/lib64" ) {
+            $libdir = "/usr/lib64/";
+        } else {
+            $libdir = "/usr/lib/";
+        }
+        my $system = $libdir . "lib" . $file;
+        $system =~ s/\.jar$/.so/;
+        if ( -e $system ) {
+            print "CACHEJAR: Precompiled $file exists in system - no need to build again.\n";
+            return;
+        }
         my $to = $file.".so";
         my $JAVALINKER = "$ENV{JAVACOMPILER} -shared -fPIC -Wl,-Bsymbolic -O2 -findirect-dispatch -fjni -o";
         print "CACHEJAR: $file -> $to with $ENV{GCJ_DATABASE}\n";
