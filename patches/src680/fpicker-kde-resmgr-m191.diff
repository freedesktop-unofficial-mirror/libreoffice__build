--- fpicker/source/unx/kde_unx/UnxFilePicker.cxx	2005-05-23 16:40:20.093844000 +0200
+++ fpicker/source/unx/kde_unx/UnxFilePicker.cxx	2005-05-26 10:49:11.305359078 +0200
@@ -107,8 +107,8 @@
 #include <FPServiceInfo.hxx>
 #endif
 
-#ifndef _SVTOOLS_SVTDATA_HXX
-#include <svtools/svtdata.hxx>
+#ifndef _TOOLS_RESMGR_HXX
+#include <tools/resmgr.hxx>
 #endif
 
 #ifndef _SVTOOLS_HRC
@@ -178,7 +178,8 @@ UnxFilePicker::UnxFilePicker( const uno:
           m_nFilePickerWrite( -1 ),
           m_nFilePickerRead( -1 ),
           m_pNotifyThread( NULL ),
-          m_pCommandThread( NULL )
+          m_pCommandThread( NULL ),
+          m_pResMgr( CREATEVERSIONRESMGR( fps_office ) )
 {	
 }
 
@@ -211,6 +212,8 @@ UnxFilePicker::~UnxFilePicker()
     
     if ( m_nFilePickerRead >= 0 )
         close( m_nFilePickerRead );
+
+    delete m_pResMgr, m_pResMgr = NULL;
 }
 
 void SAL_CALL UnxFilePicker::addFilePickerListener( const uno::Reference<XFilePickerListener>& xListener )
@@ -970,7 +973,7 @@ void UnxFilePicker::sendAppendControlCom
         aBuffer.appendAscii( " ", 1 );
         appendEscaped( aBuffer, aType );
         aBuffer.appendAscii( " ", 1 );
-        appendEscaped( aBuffer, String( SvtResId( nTitleId ) ) );
+        appendEscaped( aBuffer, String( ResId( nTitleId, m_pResMgr ) ) );
 
         sendCommand( aBuffer.makeStringAndClear() );
     }
--- fpicker/source/unx/kde_unx/UnxFilePicker.hxx	2005-05-23 16:40:20.094844000 +0200
+++ fpicker/source/unx/kde_unx/UnxFilePicker.hxx	2005-05-26 10:40:18.652234700 +0200
@@ -114,6 +114,7 @@
 
 class UnxFilePickerCommandThread;
 class UnxFilePickerNotifyThread;
+class ResMgr;
 
 class UnxFilePickerDummy
 {
@@ -145,6 +146,8 @@ protected:
     UnxFilePickerNotifyThread  *m_pNotifyThread;
     UnxFilePickerCommandThread *m_pCommandThread;
 
+    ResMgr                     *m_pResMgr;
+
 public:
     UnxFilePicker( const ::com::sun::star::uno::Reference< ::com::sun::star::lang::XMultiServiceFactory >& xServiceMgr );
     virtual ~UnxFilePicker();
--- fpicker/util/makefile.mk	2005-05-23 16:40:03.889639000 +0200
+++ fpicker/util/makefile.mk	2005-05-26 10:52:51.299413013 +0200
@@ -108,8 +108,7 @@ DEF1EXPORTFILE=	exports.dxp
 
 .IF "$(ENABLE_KDE)" == "TRUE"
 SHL3TARGET=fps_kde
-SHL3STDLIBS=$(COMMON_LIBS) \
-			$(SVTOOLLIB)
+SHL3STDLIBS=$(COMMON_LIBS)
 SHL3DEPN=
 SHL3IMPLIB=i$(SHL1TARGET)
 SHL3LIBS=$(SLB)$/fps_kde.lib
