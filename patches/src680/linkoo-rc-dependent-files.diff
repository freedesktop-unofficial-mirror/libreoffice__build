--- solenv/bin/linkoo	2005-09-21 16:58:47.000000000 +0530
+++ solenv/bin/linkoo	2005-10-18 12:31:38.000000000 +0530
@@ -306,6 +306,36 @@ sub link_types_rdb()
     print "\n";
 }
 
+# Hack for soffice.bin and configmgr2.uno.so that depend on rc files
+sub link_rc_dependent_files()
+{
+    print "soffice.bin case:";
+    my $src  = "$OOO_BUILD/desktop/$TARGET/bin";
+    my $dest = "$OOO_INSTALL/program";
+    if (-l "$src/bootstraprc" && -f (readlink("$src/bootstraprc")) 
+        && !((readlink ("$src/bootstraprc")) eq "$dest/bootstraprc")) {
+        print " Existing valid bootstraprc symlink - not overwriting";
+    } else {
+        unlink ("$src/bootstraprc");
+        do_link ($src, $dest, 'soffice', 'soffice.bin');
+        symlink ("$dest/bootstraprc", "$src/bootstraprc") || die "Failed to symlink: $!";
+    }
+    print "\n";
+
+    print "configmgr2.uno.so case:";
+    my $src  = "$OOO_BUILD/configmgr/$TARGET/lib";
+    my $dest = "$OOO_INSTALL/program";
+    if (-l "$src/configmgrrc" && -f (readlink("$src/configmgrrc")) 
+        && !((readlink ("$src/configmgrrc")) eq "$dest/configmgrrc")) {
+        print " Existing valid configmgrrc symlink - not overwriting";
+    } else {
+        unlink ("$src/configmgrrc");
+        do_link ($src, $dest, 'configmgr2.uno.so', 'configmgr2.uno.so');
+        symlink ("$dest/configmgrrc", "$src/configmgrrc") || die "Failed to symlink: $!";
+    }
+    print "\n";
+}
+
 my $a;
 my $usage = 0;
 for $a (@ARGV) {
@@ -355,6 +385,7 @@ my $installed_files = build_installed_li
 scan_and_link_files ($OOO_BUILD, $installed_files, $TARGET);
 link_iso_res();
 link_types_rdb();
+link_rc_dependent_files();
 
 if (!-f "$OOO_INSTALL/program/ooenv") {
     print "Creating '$OOO_INSTALL/program/ooenv'\n";
