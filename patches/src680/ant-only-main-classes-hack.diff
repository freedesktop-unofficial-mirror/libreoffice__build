Index: ant.mk
===================================================================
RCS file: /cvs/tools/solenv/inc/ant.mk,v
retrieving revision 1.26
diff -u -u -r1.26 ant.mk
--- solenv/inc/ant.mk	25 Jan 2005 15:15:02 -0000	1.26
+++ solenv/inc/ant.mk	10 Mar 2005 13:40:53 -0000
@@ -91,10 +91,6 @@
 ANT_CLASSPATH:=$(ANT_LIB)$/xercesImpl.jar$(PATH_SEPERATOR)$(ANT_LIB)$/xml-apis.jar$(PATH_SEPERATOR)$(ANT_LIB)$/ant.jar
 PATH!:=$(ANT_HOME)$/bin$(PATH_SEPERATOR)$(PATH)
 
-.IF "$(ANT)" == ""
-ANT*:=$(ANT_HOME)$/bin$/ant
-.ENDIF
-
 .IF "$(ANT_BUILDFILE)"==""
 ANT_BUILDFILE=build.xml
 .ENDIF
@@ -139,6 +135,13 @@
 CLASSPATH!:=$(CLASSPATH)$(PATH_SEPERATOR)$(ANT_CLASSPATH)$(PATH_SEPERATOR)$(JAVA_HOME)$/lib$/tools.jar
 .EXPORT : CLASSPATH
 .EXPORT : PATH
+
+# Debian: local hack to only use libant1.6-java. see /usr/share/doc/libant1.6-java/README.Debian
+# FIXME: conditionalize this and don't hardcode it. configure? (configure needs to be fixed anyhow
+# because we are not allowed to use $ANT_HOME/bin/ant in any way)
+ANT_HOME:=/usr/share/ant1.6
+ANT_LIB:=$(ANT_HOME)$/lib
+ANT:=$(JAVAI) $(JAVACPS) $(CLASSPATH)$(PATH_SEPERATOR)$(ANT_LIB)/ant-launcher.jar -Dant.home=$(ANT_HOME) org.apache.tools.ant.Main
 
 # --- TARGETS -----------------------------------------------------
 
