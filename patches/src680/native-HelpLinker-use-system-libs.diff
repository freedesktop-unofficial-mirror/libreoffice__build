--- config_office/configure.in.orig	2006-08-16 16:26:34.000000000 +0200
+++ config_office/configure.in	2006-08-16 16:57:40.000000000 +0200
@@ -3089,6 +3089,11 @@
 	  fi
        fi
     fi
+  if test "$JAVAAOTCOMPILER" != ""; then
+    DB_JAR_SO="`dirname $DB_JAR`/lib`basename $DB_JAR`.so"
+    AC_CHECK_FILE($DB_JAR_SO, [AC_MSG_RESULT([yes])],
+      [AC_MSG_RESULT([no. will be built.]); unset DB_JAR_SO])
+  fi
     SCPDEFS="$SCPDEFS -DSYSTEM_DB"
 else
     AC_MSG_RESULT([internal])
@@ -3101,6 +3106,7 @@
 AC_SUBST(DB_CPPLIB)
 AC_SUBST(DB_INCLUDES)
 AC_SUBST(DB_JAR)
+AC_SUBST(DB_JAR_SO)
 
 dnl ===================================================================
 dnl Check for system hsqldb
@@ -3188,6 +3194,11 @@
           AC_CHECK_FILE($XML_APIS_JAR, [],
                [AC_MSG_ERROR(xml-apis.jar replacement not found.)], [])
         fi
+  if test "$JAVAAOTCOMPILER" != ""; then
+    XML_APIS_JAR_SO="`dirname $XML_APIS_JAR`/lib`basename $XML_APIS_JAR`.so"
+    AC_CHECK_FILE($XML_APIS_JAR_SO, [AC_MSG_RESULT([yes])],
+      [AC_MSG_RESULT([no. will be built.]); unset XML_APIS_JAR_SO])
+  fi
 else
     AC_MSG_RESULT([internal])
     SYSTEM_XML_APIS=NO
@@ -3195,6 +3206,7 @@
 fi
 AC_SUBST(SYSTEM_XML_APIS)
 AC_SUBST(XML_APIS_JAR)
+AC_SUBST(XML_APIS_JAR_SO)
 
 dnl ===================================================================
 dnl Check for system xerces
@@ -3218,6 +3230,11 @@
           AC_CHECK_FILE($XERCES_JAR, [],
                [AC_MSG_ERROR(xercesImpl.jar replacement not found.)], [])
         fi
+  if test "$JAVAAOTCOMPILER" != ""; then
+    XERCES_JAR_SO="`dirname $XERCES_JAR`/lib`basename $XERCES_JAR`.so"
+    AC_CHECK_FILE($XERCES_JAR_SO, [AC_MSG_RESULT([yes])],
+      [AC_MSG_RESULT([no. will be built.]); unset XERCES_JAR_SO])
+  fi
 else
     AC_MSG_RESULT([internal])
     SYSTEM_XERCES=NO
@@ -3225,6 +3242,7 @@
 fi
 AC_SUBST(SYSTEM_XERCES)
 AC_SUBST(XERCES_JAR)
+AC_SUBST(XERCES_JAR_SO)
 
 dnl ===================================================================
 dnl Check for system xalan
@@ -3330,12 +3348,18 @@
           AC_CHECK_FILE($XT_JAR, [],
                [ AC_MSG_ERROR(xt.jar replacement not found.)], [])
         fi
+  if test "$JAVAAOTCOMPILER" != ""; then
+    XT_JAR_SO="`dirname $XT_JAR`/lib`basename $XT_JAR`.so"
+    AC_CHECK_FILE($XT_JAR_SO, [AC_MSG_RESULT([yes])],
+      [AC_MSG_RESULT([no. will be built.]); unset XT_JAR_SO])
+  fi
 else
     AC_MSG_RESULT([internal])
     SYSTEM_XT=NO
 fi
 AC_SUBST(SYSTEM_XT)
 AC_SUBST(XT_JAR)
+AC_SUBST(XT_JAR_SO)
 
 dnl ===================================================================
 dnl Check for system libxslt
--- config_office/set_soenv.in.orig	2006-08-16 16:58:20.000000000 +0200
+++ config_office/set_soenv.in	2006-08-16 16:59:43.000000000 +0200
@@ -1796,19 +1796,23 @@
 ToFile( "DB_CPPLIB",         "@DB_CPPLIB@",        "e" );
 ToFile( "DB_INCLUDES",       "@DB_INCLUDES@",      "e" );
 ToFile( "DB_JAR",            "@DB_JAR@",           "e" );
+ToFile( "DB_JAR_SO",         "@DB_JAR_SO@",        "e" );
 ToFile( "SYSTEM_HSQLDB",     "@SYSTEM_HSQLDB@",    "e" );
 ToFile( "HSQLDB_JAR",        "@HSQLDB_JAR@",       "e" );
 ToFile( "SYSTEM_BSH",        "@SYSTEM_BSH@",       "e" );
 ToFile( "BSH_JAR",           "@BSH_JAR@",          "e" );
 ToFile( "SYSTEM_XML_APIS",   "@SYSTEM_XML_APIS@",  "e" );
 ToFile( "XML_APIS_JAR",      "@XML_APIS_JAR@",     "e" );
+ToFile( "XML_APIS_JAR_SO",   "@XML_APIS_JAR_SO@",  "e" );
 ToFile( "SYSTEM_XERCES",     "@SYSTEM_XERCES@",    "e" );
 ToFile( "XERCES_JAR",        "@XERCES_JAR@",       "e" );
+ToFile( "XERCES_JAR_SO",     "@XERCES_JAR_SO@",    "e" );
 ToFile( "SYSTEM_XALAN",      "@SYSTEM_XALAN@",     "e" );
 ToFile( "XALAN_JAR",         "@XALAN_JAR@",        "e" );
 ToFile( "SERIALIZER_JAR",    "@SERIALIZER_JAR@",   "e" );
 ToFile( "SYSTEM_XT",         "@SYSTEM_XT@",        "e" );
 ToFile( "XT_JAR",            "@XT_JAR@",           "e" );
+ToFile( "XT_JAR_SO",         "@XT_JAR_SO@",        "e" );
 ToFile( "SYSTEM_SABLOT",     "@SYSTEM_SABLOT@",    "e" );
 ToFile( "SABLOT_LIBS",       "@SABLOT_LIBS@",      "e" );
 ToFile( "SYSTEM_ODBC_HEADERS","@SYSTEM_ODBC_HEADERS@","e" );
--- xmlhelp/source/com/sun/star/help/aottarget.mk	19 Jul 2006 09:52:58 -0000	1.3
+++ xmlhelp/source/com/sun/star/help/aottarget.mk	27 Jul 2006 11:23:24 -0000
@@ -43,7 +43,18 @@
 
 .IF "$(SYSTEM_DB)" == "YES"
 AOTFILES+= $(LB)$/libdb.jar.so
-$(AOTTARGETN) : $(LB)$/libdb.jar.so
+.ENDIF
+
+.IF "$(SYSTEM_XT)" == "YES"
+AOTFILES+= $(LB)$/libxt.jar.so
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+AOTFILES+= $(LB)$/libxml-apis.jar.so
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+AOTFILES+= $(LB)$/libxercesImpl.jar.so
 .ENDIF
 
 AOTLINKFLAGS=$(subst,.so, $(subst,$(LB)$/lib,-l $(AOTFILES)))
@@ -52,9 +63,37 @@
 	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
 	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
 
-$(LB)$/libdb.jar.so:
+$(LB)$/libdb.jar.so : $(DB_JAR)
+.IF "$(DB_JAR_SO)" != ""
+	$(COPY) $(DB_JAR_SO) $@
+.ELSE
+	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
+.ENDIF
+
+$(LB)$/libxt.jar.so : $(XT_JAR)
+.IF "$(XT_JAR_SO)" != ""
+	$(COPY) $(XT_JAR_SO) $@
+.ELSE
+	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
+.ENDIF
+
+$(LB)$/libxml-apis.jar.so : $(XML_APIS_JAR)
+.IF "$(XML_APIS_JAR_SO)" != ""
+	$(COPY) $(XML_APIS_JAR_SO) $@
+.ELSE
+	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
+.ENDIF
+
+$(LB)$/libxercesImpl.jar.so : $(XERCES_JAR)
+.IF "$(XERCES_JAR_SO)" != ""
+	$(COPY) $(XERCES_JAR_SO) $@
+.ELSE
 	$(JAVAAOTCOMPILER) --classpath=. -shared -fPIC -Wl,-Bsymbolic -O2 \
-	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $(LB)$/libdb.jar.so $(DB_JAR)
+	-fno-bounds-check -fno-store-check -findirect-dispatch -fjni -o $@ $<
+.ENDIF
 
 $(AOTTARGETN) : $(JARTARGETN) $(AOTFILES)
 	$(JAVAAOTCOMPILER) --main=$(AOTTARGET) -o $(BIN)$/$(AOTTARGET) \
