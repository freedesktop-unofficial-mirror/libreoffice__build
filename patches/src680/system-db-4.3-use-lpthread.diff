--- config_office/configure.in.ark	2005-08-01 01:43:28.000000000 +0200
+++ config_office/configure.in	2005-08-01 01:44:55.000000000 +0200
@@ -2503,11 +2503,10 @@
     else
        AC_MSG_RESULT([no. you need at least db 4.1])
     fi
-    # does not work :/
-    #AC_CHECK_LIB(db, db_create, [],
-    #  [AC_MSG_ERROR([db library not installed or functional])], [])
-    AC_HAVE_LIBRARY(db, [],
-      [AC_MSG_ERROR([db not installed or functional])], [])
+    dnl Workaround for a db 4.3 bug -- libdb-4.3 uses pthreads without linking to the lib
+    LIBS="$LIBS -lpthread"
+    AC_CHECK_LIB(db, db_create, [],
+      [AC_MSG_ERROR([db library not installed or functional])], [])
      if test "$SOLAR_JAVA" = "TRUE"; then
        if test -z $DB_JAR; then
          # three different naming methods *grumble* Are there even more?
