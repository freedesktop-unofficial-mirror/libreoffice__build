Index: fpicker/prj/build.lst
===================================================================
RCS file: /cvs/gsl/fpicker/prj/build.lst,v
retrieving revision 1.6
Index: fpicker/prj/build.lst
===================================================================
--- fpicker/prj/build.lst.ark	2006-11-02 12:36:21.000000000 +0100
+++ fpicker/prj/build.lst	2006-11-02 12:37:44.000000000 +0100
@@ -3,7 +3,9 @@ fp	fpicker\inc							nmake	-	all	
 fp	fpicker\source\generic				nmake	-	all	fp_generic NULL
 fp	fpicker\source\office				nmake	-	all	fp_office NULL
 fp	fpicker\source\unx\gnome			nmake	-	u	fp_gnome_filepicker NULL
+fp	fpicker\source\unx\kde_unx			nmake	-	u	fp_unx_common NULL
+fp	fpicker\source\unx\kde				nmake	-	u	fp_unx_kde_filepicker	NULL
 fp	fpicker\source\win32\filepicker		nmake	-	w	fp_win32_filepicker NULL
 fp	fpicker\source\win32\folderpicker	nmake	-	w	fp_win32_folderpicker NULL
 fp  fpicker\source\win32\misc			nmake	-	w	fp_win32_misc fp_win32_filepicker.w fp_win32_folderpicker.w NULL
-fp	fpicker\util				nmake	-	all	fp_util fp_win32_filepicker.w fp_win32_misc.w fp_win32_folderpicker.w NULL
+fp	fpicker\util				nmake	-	all	fp_util fp_gnome_filepicker.u fp_unx_common.u fp_unx_kde_filepicker.u fp_win32_filepicker.w fp_win32_misc.w fp_win32_folderpicker.w NULL
Index: fpicker/prj/d.lst
===================================================================
--- fpicker/prj/d.lst.orig	2004-07-31 19:07:38.523658664 +0200
+++ fpicker/prj/d.lst	2004-07-31 19:13:36.267273368 +0200
@@ -1,5 +1,6 @@
 ..\%__SRC%\bin\*.res %_DEST%\bin%_EXT%\*.res
 ..\%__SRC%\bin\*.dll %_DEST%\bin%_EXT%\*.dll
+..\%__SRC%\bin\kdefilepicker %_DEST%\bin%_EXT%\kdefilepicker
 ..\%__SRC%\lib\*.so %_DEST%\lib%_EXT%\*.so
 ..\%__SRC%\lib\*.dylib %_DEST%\lib%_EXT%\*.dylib
 
Index: fpicker/util/makefile.mk
===================================================================
RCS file: /cvs/gsl/fpicker/util/makefile.mk,v
retrieving revision 1.9
diff -u -r1.9 makefile.mk
--- fpicker/util/makefile.mk	17 Dec 2004 13:27:40 -0000	1.9
+++ fpicker/util/makefile.mk	7 Jan 2005 17:59:07 -0000
@@ -105,6 +105,38 @@
 DEF1EXPORTFILE=	exports.dxp
 
 .ENDIF # "$(GUI)"=="WNT"
+
+.IF "$(ENABLE_KDE)" == "TRUE"
+SHL3TARGET=fps_kde
+SHL3STDLIBS=$(COMMON_LIBS) \
+			$(SVTOOLLIB)
+SHL3DEPN=
+SHL3IMPLIB=i$(SHL1TARGET)
+SHL3LIBS=$(SLB)$/fps_kde.lib
+
+SHL3OBJS=$(SLOFILES)
+SHL3DEF=$(MISC)$/$(SHL3TARGET).def
+
+DEF3NAME=$(SHL3TARGET)
+DEF3EXPORTFILE=	exports.dxp
+
+# kdefilepicker binary
+
+APP4TARGET=kdefilepicker
+
+APP4STDLIBS=\
+			$(SALLIB) \
+			$(KDE_LIBS) -lkio
+
+APP4OBJS=\
+			$(SLO)$/kdecommandthread.obj \
+			$(SLO)$/kdefilepicker.obj \
+			$(SLO)$/kdefilepicker.moc.obj \
+			$(SLO)$/kdefpmain.obj \
+			$(SLO)$/kdemodalityfilter.obj
+
+.ENDIF # "$(ENABLE_KDE)" == "TRUE"
+
 
 # --- fop dynlib --------------------------------------------------
 
