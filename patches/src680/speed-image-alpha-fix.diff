--- vcl/source/gdi/bitmapex.cxx	17 Sep 2006 11:57:54 -0000	1.22
+++ vcl/source/gdi/bitmapex.cxx	22 Mar 2007 15:29:42 -0000
@@ -162,6 +162,9 @@ BitmapEx::BitmapEx( const Bitmap& rBmp, 
 {
     DBG_ASSERT( !rAlphaMask || rBmp.GetSizePixel() == rAlphaMask.GetSizePixel(),
                 "BitmapEx::BitmapEx(): size mismatch for bitmap and alpha mask." );
+
+    if ( aBitmap.GetBitCount() < aMask.GetBitCount() )
+        aBitmap.Convert( BMP_CONVERSION_24BIT );
 }
 
 // ------------------------------------------------------------------
