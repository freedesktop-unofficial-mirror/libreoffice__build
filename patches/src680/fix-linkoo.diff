--- solenv/bin/linkoo	2007-07-16 16:20:23.000000000 +0200
+++ solenv/bin/linkoo	2007-07-16 18:38:52.000000000 +0200
@@ -61,7 +61,7 @@ export OOO_DISABLE_RECOVERY=1
 $program_dir = 'program';
 $program_dir = 'MacOS' if ($ENV{OS} eq 'MACOSX');
 
-my @exceptions = ( 'cppuhelper', 'configmgr2', 'sunjavaplugin' );
+my @exceptions = ( 'cppuhelper', 'configmgr2', 'sunjavaplugin', 'libjvmfwk' );
 
 %replaceable = (
 	$program_dir => '\.so',
@@ -154,18 +154,12 @@ sub do_link($$$$@)
     my $dest_name = shift;
     my $dont_check_link = shift;
 
-	$is_link=0;
-	$is_versioned_lib=0;
+    my $is_link = 0;
     if (-l "$dest/$dest_name" ) {
-		$is_link=1;
-		my $link = readlink ("$dest/$dest_name");
-		my ($stripped_link) = $link =~ /(.*)\.\d+\.\d+/;		
-	    if( $stripped_link eq $dest_name ) {
-			$is_versioned_lib=1;
-		}
-	}			
-		
-    if ($is_link && not $is_versioned_lib ) {
+	$is_link = 1;
+    }			
+
+    if ( $is_link ) {
 	my $link = readlink ("$dest/$dest_name");
 	if ($link =~ /^\//) { # Absolute path
 	    if (!$dry_run) {
@@ -183,11 +177,6 @@ sub do_link($$$$@)
 	check_create_linked ($dest);
 	if (!$dry_run) {
 	    # move / write the link
-		if( $is_versioned_lib ) {
-			$link = readlink ("$dest/$dest_name");
-			rename ( "$dest/$link", "$dest/linked/$link" ) ||
-			defined $dont_check_link || die "Failed rename of $dest/$link: $!";
-		}
 	    rename ("$dest/$dest_name", "$dest/linked/$dest_name") ||
 		defined $dont_check_link || die "Failed rename of $dest/$dest_name: $!";
 
@@ -392,3 +381,5 @@ if (!-f "$OOO_INSTALL/" . $program_dir .
 }
 
 evilness ('do');
+
+print "\nlinkoo finished, please don't forget to source ooenv before ./soffice.\n";
