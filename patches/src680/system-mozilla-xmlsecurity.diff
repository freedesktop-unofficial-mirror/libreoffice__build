Index: source/xmlsec/nss/makefile.mk
===================================================================
RCS file: /cvs/xml/xmlsecurity/source/xmlsec/nss/makefile.mk,v
retrieving revision 1.2
diff -u -p -r1.2 makefile.mk
--- xmlsecurity/source/xmlsec/nss/makefile.mk	23 Jul 2004 03:00:41 -0000	1.2
+++ xmlsecurity/source/xmlsec/nss/makefile.mk	28 Oct 2004 08:43:05 -0000
@@ -80,11 +80,15 @@ LIBTARGET=NO
 
 .IF "$(CRYPTO_ENGINE)" == "nss"
 
+.IF "$(SYSTEM_MOZILLA)" == "YES"
+CFLAGS+=-DSYSTEM_MOZILLA
+.ELSE
 MOZ_INC = $(SOLARVERSION)$/$(INPATH)$/inc$(UPDMINOREXT)$/mozilla
+.ENDIF
+
 NSS_INC = $(MOZ_INC)$/nss
 NSPR_INC = $(MOZ_INC)$/nspr
 
-
 .IF "$(GUI)"=="UNX"
 .IF "$(COMNAME)"=="sunpro5"
 CFLAGS += -features=tmplife
Index: source/xmlsec/nss/seinitializer_nssimpl.cxx
===================================================================
RCS file: /cvs/xml/xmlsecurity/source/xmlsec/nss/seinitializer_nssimpl.cxx,v
retrieving revision 1.11
diff -u -p -r1.11 seinitializer_nssimpl.cxx
--- xmlsecurity/source/xmlsec/nss/seinitializer_nssimpl.cxx	5 Aug 2004 07:13:30 -0000	1.11
+++ xmlsecurity/source/xmlsec/nss/seinitializer_nssimpl.cxx	28 Oct 2004 08:43:06 -0000
@@ -101,6 +101,9 @@
 #include "nspr.h"
 #include "prtypes.h"
 #include "pk11func.h"
+#ifdef SYSTEM_MOZILLA
+#include "nssrenam.h"
+#endif
 #include "cert.h"
 #include "cryptohi.h"
 #include "certdb.h"
Index: source/xmlsec/nss/x509certificate_nssimpl.hxx
===================================================================
RCS file: /cvs/xml/xmlsecurity/source/xmlsec/nss/x509certificate_nssimpl.hxx,v
retrieving revision 1.3
diff -u -p -r1.3 x509certificate_nssimpl.hxx
--- xmlsecurity/source/xmlsec/nss/x509certificate_nssimpl.hxx	15 Jul 2004 08:12:10 -0000	1.3
+++ xmlsecurity/source/xmlsec/nss/x509certificate_nssimpl.hxx	28 Oct 2004 08:43:07 -0000
@@ -94,6 +94,9 @@
 #include <com/sun/star/security/XCertificate.hpp>
 #endif
 
+#ifdef SYSTEM_MOZILLA
+#include "nssrenam.h"
+#endif
 #include "cert.h"
 
 class X509Certificate_NssImpl : public ::cppu::WeakImplHelper2<
