Index: config_office/configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.85
diff -u -r1.85 configure.in
--- config_office/configure.in	18 Jan 2005 16:13:20 -0000	1.85
+++ config_office/configure.in	4 Feb 2005 12:06:30 -0000
@@ -113,6 +120,10 @@
 [  --enable-gtk            Determines whether to use Gtk+ vclplug on platforms
                           where Gtk+ is available.
 ],,)
+AC_ARG_ENABLE(gnome-vfs,
+[  --enable-gnome-vfs      Determines whether to use the Gnome Virtual Filing
+			  System on platforms where that VFS is available
+],,)
 AC_ARG_ENABLE(static-gtk,
 [  --enable-static-gtk:    Modules that are linked against gtk libraries use
                           the static libraries instead of the dynamic ones. 
@@ -2502,6 +2605,23 @@
 AC_SUBST(ENABLE_KDE)
 
 dnl ===================================================================
+dnl Gnome VFS check
+dnl ===================================================================
+
+ENABLE_GNOMEVFS=""
+AC_MSG_CHECKING([whether to enable GNOME VFS support])
+if test "x$enable_gnome_vfs" == "xyes"; then
+    ENABLE_GNOMEVFS="TRUE"
+    AC_MSG_RESULT([yes])
+    PKG_CHECK_MODULES( GNOMEVFS, gnome-vfs-2.0 )
+else
+    AC_MSG_RESULT([no])
+fi
+AC_SUBST(ENABLE_GNOMEVFS)
+AC_SUBST(GNOMEVFS_CFLAGS)
+AC_SUBST(GNOMEVFS_LIBS)
+
+dnl ===================================================================
 dnl Check whether the gtk 2.0 libraries are available.
 dnl ===================================================================
 



Index: config_office/set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.37
diff -u -r1.37 set_soenv.in
--- config_office/set_soenv.in	18 Jan 2005 16:13:37 -0000	1.37
+++ config_office/set_soenv.in	4 Feb 2005 12:09:35 -0000
@@ -1429,6 +1436,9 @@
 ToFile( "GTK_CFLAGS",        "@GTK_CFLAGS@",       "e" );
 ToFile( "GTK_LIBS",          "@GTK_LIBS@",         "e" );
 ToFile( "ENABLE_STATIC_GTK", "@ENABLE_STATIC_GTK@", "e" );
+ToFile( "ENABLE_GNOMEVFS",   "@ENABLE_GNOMEVFS@",  "e" );
+ToFile( "GNOMEVFS_CFLAGS",   "@GNOMEVFS_CFLAGS@",  "e" );
+ToFile( "GNOMEVFS_LIBS",     "@GNOMEVFS_LIBS@",    "e" );
 ToFile( "ENABLE_KDE",        "@ENABLE_KDE@",       "e" );
 ToFile( "KDE_CFLAGS",        "@KDE_CFLAGS@",       "e" );
 ToFile( "KDE_LIBS",          "@KDE_LIBS@",         "e" );
