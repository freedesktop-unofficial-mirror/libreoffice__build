--- desktop/source/deployment/makefile.mk	22 Mar 2005 11:20:10 -0000	1.6.56.1
+++ desktop/source/deployment/makefile.mk	27 Jan 2005 10:20:30 -0000	1.6
@@ -99,9 +99,8 @@
         $(UNOTOOLSLIB) \
         $(XMLSCRIPTLIB) \
         $(BERKELEYLIB) \
+        $(BERKELEYCPPLIB) \
         $(SVLLIB)
-#        $(BERKELEYCPPLIB) \
-
 
 SHL1DEPN =
 SHL1IMPLIB = i$(TARGET)
--- desktop/source/deployment/inc/dp_persmap.h	21 Mar 2005 13:09:47 -0000	1.6.90.1
+++ desktop/source/deployment/inc/dp_persmap.h	7 Dec 2004 10:51:57 -0000	1.6
@@ -63,10 +63,13 @@
 #define INCLUDED_DP_PERSMAP_H
 
 #include "rtl/ustring.hxx"
+#ifdef SYSTEM_DB3
+#include <db3/db_cxx.h>
+#else
+#include "berkeleydb/db_cxx.h"
+#endif
-#include "db.hxx"
 #include <hash_map>
 
-using namespace berkeleydbproxy;
 
 namespace dp_misc
 {
--- desktop/source/deployment/misc/dp_persmap.cxx	21 Mar 2005 13:09:48 -0000	1.6.90.1
+++ desktop/source/deployment/misc/dp_persmap.cxx	7 Dec 2004 10:53:12 -0000	1.6
@@ -147,7 +147,7 @@
         
         int err = m_db.open(
             // xxx todo: DB_THREAD, DB_DBT_MALLOC currently not used
+            pcstr_sysPath, 0, DB_HASH, flags/* | DB_THREAD*/, 0664 /* fs mode */ );
-            0, pcstr_sysPath, 0, DB_HASH, flags/* | DB_THREAD*/, 0664 /* fs mode */ );
         if (err != 0)
             throw_rtexc(err);
     }
@@ -162,7 +162,7 @@
 {
     try {
         // xxx todo: DB_THREAD, DB_DBT_MALLOC currently not used
+        int err = m_db.open( 0, 0, DB_HASH, DB_CREATE/* | DB_THREAD*/, 0 );
-        int err = m_db.open( 0, 0, 0, DB_HASH, DB_CREATE/* | DB_THREAD*/, 0 );
         if (err != 0)
             throw_rtexc(err);
     }
@@ -255,7 +255,7 @@
     try {
         OString key( OUStringToOString( key_, RTL_TEXTENCODING_UTF8 ) );
         Dbt dbKey( const_cast< sal_Char * >(key.getStr()), key.getLength() );
+        int err = m_db.del( 0, &dbKey, 0 );
-        int err = m_db.del( &dbKey, 0 );
         if (err == 0) {
             if (flush_immediately) {
                 err = m_db.sync(0);
--- desktop/source/deployment/misc/makefile.mk	21 Mar 2005 13:09:49 -0000	1.5.138.1
+++ desktop/source/deployment/misc/makefile.mk	8 Sep 2004 16:48:52 -0000	1.5
@@ -85,8 +85,7 @@
         $(SLO)$/dp_log.obj \
         $(SLO)$/dp_persmap.obj \
         $(SLO)$/dp_servicefactory.obj \
+        $(SLO)$/dp_services.obj
-        $(SLO)$/dp_services.obj       \
-        $(SLO)$/db.obj
 
 .INCLUDE : ..$/target.pmk
 .INCLUDE : target.mk
--- desktop/source/pkgchk/makefile.mk	22 Mar 2005 11:20:11 -0000	1.11.138.2
+++ desktop/source/pkgchk/makefile.mk	8 Sep 2004 16:50:50 -0000	1.11
@@ -111,13 +111,12 @@
 APP2OBJS = \
         $(MYAPP2OBJS) \
         $(OBJ)$/lockfile.obj \
-		$(SLO)$/db.obj          \
         $(SLO)$/dp_misc.obj
 
 APP2STDLIBS = \
         $(APP1STDLIBS) \
+        $(BERKELEYLIB) \
+        $(BERKELEYCPPLIB)
-        $(BERKELEYLIB)
-#        $(BERKELEYCPPLIB)
 
 APP2TARGET = pkgchk
 
--- desktop/source/pkgchk/pkgchk_balancing.cxx	21 Mar 2005 13:09:50 -0000	1.7.62.1
+++ desktop/source/pkgchk/pkgchk_balancing.cxx	21 Jan 2005 17:14:29 -0000	1.7
@@ -73,7 +73,11 @@
 #include "com/sun/star/sdbc/XRow.hpp"
 #include "com/sun/star/ucb/NameClash.hpp"
 #include "com/sun/star/util/DateTime.hpp"
+#ifdef SYSTEM_DB3
+#include <db3/db_cxx.h>
+#else
+#include "berkeleydb/db_cxx.h"
+#endif
-#include <db.hxx>
 #include <vector>
 #include <hash_set>
 
@@ -81,7 +85,6 @@
 using namespace ::com::sun::star::ucb;
 using namespace ::com::sun::star::uno;
 using namespace ::unopkg;
-using namespace berkeleydbproxy;
 using ::rtl::OUString;
 
 namespace {
@@ -179,7 +182,6 @@
         OSL_ASSERT( rc == ::osl::File::E_None );
         Db packages_db(0, 0);
         int err = packages_db.open(
-            0,
             ::rtl::OUStringToOString(
                 packages_db_file, osl_getThreadTextEncoding() ).getStr(), 0,
             DB_RECNO, DB_CREATE, 0664 /* fs mode */ );
--- desktop/source/pkgchk/msi/makefile.mk	22 Mar 2005 11:20:12 -0000	1.2.192.2
+++ desktop/source/pkgchk/msi/makefile.mk	11 Jun 2004 12:22:47 -0000	1.2
@@ -78,8 +78,7 @@
         $(OBJ)$/pkgchk_balancing.obj \
         $(OBJ)$/pkgchk_app.obj \
         $(OBJ)$/lockfile.obj \
+        $(SLO)$/dp_misc.obj
-        $(SLO)$/dp_misc.obj  \
-		$(SLO)$/db.obj
 
 APP1STDLIBS = \
         $(SALLIB) \
@@ -89,8 +88,8 @@
         $(UCBHELPERLIB) \
         $(UNOTOOLSLIB) \
         $(TOOLSLIB) \
+        $(BERKELEYLIB) \
+        $(BERKELEYCPPLIB)
-        $(BERKELEYLIB)
-#        $(BERKELEYCPPLIB)
 
 APP1TARGET = $(TARGET)

--- scp2/source/ooo/file_library_ooo.scp	11 Apr 2005 09:33:24 -0000	1.98
+++ scp2/source/ooo/file_library_ooo.scp	18 Apr 2005 10:50:05 -0000
@@ -436,7 +436,7 @@
     Styles = (PACKED);
     Dir = gid_Dir_Program;
   #ifdef UNX
+    Name = STRING(CONCAT2(libdb-3.2,UNXSUFFIX));
-    Name = STRING(CONCAT2(libdb-4.2,UNXSUFFIX));
   #else
     Name = "libdb42.dll";
   #endif
@@ -447,7 +447,7 @@
     TXT_FILE_BODY;
     Styles = (PACKED);
     Dir = gid_Dir_Program;
+    Name = STRING(CONCAT2(libdb_cxx-3.2,UNXSUFFIX));
-    Name = STRING(CONCAT2(libdb_cxx-4.2,UNXSUFFIX));
 End
 #endif
 
@@ -470,12 +470,12 @@
     Dir = gid_Dir_Program;
   #ifdef UNX
     #ifdef MACOSX
+        Name = "libdb_java-3.2.jnilib";
-        Name = "libdb_java-4.2.jnilib";
     #else
+    	Name = STRING(CONCAT2(libdb_java-3.2,UNXSUFFIX));
-    	Name = STRING(CONCAT2(libdb_java-4.2,UNXSUFFIX));
     #endif 
  #else
+    Name = "libdb_java32.dll";
-    Name = "libdb_java42.dll";
   #endif
 End
 
--- solenv/inc/libs.mk	13 Apr 2005 14:20:52 -0000
+++ solenv/inc/libs.mk	11 Apr 2005 09:30:38 -0000	1.88
@@ -212,8 +212,8 @@
 BERKELEYLIB=-ldb
 BERKELEYCPPLIB=-ldb_cxx
 .ELSE
+BERKELEYLIB=-ldb-3.2
+BERKELEYCPPLIB=-ldb_cxx-3.2
-BERKELEYLIB=-ldb-4.2
-BERKELEYCPPLIB=-ldb_cxx-4.2
 .ENDIF
 CURLLIB=-lcurl
 SFX2LIB=-lsfx$(OFFICEUPD)$(DLLPOSTFIX)
@@ -410,7 +410,7 @@
 ZLIB3RDLIB=$(LIBPRE) zlib.lib
 JPEG3RDLIB=$(LIBPRE) jpeglib.lib
 NEON3RDLIB=$(LIBPRE) neon.lib
+BERKELEYLIB=$(LIBPRE) libdb32.lib
-BERKELEYLIB=$(LIBPRE) libdb42.lib
 BERKELEYCPPLIB=
 CURLLIB=$(LIBPRE) libcurl.lib
 CHAOSLIB=$(LIBPRE) ichaos.lib
--- xmlhelp/inc/provider/databases.hxx	19 Mar 2005 17:31:47 -0000	1.24.34.1
+++ xmlhelp/inc/provider/databases.hxx	8 Sep 2004 16:13:58 -0000	1.24
@@ -102,11 +102,7 @@
 // Forward declaration
 
 
+class Db;
-namespace berkeleydbproxy {
-    
-    class Db;
-    
-}
 
 
 namespace chelp {
@@ -168,7 +164,7 @@
 		public:
 			
 			KeywordElement( Databases* pDatabases,
+							Db* pDb,
-							berkeleydbproxy::Db* pDb,
 							rtl::OUString& key,
 							rtl::OUString& ids );
 			
@@ -179,7 +175,7 @@
 			com::sun::star::uno::Sequence< rtl::OUString > listAnchor;
 			com::sun::star::uno::Sequence< rtl::OUString > listTitle;
 
+			void init( Databases *pDatabases,Db* pDb,const rtl::OUString& ids );
-			void init( Databases *pDatabases,berkeleydbproxy::Db* pDb,const rtl::OUString& ids );
 		};
 
 		
@@ -264,7 +260,7 @@
 		KeywordInfo* getKeyword( const rtl::OUString& Module,
 								 const rtl::OUString& Language );
 		
+		Db* getBerkeley( const rtl::OUString& Module,
-		berkeleydbproxy::Db* getBerkeley( const rtl::OUString& Module,
 						 const rtl::OUString& Language,
 						 bool helpText = false );
 		
@@ -390,7 +386,7 @@
 		rtl::OUString          m_aInstallDirectoryWithoutEncoding; // a work around for a Sablot bug.
 		rtl::OUString          m_aInstallDirectoryAsSystemPath;    // Installation directory
 		
+		typedef std::hash_map< rtl::OUString,Db*,ha,eq >   DatabasesTable;
-		typedef std::hash_map< rtl::OUString,berkeleydbproxy::Db*,ha,eq >   DatabasesTable;
 		DatabasesTable m_aDatabases;         // Language and module dependent databases
 		
 		typedef  std::hash_map< rtl::OUString,rtl::OUString,ha,eq > LangSetTable; 
--- xmlhelp/source/com/sun/star/help/CreateDb.java	21 Mar 2005 13:31:46 -0000	1.3.34.1
+++ xmlhelp/source/com/sun/star/help/CreateDb.java	30 Aug 2004 17:23:30 -0000	1.3
@@ -28,7 +28,7 @@
 		table.set_error_stream(System.err);
 		table.set_errpfx("HelpAccess");
 		try {
+			table.open(dbName, null, Db.DB_BTREE, Db.DB_RDONLY, 0644);
-			table.open(null,dbName, null, Db.DB_BTREE, Db.DB_RDONLY, 0644);
 			Dbc cursor = table.cursor(null, 0);
 
 			StringDbt key = new StringDbt();
@@ -111,7 +111,6 @@
 			table.set_error_stream(System.err);
 			table.set_errpfx("AccessExample");
 			table.open(
-                null,
 				"e:/rvp603b/help/helpaccess.db",
 				null,
 				Db.DB_HASH,
--- xmlhelp/source/com/sun/star/help/HelpDatabases.java	21 Mar 2005 13:31:46 -0000	1.21.34.1
+++ xmlhelp/source/com/sun/star/help/HelpDatabases.java	30 Aug 2004 17:24:23 -0000	1.21
@@ -238,7 +238,7 @@
 				table = new Db( null,0 );
 
 				String tablePath = _installDirectory + key + ".db";
+				table.open( tablePath,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
-				table.open( null,tablePath,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
 				_dbHash.put( key,table );
             }
             catch( DbException e )
@@ -273,7 +273,7 @@
 				table = new Db( null,0 );
 
 				String tablePath = _installDirectory + key + ".ht";
+				table.open( tablePath,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
-				table.open( null,tablePath,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
 				_dbHash.put( key,table );
             }
             catch( DbException e )
@@ -516,7 +516,7 @@
 				String fileName = HelpDatabases.getInstallDirectory() + keyStr + ".key";
         		Db table = new Db( null,0 );
 				System.err.println( fileName );
+				table.open( fileName,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
-				table.open( null,fileName,null,Db.DB_BTREE,Db.DB_RDONLY,0644 );
 				Dbc cursor = table.cursor( null,0 );
 				StringDbt key = new StringDbt();
 				StringDbt data = new StringDbt();
--- xmlhelp/source/com/sun/star/help/HelpIndexer.java	21 Mar 2005 13:31:47 -0000	1.12.22.1
+++ xmlhelp/source/com/sun/star/help/HelpIndexer.java	27 Jan 2005 10:07:02 -0000	1.12
@@ -191,7 +191,7 @@
 			String fileName =
 				installDirectory + _language + File.separator + _module + ".db";
 
+			table.open(fileName, null, Db.DB_BTREE, Db.DB_RDONLY, 0644);
-			table.open(null,fileName, null, Db.DB_BTREE, Db.DB_RDONLY, 0644);
 			Dbc cursor = table.cursor(null, 0);
 			StringDbt key = new StringDbt();
 			StringDbt data = new StringDbt();
@@ -440,7 +440,7 @@
 						+ _module
 						+ ".key";
 
+				table.open(fileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
-				table.open(null,fileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
 
 				for (int i = 0; i < list.length; ++i) {
 					Data data = (Data) _hash.get(list[i]);
@@ -475,7 +475,7 @@
 					+ _module
 					+ ".ht";
 
+			table.open(fileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
-			table.open(null,fileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
 
 			for (int i = 0; i < list.length; ++i) {
 				String data = (String) _hashHelptext.get(list[i]);
--- xmlhelp/source/com/sun/star/help/HelpLinker.java	21 Mar 2005 13:31:47 -0000	1.8.6.1
+++ xmlhelp/source/com/sun/star/help/HelpLinker.java	4 Mar 2005 00:16:08 -0000	1.8
@@ -405,7 +405,7 @@
 		// reopen the helptext file as a Berkeley DB
 		Db helpText = new Db(null, 0);
 		helpTextFile.delete();
+		helpText.open(helpTextFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
-		helpText.open(null,helpTextFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
 
 		File dbBaseFile = File.createTempFile("database", "db");
 		dbBaseFile.deleteOnExit();
@@ -414,7 +414,7 @@
 		// reopen the database file as a Berkeley DB
 		Db dbBase = new Db(null, 0);
 		dbBaseFile.delete();
+		dbBase.open(dbBaseFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
-		dbBase.open(null,dbBaseFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
 
 		File keyWordFile = File.createTempFile("keybase", "key");
 		keyWordFile.deleteOnExit();
@@ -423,7 +423,7 @@
 		// reopen the database file as a Berkeley DB
 		Db keyWord = new Db(null, 0);
 		keyWordFile.delete();
+		keyWord.open(keyWordFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
-		keyWord.open(null,keyWordFileName, null, Db.DB_BTREE, Db.DB_CREATE, 0644);
 		HelpKeyword helpKeyword = new HelpKeyword();
 
 		// now input the hid.lst and store it into a hashmap
--- xmlhelp/source/cxxhelp/provider/databases.cxx	19 Mar 2005 17:31:48 -0000	1.40.26.1
+++ xmlhelp/source/cxxhelp/provider/databases.cxx	17 Nov 2004 10:00:54 -0000	1.40
@@ -59,8 +59,10 @@
  *
  ************************************************************************/
 
+#ifdef SYSTEM_DB3
+#include <db3/db_cxx.h>
+#else
+#include <berkeleydb/db_cxx.h>
-#ifndef BERKELEYDBPROXY_DB_HXX_
-#include "db.hxx"
 #endif
 #ifndef _VOS_DIAGNOSE_HXX_
 #include <vos/diagnose.hxx>
@@ -93,7 +95,6 @@
 #include <algorithm>
 
 using namespace chelp;
-using namespace berkeleydbproxy;
 using namespace com::sun::star::uno;
 using namespace com::sun::star::io;
 using namespace com::sun::star::container;
@@ -541,7 +542,7 @@
 		
 		rtl::OString fileName( fileNameOU.getStr(),fileNameOU.getLength(),osl_getThreadTextEncoding() );
 		
+		if( table->open( fileName.getStr(),0,DB_BTREE,DB_RDONLY,0644 ) )
-		if( table->open( 0,fileName.getStr(),0,DB_BTREE,DB_RDONLY,0644 ) )
 		{
 			table->close( 0 );
 			delete table;
@@ -755,7 +756,7 @@
                                osl_getThreadTextEncoding() );
 		
 		Db table(0,DB_CXX_NO_EXCEPTIONS);
+		if( 0 == table.open( fileName.getStr(),0,DB_BTREE,DB_RDONLY,0644 ) )
-		if( 0 == table.open( 0,fileName.getStr(),0,DB_BTREE,DB_RDONLY,0644 ) )
 		{   
 			std::vector<KeywordInfo::KeywordElement> aVector;
 			Db* idmap = getBerkeley( Database,Language );
--- xmlhelp/source/cxxhelp/provider/makefile.mk	19 Mar 2005 17:31:48 -0000	1.14.34.1
+++ xmlhelp/source/cxxhelp/provider/makefile.mk	8 Sep 2004 16:14:24 -0000	1.14
@@ -102,7 +102,6 @@
 	$(SLO)$/inputstream.obj        \
 	$(SLO)$/debughelper.obj  	   \
 	$(SLO)$/databases.obj          \
-	$(SLO)$/db.obj		           \
 	$(SLO)$/bufferedinputstream.obj
 
 # --- Targets ----------------------------------------------------------
--- xmlhelp/source/cxxhelp/provider/urlparameter.cxx	19 Mar 2005 17:31:49 -0000	1.35.6.1
+++ xmlhelp/source/cxxhelp/provider/urlparameter.cxx	4 Mar 2005 00:16:20 -0000	1.35
@@ -98,8 +98,12 @@
 #include <sablot/shandler.h>
 #endif
 #endif
+#ifdef SYSTEM_DB3
+#include <db3/db_cxx.h>
+#else
+#ifndef _DB_CXX_H_
+#include <berkeleydb/db_cxx.h>
+#endif
-#ifndef BERKELEYDBPROXY_DB_HXX_
-#include "db.hxx"
 #endif
 #ifndef _URLPARAMETER_HXX_
 #include <provider/urlparameter.hxx>
@@ -171,7 +175,6 @@
 using namespace com::sun::star::lang;
 using namespace com::sun::star::ucb;
 using namespace com::sun::star::container;
-using namespace berkeleydbproxy;
 using namespace chelp;
 
 
--- xmlhelp/util/makefile.mk	22 Mar 2005 11:18:11 -0000	1.6.116.1
+++ xmlhelp/util/makefile.mk	28 Apr 2003 16:18:57 -0000	1.6
@@ -105,8 +105,8 @@
 	$(SABLOT3RDLIB)          \
 	$(EXPATASCII3RDLIB)      \
 	$(UCBHELPERLIB)          \
+	$(BERKELEYLIB)           \
+	$(BERKELEYCPPLIB)
-	$(BERKELEYLIB)
-#	$(BERKELEYCPPLIB)
 
 SHL1LIBS =                       \
 	$(SLB)$/jaqe.lib         \
Index: makefile.mk
===================================================================
RCS file: /cvs/external/berkeleydb/makefile.mk,v
retrieving revision 1.21
diff -u -p -r1.21 makefile.mk
--- berkeleydb/makefile.mk	11 Apr 2005 09:32:45 -0000	1.21
+++ berkeleydb/makefile.mk	18 Apr 2005 13:52:55 -0000
@@ -77,20 +77,20 @@ all:
 
 # --- Files --------------------------------------------------------
 
-TARFILE_NAME=db-4.2.52.NC
-ADDITIONAL_FILES=    \
-	makefile.mk btree$/makefile.mk clib$/makefile.mk common$/makefile.mk  \
-	cxx$/makefile.mk db$/makefile.mk dbm$/makefile.mk dbreg$/makefile.mk  \
-	db_printlog$/makefile.mk env$/makefile.mk fileops$/makefile.mk hash$/makefile.mk  \
-	hmac$/makefile.mk hsearch$/makefile.mk libdb_java$/makefile.mk lock$/makefile.mk  \
-	log$/makefile.mk mp$/makefile.mk mutex$/makefile.mk os$/makefile.mk  \
-	os_win32$/makefile.mk qam$/makefile.mk rep$/makefile.mk txn$/makefile.mk  \
-	xa$/makefile.mk libdb42.dxp libdb_java42.dxp
+TARFILE_NAME=db-3.2.9
+ADDITIONAL_FILES=btree$/makefile.mk clib$/makefile.mk common$/makefile.mk \
+				 cxx$/makefile.mk db$/makefile.mk dbm$/makefile.mk \
+				 env$/makefile.mk hash$/makefile.mk hsearch$/makefile.mk \
+				 libdb_java$/makefile.mk clib$/makefile.mk common$/makefile.mk \
+				 lock$/makefile.mk log$/makefile.mk mp$/makefile.mk \
+				 mutex$/makefile.mk os$/makefile.mk os_win32$/makefile.mk \
+				 qam$/makefile.mk txn$/makefile.mk xa$/makefile.mk \
+				 makefile.mk libdb32.dxp libdb_java32.dxp
 
 
 
 # not needed for win32. comment out when causing problems...
-PATCH_FILE_NAME=db-4.2.52.patch
+PATCH_FILE_NAME=db-3.2.9.patch
 
 .IF "$(GUI)"=="UNX"
 CONFIGURE_DIR=out
@@ -115,39 +115,24 @@ OUT2LIB=$(BUILD_DIR)$/.libs$/libdb*$(DLL
 OUT2LIB+=$(BUILD_DIR)$/.libs$/libdb_java*jnilib
 .ENDIF	# "$(OS)"=="MACOSX"
 
-.IF "$(SOLAR_JAVA)"!=""
-OUT2BIN=$(BUILD_DIR)$/db.jar
-OUT2CLASS=$(BUILD_DIR)$/db.jar
-.ENDIF
+#.IF "$(SOLAR_JAVA)"!=""
+#OUT2BIN=$(BUILD_DIR)$/db.jar
+#OUT2CLASS=$(BUILD_DIR)$/db.jar
+#.ENDIF
 
 OUT2INC= \
 	$(BUILD_DIR)$/db.h
 
 .ENDIF			# "$(GUI)"=="UNX"
 
-.IF "$(GUI)"=="WNT"
-# make use of stlport headerfiles
-EXT_USE_STLPORT=TRUE
-
-.IF "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=;
-.ELSE # "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=^
-.ENDIF # "$(USE_SHELL)"!="4nt"
-BUILD_DIR=
-BUILD_ACTION=dmake
-
-BUILD_DIR_OUT=build_win32
-#OUT2LIB= \
-#	$(BUILD_DIR_OUT)$/Release$/libdb_java42.lib \
-#	$(BUILD_DIR_OUT)$/Release$/libdb42.lib
-#OUT2BIN=$(BUILD_DIR_OUT)$/Release$/db.jar \
-#	$(BUILD_DIR_OUT)$/Release$/libdb_java42.dll \
-#	$(BUILD_DIR_OUT)$/Release$/libdb42.dll
-#OUT2CLASS=$(BUILD_DIR_OUT)$/Release$/db.jar
 OUT2INC= \
-	$(BUILD_DIR_OUT)$/db.h
-.ENDIF			# "$(GUI)"=="WNT"
+	$(BUILD_DIR_OUT)$/db.h \
+	include$/db_185.h \
+	include$/db_cxx.h
+
+.IF "$(SOLAR_JAVA)"!=""
+OUT2CLASS=java$/classes$/db.jar
+.ENDIF
 
 # --- Targets ------------------------------------------------------
 
@@ -155,4 +140,3 @@ OUT2INC= \
 .INCLUDE :	target.mk
 .INCLUDE :	tg_ext.mk
 
-
Index: prj/d.lst
===================================================================
RCS file: /cvs/external/berkeleydb/prj/d.lst,v
retrieving revision 1.7
diff -u -p -r1.7 d.lst
--- berkeleydb/prj/d.lst	11 Apr 2005 08:42:39 -0000	1.7
+++ berkeleydb/prj/d.lst	18 Apr 2005 13:52:55 -0000
@@ -4,19 +4,19 @@ mkdir: %_DEST%\inc%_EXT%\berkeleydb
 ..\%__SRC%\inc\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
 ..\%__SRC%\inc\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
 
-..\%__SRC%\lib\libdb42.lib %_DEST%\lib%_EXT%\libdb42.lib
-..\%__SRC%\lib\libdb_java42.lib %_DEST%\lib%_EXT%\libdb_java42.lib
+..\%__SRC%\lib\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
+..\%__SRC%\lib\libdb_java32.lib %_DEST%\lib%_EXT%\libdb_java32.lib
 
-..\%__SRC%\lib\libdb-4.2.so %_DEST%\lib%_EXT%\libdb-4.2.so
-..\%__SRC%\lib\libdb_java-4.2.so %_DEST%\lib%_EXT%\libdb_java-4.2.so
-..\%__SRC%\lib\libdb_cxx-4.2.so %_DEST%\lib%_EXT%\libdb_cxx-4.2.so
+..\%__SRC%\lib\libdb-3.2.so %_DEST%\lib%_EXT%\libdb-3.2.so
+..\%__SRC%\lib\libdb_java-3.2.so %_DEST%\lib%_EXT%\libdb_java-3.2.so
+..\%__SRC%\lib\libdb_cxx-3.2.so %_DEST%\lib%_EXT%\libdb_cxx-3.2.so
 
-..\%__SRC%\lib\libdb-4.2.dylib %_DEST%\lib%_EXT%\libdb-4.2.dylib
-..\%__SRC%\lib\libdb_java-4.2.jnilib %_DEST%\lib%_EXT%\libdb_java-4.2.jnilib
-..\%__SRC%\lib\libdb_cxx-4.2.dylib %_DEST%\lib%_EXT%\libdb_cxx-4.2.dylib
+.\%__SRC%\lib\libdb-3.2.dylib %_DEST%\lib%_EXT%\libdb-3.2.dylib
+..\%__SRC%\lib\libdb_java-3.2.jnilib %_DEST%\lib%_EXT%\libdb_java-3.2.jnilib
+..\%__SRC%\lib\libdb_cxx-3.2.dylib %_DEST%\lib%_EXT%\libdb_cxx-3.2.dylib
 
-..\%__SRC%\bin\libdb42.dll %_DEST%\bin%_EXT%\libdb42.dll
-..\%__SRC%\bin\libdb_java42.dll %_DEST%\bin%_EXT%\libdb_java42.dll
+..\%__SRC%\bin\libdb32.dll %_DEST%\bin%_EXT%\libdb32.dll
+..\%__SRC%\bin\libdb_java32.dll %_DEST%\bin%_EXT%\libdb_java32.dll
 
 ..\%__SRC%\bin\db.jar %_DEST%\bin%_EXT%\db.jar
 ..\%__SRC%\class\db.jar %_DEST%\bin%_EXT%\db.jar
