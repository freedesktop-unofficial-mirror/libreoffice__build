Index: sal/osl/unx/signal.c
===================================================================
RCS file: /cvs/porting/sal/osl/unx/signal.c,v
retrieving revision 1.24
diff -u -p -u -r1.24 signal.c
--- sal/osl/unx/signal.c	26 Nov 2004 14:41:23 -0000	1.24
+++ sal/osl/unx/signal.c	21 Mar 2005 16:43:01 -0000
@@ -416,6 +416,10 @@ static int ReportCrash( int Signal )
 	sal_uInt32	argi;
 	sal_uInt32	argc;
 	rtl_uString *ustrCommandArg = NULL;
+
+    if ( getenv ("GNOME_DISABLE_CRASH_DIALOG") &&
+         atoi (getenv ("GNOME_DISABLE_CRASH_DIALOG")) )
+		return -1;
 	
 	argc = osl_getCommandArgCount();
 	
@@ -482,7 +486,7 @@ static int ReportCrash( int Signal )
 				char *pStackTempName = NULL;
 				char *pChecksumTempName = NULL;
 
-#ifdef INCLUDE_BACKTRACE
+#if 0 
 				char szXMLTempNameBuffer[L_tmpnam];
 				char szChecksumTempNameBuffer[L_tmpnam];
 				char szStackTempNameBuffer[L_tmpnam];
@@ -653,8 +657,11 @@ static int ReportCrash( int Signal )
 #endif
 
 #else /* defined INCLUDE BACKTRACE */
-				snprintf( szShellCmd, sizeof(szShellCmd)/sizeof(szShellCmd[0]),
-				"crash_report -p %d -s %d%s", getpid(), Signal, bAutoCrashReport ? " -noui -send" : " -noui" );
+				 // FIXME: we quite badly need to ungrab the mouse at this stage.
+				 snprintf( szShellCmd, sizeof(szShellCmd)/sizeof(szShellCmd[0]),
+                                         "bug-buddy --appname=soffice.bin --pid=%d --package=OpenOffice.org",
+                                         getpid() );
+
 #endif /* defined INCLUDE BACKTRACE */
 
 
