--- beanshell/makefile.mk	7 Sep 2005 22:05:31 -0000	1.5
+++ beanshell/makefile.mk	27 Jan 2006 14:24:54 -0000
@@ -39,6 +39,13 @@
 TARGET=ooo_beanshell
 
 .IF "$(SOLAR_JAVA)"!=""
+
+.IF "$(SYSTEM_BSH)" == "YES"
+all:
+        @echo "An already available installation of beanshell should exist on your system."
+        @echo "Therefore the version provided here does not need to be built in addition."
+.ENDIF
+
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
--- beanshell/prj/build.lst	25 Oct 2005 11:21:59 -0000	1.3
+++ beanshell/prj/build.lst	27 Jan 2006 14:26:35 -0000
@@ -1,3 +1,3 @@
-be	beanshell	:	solenv xalan NULL
+be	beanshell	:	solenv XALAN:xalan NULL
 be	beanshell							usr1		-	all	be_mkout				NULL
 be	beanshell							nmake		-	all	be_beanshell		NULL
--- config_office/configure.in	13 Jan 2006 16:37:01 -0000	1.148
+++ config_office/configure.in	27 Jan 2006 14:45:06 -0000
@@ -239,6 +239,41 @@
 [  --with-db-jar=JARFILE   Specify path to jarfile manually ],
 [ DB_JAR="$withval"
 ])
+AC_ARG_WITH(system-hsqldb,
+[  --with-system-hsqldb    Use hsqldb already on system
+],,)
+AC_ARG_WITH(hsqldb-jar,
+[  --with-hsqldb-jar=JARFILE   Specify path to jarfile manually ],
+[ HSQLDB_JAR="$withval"
+])
+AC_ARG_WITH(system-beanshell,
+[  --with-system-beanshell Use beanshell already on system
+],,)
+AC_ARG_WITH(beanshell-jar,
+[  --with-beanshell-jar=JARFILE   Specify path to jarfile manually ],
+[ BSH_JAR="$withval"
+])
+AC_ARG_WITH(system-xml-apis,
+[  --with-system-xml-apis  Use xml-apis already on system
+],,)
+AC_ARG_WITH(xml-apis-jar,
+[  --with-xml-apis-jar=JARFILE   Specify path to jarfile manually ],
+[ XML_APIS_JAR="$withval"
+])
+AC_ARG_WITH(system-xerces,
+[  --with-system-xerces    Use xerces already on system
+],,)
+AC_ARG_WITH(xerces-jar,
+[  --with-xerces-jar=JARFILE   Specify path to jarfile manually ],
+[ XERCES_JAR="$withval"
+])
+AC_ARG_WITH(system-xalan,
+[  --with-system-xalan     Use xalan already on system
+],,)
+AC_ARG_WITH(xalan-jar,
+[  --with-xalan-jar=JARFILE   Specify path to jarfile manually ],
+[ XALAN_JAR="$withval"
+])
 AC_ARG_WITH(system-sablot,
 [  --with-system-sablot    Use sablot already on system
 ],,)
@@ -2643,6 +2678,165 @@
 AC_SUBST(DB_JAR)
 
 dnl ===================================================================
+dnl Check for system hsqldb
+dnl ===================================================================
+AC_MSG_CHECKING([which hsqldb to use])
+if test -n "$with_system_hsqldb" -o -n "$with_system_libs" && \
+       test "$with_system_hsqldb" != "no"; then
+        AC_MSG_RESULT([external])
+        SYSTEM_HSQLDB=YES
+        if test -z $HSQLDB_JAR; then
+               HSQLDB_JAR=/usr/share/java/hsqldb.jar
+        fi
+        AC_CHECK_FILE($HSQLDB_JAR, [],
+               [AC_MSG_ERROR(hsqldb.jar not found.)], [])
+        AC_MSG_CHECKING([whether hsqldb is >= 1.8.0])
+        export HSQLDB_JAR
+        if $PERL -e 'use Archive::Zip;
+            my $file = "$ENV{'HSQLDB_JAR'}";
+            my $zip = Archive::Zip->new( $file );
+            my $mf = $zip->contents ( "META-INF/MANIFEST.MF" );
+            if ( $mf =~ m/Specification-Version: 1.8.*/ ) {
+               exit 0;
+            } else {
+               exit 1;
+            }'; then
+            AC_MSG_RESULT([yes])
+         else
+            AC_MSG_ERROR([no, hsqldb >= 1.8.0 is needed])
+         fi
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_HSQLDB=NO
+    BUILD_TYPE="$BUILD_TYPE HSQLDB"
+fi
+AC_SUBST(SYSTEM_HSQLDB)
+AC_SUBST(HSQLDB_JAR)
+
+dnl ===================================================================
+dnl Check for system beanshell
+dnl ===================================================================
+AC_MSG_CHECKING([which beanshell to use])
+if test -n "$with_system_beanshell" -o -n "$with_system_libs" && \
+       test "$with_system_beanshell" != "no"; then
+        AC_MSG_RESULT([external])
+        SYSTEM_BSH=YES
+        if test -z $BSH_JAR; then
+               BSH_JAR=/usr/share/java/bsh.jar
+        fi
+        AC_CHECK_FILE($BSH_JAR, [],
+               [AC_MSG_ERROR(bsh.jar not found.)], [])
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_BSH=NO
+    BUILD_TYPE="$BUILD_TYPE BSH"
+fi
+AC_SUBST(SYSTEM_BSH)
+AC_SUBST(BSH_JAR)
+
+dnl ===================================================================
+dnl Check for system xml-apis
+dnl ===================================================================
+AC_MSG_CHECKING([which xml-apis to use])
+if test -n "$with_system_xml_apis" -o -n "$with_system_libs" && \
+       test "$with_system_xml_apis" != "no"; then
+        AC_MSG_RESULT([external])
+        SYSTEM_XML_APIS=YES
+        if test -z $XML_APIS_JAR; then
+          AC_CHECK_FILE(/usr/share/java/xml-commons-apis.jar, 
+            [ XML_APIS_JAR=/usr/share/java/xml-commons-apis.jar ],
+            [
+              AC_CHECK_FILE(/usr/share/java/xml-apis.jar, 
+                [ XML_APIS_JAR=/usr/share/java/xml-apis.jar ],
+                [ AC_CHECK_FILE(/usr/share/java/jaxp-1.2.jar,
+                    [ XML_APIS_JAR=/usr/share/java/jaxp-1.2.jar ],
+                    [ AC_MSG_ERROR(xml-apis.jar replacement not found)]
+                  )
+                ]
+              )
+            ]
+          )
+        else
+          AC_CHECK_FILE($XML_APIS_JAR, [],
+               [AC_MSG_ERROR(xml-apis.jar replacement not found.)], [])
+        fi
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_XML_APIS=NO
+    NEED_XALAN=TRUE
+fi
+AC_SUBST(SYSTEM_XML_APIS)
+AC_SUBST(XML_APIS_JAR)
+
+dnl ===================================================================
+dnl Check for system xerces
+dnl ===================================================================
+AC_MSG_CHECKING([which xerces to use])
+if test -n "$with_system_xerces" -o -n "$with_system_libs" && \
+       test "$with_system_xerces" != "no"; then
+        AC_MSG_RESULT([external])
+        SYSTEM_XERCES=YES
+        if test -z $XERCES_JAR; then
+          AC_CHECK_FILE(/usr/share/java/xerces-j2.jar, 
+            [ XERCES_JAR=/usr/share/java/xerces-j2.jar ],
+            [
+              AC_CHECK_FILE(/usr/share/java/xercesImpl.jar, 
+                [ XERCES_JAR=/usr/share/java/xercesImpl.jar ],
+                [ AC_MSG_ERROR(xercesImpl.jar replacement not found)]
+              )
+            ]
+          )
+        else
+          AC_CHECK_FILE($XERCES_JAR, [],
+               [AC_MSG_ERROR(xercesImpl.jar replacement not found.)], [])
+        fi
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_XERCES=NO
+    NEED_XALAN=TRUE
+fi
+AC_SUBST(SYSTEM_XERCES)
+AC_SUBST(XERCES_JAR)
+
+dnl ===================================================================
+dnl Check for system xalan
+dnl ===================================================================
+AC_MSG_CHECKING([which xalan to use])
+if test -n "$with_system_xalan" -o -n "$with_system_libs" && \
+       test "$with_system_xalan" != "no"; then
+        AC_MSG_RESULT([external])
+        SYSTEM_XALAN=YES
+        if test -z $XALAN_JAR; then
+          AC_CHECK_FILE(/usr/share/java/xalan-j2.jar, 
+            [ XALAN_JAR=/usr/share/java/xalan-j2.jar ],
+            [
+              AC_CHECK_FILE(/usr/share/java/xalan2.jar, 
+                [ XALAN_JAR=/usr/share/java/xalan2.jar ],
+                [ AC_CHECK_FILE(/usr/share/java/xalan.jar,
+                    [ XALAN_JAR=/usr/share/java/xalan.jar ],
+                    [ AC_MSG_ERROR(xalan.jar replacement not found)]
+                  )
+                ]
+              )
+            ]
+          )
+        else
+          AC_CHECK_FILE($XALAN_JAR, [],
+               [AC_MSG_ERROR(xml-apis.jar replacement not found.)], [])
+        fi
+else
+    AC_MSG_RESULT([internal])
+    SYSTEM_XALAN=NO
+    NEED_XALAN=TRUE
+fi
+AC_SUBST(SYSTEM_XALAN)
+AC_SUBST(XALAN_JAR)
+
+if test -n "$NEED_XALAN"; then
+BUILD_TYPE="$BUILD_TYPE XALAN"
+fi
+
+dnl ===================================================================
 dnl Check for system sablot
 dnl ===================================================================
 AC_MSG_CHECKING([which sablot to use])
@@ -4299,8 +4493,6 @@
    AC_MSG_RESULT([$with_local_solver])
 fi
 AC_SUBST(LOCAL_SOLVER)
-
-BUILD_TYPE="$BUILD_TYPE XALAN"
 
 AC_SUBST(BUILD_TYPE)
 
--- config_office/set_soenv.in	13 Jan 2006 16:37:16 -0000	1.86
+++ config_office/set_soenv.in	27 Jan 2006 14:45:11 -0000
@@ -1766,6 +1766,16 @@
 ToFile( "DB_VERSION",        "@DB_VERSION@",       "e" );
 ToFile( "DB_INCLUDES",       "@DB_INCLUDES@",      "e" );
 ToFile( "DB_JAR",            "@DB_JAR@",           "e" );
+ToFile( "SYSTEM_HSQLDB",     "@SYSTEM_HSQLDB@",    "e" );
+ToFile( "HSQLDB_JAR",        "@HSQLDB_JAR@",       "e" );
+ToFile( "SYSTEM_BSH",        "@SYSTEM_BSH@",       "e" );
+ToFile( "BSH_JAR",           "@BSH_JAR@",          "e" );
+ToFile( "SYSTEM_XML_APIS",   "@SYSTEM_XML_APIS@",  "e" );
+ToFile( "XML_APIS_JAR",      "@XML_APIS_JAR@",     "e" );
+ToFile( "SYSTEM_XERCES",     "@SYSTEM_XERCES@",    "e" );
+ToFile( "XERCES_JAR",        "@XERCES_JAR@",       "e" );
+ToFile( "SYSTEM_XALAN",      "@SYSTEM_XALAN@",     "e" );
+ToFile( "XALAN_JAR",         "@XALAN_JAR@",        "e" );
 ToFile( "SYSTEM_SABLOT",     "@SYSTEM_SABLOT@",    "e" );
 ToFile( "SABLOT_LIBS",       "@SABLOT_LIBS@",      "e" );
 ToFile( "SYSTEM_ODBC_HEADERS","@SYSTEM_ODBC_HEADERS@","e" );
--- connectivity/com/sun/star/sdbcx/comp/hsqldb/makefile.mk	8 Sep 2005 04:56:11 -0000	1.6
+++ connectivity/com/sun/star/sdbcx/comp/hsqldb/makefile.mk	26 Jan 2006 17:08:46 -0000
@@ -43,7 +43,12 @@
 # --- Files --------------------------------------------------------  
 
 
-JARFILES = ridl.jar unoil.jar jurt.jar juh.jar hsqldb.jar
+JARFILES = ridl.jar unoil.jar jurt.jar juh.jar
+.IF "$(SYSTEM_HSQLDB)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(HSQLDB_JAR)
+.ELSE
+JARFILES+= hsqldb.jar
+.ENDIF
 JAVAFILES =\
 	NativeInputStreamHelper.java\
 	NativeOutputStreamHelper.java\
--- connectivity/prj/build.lst	21 Dec 2005 14:05:01 -0000	1.27
+++ connectivity/prj/build.lst	26 Jan 2006 17:09:01 -0000
@@ -1,4 +1,4 @@
-cn	connectivity	:	comphelper MOZ:moz SO:moz_prebuilt svtools unixODBC unoil jurt javaunohelper hsqldb mdbtools NULL
+cn	connectivity	:	comphelper MOZ:moz SO:moz_prebuilt svtools UNIXODBC:unixODBC unoil jurt javaunohelper HSQLDB:hsqldb mdbtools NULL
 cn	connectivity							usr1	-	all	cn_mkout NULL
 cn	connectivity\com\sun\star\sdbcx\comp\hsqldb	nmake	-	all	cn_jhsqldbdb cn_hsqldb NULL
 cn	connectivity\source\types			nmake	-	all	cn_types NULL
--- filter/source/config/fragments/makefile.mk	17 Jan 2006 11:03:31 -0000	1.16.16.1
+++ filter/source/config/fragments/makefile.mk	27 Jan 2006 14:18:37 -0000
@@ -156,7 +156,8 @@
 .ENDIF
 
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-PACKLANG := $(JAVAI) $(JAVACPS) $(SOLARBINDIR)/xalan.jar org.apache.xalan.xslt.Process -XSL langfilter.xsl
+XALAN_JAR*=$(SOLARBINDIR)$/xalan.jar
+PACKLANG := $(JAVAI) $(JAVACPS) $(XALAN_JAR) org.apache.xalan.xslt.Process -XSL langfilter.xsl
 PACKLANG_IN := -IN
 PACKLANG_PARAM := -PARAM
 PACKLANG_XSL := -XSL
--- filter/source/config/tools/utils/makefile.mk	17 Jan 2006 11:03:44 -0000	1.5.92.1
+++ filter/source/config/tools/utils/makefile.mk	27 Jan 2006 14:18:49 -0000
@@ -50,9 +50,19 @@
                     jurt.jar        \
                     juh.jar         \
                     jut.jar         \
-                    java_uno.jar    \
-                    xml-apis.jar    \
-                    xercesImpl.jar
+                    java_uno.jar
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
 
 JAVACLASSFILES  =   \
                     $(CLASSDIR)$/$(PACKAGE)$/AnalyzeStartupLog.class              \
--- filter/source/xsltfilter/makefile.mk	25 Oct 2005 12:53:22 -0000	1.15
+++ filter/source/xsltfilter/makefile.mk	27 Jan 2006 14:19:01 -0000
@@ -70,12 +70,28 @@
 
 #USE_UDK_EXTENDED_MANIFESTFILE=TRUE
 #USE_EXTENDED_MANIFESTFILE=TRUE
-JARFILES 		= ridl.jar unoil.jar jurt.jar juh.jar xalan.jar xercesImpl.jar xml-apis.jar
+JARFILES 		= ridl.jar unoil.jar jurt.jar juh.jar
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
 JAVAFILES		= $(subst,$(CLASSDIR)$/, $(subst,.class,.java $(JAVACLASSFILES))) 
 CUSTOMMANIFESTFILE = Manifest  
-#JARMANIFEST = Manifest
-
-#JARDIR=$(CLASSDIR)
 
 JARCOMPRESS		= TRUE  
 JARCLASSDIRS	= XSLTFilter*.class XSLTransformer*.class XSLTFilterOLEExtracter*.class
--- filter/source/xsltvalidate/makefile.mk	25 Oct 2005 11:23:33 -0000	1.10
+++ filter/source/xsltvalidate/makefile.mk	27 Jan 2006 14:19:01 -0000
@@ -44,7 +44,20 @@
 CLASSDIR!:=$(CLASSDIR)$/$(TARGET)
 #USE_UDK_EXTENDED_MANIFESTFILE=TRUE
 #USE_EXTENDED_MANIFESTFILE=TRUE
-JARFILES 		= ridl.jar unoil.jar jurt.jar juh.jar xalan.jar xml-apis.jar crimson.jar
+JARFILES 		= ridl.jar unoil.jar jurt.jar juh.jar crimson.jar
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
 JAVAFILES		= $(subst,$(CLASSDIR)$/, $(subst,.class,.java $(JAVACLASSFILES))) 
 CUSTOMMANIFESTFILE = Manifest  
 #JARMANIFEST = Manifest
--- helpcontent2/settings.pmk	17 Jan 2006 12:52:53 -0000	1.5.106.1
+++ helpcontent2/settings.pmk	27 Jan 2006 10:03:21 -0000
@@ -1,13 +1,9 @@
+XML_APIS_JAR*=$(SOLARBINDIR)$/xml-apis.jar
+XERCES_JAR*=$(SOLARBINDIR)$/xercesImpl.jar
+DB_JAR*=$(SOLARBINDIR)$/db.jar
 
-my_cp:=$(CLASSPATH)$(PATH_SEPERATOR)$(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/unoil.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/ridl.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/jurt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/jut.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xmlsearch.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xmlhelp.jar
-
-.IF "$(SYSTEM_DB)" == "YES"
-my_cp!:=$(my_cp)$(PATH_SEPERATOR)$(DB_JAR)
-.ELSE
-my_cp!:=$(my_cp)$(PATH_SEPERATOR)$(SOLARBINDIR)$/db.jar
-.ENDIF
+my_cp:=$(CLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/unoil.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/ridl.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/jurt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/jut.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xmlsearch.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xmlhelp.jar$(PATH_SEPERATOR)$(DB_JAR)
 
 .INCLUDE : $(INCCOM)$/aux_langs.mk
 
 aux_alllangiso:=$(foreach,i,$(alllangiso) $(foreach,j,$(aux_langdirs) $(eq,$i,$j  $i $(NULL))))
-
--- hsqldb/makefile.mk	7 Sep 2005 16:27:52 -0000	1.10
+++ hsqldb/makefile.mk	26 Jan 2006 17:05:56 -0000
@@ -44,6 +44,12 @@
 .INCLUDE :  version.mk
 .INCLUDE :	minor.mk
 
+.IF "$(SYSTEM_HSQLDB)" == "YES"
+all:
+	@echo "An already available installation of hsqldb should exist on your system."
+	@echo "Therefore the version provided here does not need to be built in addition."
+.ENDIF
+
 .IF "$(SOLAR_JAVA)" != ""
 # --- Files --------------------------------------------------------
 
--- readlicense_oo/util/makefile.pmk	17 Jan 2006 11:15:07 -0000	1.10.12.1
+++ readlicense_oo/util/makefile.pmk	27 Jan 2006 10:02:23 -0000
@@ -70,7 +70,7 @@
 $(MISC)$/readme%.html :
     @+-$(MKDIR) $(@:d)
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=html file=$@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=html file=$@
 .ELSE
 	sed 's|xmlns:xt="http://www.jclark.com/xt"||;s|extension-element-prefixes="xt"||;s|.*xt:document.*||;s|<xsl:output method = "HTML" doctype-public = "-//W3C//DTD HTML 3.2//EN" />|<xsl:output method="html" doctype-public="-//W3C//DTD HTML 3.2//EN" />|' < ..$/readme.xsl | xsltproc -o $@ \
 	         --stringparam os1 $(OS) \
@@ -86,7 +86,7 @@
 $(MISC)$/readme%.txt :
     @+-$(MKDIR) $(@:d)
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=text file=$@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $(subst,_$(@:b:s/_/./:e:s/.//), $(COMMONMISC)$/$(TARGET)$/$(@:b).xrm) ..$/readme.xsl os1=$(OS) gui1=$(GUI) cp1=$(CPUNAME) com1=$(COM) lang1=$(@:b:s/_/./:e:s/.//) type=text file=$@
 .ELSE
 	sed 's|xmlns:xt="http://www.jclark.com/xt"||;s|extension-element-prefixes="xt"||;s|.*xt:document.*||;s|<xsl:output method = "HTML" doctype-public = "-//W3C//DTD HTML 3.2//EN" />|<xsl:output method="text" />|' < ..$/readme.xsl | xsltproc -o $@ \
 	         --stringparam os1 $(OS) \
--- rhino/prj/build.lst	25 Oct 2005 11:32:19 -0000	1.2
+++ rhino/prj/build.lst	27 Jan 2006 14:26:02 -0000
@@ -1,3 +1,3 @@
-xh	rhino	:	soltools xalan NULL
+xh	rhino	:	soltools XALAN:xalan NULL
 xh	rhino		usr1	-	all	xh_mkout NULL
 xh	rhino      nmake	-	all	xh_rhino NULL
--- sandbox/util/makefile.mk	8 Sep 2005 17:11:31 -0000	1.6
+++ sandbox/util/makefile.mk	27 Jan 2006 15:29:58 -0000
@@ -41,6 +41,10 @@
 
 .INCLUDE :  settings.mk
 
+.IF "$(JDK)" == "gcj"
+all:
+        @echo sandbox cannot be build with gcj because of sun.applet.AppletAudioClip
+.ELSE
 JARCLASSDIRS	= com$/sun$/star$/lib$/sandbox
 JARTARGET		= sandbox.jar
 JARCOMPRESS 	= TRUE
@@ -56,3 +60,4 @@
 # --- Targets ------------------------------------------------------
 
 .INCLUDE :  target.mk
+.ENDIF
--- scp2/source/ooo/file_ooo.scp	5 Jan 2006 14:55:20 -0000	1.134
+++ scp2/source/ooo/file_ooo.scp	27 Jan 2006 15:35:45 -0000
@@ -631,9 +631,9 @@
 #endif
 
 #ifdef SOLAR_JAVA
-
+#ifndef SYSTEM_BSH
 STD_JAR_FILE( gid_File_Jar_Bsh, bsh )
-
+#endif
 #endif
 
 #ifdef SOLAR_JAVA
@@ -729,7 +729,9 @@
 #endif
 
 #ifdef SOLAR_JAVA
+#ifndef SYSTEM_HSQLDB
 STD_JAR_FILE_PATCH( gid_File_Jar_Hsqldb, hsqldb )
+#endif
 STD_JAR_FILE( gid_File_Jar_Hsqldb_Sdbc, sdbc_hsqldb )
 #endif
 
@@ -754,14 +756,14 @@
 #endif
 
 #ifdef SOLAR_JAVA
-
+#ifndef GCJ
 File gid_File_Jar_Sandbox
     TXT_FILE_BODY;
     Name = JARFILENAME(sandbox);
     Dir = gid_Dir_Classes;
     Styles = (PACKED,PATCH);
 End
-
+#endif
 #endif
 
 #ifdef SOLAR_JAVA
@@ -783,15 +785,16 @@
 #endif
 
 #ifdef SOLAR_JAVA
-
 STD_JAR_FILE( gid_File_Jar_Xt, xt )
-
 #ifndef SYSTEM_XALAN
 STD_JAR_FILE( gid_File_Jar_Xalan, xalan )
+#endif
+#ifndef SYSTEM_XERCES
 STD_JAR_FILE( gid_File_Jar_XercesImpl, xercesImpl )
+#endif
+#ifndef SYSTEM_XML_APIS
 STD_JAR_FILE( gid_File_Jar_Xml_Apis, xml-apis )
 #endif
-
 #endif
 
 File gid_File_Mod_Chart
--- scp2/source/ooo/makefile.mk	10 Jan 2006 14:34:23 -0000	1.38
+++ scp2/source/ooo/makefile.mk	27 Jan 2006 15:35:59 -0000
@@ -139,8 +139,28 @@
 SCPDEFS+=-DSYSTEM_HUNSPELL
 .ENDIF
 
-.IF "$(SYSTEM_XALAN)" == "YES"
+.IF "$(SYSTEM_BSH)" == "YES"
+SCPDEFS+=-DSYSTEM_BSH -DBSH_JAR=\""file://$(BSH_JAR)"\"
+.ENDIF
+
+.IF "$(SYSTEM_HSQLDB)" == "YES" 
+SCPDEFS+=-DSYSTEM_HSQLDB -DHSQLDB_JAR=\""file://$(HSQLDB_JAR)"\"
+.ENDIF 
+
+.IF "$(SYSTEM_XML_APIS)" == "YES" 
+SCPDEFS+=-DSYSTEM_XML_APIS
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES" 
+SCPDEFS+=-DSYSTEM_XERCES
+.ENDIF
+
+.IF "$(SYSTEM_XALAN)" == "YES" 
 SCPDEFS+=-DSYSTEM_XALAN
+.ENDIF
+
+.IF "$(JDK)" == "gcj"
+SCPDEFS+=-DGCJ
 .ENDIF
 
 SCPDEFS+=\
--- scp2/source/ooo/profileitem_ooo.scp	11 Jan 2006 13:05:10 -0000	1.31
+++ scp2/source/ooo/profileitem_ooo.scp	27 Jan 2006 15:36:00 -0000
@@ -758,6 +758,45 @@
     Section = "Bootstrap";
     Order = 7;
     Key = "UNO_JAVA_JFW_CLASSPATH_URLS";
-    Value = "${${$ORIGIN/$UNO_SETTINGS:PKG_UserUnoFile}:PKG_UNO_JAVA_CLASSPATH} ${${$ORIGIN/$UNO_SETTINGS:PKG_SharedUnoFile}:PKG_UNO_JAVA_CLASSPATH} $ORIGIN/classes/jurt.jar $ORIGIN/classes/ridl.jar $ORIGIN/classes/java_uno.jar $ORIGIN/classes/sandbox.jar $ORIGIN/classes/bsh.jar $ORIGIN/classes/classes.jar $ORIGIN/classes/commonwizards.jar $ORIGIN/classes/htmlsoff.jar $ORIGIN/classes/java_uno_accessbridge.jar $ORIGIN/classes/js.jar $ORIGIN/classes/juh.jar $ORIGIN/classes/jut.jar $ORIGIN/classes/letter.jar $ORIGIN/classes/officebean.jar $ORIGIN/classes/query.jar $ORIGIN/classes/report.jar $ORIGIN/classes/ScriptFramework.jar $ORIGIN/classes/ScriptProviderForBeanShell.jar $ORIGIN/classes/ScriptProviderForJava.jar $ORIGIN/classes/ScriptProviderForJavaScript.jar $ORIGIN/classes/tutorial.jar $ORIGIN/classes/unoil.jar $ORIGIN/classes/web.jar $ORIGIN/classes/xmerge.jar $ORIGIN/classes/XMergeBridge.jar $ORIGIN/classes/XSLTFilter.jar $ORIGIN/classes/XSLTValidate.jar $ORIGIN/classes/xt.jar $ORIGIN/classes/activation.jar $ORIGIN/classes/agenda.jar $ORIGIN/classes/aportisdoc.jar $ORIGIN/classes/avmedia.jar $ORIGIN/classes/email.jar $ORIGIN/classes/fax.jar $ORIGIN/classes/pexcel.jar $ORIGIN/classes/pocketword.jar $ORIGIN/classes/mail.jar $ORIGIN/classes/hsqldb.jar $ORIGIN/classes/sdbc_hsqldb.jar";
+    Value = "${${$ORIGIN/$UNO_SETTINGS:PKG_UserUnoFile}:PKG_UNO_JAVA_CLASSPATH}";
+    ValueList1  = "${${$ORIGIN/$UNO_SETTINGS:PKG_SharedUnoFile}:PKG_UNO_JAVA_CLASSPATH}";
+    ValueList2  = "$ORIGIN/classes/jurt.jar $ORIGIN/classes/ridl.jar";
+    ValueList3  = "$ORIGIN/classes/java_uno.jar";
+#ifndef GCJ
+    ValueList4  = "$ORIGIN/classes/sandbox.jar";
+#endif
+#ifdef SYSTEM_BSH
+    ValueList5  = BSH_JAR;
+#else
+    ValueList6  = "$ORIGIN/classes/bsh.jar";
+#endif
+    ValueList7  = "$ORIGIN/classes/classes.jar";
+    ValueList8  = "$ORIGIN/classes/commonwizards.jar";
+    ValueList9  = "$ORIGIN/classes/htmlsoff.jar";
+    ValueList10  = "$ORIGIN/classes/java_uno_accessbridge.jar";
+    ValueList11 = "$ORIGIN/classes/js.jar $ORIGIN/classes/juh.jar";
+    ValueList12 = "$ORIGIN/classes/jut.jar $ORIGIN/classes/letter.jar";
+    ValueList13 = "$ORIGIN/classes/officebean.jar $ORIGIN/classes/query.jar";
+    ValueList14 = "$ORIGIN/classes/report.jar";
+    ValueList15 = "$ORIGIN/classes/ScriptFramework.jar";
+    ValueList16 = "$ORIGIN/classes/ScriptProviderForBeanShell.jar";
+    ValueList17 = "$ORIGIN/classes/ScriptProviderForJava.jar";
+    ValueList18 = "$ORIGIN/classes/ScriptProviderForJavaScript.jar";
+    ValueList10 = "$ORIGIN/classes/tutorial.jar $ORIGIN/classes/unoil.jar";
+    ValueList20 = "$ORIGIN/classes/web.jar $ORIGIN/classes/xmerge.jar";
+    ValueList21 = "$ORIGIN/classes/XMergeBridge.jar";
+    ValueList22 = "$ORIGIN/classes/XSLTFilter.jar";
+    ValueList23 = "$ORIGIN/classes/XSLTValidate.jar";
+    ValueList24 = "$ORIGIN/classes/xt.jar";
+    ValueList25 = "$ORIGIN/classes/activation.jar $ORIGIN/classes/agenda.jar";
+    ValueList26 = "$ORIGIN/classes/aportisdoc.jar $ORIGIN/classes/avmedia.jar";
+    ValueList27 = "$ORIGIN/classes/email.jar $ORIGIN/classes/fax.jar";
+    ValueList28 = "$ORIGIN/classes/pexcel.jar $ORIGIN/classes/pocketword.jar";
+    ValueList29 = "$ORIGIN/classes/mail.jar";
+#ifdef SYSTEM_HSQLDB
+    ValueList30 = HSQLDB_JAR;
+#else
+    ValueList31 = "$ORIGIN/classes/hsqldb.jar";
+#endif
+    ValueList32 = "$ORIGIN/classes/sdbc_hsqldb.jar";
 End
-
--- scripting/java/build.xml	9 Sep 2005 01:54:21 -0000	1.32
+++ scripting/java/build.xml	26 Jan 2006 17:08:24 -0000
@@ -50,6 +50,9 @@
        Not needed in default build -->
   <property name="netbeans.install.path" value="/export/home/netbeans"/>
 
+  <property environment="env"/>
+  <property name="env.BSH_JAR" value="${solar.jar}/bsh.jar"/>
+
   <!-- ==================== classpath setting ============================ -->
   <path id="idlclasspath">
     <pathelement location="${solar.jar}/jurt.jar"/>
@@ -58,7 +61,7 @@
     <pathelement location="${solar.jar}/juh.jar"/>
     <pathelement location="${solar.jar}/java_uno.jar"/>
     <pathelement location="${solar.jar}/ridl.jar"/>
-    <pathelement location="${solar.jar}/bsh.jar"/>
+    <pathelement location="${env.BSH_JAR}"/>
     <pathelement location="${solar.jar}/js.jar"/>
     <pathelement location="${jardir}"/>
   </path> 
--- scripting/prj/build.lst	11 Oct 2004 13:31:56 -0000	1.13
+++ scripting/prj/build.lst	26 Jan 2006 17:09:00 -0000
@@ -1,4 +1,4 @@
-tc	scripting	:	bridges rdbmaker vcl xmlscript basic sfx2 rhino beanshell javaunohelper NULL
+tc	scripting	:	bridges rdbmaker vcl xmlscript basic sfx2 rhino BSH:beanshell javaunohelper NULL
 tc	scripting									usr1	-	all	tc_mkout NULL
 tc	scripting\source\provider				nmake	-	all	tc_scriptingprovider NULL
 tc	scripting\source\basprov				nmake	-	all	tc_scriptingbasprov NULL
--- solenv/inc/tg_config.mk	17 Jan 2006 11:10:09 -0000	1.6.184.1
+++ solenv/inc/tg_config.mk	27 Jan 2006 12:25:39 -0000
@@ -57,17 +57,20 @@
                 $(XSLDIR)$/schema_trim.xsl 
 .ENDIF
 
+XML_APIS_JAR*=$(SOLARBINDIR)$/xml-apis.jar
+XERCES_JAR*=$(SOLARBINDIR)$/xercesImpl.jar
+
 $(PROCESSOUT)$/registry$/schema$/$(PACKAGEDIR)$/%.xcs : %.xcs
     @+echo -------------+ validating and stripping schema files
 	-$(MKDIRHIER) $(@:d)
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
 .IF "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
 .ENDIF			# "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_val.xsl $(@:d)$*.val componentName=$(PACKAGE).$*
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/sanity.xsl $(@:d)$*.san 
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_trim.xsl $(@:d)$*.tmp
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_val.xsl $(@:d)$*.val componentName=$(PACKAGE).$*
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/sanity.xsl $(@:d)$*.san 
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/schema_trim.xsl $(@:d)$*.tmp
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
 .ELSE
 # xsltproc already validates against the dtd.  For additional validation,
 # org.openoffice.configuration.Inspector should be replaced and the
@@ -101,7 +104,7 @@
     @+echo -------------+ creating locale dependent resource bundles
 	-$(MKDIRHIER) $(@:d)
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/resource.xsl $@ locale={$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))}
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR) -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/resource.xsl $@ locale={$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))}
 .ELSE
 	$(XSLTPROC) -o $@ \
 	            --stringparam locale {$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))} \
@@ -129,11 +132,11 @@
 	-$(MKDIRHIER) $(@:d) 
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
 .IF "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.configuration.Inspector $<
 .ENDIF			# "$(NO_INSPECTION)"==""
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/data_val.xsl $(@:d)$*.val xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/data_val.xsl $(@:d)$*.val xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
 .ELSE
 # xsltproc already validates against the dtd.  For additional validation,
 # org.openoffice.configuration.Inspector should be replaced and the
@@ -170,8 +173,8 @@
     @+echo -------------+ creating locale dependent entries
 	-$(MKDIRHIER) $(@:d)
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema locale={$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))}	
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$*.tmp xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs schemaRoot=$(XCSROOT)$/registry$/schema locale={$(subst,$/$(PACKAGEDIR)$/$(@:f), $(subst,$(PROCESSOUT)$/registry$/res$/, $@))}	
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$*.tmp $@
 .ELSE
 	$(XSLTPROC) -o $(@:d)$*.tmp \
 	            --stringparam xcs $(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$*.xcs \
@@ -206,8 +209,8 @@
     @+echo -------------+ creating a module file
 	-$(MKDIRHIER) $(@:d) 
 .IF "$(XSLTPROC)"=="NO_XSLTPROC"
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$(@:f:s/.xcu/.tmp/) xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$(<:b).xcs schemaRoot=$(XCSROOT)$/registry$/schema module={$(subst,$(<:b)-, $(*))}
-	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xml-apis.jar$(PATH_SEPERATOR)$(SOLARBINDIR)$/xercesImpl.jar$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$(@:f:s/.xcu/.tmp/) $@
+	$(JAVAI) $(JAVACPS) $(SOLARBINDIR)$/xt.jar$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/cfgimport.jar -Dcom.jclark.xsl.sax.parser=org.apache.xerces.parsers.SAXParser com.jclark.xsl.sax.Driver $< $(XSLDIR)$/alllang.xsl $(@:d)$(@:f:s/.xcu/.tmp/) xcs=$(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$(<:b).xcs schemaRoot=$(XCSROOT)$/registry$/schema module={$(subst,$(<:b)-, $(*))}
+	$(JAVAI) $(JAVACPS) $(XML_APIS_JAR)$(PATH_SEPERATOR)$(XERCES_JAR)$(PATH_SEPERATOR)$(PROCESSORDIR)$/schema.jar -Djavax.xml.parsers.SAXParserFactory=org.apache.xerces.jaxp.SAXParserFactoryImpl org.openoffice.helper.PrettyPrinter $(@:d)$(@:f:s/.xcu/.tmp/) $@
 .ELSE
 	$(XSLTPROC) -o $(@:d)$(@:f:s/.xcu/.tmp/) \
 	            --stringparam xcs $(XCSROOT)$/registry$/schema$/$(PACKAGEDIR)$/$(<:b).xcs \
--- solenv/inc/tg_jar.mk	14 Dec 2005 15:37:35 -0000	1.18
+++ solenv/inc/tg_jar.mk	27 Jan 2006 12:25:39 -0000
@@ -51,10 +51,28 @@
 
 CUSTOMMANIFESTFILEDEP:=$(MISC)$/$(TARGET)_$(CUSTOMMANIFESTFILE:f)
 
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XML_APIS_SUBST=$(XML_APIS_JAR)
+.ELSE
+XML_APIS_SUBST=xml-apis.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XERCES_SUBST=$(XERCES_JAR)
+.ELSE
+XERCES_SUBST=xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XALAN_SUBST=$(XALAN_JAR)
+.ELSE
+XALAN_SUBST=xalan.jar
+.ENDIF
+
+
 $(MISC)$/$(TARGET)_$(CUSTOMMANIFESTFILE:f) : $(subst,/,$/ $(DMAKE_WORK_DIR))$/$(CUSTOMMANIFESTFILE)
 	+-$(RM) $@
-#>& $(NULLDEV)
-	+$(COPY) $< $@
+	+$(TYPE) $< | $(SED) s:xml-apis.jar:$(XML_APIS_SUBST):g | $(SED) s:xercesImpl.jar:$(XERCES_SUBST):g | $(SED) s:xalan.jar:$(XALAN_SUBST):g > $@
 .ENDIF			# "$(CUSTOMMANIFESTFILE)"!=""
 
 $(JARMANIFEST) .PHONY : $(CUSTOMMANIFESTFILEDEP)
--- solenv/bin/modules/installer/profiles.pm	8 Sep 2005 09:08:48 -0000	1.5
+++ solenv/bin/modules/installer/profiles.pm	27 Jan 2006 15:54:48 -0000
@@ -187,6 +187,12 @@
 				my $section = $oneprofileitem->{'Section'};
 				my $key = $oneprofileitem->{'Key'};
 				my $value = $oneprofileitem->{'Value'};
+				for (my $j = 1; $j <= 50; $j++)
+				{
+					my $key = "ValueList" . $j;
+					if ( $oneprofileitem->{$key} ) 
+						{ $value = $value . " " . $oneprofileitem->{$key} }
+				}
 				my $order = $oneprofileitem->{'Order'};	# ignoring order at the moment
 
 				my $line = "[" . $section . "]" . "\n";
--- wizards/com/sun/star/wizards/makefile.mk	28 Dec 2005 17:14:04 -0000	1.11
+++ wizards/com/sun/star/wizards/makefile.mk	27 Jan 2006 12:24:44 -0000
@@ -42,7 +42,25 @@
 .INCLUDE : settings.mk
 #.INCLUDE :  $(PRJ)$/util$/makefile.pmk
 
-JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge xalan.jar xercesImp.jar xml-apis.jar
+JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge 
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
 
 JARCLASSDIRS	=                                               \
 	com$/sun$/star$/wizards$/common	       	 		\
--- wizards/com/sun/star/wizards/common/MANIFEST.MF	28 Jan 2005 15:55:47 -0000	1.2
+++ wizards/com/sun/star/wizards/common/MANIFEST.MF	27 Jan 2006 12:24:52 -0000
@@ -1 +1 @@
-Class-Path: xalan.jar xercesImp.jar xml-apis.jar
+Class-Path: xalan.jar xercesImpl.jar xml-apis.jar
--- wizards/com/sun/star/wizards/web/MANIFEST.MF	28 Jan 2005 15:56:04 -0000	1.3
+++ wizards/com/sun/star/wizards/web/MANIFEST.MF	27 Jan 2006 12:25:53 -0000
@@ -1,2 +1,2 @@
 RegistrationClassName: com.sun.star.wizards.web.CallWizard
-Class-Path: xalan.jar xercesImp.jar xml-apis.jar
+Class-Path: xalan.jar xercesImpl.jar xml-apis.jar
--- wizards/com/sun/star/wizards/web/makefile.mk	9 Sep 2005 09:59:40 -0000	1.8
+++ wizards/com/sun/star/wizards/web/makefile.mk	27 Jan 2006 12:25:59 -0000
@@ -42,7 +42,26 @@
 
 .INCLUDE : settings.mk
 #.INCLUDE :  $(PRJ)$/util$/makefile.pmk
-JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar xalan.jar xercesImp.jar xml-apis.jar
+JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar 
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
 CUSTOMMANIFESTFILE= MANIFEST.MF
 
 JARCLASSDIRS	= com$/sun$/star$/wizards$/web
--- wizards/com/sun/star/wizards/web/data/makefile.mk	9 Sep 2005 10:03:15 -0000	1.8
+++ wizards/com/sun/star/wizards/web/data/makefile.mk	27 Jan 2006 12:26:00 -0000
@@ -43,7 +43,25 @@
 .INCLUDE : settings.mk
 
 #.INCLUDE :  $(PRJ)$/util$/makefile.pmk
-JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar xalan.jar xercesImp.jar xml-apis.jar
+JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar 
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
 
 #JARCLASSDIRS	= com$/sun$/star$/wizards$/web
 #JARTARGET		= $(TARGET).jar
--- wizards/com/sun/star/wizards/web/export/makefile.mk	9 Sep 2005 10:04:04 -0000	1.7
+++ wizards/com/sun/star/wizards/web/export/makefile.mk	27 Jan 2006 12:26:00 -0000
@@ -43,7 +43,25 @@
 .INCLUDE : settings.mk
 
 #.INCLUDE :  $(PRJ)$/util$/makefile.pmk
-JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar xalan.jar xercesImp.jar xml-apis.jar
+JARFILES= unoil.jar jurt.jar ridl.jar juh.jar jut.jar java_uno.jar java_uno_accessbridge commonwizards.jar 
+
+.IF "$(SYSTEM_XALAN)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XALAN_JAR)
+.ELSE
+JARFILES += xalan.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
 
 #JARCLASSDIRS	= com$/sun$/star$/wizards$/web
 #JARTARGET		= $(TARGET).jar
--- xmerge/source/xmerge/build.xml	17 Jan 2006 10:54:44 -0000	1.2.4.1
+++ xmerge/source/xmerge/build.xml	27 Jan 2006 14:05:46 -0000
@@ -56,10 +56,14 @@
 <project name="xmerge" default="all" basedir=".">
 
     <property file="../inc/antbuild.properties"/>
+
+    <property environment="env"/>
+    <property name="env.XML_APIS_JAR" value="${solar.jar}/xml-apis.jar"/>
+    <property name="env.XERCES_JAR" value="${solar.jar}/xercesImpl.jar"/>
         
     <path id="classpath">
-        <pathelement location="${solar.jar}/xml-apis.jar"/>
-        <pathelement location="${solar.jar}/xercesImpl.jar"/>    
+        <pathelement location="${env.XML_APIS_JAR}"/>
+        <pathelement location="${env.XERCES_JAR}"/>
         <pathelement location="${solar.jar}/unoil.jar"/>
         <pathelement location="${solar.jar}/ridl.jar"/>
         <pathelement location="${solar.jar}/jurt.jar"/>
@@ -81,9 +85,40 @@
             <classpath refid="classpath"/>
         </javac>
     </target>
+
+    <target name="makeclasspath_xmlapis">
+        <condition property="makeclasspath_xmlapis_true">
+            <equals arg1="${env.SYSTEM_XML_APIS}" arg2="YES" />
+        </condition>
+    </target>
+
+    <target name="makeclasspath_xmlapis_if" depends="makeclasspath_xmlapis" if="makeclasspath_xmlapis_true">
+    	<property name="xml_apis_manifest" value="${env.XML_APIS_JAR}"/>
+    </target>
+
+    <target name="makeclasspath_xmlapis_else" depends="makeclasspath_xmlapis" unless="makeclasspath_xmlapis_true">
+    	<property name="xml_apis_manifest" value="xml-apis.jar"/>
+    </target>
+
+    <target name="makeclasspath_xerces">
+        <condition property="makeclasspath_xerces_true">
+            <equals arg1="${env.SYSTEM_XERCES}" arg2="YES" />
+        </condition>
+    </target>
+
+    <target name="makeclasspath_xerces_if" depends="makeclasspath_xerces" if="makeclasspath_xerces_true">
+    	<property name="xerces_manifest" value="${env.XERCES_JAR}"/>
+    </target>
+
+    <target name="makeclasspath_xerces_else" depends="makeclasspath_xerces" unless="makeclasspath_xerces_true">
+    	<property name="xerces_manifest" value="xercesImpl.jar"/>
+    </target>
+
+    <target name="makeclasspath" 
+	depends="makeclasspath_xmlapis_if,makeclasspath_xmlapis_else,makeclasspath_xerces_if,makeclasspath_xerces_else"/>
     
     <!-- package to jar -->
-    <target name="jar" depends="compile">
+    <target name="jar" depends="compile,makeclasspath">
         <jar destfile="${target.jar}">
             <fileset dir="${target.dir}"
                          includes="**/*.class" />
@@ -95,7 +130,7 @@
                 <attribute name="Specification-Vendor" value="OpenOffice.org"/>
                 <attribute name="Specification-Version" value="0.6.0"/>
                 <attribute name="Implementation-Version" value="#IMPL-VERSION#"/>
-                <attribute name="Class-Path" value="xml-apis.jar xercesImpl.jar"/>
+                <attribute name="Class-Path" value="${xml_apis_manifest} ${xerces_manifest}"/>
             </manifest>
          </jar>
     </target>
--- xmerge/source/xmerge/java/org/openoffice/xmerge/util/registry/build.xml	17 Jan 2006 10:55:00 -0000	1.2.4.1
+++ xmerge/source/xmerge/java/org/openoffice/xmerge/util/registry/build.xml	27 Jan 2006 14:05:48 -0000
@@ -76,11 +76,15 @@
     <!-- define how to handle CLASSPATH environment -->
     <property name="build.sysclasspath" value="ignore"/>
 
+    <property environment="env"/>
+    <property name="env.XML_APIS_JAR" value="${solar.jar}/xml-apis.jar"/>
+    <property name="env.XERCES_JAR" value="${solar.jar}/xercesImpl.jar"/>
+
     <!-- classpath settings for javac tasks -->
     <path id="classpath">
         <pathelement location="${build.class}"/>
-        <pathelement location="${solar.jar}/xml-apis.jar"/>
-        <pathelement location="${solar.jar}/xercesImpl.jar"/>
+        <pathelement location="${env.XML_APIS_JAR}"/>
+        <pathelement location="${env.XERCES_JAR}"/>
     </path>
 
     <!-- set whether we want to compile with or without deprecation -->
--- xmerge/util/build.xml	17 Jan 2006 10:55:05 -0000	1.9.4.1
+++ xmerge/util/build.xml	27 Jan 2006 14:05:48 -0000
@@ -37,10 +37,14 @@
     <property file="../source/inc/antbuild.properties"/>
     
     <property name="javadoc.dir" location="${build.dir}/javadoc"/>
+
+    <property environment="env"/>
+    <property name="env.XML_APIS_JAR" value="${solar.jar}/xml-apis.jar"/>
+    <property name="env.XERCES_JAR" value="${solar.jar}/xercesImpl.jar"/>
     
     <path id="classpath">
-        <pathelement location="${solar.jar}/xml-apis.jar"/>
-        <pathelement location="${solar.jar}/xercesImpl.jar"/>    
+        <pathelement location="${env.XML_APIS_JAR}"/>
+        <pathelement location="${env.XERCES_JAR}"/>
         <pathelement location="${solar.jar}/unoil.jar"/>
         <pathelement location="${solar.jar}/ridl.jar"/>
         <pathelement location="${solar.jar}/jurt.jar"/>
--- xmerge/workben/build.xml	17 Jan 2006 10:55:13 -0000	1.3.8.1
+++ xmerge/workben/build.xml	27 Jan 2006 14:05:48 -0000
@@ -57,11 +57,15 @@
     <!-- define how to handle CLASSPATH environment -->
     <property name="build.sysclasspath" value="ignore"/>
 
+    <property environment="env"/>
+    <property name="env.XML_APIS_JAR" value="${solar.jar}/xml-apis.jar"/>
+    <property name="env.XERCES_JAR" value="${solar.jar}/xercesImpl.jar"/>
+
     <!-- classpath settings for javac tasks -->
     <path id="classpath">
         <pathelement location="${build.class}"/>
-        <pathelement location="${solar.jar}/xml-apis.jar"/>
-        <pathelement location="${solar.jar}/xercesImpl.jar"/>
+        <pathelement location="${env.XML_APIS_JAR}"/>
+        <pathelement location="${env.XERCES_JAR}"/>
     </path>
 
     <!-- set wether we want to compile with or without deprecation -->
--- xmlhelp/source/com/sun/star/help/makefile.mk	19 Jan 2006 14:48:36 -0000	1.21.2.1
+++ xmlhelp/source/com/sun/star/help/makefile.mk	27 Jan 2006 12:38:13 -0000
@@ -42,17 +42,29 @@
 
 .INCLUDE : settings.mk
 
-JARFILES 		= xml-apis.jar xercesImpl.jar xt.jar unoil.jar ridl.jar jurt.jar jut.jar xmlsearch.jar
+JARFILES 	= xt.jar unoil.jar ridl.jar jurt.jar jut.jar xmlsearch.jar
 EXTRAJARFILES 	= 
 
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
+
 .IF "$(SYSTEM_DB)" == "YES"
 XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(DB_JAR)
 .ELSE
-JARFILES+= db.jar
+JARFILES += db.jar
 .ENDIF
 
 CLASSGENDIR		= $(OUT)$/classgen
-RDB		 		= $(SOLARBINDIR)$/types.rdb
+RDB	 		= $(SOLARBINDIR)$/types.rdb
 JAVAFILES		= $(subst,$(CLASSDIR)$/$(PACKAGE)$/, $(subst,.class,.java $(JAVACLASSFILES))) 
 
 # --- Files --------------------------------------------------------
--- XmlSearch/src/com/sun/xmlsearch/makefile.mk	17 Jan 2006 10:54:03 -0000	1.5.6.1
+++ XmlSearch/src/com/sun/xmlsearch/makefile.mk	27 Jan 2006 10:04:30 -0000
@@ -21,7 +21,19 @@
 
 .INCLUDE : settings.mk
 
-JARFILES 		=  xpi-apis.jar xercesImpl.jar xt.jar
+JARFILES 		=  xt.jar
+
+.IF "$(SYSTEM_XML_APIS)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XML_APIS_JAR)
+.ELSE
+JARFILES += xml-apis.jar
+.ENDIF
+
+.IF "$(SYSTEM_XERCES)" == "YES"
+XCLASSPATH!:=$(XCLASSPATH)$(PATH_SEPERATOR)$(XERCES_JAR)
+.ELSE
+JARFILES += xercesImpl.jar
+.ENDIF
 
 JAVAFILES		= $(subst,$(CLASSDIR)$/$(PACKAGE)$/, $(subst,.class,.java $(JAVACLASSFILES))) 
 
--- odk/pack/gendocu/makefile.mk	28 Dec 2005 18:06:29 -0000	1.15
+++ odk/pack/gendocu/makefile.mk	27 Jan 2006 19:38:14 -0000
@@ -64,8 +64,11 @@
         $(JAVA_SRC_DIR)$/jut_src.zip \
         $(JAVA_SRC_DIR)$/juh_src.zip \
         $(JAVA_SRC_DIR)$/ridl_src.zip \
-        $(JAVA_SRC_DIR)$/sandbox_src.zip \
         $(JAVA_SRC_DIR)$/unoloader_src.zip
+
+.IF "$(JDK)" != "gcj"
+	JAVA_SRC_FILES+=$(JAVA_SRC_DIR)$/sandbox_src.zip
+.ENDIF
 
 JAVA_BEAN_SRC_FILES=\
         $(JAVA_SRC_DIR)$/com$/sun$/star$/beans$/ContainerFactory.java \
