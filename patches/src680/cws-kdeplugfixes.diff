Index: vcl/inc/svdata.hxx
===================================================================
RCS file: /cvs/gsl/vcl/inc/svdata.hxx,v
retrieving revision 1.51
retrieving revision 1.51.74.1
diff -u -p -u -p -r1.51 -r1.51.74.1
--- vcl/inc/svdata.hxx	3 Mar 2005 19:56:35 -0000	1.51
+++ vcl/inc/svdata.hxx	2 May 2005 12:47:17 -0000	1.51.74.1
@@ -83,6 +83,9 @@
 #ifndef _SV_SV_H
 #include <sv.h>
 #endif
+#ifndef _COLOR_HXX
+#include <tools/color.hxx>
+#endif
 
 #ifndef _VCL_DLLAPI_H
 #include "dllapi.h"
@@ -327,6 +330,8 @@ struct ImplSVNWFData
                                                           // toolbox dropdown buttons
     int                     mnMenuFormatExtraBorder;      // inner popup menu border
     bool                    mbFlatMenu;                   // no popup 3D border
+    Color                   maMenuBarHighlightTextColor;  // override higlight text color
+                                                          // in menubar if not transparent
 };
 
 
Index: vcl/source/app/svdata.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/app/svdata.cxx,v
retrieving revision 1.42
retrieving revision 1.42.40.1
diff -u -p -u -p -r1.42 -r1.42.40.1
--- vcl/source/app/svdata.cxx	29 Mar 2005 14:36:45 -0000	1.42
+++ vcl/source/app/svdata.cxx	2 May 2005 12:47:17 -0000	1.42.40.1
@@ -199,6 +199,7 @@ void ImplInitSVData()
     // init global instance data
     memset( pSVData, 0, sizeof( ImplSVData ) );
     pSVData->maHelpData.mbAutoHelpId = sal_True;
+    pSVData->maNWFData.maMenuBarHighlightTextColor = Color( COL_TRANSPARENT );
 }
 
 // -----------------------------------------------------------------------
Index: vcl/source/control/spinfld.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/control/spinfld.cxx,v
retrieving revision 1.17
retrieving revision 1.17.42.1
diff -u -p -u -p -r1.17 -r1.17.42.1
--- vcl/source/control/spinfld.cxx	30 Mar 2005 09:06:23 -0000	1.17
+++ vcl/source/control/spinfld.cxx	4 May 2005 10:50:17 -0000	1.17.42.1
@@ -736,7 +736,9 @@ void SpinField::ImplCalcButtonAreas( Out
         BOOL bNativeRegionOK = FALSE;
         Region aContentUp, aContentDown;
 
-		if ( (pDev->GetOutDevType() == OUTDEV_WINDOW) && 
+		if ( (pDev->GetOutDevType() == OUTDEV_WINDOW) &&
+            // there is just no useful native support for spinfields with dropdown
+            ! (GetStyle() & WB_DROPDOWN) &&
             IsNativeControlSupported(CTRL_SPINBOX, PART_ENTIRE_CONTROL) )
         {
             Window *pWin = (Window*) pDev;
@@ -755,7 +757,7 @@ void SpinField::ImplCalcButtonAreas( Out
                     aArea, 0, aControlValue, rtl::OUString(), aBound, aContentUp) &&
                 pWin->GetNativeControlRegion(CTRL_SPINBOX, PART_BUTTON_DOWN,
                     aArea, 0, aControlValue, rtl::OUString(), aBound, aContentDown);
-
+                    
             if( bNativeRegionOK )
             {
                 // convert back from border space to local coordinates
Index: vcl/source/window/menu.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/window/menu.cxx,v
retrieving revision 1.123
retrieving revision 1.123.22.1
diff -u -p -u -p -r1.123 -r1.123.22.1
--- vcl/source/window/menu.cxx	8 Apr 2005 16:16:24 -0000	1.123
+++ vcl/source/window/menu.cxx	2 May 2005 12:47:18 -0000	1.123.22.1
@@ -651,6 +651,8 @@ private:
     void            ImplCreatePopup( BOOL bPreSelectFirst );
     BOOL            ImplHandleKeyEvent( const KeyEvent& rKEvent, BOOL bFromMenu = TRUE );
 	Rectangle		ImplGetItemRect( USHORT nPos );
+    
+    void            ImplInitStyleSettings();
 
                     DECL_LINK( CloserHdl, PushButton* );
                     DECL_LINK( FloatHdl, PushButton* );
@@ -4571,6 +4573,8 @@ MenuBarWindow::MenuBarWindow( Window* pP
     aHideBtn.SetClickHdl( LINK( this, MenuBarWindow, HideHdl ) );
     aHideBtn.SetSymbol( SYMBOL_HIDE );
     aHideBtn.SetQuickHelpText( XubString( ResId( SV_HELPTEXT_MINIMIZE, pResMgr ) ) );
+    
+    ImplInitStyleSettings();
 }
 
 MenuBarWindow::~MenuBarWindow()
@@ -5218,6 +5222,21 @@ void MenuBarWindow::ImplLayoutChanged()
         pMenu->ImplKillLayoutData();
 }
 
+void MenuBarWindow::ImplInitStyleSettings()
+{
+    if( IsNativeControlSupported( CTRL_MENUBAR, PART_MENU_ITEM ) &&
+        IsNativeControlSupported( CTRL_MENUBAR, PART_ENTIRE_CONTROL ) )
+    {
+        Color aHighlightTextColor = ImplGetSVData()->maNWFData.maMenuBarHighlightTextColor;
+        if( aHighlightTextColor != Color( COL_TRANSPARENT ) )
+        {
+            StyleSettings aStyle = maSettings.GetStyleSettings();
+            aStyle.SetMenuHighlightTextColor( aHighlightTextColor );
+            maSettings.SetStyleSettings( aStyle );
+        }
+    }
+}
+
 void MenuBarWindow::DataChanged( const DataChangedEvent& rDCEvt )
 {
     Window::DataChanged( rDCEvt );
@@ -5228,6 +5247,7 @@ void MenuBarWindow::DataChanged( const D
           (rDCEvt.GetFlags() & SETTINGS_STYLE)) )
     {
         ImplLayoutChanged();
+        ImplInitStyleSettings();
     }
 }
 
Index: vcl/unx/inc/plugins/kde/kdedata.hxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/inc/plugins/kde/kdedata.hxx,v
retrieving revision 1.3
retrieving revision 1.3.4.4
diff -u -p -u -p -r1.3 -r1.3.4.4
--- vcl/unx/inc/plugins/kde/kdedata.hxx	22 Apr 2005 11:33:08 -0000	1.3
+++ vcl/unx/inc/plugins/kde/kdedata.hxx	29 Apr 2005 17:41:24 -0000	1.3.4.4
@@ -108,6 +108,7 @@ public:
     virtual SalGraphics* GetGraphics();
 	virtual void ReleaseGraphics( SalGraphics *pGraphics );
     virtual void UpdateSettings( AllSettings& rSettings );
+    virtual void Show( BOOL bVisible, BOOL bNoActivate );
 };
 
 class KDESalInstance : public X11SalInstance
@@ -121,10 +122,23 @@ public:
 
 class KDEXLib : public SalXLib
 {
+    bool            m_bStartupDone;
+    void*           m_pApplication;
+    char**          m_pFreeCmdLineArgs;
+    char**          m_pAppCmdLineArgs;
+    int             m_nFakeCmdLineArgs;
 public:
-	KDEXLib() : SalXLib() {}
-	virtual ~KDEXLib() {}
+	KDEXLib() : SalXLib(),
+        m_bStartupDone( false ),
+        m_pApplication( NULL ),
+        m_pFreeCmdLineArgs( NULL ),
+        m_pAppCmdLineArgs( NULL ),
+        m_nFakeCmdLineArgs( 0 )
+        {}
+	virtual ~KDEXLib();
     virtual void Init();
+    
+    void doStartup();
 };
 
 #endif // _VCL_KDEDATA_HXX
Index: vcl/unx/kde/kdedata.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/kde/kdedata.cxx,v
retrieving revision 1.6
retrieving revision 1.6.4.4
diff -u -p -u -p -r1.6 -r1.6.4.4
--- vcl/unx/kde/kdedata.cxx	22 Apr 2005 11:33:28 -0000	1.6
+++ vcl/unx/kde/kdedata.cxx	29 Apr 2005 17:41:25 -0000	1.6.4.4
@@ -122,13 +122,29 @@ SalKDEDisplay::SalKDEDisplay( Display* p
 
 SalKDEDisplay::~SalKDEDisplay()
 {
-    KStartupInfo::appStarted();
+    // in case never a frame opened
+    static_cast<KDEXLib*>(GetXLib())->doStartup();
+    // clean up own members
+    doDestruct();
+    // prevent SalDisplay from closing KApplication's display
+    pDisp_ = NULL;
 }
 
 /***************************************************************************
  * class KDEXLib                                                           *
  ***************************************************************************/
 
+KDEXLib::~KDEXLib()
+{
+    // properly deinitialize KApplication
+    delete (KApplication*)m_pApplication;
+    // free the faked cmdline arguments no longer needed by KApplication
+    for( int i = 0; i < m_nFakeCmdLineArgs; i++ )
+        free( m_pFreeCmdLineArgs[i] );
+    delete [] m_pFreeCmdLineArgs;
+    delete [] m_pAppCmdLineArgs;
+}
+
 void KDEXLib::Init()
 {
 	SalI18N_InputMethod* pInputMethod = new SalI18N_InputMethod;
@@ -149,8 +165,7 @@ void KDEXLib::Init()
 			"kendy@artax.karlin.mff.cuni.cz",
 			"http://artax.karlin.mff.cuni.cz/~kendy" );
 
-	int nFakeArgc = 1;
-	char** pFakeArgv = NULL;
+    m_nFakeCmdLineArgs = 1;
 	USHORT nIdx;
 	vos::OExtCommandLine aCommandLine;
 	int nParams = aCommandLine.getCommandArgCount();
@@ -160,28 +175,37 @@ void KDEXLib::Init()
 	for ( nIdx = 0; nIdx < nParams; ++nIdx ) 
 	{
 		aCommandLine.getCommandArg( nIdx, aParam );
-		if ( !pFakeArgv && aParam.equalsAscii( "-display" ) && nIdx + 1 < nParams )
+		if ( !m_pFreeCmdLineArgs && aParam.equalsAscii( "-display" ) && nIdx + 1 < nParams )
 		{
 			aCommandLine.getCommandArg( nIdx + 1, aParam );
 			aDisplay = rtl::OUStringToOString( aParam, osl_getThreadTextEncoding() );
 
-			nFakeArgc = 3;
-			pFakeArgv = new char*[ nFakeArgc ];
-			pFakeArgv[ 1 ] = strdup( "-display" );
-			pFakeArgv[ 2 ] = strdup( aDisplay.getStr() );
+			m_nFakeCmdLineArgs = 3;
+			m_pFreeCmdLineArgs = new char*[ m_nFakeCmdLineArgs ];
+			m_pFreeCmdLineArgs[ 1 ] = strdup( "-display" );
+			m_pFreeCmdLineArgs[ 2 ] = strdup( aDisplay.getStr() );
 		}
 	}
-	if ( !pFakeArgv )
-		pFakeArgv = new char*[ nFakeArgc ];
+	if ( !m_pFreeCmdLineArgs )
+		m_pFreeCmdLineArgs = new char*[ m_nFakeCmdLineArgs ];
 
     osl_getExecutableFile( &aParam.pData );
     osl_getSystemPathFromFileURL( aParam.pData, &aBin.pData );
-	pFakeArgv[0] = strdup( rtl::OUStringToOString( aBin, osl_getThreadTextEncoding() ).getStr() );
+    rtl::OString aExec = rtl::OUStringToOString( aBin, osl_getThreadTextEncoding() );
+	m_pFreeCmdLineArgs[0] = strdup( aExec.getStr() );
 
-	KCmdLineArgs::init( nFakeArgc, pFakeArgv, kAboutData );
+    // make a copy of the string list for freeing it since
+    // KApplication manipulates the pointers inside the argument vector
+    // note: KApplication bad !
+    m_pAppCmdLineArgs = new char*[ m_nFakeCmdLineArgs ];
+    for( int i = 0; i < m_nFakeCmdLineArgs; i++ )
+        m_pAppCmdLineArgs[i] = m_pFreeCmdLineArgs[i];
+
+	KCmdLineArgs::init( m_nFakeCmdLineArgs, m_pAppCmdLineArgs, kAboutData );
 
 	KApplication::disableAutoDcopRegistration();
-	new KApplication();
+	m_pApplication = new KApplication();
+    kapp->disableSessionManagement();
 	
 	Display* pDisp = QPaintDevice::x11AppDisplay();
 
@@ -204,6 +228,18 @@ void KDEXLib::Init()
 	pSalDisplay->SetKbdExtension( pKbdExtension );
 }
 
+void KDEXLib::doStartup()
+{
+    if( ! m_bStartupDone )
+    {
+        KStartupInfo::appStarted();
+        m_bStartupDone = true;
+        #if OSL_DEBUG_LEVEL > 1
+        fprintf( stderr, "called KStartupInfo::appStarted()\n" );
+        #endif
+    }
+}
+
 /**********************************************************************
  * class KDEData                                                      *
  **********************************************************************/
Index: vcl/unx/kde/makefile.mk
===================================================================
RCS file: /cvs/gsl/vcl/unx/kde/makefile.mk,v
retrieving revision 1.4
retrieving revision 1.4.122.1
diff -u -p -u -p -r1.4 -r1.4.122.1
--- vcl/unx/kde/makefile.mk	13 Jan 2005 18:14:02 -0000	1.4
+++ vcl/unx/kde/makefile.mk	2 May 2005 15:10:48 -0000	1.4.122.1
@@ -85,6 +85,10 @@ dummy:
 
 .IF "$(ENABLE_KDE)" != ""
 
+.IF "$(KDE_ROOT)"!=""
+KDE_CFLAGS:=-I$(KDE_ROOT)$/include -DQT_CLEAN_NAMESPACE
+.ENDIF 			# "$(KDE_ROOT)"!=""
+
 CFLAGS+=$(KDE_CFLAGS)
 
 SLOFILES=\
Index: vcl/unx/kde/salnativewidgets-kde.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/kde/salnativewidgets-kde.cxx,v
retrieving revision 1.6
retrieving revision 1.6.4.8
diff -u -p -u -p -r1.6 -r1.6.4.8
--- vcl/unx/kde/salnativewidgets-kde.cxx	22 Apr 2005 11:33:43 -0000	1.6
+++ vcl/unx/kde/salnativewidgets-kde.cxx	4 May 2005 13:52:09 -0000	1.6.4.8
@@ -475,7 +475,7 @@ WidgetPainter::~WidgetPainter( void )
     delete m_pEditableComboBox, m_pEditableComboBox = NULL;
     delete m_pLineEdit, m_pLineEdit = NULL;
     delete m_pSpinWidget, m_pSpinWidget = NULL;
-    delete m_pSpinEdit, m_pSpinEdit = NULL;
+    m_pSpinEdit = NULL; // Deleted in m_pSpinWidget's destructor
     delete m_pTabAlone, m_pTabAlone = NULL;
     delete m_pTabBarParent, m_pTabBarParent = NULL;
     m_pTabBar = NULL;    // Deleted in m_pTabBarParent's destructor
@@ -790,6 +790,8 @@ BOOL WidgetPainter::drawStyledWidget( QW
     }
     else if ( strcmp( "QToolButton", pClassName ) == 0 )
     {
+        if( (nStyle & QStyle::Style_MouseOver) )
+            nStyle &= ~QStyle::Style_Off;
         kapp->style().drawComplexControl( QStyle::CC_ToolButton,
                 &qPainter, pWidget, qRect,
                 pWidget->colorGroup(), nStyle,
@@ -1171,6 +1173,7 @@ QStyle::SFlags WidgetPainter::vclStateVa
 	case BUTTONVALUE_ON:    nStyle |= QStyle::Style_On;       break;
 	case BUTTONVALUE_OFF:   nStyle |= QStyle::Style_Off;      break;
 	case BUTTONVALUE_MIXED: nStyle |= QStyle::Style_NoChange; break;
+    default: break;
     }
 
     return nStyle;
@@ -1233,7 +1236,7 @@ BOOL KDESalGraphics::IsNativeControlSupp
 	( (nType == CTRL_CHECKBOX)    && (nPart == PART_ENTIRE_CONTROL) ) ||
 	( (nType == CTRL_COMBOBOX)    && (nPart == PART_ENTIRE_CONTROL || nPart == HAS_BACKGROUND_TEXTURE) ) ||
 	( (nType == CTRL_EDITBOX)     && (nPart == PART_ENTIRE_CONTROL || nPart == HAS_BACKGROUND_TEXTURE) ) ||
-	( (nType == CTRL_LISTBOX)     && (nPart == PART_ENTIRE_CONTROL || nPart == PART_WINDOW) ) ||
+	( (nType == CTRL_LISTBOX)     && (nPart == PART_ENTIRE_CONTROL || nPart == PART_WINDOW || nPart == HAS_BACKGROUND_TEXTURE ) ) ||
 	( (nType == CTRL_SPINBOX)     && (nPart == PART_ENTIRE_CONTROL || nPart == HAS_BACKGROUND_TEXTURE) ) ||
 	// no CTRL_SPINBUTTONS for KDE
 	( (nType == CTRL_TAB_ITEM)    && (nPart == PART_ENTIRE_CONTROL) ) ||
@@ -1715,8 +1718,16 @@ BOOL KDESalGraphics::getNativeControlReg
 KDESalFrame::KDESalFrame( SalFrame* pParent, ULONG nStyle ) :
     X11SalFrame( pParent, nStyle )
 {
-    if ( !pParent )
-        KStartupInfo::appStarted();
+}
+
+void KDESalFrame::Show( BOOL bVisible, BOOL bNoActivate )
+{
+    if ( !GetParent() && ! (GetStyle() & SAL_FRAME_STYLE_INTRO) )
+    {
+        KDEXLib* pXLib = static_cast<KDEXLib*>(GetDisplay()->GetXLib());
+        pXLib->doStartup();
+    }
+    X11SalFrame::Show( bVisible, bNoActivate );
 }
 
 /** Helper function to convert colors.
@@ -1945,7 +1956,24 @@ void KDESalFrame::UpdateSettings( AllSet
         aStyleSettings.SetMenuColor( toColor( qMenuCG.button() ) );
         aStyleSettings.SetMenuBarColor( toColor( qMenuCG.button() ) );
         aStyleSettings.SetMenuHighlightColor( toColor ( qMenuCG.highlight() ) );
-        aStyleSettings.SetMenuHighlightTextColor( toColor ( qMenuCG.highlightedText() ) );
+
+        // Menu items higlight text color, theme specific
+        if ( kapp->style().inherits( "HighContrastStyle" ) ||
+                kapp->style().inherits( "KeramikStyle" ) ||
+                kapp->style().inherits( "QWindowsStyle" ) ||
+                kapp->style().inherits( "ThinKeramikStyle" ) ||
+                kapp->style().inherits( "PlastikStyle" ) )
+        {
+            aStyleSettings.SetMenuHighlightTextColor( toColor ( qMenuCG.highlightedText() ) );
+        }
+        else
+            aStyleSettings.SetMenuHighlightTextColor( toColor ( qMenuCG.buttonText() ) );
+        
+        // set special menubar higlight text color
+        if ( kapp->style().inherits( "HighContrastStyle" ) )
+            ImplGetSVData()->maNWFData.maMenuBarHighlightTextColor = toColor( qMenuCG.highlightedText() );
+        else
+            ImplGetSVData()->maNWFData.maMenuBarHighlightTextColor = toColor( qMenuCG.buttonText() );
 
         // Font
         Font aFont = toFont( pMenuBar->font(), rSettings.GetUILocale() );
Index: vcl/unx/source/app/saldisp.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/app/saldisp.cxx,v
retrieving revision 1.63
retrieving revision 1.63.4.1
diff -u -p -u -p -r1.63 -r1.63.4.1
--- vcl/unx/source/app/saldisp.cxx	22 Apr 2005 11:33:58 -0000	1.63
+++ vcl/unx/source/app/saldisp.cxx	4 May 2005 16:42:26 -0000	1.63.4.1
@@ -672,6 +672,11 @@ void SalDisplay::doDestruct()
 
     if( IsDisplay() )
     {
+		delete mpInputMethod, mpInputMethod = (SalI18N_InputMethod*)ILLEGAL_POINTER;
+		delete mpKbdExtension, mpKbdExtension = (SalI18N_KeyboardExtension*)ILLEGAL_POINTER;
+
+        // do not call anything that could implicitly call back into
+        // this object after this point
         osl_destroyMutex( hEventGuard_ );
 
         XDestroyWindow( pDisp_, hRefWindow_ );
@@ -709,9 +714,6 @@ void SalDisplay::doDestruct()
 
         if( pRootVisual_ != pVisual_ )
             delete pRootVisual_;
-
-		delete mpInputMethod;
-		delete mpKbdExtension;
     }
 
     pVisual_        = (SalVisual*)ILLEGAL_POINTER;
Index: vcl/unx/source/app/sm.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/app/sm.cxx,v
retrieving revision 1.20
retrieving revision 1.20.108.1
diff -u -p -u -p -r1.20 -r1.20.108.1
--- vcl/unx/source/app/sm.cxx	31 Jan 2005 13:26:57 -0000	1.20
+++ vcl/unx/source/app/sm.cxx	29 Apr 2005 15:43:18 -0000	1.20.108.1
@@ -206,6 +206,7 @@ class ICEConnectionObserver
 public:
 
 	static void activate();
+    static void deactivate();
     static void lock();
     static void unlock();
     static void wakeup();
@@ -494,6 +495,7 @@ void SessionManagerClient::close()
 		SmcCloseConnection( aSmcConnection, 0, NULL );
         SMprintf( "SmcConnection closed\n" );
         ICEConnectionObserver::unlock();
+        ICEConnectionObserver::deactivate();
 #endif
 		aSmcConnection = NULL;
 	}
@@ -578,6 +580,35 @@ void ICEConnectionObserver::activate()
 	}
 }
 
+void ICEConnectionObserver::deactivate()
+{
+	if( bIsWatching )
+	{
+        lock();
+		bIsWatching = FALSE;
+#ifdef USE_SM_EXTENSION
+		IceRemoveConnectionWatch( ICEWatchProc, NULL );
+#endif
+        nConnections = 0;
+        if( ICEThread )
+        {
+            osl_terminateThread( ICEThread );
+            wakeup();
+        }
+        unlock();
+        if( ICEThread )
+        {
+            osl_joinWithThread( ICEThread );
+            osl_destroyThread( ICEThread );
+            close( nWakeupFiles[1] );
+            close( nWakeupFiles[0] );
+            ICEThread = NULL;
+        }
+        osl_destroyMutex( ICEMutex );
+        ICEMutex = NULL;
+	}
+}
+
 void ICEConnectionObserver::wakeup()
 {
     char cChar = 'w';
Index: vcl/util/makefile.mk
===================================================================
RCS file: /cvs/gsl/vcl/util/makefile.mk,v
retrieving revision 1.66
retrieving revision 1.66.4.1
diff -u -p -u -p -r1.66 -r1.66.4.1
--- vcl/util/makefile.mk	22 Apr 2005 11:41:26 -0000	1.66
+++ vcl/util/makefile.mk	2 May 2005 15:10:49 -0000	1.66.4.1
@@ -391,6 +391,9 @@ SHL4STDLIBS+=$(SHL3STDLIBS) -lX11 -ldl
 
 # KDE plugin
 .IF "$(ENABLE_KDE)" != ""
+.IF "$(KDE_ROOT)"!=""
+KDE_LIBS:=-L$(KDE_ROOT)$/lib -lkdeui -lkdecore -lqt-mt
+.ENDIF 			# "$(KDE_ROOT)"!=""
 LIB5TARGET=$(SLB)$/ikde_plug_
 LIB5FILES=$(SLB)$/kdeplug.lib
 SHL5TARGET=vclplug_kde$(UPD)$(DLLPOSTFIX)
Index: scp2/source/ooo/file_library_ooo.scp
===================================================================
RCS file: /cvs/installation/scp2/source/ooo/file_library_ooo.scp,v
retrieving revision 1.101
retrieving revision 1.101.4.1
diff -u -p -u -p -r1.101 -r1.101.4.1
--- scp2/source/ooo/file_library_ooo.scp	27 Apr 2005 11:15:47 -0000	1.101
+++ scp2/source/ooo/file_library_ooo.scp	2 May 2005 16:07:11 -0000	1.101.4.1
@@ -1376,7 +1376,7 @@ STD_LIB_FILE( gid_File_Lib_Vclplug_Gtk, 
 #endif
 #ifdef ENABLE_KDE
 #ifndef MACOSX
-STD_SETUPZIP_LIB_FILE( gid_File_Lib_Vclplug_Kde, vclplug_kde )
+STD_LIB_FILE( gid_File_Lib_Vclplug_Kde, vclplug_kde )
 #endif
 #endif
 #endif
