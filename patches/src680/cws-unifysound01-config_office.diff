Index: config_office/configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.223
retrieving revision 1.216.10.4
diff -u -p -u -p -r1.223 -r1.216.10.4
--- config_office/configure.in	25 Oct 2007 16:00:29 -0000	1.223
+++ config_office/configure.in	30 Oct 2007 15:10:26 -0000	1.216.10.4
@@ -237,9 +237,6 @@ AC_ARG_ENABLE(binfilter,
 AC_ARG_ENABLE(rpath,
 [  --disable-rpath         Disable the use of relative paths in shared libraries
 ],,)
-AC_ARG_ENABLE(pasf,
-[  --disable-pasf          disable support for sound using portaudio/sndfile
-],,enable_pasf=yes)
 AC_ARG_ENABLE(pam,
 [  --disable-pam           Disable pam support.
 ],,)
@@ -260,9 +257,6 @@ AC_ARG_WITH(myspell-dicts,
                           distributions where the myspell dictionaries are
                           installed from other sources
 ],,)
-AC_ARG_WITH(nas,
-[  --without-nas           Build without nas support
-],,)
 AC_ARG_WITH(system-libs,
 [  --with-system-libs      Use libs already on system -- enables all
                           --with-system-* flags except mozilla, python and
@@ -362,15 +356,6 @@ AC_ARG_WITH(system-boost,
 AC_ARG_WITH(system-vigra,
 [  --with-system-vigra     Use vigra already on system
 ],,)
-AC_ARG_WITH(system-nas,
-[  --with-system-nas       Use nas already on system
-],,)
-AC_ARG_WITH(system-sndfile,
-[  --with-system-sndfile   Use sndfile already on system
-],,)
-AC_ARG_WITH(system-portaudio,
-[  --with-system-portaudio Use portaudio already on system
-],,)
 AC_ARG_ENABLE(neon,
 [  --disable-neon          Disable neon and the compilation of webdav binding
 ],,)
@@ -3931,107 +3916,6 @@ AC_SUBST(SYSTEM_XRENDER_HEADERS)
 AC_SUBST(XRENDER_LINK)
 
 dnl ===================================================================
-dnl Check for system nas
-dnl ===================================================================
-AC_MSG_CHECKING([which nas to use])
-if test -n "$with_nas"; then
-    AC_MSG_RESULT([none])
-elif test -n "$without_nas"; then
-    ENABLE_NAS=""
-elif test -n "$with_system_nas" -o -n "$with_system_libs" && \
-	test "$with_system_nas" != "no"; then
-    AC_MSG_RESULT([external])
-    SYSTEM_NAS=YES
-    AC_CHECK_HEADER(audio/audiolib.h, [ NAS_INCLUDES=/usr/include ],
-        [
-             CFLAGS=-I/usr/X11R6/include
-             AC_CHECK_HEADER(audio/audiolib.h,
-                 [ NAS_INCLUDES=/usr/X11R6/include ],
-                 [ AC_MSG_ERROR(no. install nas) ], []
-             )
-        ], []
-    )
-    AC_CHECK_LIB(audio, AuOpenServer, [],
-        [AC_MSG_ERROR(nas not found or functional)], [-L$XLIB -lXt])
-    ENABLE_NAS=YES
-else
-    AC_MSG_RESULT([internal])
-    SYSTEM_NAS=NO
-    ENABLE_NAS=YES
-    BUILD_TYPE="$BUILD_TYPE NAS"
-    dnl ===================================================================
-    dnl Check whether xmkmf program can be used, x systems only
-    dnl ===================================================================
-    if test "$_os" != "WINNT" && test "$_os" != "OSF1"; then
-       AC_PATH_PROGS(XMKMF, xmkmf)
-       if test -z "$XMKMF"; then
-          AC_PATH_PROGS(XMKMF, xmkmf,, [/usr/X11R6/bin])
-          if test -z "$XMKMF"; then
-             AC_MSG_ERROR([xmkmf is needed to build nas])
-          else
-             PATHEXTRA="$PATHEXTRA:/usr/X11R6/bin"
-             AC_MSG_WARN([adding /usr/X11R6/bin to the PATH (xmkmf is needed to build nas)])
-             echo "adding /usr/X11R6/bin to the PATH (xmkmf is needed to build nas)" >> warn
-             AC_SUBST(PATHEXTRA)
-          fi
-       fi
-    fi
-fi
-AC_SUBST(SYSTEM_NAS)
-AC_SUBST(NAS_INCLUDES)
-AC_SUBST(ENABLE_NAS)
-
-AC_MSG_CHECKING([whether to enable portaudio/sndfile support])
-if test "$_os" != "WINNT" && \
-  test "$_os" != "SunOS" && \
-  test -n "$enable_pasf" && test "$enable_pasf" != "no"; then
-	AC_MSG_RESULT([yes])
-   ENABLE_PASF=YES
-  	AC_MSG_CHECKING([which sndfile to use])
-	if test -n "$with_system_sndfile" -o -n "$with_system_libs" && \
-		test "$with_system_sndfile" != "no"; then
-	   AC_MSG_RESULT([external])
-	   PKG_CHECK_MODULES(SNDFILE, sndfile)
-	   SYSTEM_SNDFILE=YES
-	else
-           AC_MSG_RESULT([internal])
-	   SYSTEM_SNDFILE=NO
-       SNDFILE_LIBS=-lsndfile
-	    BUILD_TYPE="$BUILD_TYPE SNDFILE"
-	fi
-
-   PA_VER=18
-	AC_MSG_CHECKING([which portaudio to use])
-	if test -n "$with_system_portaudio" -o -n "$with_system_libs" && \
-		test "$with_system_portaudio" != "no"; then
-	   AC_MSG_RESULT(external)
-	   AC_CHECK_HEADER(portaudio.h, [],
-		[AC_MSG_ERROR(portaudio header not found. install portaudio)], [])
-	   AC_CHECK_LIB(portaudio, Pa_Initialize, [],
-		[AC_MSG_ERROR(portaudio library not found or functional)], [])
-	   AC_MSG_CHECKING(portaudio version)
-	   AC_TRY_LINK([#include <portaudio.h>], [
-	 /* Pa_GetVersion() only exists in v19, so this fails to build with v18 */
-        int v = Pa_GetVersion();
-	   ], [PA_VER=19; AC_MSG_RESULT([OK, v$PA_VER])], [AC_MSG_RESULT([OK, v$PA_VER])])
-      SYSTEM_PORTAUDIO=YES
-	else
-	   AC_MSG_RESULT([internal])
-	   SYSTEM_PORTAUDIO=NO
-	   BUILD_TYPE="$BUILD_TYPE PORTAUDIO"
-	fi
-else
-	AC_MSG_RESULT([no])
-fi
-AC_SUBST(ENABLE_PASF)
-AC_SUBST(PA_VER)
-AC_SUBST(SYSTEM_PORTAUDIO)
-AC_SUBST(SNDFILE_LIBS)
-AC_SUBST(SNDFILE_CFLAGS)
-AC_SUBST(SYSTEM_SNDFILE)
-AC_SUBST(BUILD_TYPE)
-
-dnl ===================================================================
 dnl Check for building neon
 dnl ===================================================================
 AC_MSG_CHECKING([whether to build neon])
Index: config_office/set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.158
retrieving revision 1.156.12.4
diff -u -p -u -p -r1.158 -r1.156.12.4
--- config_office/set_soenv.in	25 Oct 2007 15:45:36 -0000	1.158
+++ config_office/set_soenv.in	30 Oct 2007 15:09:59 -0000	1.156.12.4
@@ -81,7 +81,7 @@ my ( $oldPATH, $SRC_ROOT, $SO_HOME, $JAV
      $STAR_REGISTRY, $STAR_RESOURCEPATH, $DMAKEROOT, $CLASSPATH, $XCLASSPATH, $COMPATH,
      $MSPDB_PATH, $MIDL_PATH, $CSC_PATH,
      $LD_LIBRARY_PATH, $PATH, $SOLAREXTRAINC, $SOLAREXTRALIB, $SOLARLIB, 
-     $SOLARINC, $LOCALINI, $PATHEXTRA, $FRAMEWORKSHOME, $COMEX, $PERL, 
+     $SOLARINC, $LOCALINI, $FRAMEWORKSHOME, $COMEX, $PERL, 
      $COMP_ENV, $ILIB, $JAVAHOME, $PSDK_HOME, $DIRECTXSDK_LIB, $USE_NEW_SDK, $FRAME_HOME, 
      $ATL_LIB, $ATL_INCLUDE, $MFC_LIB, $MFC_INCLUDE, $NO_HIDS, $TEMP, $COMMON_BUILD_TOOLS, $WIN_GREP, $WIN_FIND, $WIN_LS,
      $WIN_GNUCOPY, $WIN_TOUCH, $STLPORT4, $MOZILLA_VERSION, $MOZILLA_TOOLKIT, $PREBUILD_MOZAB,
@@ -1218,10 +1218,6 @@ elsif ($platform =~ m/darwin/)
 
   # Append old PATH
   $PATH             .= $ps.$oldPATH;
-
-  # append PATHEXTRA
-  $PATHEXTRA         = "@PATHEXTRA@";                      
-  $PATH             .= $PATHEXTRA;
 }
 else
 {  AddWarning( "set_soenv", "$platform not configured for general environment paths" );
@@ -1733,7 +1729,6 @@ ToFile( "SCPDEFS",           '@SCPDEFS@'
 ToFile( "SOLAREXTRAINC",     $SOLAREXTRAINC,     "e" );
 ToFile( "SOLAREXTRALIB",     $SOLAREXTRALIB,     "e" );
 ToFile( "PATH",              $PATH,              "e" );
-ToFile( "PATHEXTRA",         $PATHEXTRA,         "e" );
 ToFile( "SOLARLIB",          $SOLARLIB,          "e" );
 ToFile( "SOLARINC",          $SOLARINC,          "e" );
 ToFile( "COMP_ENV",          $COMP_ENV,          "e" );
@@ -1844,15 +1839,6 @@ ToFile( "CURL_CFLAGS",       "@CURL_CFLA
 ToFile( "CURL_LIBS",         "@CURL_LIBS@",        "e" );
 ToFile( "SYSTEM_BOOST",      "@SYSTEM_BOOST@",     "e" );
 ToFile( "SYSTEM_VIGRA",      "@SYSTEM_VIGRA@",     "e" );
-ToFile( "SYSTEM_NAS",        "@SYSTEM_NAS@",       "e" );
-ToFile( "NAS_INCLUDES",      "@NAS_INCLUDES@",     "e" );
-ToFile( "ENABLE_NAS",        "@ENABLE_NAS@",       "e" );
-ToFile( "ENABLE_PASF",       "@ENABLE_PASF@",      "e" );
-ToFile( "SYSTEM_SNDFILE",    "@SYSTEM_SNDFILE@",   "e" );
-ToFile( "SNDFILE_CFLAGS",    "@SNDFILE_CFLAGS@",   "e" );
-ToFile( "SNDFILE_LIBS",	     "@SNDFILE_LIBS@",	   "e" );
-ToFile( "SYSTEM_PORTAUDIO",  "@SYSTEM_PORTAUDIO@", "e" );
-ToFile( "PA_VER",            "@PA_VER@",           "e" );
 ToFile( "SYSTEM_NEON",       "@SYSTEM_NEON@",      "e" );
 ToFile( "NEON_VERSION",      "@NEON_VERSION@",     "e" );
 ToFile( "NEON_LIBS",         "@NEON_LIBS@",        "e" );
