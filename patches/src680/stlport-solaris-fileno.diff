--- stlport/STLport-4.0.patch	20 Jun 2006 04:08:21 -0000	1.14
+++ stlport/STLport-4.0.patch	5 Nov 2007 13:30:59 -0000
@@ -3273,6 +3273,23 @@
   
   //----------------------------------------------------------------------
 ***************
+*** 92,98 ****
+  typedef  unsigned char* _File_ptr_type;
+  #endif
+  
+! inline int   _FILE_fd(const FILE& __f) { return __f._file; }
+  inline char* _FILE_I_begin(const FILE& __f) { return (char*) __f._base; }
+  inline char* _FILE_I_next(const FILE& __f) { return (char*) __f._ptr; }  
+  inline char* _FILE_I_end(const FILE& __f)
+--- 92,98 ----
+  typedef  unsigned char* _File_ptr_type;
+  #endif
+  
+! inline int   _FILE_fd(const FILE& __f) { return fileno(__CONST_CAST(FILE*,&__f)); }
+  inline char* _FILE_I_begin(const FILE& __f) { return (char*) __f._base; }
+  inline char* _FILE_I_next(const FILE& __f) { return (char*) __f._ptr; }  
+  inline char* _FILE_I_end(const FILE& __f)
+***************
 *** 377,382 ****
 --- 380,388 ----
   # endif
