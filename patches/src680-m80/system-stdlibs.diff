Index: gcc3_specific/makefile.mk
===================================================================
RCS file: /cvs/util/external/gcc3_specific/makefile.mk,v
retrieving revision 1.3
diff -u -u -r1.3 makefile.mk
--- external/gcc3_specific/makefile.mk	18 Jun 2003 12:44:10 -0000	1.3
+++ external/gcc3_specific/makefile.mk	13 Feb 2005 21:15:28 -0000
@@ -12,6 +12,7 @@
 .IF "$(OS)"!="MACOSX"
 .IF "$(OS)"!="IRIX"
 .IF "$(OS)"!="FREEBSD"
+.IF "$(SYSTEM_STDLIBS)" != "YES"
 
 
 all : $(SOLARLIBDIR)$/libstdc++.so.$(SHORTSTDCPP3) $(SOLARLIBDIR)$/libgcc_s.so.1 $(SOLARLIBDIR)$/libgcc_s.so 
@@ -27,6 +28,10 @@
         -rm -f $@
         +ln -s libgcc_s.so.1 $@
 
+.ELSE 
+@all: 
+        @echo "Using libstdc++ and libgcc_s from system..."
+.ENDIF 
 .ENDIF
 .ENDIF 
 .ENDIF 
Index: configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.80.12.7
diff -u -u -r1.80.12.7 configure.in
--- config_office/configure.in	11 Feb 2005 18:06:37 -0000	1.80.12.7
+++ config_office/configure.in	13 Feb 2005 21:24:39 -0000
@@ -57,6 +57,9 @@
 [  --disable-fontooo       disable FontOOo
                           (useful for distributions using fontconfig for OOo)
 ],,enable_fontooo="yes")
+AC_ARG_WITH(system-stdlibs,
+[  --with-system-stdlibs   use libstdc++/libgcc_s already on system
+],,)
 AC_ARG_WITH(system-mspack,
 [  --with-system-mspack    use libmspack already installed on system
 ],,)
@@ -1884,6 +1887,20 @@
 fi
 
 dnl ===================================================================
+dnl Check for system stdlibs
+dnl ===================================================================
+AC_MSG_CHECKING([whether to provide libstdc++/libgcc_s in the installset])
+if test -n "$with_system_stdlibs" -o -n "$with_system_libs" && \
+   test "$with_system_stdlibs" != "no"; then
+   AC_MSG_RESULT([no])
+   SYSTEM_STDLIBS=YES
+else
+   AC_MSG_RESULT([yes])
+   SYSTEM_STDLIBS=NO
+fi
+AC_SUBST(SYSTEM_STDLIBS)
+
+dnl ===================================================================
 dnl Check for system zlib
 dnl ===================================================================
 AC_MSG_CHECKING([which zlib to use])
Index: set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.29.12.6
diff -u -u -r1.29.12.6 set_soenv.in
--- config_office/set_soenv.in	27 Jan 2005 19:02:08 -0000	1.29.12.6
+++ config_office/set_soenv.in	13 Feb 2005 21:24:52 -0000
@@ -1749,6 +1749,7 @@
   ToFile( "LINKFLAGSRUNPATH",'',                   "e" );
 }
 ToFile( "EPM",               "@EPM@",              "e" );
+ToFile( "SYSTEM_STDLIBS",    "@SYSTEM_STDLIBS@",   "e" );
 ToFile( "SYSTEM_ZLIB",       "@SYSTEM_ZLIB@",      "e" );
 ToFile( "SYSTEM_PYTHON",     "@SYSTEM_PYTHON@",    "e" );
 ToFile( "PYTHON_CFLAGS",     "@PYTHON_CFLAGS@",    "e" );
Index: source/ooo/file_library_ooo.scp
===================================================================
RCS file: /cvs/installation/scp2/source/ooo/file_library_ooo.scp,v
retrieving revision 1.74.6.5
diff -u -u -r1.74.6.5 file_library_ooo.scp
--- scp2/source/ooo/file_library_ooo.scp	11 Feb 2005 18:08:37 -0000	1.74.6.5
+++ scp2/source/ooo/file_library_ooo.scp	13 Feb 2005 21:27:10 -0000
@@ -697,7 +697,7 @@
 
 STD_UNO_LIB_FILE( gid_File_Lib_Fwl , fwl)
 
-#if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) )
+#if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) || defined(SYSTEM_STDLIBS))
 #if defined( _gcc3 )
 
 File gid_File_Lib_Gcc
@@ -711,7 +711,7 @@
 
 #endif
 
-#if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) )
+#if ! (defined (FREEBSD) || defined (NETBSD) || defined(MACOSX) || defined(SYSTEM_STDLIBS))
 #if defined( _gcc3 )
 
 File gid_File_Lib_Stdc
Index: source/ooo/makefile.mk
===================================================================
RCS file: /cvs/installation/scp2/source/ooo/makefile.mk,v
retrieving revision 1.13.46.4
diff -u -u -r1.13.46.4 makefile.mk
--- scp2/source/ooo/makefile.mk	11 Feb 2005 18:09:02 -0000	1.13.46.4
+++ scp2/source/ooo/makefile.mk	13 Feb 2005 21:28:30 -0000
@@ -126,6 +126,10 @@
 SCPDEFS+=-DSYSTEM_CURL
 .ENDIF
 
+.IF "$(SYSTEM_STDLIBS)" == "YES"
+SCPDEFS+=-DSYSTEM_STDLIBS
+.ENDIF
+
 .IF "$(JDK)" == "gcj"
 SCPDEFS+=-DGCJ
 .ENDIF
