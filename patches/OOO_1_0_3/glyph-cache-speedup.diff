Index: vcl/unx/source/gdi/gcach_xpeer.cxx
===================================================================
RCS file: /cvs/oo/gsl/vcl/unx/source/gdi/gcach_xpeer.cxx,v
retrieving revision 1.22.2.3
diff -u -p -u -r1.22.2.3 gcach_xpeer.cxx
--- vcl/unx/source/gdi/gcach_xpeer.cxx	27 Aug 2002 14:43:21 -0000	1.22.2.3
+++ vcl/unx/source/gdi/gcach_xpeer.cxx	3 Jun 2003 11:28:28 -0000
@@ -341,12 +341,18 @@ void X11GlyphPeer::RemovingGlyph( Server
         case XRENDER_KIND:
             {
                 GlyphSet aGlyphSet = GetGlyphSet( rServerFont );
-                Glyph nGlyphId = GetGlyphId( rServerFont, nGlyphIndex );
-                // XRenderFreeGlyphs not implemented yet for version<=0.2
-                // should hopefully be ready in XRENDER 1.0?
-                if( nRenderVersion >= 0x10 )
-                    (*pXRenderFreeGlyphs)( mpDisplay, aGlyphSet, &nGlyphId, 1 );
-                mnBytesUsed -= nHeight * ((nWidth + 3) & ~3);
+		GlyphData& rGlyphData = rServerFont.GetGlyphData( nGlyphIndex );
+
+		if( rGlyphData.GetExtInfo() != EMPTY_KIND )
+                {
+		    Glyph nGlyphId = GetGlyphId( rServerFont, nGlyphIndex );
+
+		    // XRenderFreeGlyphs not implemented yet for version<=0.2
+		    // should hopefully be ready in XRENDER 1.0?
+	//	    if( nRenderVersion >= 0x10 ) - apparently this flakes badly...
+       //                 (*pXRenderFreeGlyphs)( mpDisplay, aGlyphSet, &nGlyphId, 1 );
+		    mnBytesUsed -= nHeight * ((nWidth + 3) & ~3);
+		}
             }
             break;
     }
