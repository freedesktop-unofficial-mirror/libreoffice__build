Index: modules/installer/scriptitems.pm
===================================================================
RCS file: /cvs/tools/solenv/bin/modules/installer/scriptitems.pm,v
retrieving revision 1.51.18.2
diff -u -p -r1.51.18.2 scriptitems.pm
--- modules/installer/scriptitems.pm	22 Aug 2008 09:16:03 -0000	1.51.18.2
+++ modules/installer/scriptitems.pm	10 Dec 2008 17:56:53 -0000
@@ -2371,12 +2373,10 @@ sub get_string_of_modulegids_for_itemgid
 	my $haslanguagemodule = 0;
 	my %foundmodules = ();
 	
-	for ( my $i = 0; $i <= $#{$modulesref}; $i++ )
+	for my $onemodule (@{$modulesref})
 	{
-		my $onemodule = ${$modulesref}[$i];
-		my $allitems = "";
-		
-		if ( $onemodule->{$itemname} ) { $allitems = $onemodule->{$itemname}; }
+		next if ( $onemodule->{$itemname} );
+		my $allitems = $onemodule->{$itemname};
 		
 		if ( $allitems =~ /\b$itemgid\b/i )
 		{
@@ -2397,6 +2397,8 @@ sub get_string_of_modulegids_for_itemgid
 		if ( ! $isreallylanguagemodule ) { installer::exiter::exit_program("ERROR: \"$itemgid\" is assigned to modules with flag \"LANGUAGEMODULE\" and also to modules without this flag! Modules: $allmodules", "get_string_of_modulegids_for_itemgid");  }
 	}
 
+	print STDERR "get_string_for_itemgid ($itemgid, $itemname) => $allmodules, $haslanguagemodule\n";
+
 	return ($allmodules, $haslanguagemodule);
 }
 
@@ -2415,9 +2417,8 @@ sub assigning_modules_to_items
 	my $languageassignmenterror = 0;
 	my @languageassignmenterrors = ();
 	
-	for ( my $i = 0; $i <= $#{$itemsref}; $i++ )
+	for my $oneitem (@{$itemsref})
 	{
-		my $oneitem = ${$itemsref}[$i];
 		my $itemgid = $oneitem->{'gid'};
 
 		my $styles = "";
