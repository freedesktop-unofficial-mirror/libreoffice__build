A useful patch for debugging font mapping problems.


Index: vcl/source/gdi/outdev3.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/gdi/outdev3.cxx,v
retrieving revision 1.209
diff -u -p -u -r1.209 outdev3.cxx
--- vcl/source/gdi/outdev3.cxx	2 Nov 2005 14:41:10 -0000	1.209
+++ vcl/source/gdi/outdev3.cxx	24 Jan 2006 16:11:27 -0000
@@ -2663,6 +2663,9 @@ ImplFontEntry* ImplFontCache::Get( ImplD
 {
     String aSearchName = rFont.GetName();
 
+	fprintf (stderr, "FontCache::Get '%s' => ",
+			 rtl::OUStringToOString(aSearchName, RTL_TEXTENCODING_UTF8).getStr());
+
     // TODO: also add device specific name caching
     if( !pDevSpecific )
     {
@@ -2741,6 +2744,11 @@ ImplFontEntry* ImplFontCache::Get( ImplD
         maFontInstanceList[ aFontSelData ] = pEntry;
     }
 
+	fprintf (stderr, "'%s'\n",
+			 pEntry ?
+			 rtl::OUStringToOString(pEntry->maFontSelData.maSearchName, RTL_TEXTENCODING_UTF8).getStr()
+			 : "<null>");
+
     mpFirstEntry = pEntry;
     return pEntry;
 }
