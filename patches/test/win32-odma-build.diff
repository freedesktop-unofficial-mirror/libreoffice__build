Index: ucb/prj/build.lst
===================================================================
RCS file: /cvs/ucb/ucb/prj/build.lst,v
retrieving revision 1.11
diff -u -p -u -r1.11 build.lst
--- ucb/prj/build.lst	27 Mar 2003 17:26:37 -0000	1.11
+++ ucb/prj/build.lst	13 May 2003 20:58:30 -0000
@@ -8,6 +8,7 @@ uc	ucb\source\cacher		    nmake	-	all	uc
 uc	ucb\source\sorter		    nmake	-	all	uc_sorter uc_unotypes NULL
 uc	ucb\source\ucp\ftp		    nmake	-	all	uc_ftp uc_unotypes NULL
 uc	ucb\source\ucp\file		    nmake	-	all	uc_file uc_unotypes NULL
+uc	ucb\source\ucp\odma		nmake	-	all	uc_odma uc_unotypes NULL
 uc	ucb\source\ucp\hierarchy	nmake	-	all	uc_hierarchy uc_unotypes NULL
 uc	ucb\source\ucp\remote		nmake	-	all	uc_remote uc_regexp NULL
 uc	ucb\source\ucp\webdav		nmake	-	all	uc_webdav uc_unotypes NULL

Index: officecfg/registry/data/org/openoffice/ucb/Configuration.xcu
===================================================================
RCS file: /cvs/util/officecfg/registry/data/org/openoffice/ucb/Configuration.xcu,v
retrieving revision 1.4
diff -u -p -u -r1.4 Configuration.xcu
--- officecfg/registry/data/org/openoffice/ucb/Configuration.xcu	8 Nov 2002 16:50:28 -0000	1.4
+++ officecfg/registry/data/org/openoffice/ucb/Configuration.xcu	13 May 2003 20:52:35 -0000
@@ -154,6 +154,17 @@
                 <value/>
               </prop>
             </node>
+            <node oor:name="Provider9" oor:op="replace">
+              <prop oor:name="ServiceName">
+                <value>com.sun.star.comp.odma.ContentProvider</value>
+              </prop>
+              <prop oor:name="URLTemplate">
+                <value>vnd.sun.star.odma</value>
+              </prop>
+              <prop oor:name="Arguments">
+                <value/>
+              </prop>
+            </node>
           </node>
         </node>
       </node>

Index: scp/source/office/files.scp
===================================================================
RCS file: /cvs/installation/scp/source/office/files.scp,v
retrieving revision 1.367
diff -u -p -u -r1.367 files.scp
--- scp/source/office/files.scp	17 Jul 2003 08:54:46 -0000	1.367
+++ scp/source/office/files.scp	5 Aug 2003 14:48:48 -0000
@@ -879,6 +883,7 @@ SPECIAL_UNO_LIB_FILE(GID_FILE_LIB_PACKAG
 
 SPECIAL_UNO_LIB_FILE(GID_FILE_LIB_UCPHIER1,ucphier1)
 SPECIAL_UNO_LIB_FILE(GID_FILE_LIB_UCPDAV1,ucpdav1)
+SPECIAL_UNO_LIB_FILE(GID_FILE_LIB_UCPODMA1,ucpodma1)
 SPECIAL_UNO_LIB_FILE(GID_FILE_LIB_FILEACC,fileacc)
 SPECIAL_UNO_COMPONENT_LIB_FILE(GID_FILE_LIB_TINSTRM,textinstream.uno)
 SPECIAL_UNO_COMPONENT_LIB_FILE(GID_FILE_LIB_TOUTSTRM,textoutstream.uno)

Index: ucb/prj/d.lst
===================================================================
RCS file: /cvs/ucb/ucb/prj/d.lst,v
retrieving revision 1.11.38.1
diff -u -p -u -r1.11.38.1 d.lst
--- ucb/prj/d.lst	28 Jan 2004 10:12:30 -0000	1.11.38.1
+++ ucb/prj/d.lst	4 May 2004 13:29:07 -0000
@@ -16,6 +16,7 @@
 ..\%__SRC%\misc\ucb*.sym %_DEST%\bin%_EXT%\ucb*.sym
 ..\source\core\ucb.xml %_DEST%\xml%_EXT%\ucb.xml
 
+..\source\ucp\odma\*.dll %_DEST%\bin%_EXT%\*.dll
 ..\%__SRC%\bin\ucp*.dll %_DEST%\bin%_EXT%\ucp*.dll
 ..\%__SRC%\lib\libucp*.so %_DEST%\lib%_EXT%\libucp*.so
 ..\%__SRC%\lib\libucp*.dylib %_DEST%\lib%_EXT%\libucp*.dylib
Index: desktop/source/app/cmdlineargs.cxx
===================================================================
RCS file: /cvs/framework/desktop/source/app/cmdlineargs.cxx,v
retrieving revision 1.22
diff -u -p -u -r1.22 cmdlineargs.cxx
--- desktop/source/app/cmdlineargs.cxx	27 Jun 2003 09:42:22 -0000	1.22
+++ desktop/source/app/cmdlineargs.cxx	4 May 2004 15:18:32 -0000
@@ -269,6 +269,15 @@ void CommandLineArgs::ParseCommandLine_S
 					}
 					else
 					{
+						if( bOpenEvent || bViewEvent || bForceNewEvent || bForceOpenEvent )
+						{
+							if( ::rtl::OUString(aArgStr).matchIgnoreAsciiCaseAsciiL(RTL_CONSTASCII_STRINGPARAM("::ODMA")) )
+							{
+								::rtl::OUString sArg = ::rtl::OUString(RTL_CONSTASCII_USTRINGPARAM("vnd.sun.star.odma:/"));
+								sArg += aArgStr;
+								aArgStr = sArg;
+							}	
+						}
 						// handle this argument as a filename
 						if ( bOpenEvent )
 							AddStringListParam_Impl( CMD_STRINGPARAM_OPENLIST, aArgStr );
