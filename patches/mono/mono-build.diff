Index: configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.89
diff -u -r1.89 configure.in
--- config_office/configure.in	3 Feb 2005 08:58:21 -0000	1.89
+++ config_office/configure.in	7 Feb 2005 14:39:46 -0000
@@ -1160,9 +1161,48 @@
 	FRAME_HOME=`cygpath -u "$FRAME_HOME"`
 fi
 AC_SUBST(MIDL_PATH)
-AC_SUBST(CSC_PATH)
 AC_SUBST(NMAKE_PATH)
 AC_SUBST(FRAME_HOME)
+
+if test "$_os" = "Linux"; then
+	 AC_MSG_CHECKING([whether to enable Mono bindings])
+	 if test -n "$enable_mono"; then
+	 	AC_MSG_RESULT([yes])
+	 	ENABLE_MONO=YES
+        	dnl Check mcs
+        	AC_PATH_PROG(CSC_PATH, mcs)
+		MCS=$CSC_PATH
+		AC_MSG_CHECKING([whether $MSC is >= 1.1.4])
+		MCS_VERSION=`$MCS --version | cut -d" " -f5`
+		if test "`echo $MCS_VERSION | cut -d"." -f1`" -gt "1" || \
+		  test "`echo $MCS_VERSION | cut -d"." -f1`" = "1" -a \
+		       "`echo $MCS_VERSION | cut -d"." -f2`" -ge "2" ||
+		  test "`echo $MCS_VERSION | cut -d"." -f1`" = "1" -a \
+		       "`echo $MCS_VERSION | cut -d"." -f2`" = "1" -a \
+		       "`echo $MCS_VERSION | cut -d"." -f3`" -ge "4"; then
+			AC_MSG_RESULT([yes])
+		else
+			AC_MSG_ERROR([no, mcs >= 1.1.4 is needed.])
+		fi
+        	if test -n "$CSC_PATH";then
+                	CSC_PATH=`dirname "$CSC_PATH"`
+        	fi
+        	if test -x "$with_csc_path/mcs"; then
+                	CSC_PATH="$with_csc_path"
+        	fi
+        	if test ! -x "$CSC_PATH/mcs"; then
+               	 AC_MSG_ERROR([mcs not found. Make sure it's in the path or u
+se --with-csc-path])
+        	fi
+		CSC=$MCS
+	 else
+	 	ENABLE_MONO=NO
+		AC_MSG_RESULT([no])
+	 fi
+fi
+AC_SUBST(CSC_PATH)
+AC_SUBST(CSC)
+AC_SUBST(ENABLE_MONO)
 
 dnl ===================================================================
 dnl Check if stdc headers are available excluding windows.

Index: util/target.pmk
===================================================================
RCS file: /cvs/udk/cli_ure/util/target.pmk,v
retrieving revision 1.3
diff -u -r1.3 target.pmk
--- cli_ure/util/target.pmk	18 Jul 2003 12:44:28 -0000	1.3
+++ cli_ure/util/target.pmk	7 Feb 2005 14:54:04 -0000
@@ -69,7 +69,7 @@
 .IF "$(product)" == ""
 CSCFLAGS += -checked+ -define:DEBUG -define:TRACE
 .ELSE
-CSCFLAGS += -o
+CSCFLAGS += -optimize
 .ENDIF
 
 .ELSE # debug
Index: util/makefile.pmk
===================================================================
RCS file: /cvs/udk/cli_ure/util/makefile.pmk,v
retrieving revision 1.3
diff -u -r1.3 makefile.pmk
--- cli_ure/util/makefile.pmk	10 Oct 2003 10:45:53 -0000	1.3
+++ cli_ure/util/makefile.pmk	7 Feb 2005 14:55:41 -0000
@@ -60,7 +60,7 @@
 #
 #*************************************************************************
 
-.IF "$(COM)$(COMEX)" == "MSC8" || "$(COM)$(COMEX)"== "MSC10"
+.IF "$(COM)$(COMEX)" == "MSC8" || "$(COM)$(COMEX)"== "MSC10" || "$(ENABLE_MONO)" == "YES"
 BUILD_FOR_CLI = "true"
 .ENDIF
 
Index: set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.39
diff -u -r1.39 set_soenv.in
--- config_office/set_soenv.in	25 Jan 2005 16:55:07 -0000	1.39
+++ config_office/set_soenv.in	7 Feb 2005 15:02:31 -0000
@@ -1615,6 +1616,9 @@
 # (c = comment, e = environment variable, a = alias )
 ToFile( "Platform dependent constant values.", $empty, "c" );
 ToFile( "SOLAR_JAVA",        $SOLAR_JAVA,        "e" );
+ToFile( "ENABLE_MONO",       "@ENABLE_MONO@",    "e" );
+ToFile( "CSC",               "@CSC@",            "e" );
+ToFile( "CSC_PATH",          "@CSC_PATH@",       "e" );
 ToFile( "BIG_SVX",           $BIG_SVX,           "e" );
 ToFile( "COM",               $COM,               "e" );
 ToFile( "COMPATH",           $COMPATH,           "e" );
Index: prj/build.lst
===================================================================
RCS file: /cvs/udk/cli_ure/prj/build.lst,v
retrieving revision 1.8
diff -u -r1.8 build.lst
--- cli_ure/prj/build.lst	18 Oct 2004 14:54:34 -0000	1.8
+++ cli_ure/prj/build.lst	7 Feb 2005 15:20:13 -0000
@@ -1,9 +1,10 @@
 ure	cli_ure	:	cppuhelper cppu sal codemaker offapi stoc NULL
 ure	cli_ure						usr1	-	all	ure_mkout NULL
-ure	cli_ure\source					nmake   -       w,vc7   ure_source_source NULL
-ure	cli_ure\source\basetypes			nmake	-	w,vc7	ure_source_basetypes ure_source_source.w NULL
+ure	cli_ure\source					nmake   -       all   ure_source_source NULL
+ure	cli_ure\source\basetypes			nmake	-	all	ure_source_basetypes ure_source_source.w NULL
 ure	cli_ure\source\climaker				nmake	-	w,vc7	ure_source_climaker ure_source_basetypes.w NULL
-ure	cli_ure\unotypes				nmake	-	w,vc7	ure_unotypes ure_source_source.w ure_source_climaker.w NULL
-ure	cli_ure\source\ure				nmake	-	w,vc7	ure_source_ure ure_source_source.w ure_unotypes.w NULL
+ure	cli_ure\unotypes				nmake	-	w,vc7	ure_unotypes ure_source_source.w ure_source_climaker.w ure_source_basetypes.w NULL
+ure	cli_ure\source\ure				nmake	-	all	ure_source_ure ure_source_source.w ure_unotypes.w ure_source_basetypes.w NULL
 ure	cli_ure\source\native				nmake	-	w,vc7	ure_source_native ure_source_source.w ure_source_ure.w ure_unotypes.w NULL
+ure	cli_ure\source\bootstrap			nmake	-	u	ure_source_bootstrap ure_source_source ure_source_basetypes NULL
-#ure	cli_ure\util					nmake	-	w,vc7	ure_util ure_source_ure.w ure_source_native.w NULL
+#ure	cli_ure\util					nmake	-	all	ure_util ure_source_ure.w ure_source_native.w NULL

--- cli_ure/prj/d.lst	06 Okt 2003 15:04:50 +0200	1.4
+++ cli_ure/prj/d.lst	08 MÃ¤r 2005 12:12:27 +0100	
@@ -3,4 +3,5 @@
 ..\%__SRC%\bin\climaker.exe.config %_DEST%\bin%_EXT%\climaker.exe.config
 
 ..\%__SRC%\bin\cli_*.dll %_DEST%\bin%_EXT%\cli_*.dll
+..\%__SRC%\lib\libcli*.so %_DEST%\lib%_EXT%\libcli*.so
 ..\%__SRC%\bin\cli_*.pdb %_DEST%\bin%_EXT%\cli_*.pdb
