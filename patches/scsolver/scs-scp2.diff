--- scp2/source/calc/makefile.mk-old	2006-06-20 15:27:41.000000000 +0200
+++ scp2/source/calc/makefile.mk	2006-06-20 15:27:52.000000000 +0200
@@ -49,6 +49,14 @@
 SCPDEFS+=-DWITHOUT_BINFILTER
 .ENDIF
 
+.IF "$(SYSTEM_LPSOLVE)" == "YES"
+SCPDEFS+=-DSYSTEM_LPSOLVE
+.ENDIF
+
+.IF "$(BUILD_SCSOLVER)" == "YES"
+SCPDEFS+=-DBUILD_SCSOLVER
+.ENDIF
+
 SCP_PRODUCT_TYPE=osl
 PARFILES= \
         module_calc.par              \
Index: scp2/source/calc/file_calc.scp
===================================================================
RCS file: /cvs/installation/scp2/source/calc/file_calc.scp,v
retrieving revision 1.29
diff -u -r1.29 file_calc.scp
--- scp2/source/calc/file_calc.scp	26 Apr 2006 20:46:56 -0000	1.29
+++ scp2/source/calc/file_calc.scp	1 Jul 2006 22:41:11 -0000
@@ -35,6 +35,43 @@
 
 #include "macros.inc"
 
+#ifdef BUILD_SCSOLVER
+
+#ifndef SYSTEM_LPSOLVE
+
+#ifdef UNX
+
+File gid_File_Lib_LpSolve
+    TXT_FILE_BODY;
+    Styles = (PACKED);
+  #ifdef UNX
+    Name = STRING(CONCAT2(liblpsolve55,UNXSUFFIX));
+  #else
+    Name = "lpsolve55.dll";
+  #endif
+    Dir = gid_Dir_Program;
+End
+
+#endif
+
+#endif
+
+File gid_File_Lib_ScSolver
+    TXT_FILE_BODY;
+    Styles = (PACKED,UNO_COMPONENT);
+    RegistryID = gid_Starregistry_Services_Rdb;
+    Dir = gid_Dir_Program;
+  #ifdef UNX
+    Name = STRING(CONCAT2(scsolver.uno,UNXSUFFIX));
+  #else
+    Name = "scsolver.uno.dll";
+  #endif
+End
+
+STD_RES_FILE_PATCH( gid_File_Res_ScSolver, scsolver )
+
+#endif
+
 STD_UNO_LIB_FILE_PATCH( gid_File_Lib_Analysis, analysis)
 
 STD_UNO_LIB_FILE( gid_File_Lib_Calc, calc)
