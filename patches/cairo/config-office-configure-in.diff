--- config_office/configure.in	2005-07-27 17:02:12.000000000 +0200
+++ configure.in	2005-07-27 17:05:05.000000000 +0200
@@ -128,6 +128,10 @@
 [  --disable-gtk           Determines whether to use Gtk+ vclplug on platforms
                           where Gtk+ is available.
 ],,enable_gtk=yes)
+AC_ARG_ENABLE(cairo,
+[  --enable-cairo         Determines whether to use Cairo canvas backend on platforms
+                          where Cairo is available.
+],,)
 AC_ARG_ENABLE(gnome-vfs,
 [  --disable-gnome-vfs     Determines whether to use the Gnome Virtual Filing
                           System on platforms where that VFS is available
@@ -578,6 +582,7 @@
 	solaris*)
 		test_x=yes
 		test_gtk=yes
+		build_cairo=yes
 		test_kde=yes
 		test_cups=yes
 		_os=SunOS
@@ -604,6 +609,7 @@
 	linux-gnu)
 		test_x=yes
 		test_gtk=yes
+		build_cairo=yes
 		test_kde=yes
 		test_cups=yes
 		if getconf GNU_LIBPTHREAD_VERSION |grep -q NPTL; then
@@ -625,11 +631,13 @@
 		test_x=no
 		test_cups=no
 		test_gtk=no
+		build_cairo=no
 		_os=Darwin
 		;;
 	freebsd*)
 		test_x=yes
 		test_gtk=yes
+		build_cairo=yes
 		test_kde=yes
 		test_cups=yes
 		AC_MSG_CHECKING([the FreeBSD operating system release])
@@ -661,6 +669,7 @@
 	netbsd)
 		test_x=yes
 		test_gtk=yes
+		build_cairo=yes
 		test_kde=yes
 		test_cups=no
 		PTHREAD_CFLAGS="-pthread"
@@ -3750,6 +3759,25 @@
 AC_SUBST(GTK_LIBS)
 
 dnl ===================================================================
+dnl Check whether the Cairo libraries are available.
+dnl ===================================================================
+
+ENABLE_CAIRO=""
+
+if test  "$build_cairo" = "yes"; then
+
+    AC_MSG_CHECKING([whether to enable the Cairo canvas backend])
+    if test "x$enable_cairo" != "xno" ; then
+        ENABLE_CAIRO="TRUE"
+       AC_MSG_RESULT([yes])
+    else
+       AC_MSG_RESULT([no])
+    fi
+fi
+
+AC_SUBST(ENABLE_CAIRO)
+
+dnl ===================================================================
 dnl Check whether the Qt and KDE libraries are available.
 dnl ===================================================================
 
