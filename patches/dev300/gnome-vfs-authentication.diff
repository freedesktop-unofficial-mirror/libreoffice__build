From b936f21a563b2f4f3a1d6f08a0f5cbdebd9f302e Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:54:51 +0200
Subject: [PATCH 127/878] gnome-vfs-authentication.diff

---
 ucb/source/ucp/gvfs/content.cxx |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/ucb/source/ucp/gvfs/content.cxx b/ucb/source/ucp/gvfs/content.cxx
index 07f9695..c30e165 100644
--- a/ucb/source/ucp/gvfs/content.cxx
+++ b/ucb/source/ucp/gvfs/content.cxx
@@ -1716,9 +1716,17 @@ extern "C" {
                     ucbhelper::InteractionSupplyAuthentication > & xSupp
                     = xRequest->getAuthenticationSupplier();
 
-                aUserName = xSupp->getUserName();
-                aDomain   = xSupp->getRealm();
-                aPassword = xSupp->getPassword();
+        ::rtl::OUString aNewDomain, aNewUserName, aNewPassword;
+
+                aNewUserName = xSupp->getUserName();
+        if (aNewUserName.getLength())
+            aUserName = aNewUserName;
+                aNewDomain   = xSupp->getRealm();
+        if (aNewDomain.getLength())
+            aDomain = aNewDomain;
+                aNewPassword = xSupp->getPassword();
+        if (aNewPassword.getLength())
+            aPassword = aNewPassword;
 
                 {
                     osl::Guard< osl::Mutex > aGuard( osl::Mutex::getGlobalMutex() );
-- 
1.7.0.1

