From ef8498d107c1333c1723e7920c99d6df7b9dca92 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:08:49 +0200
Subject: [PATCH 836/878] sw-auto-scrollbars-2.diff

---
 sw/source/ui/uiview/view.cxx    |    3 +++
 sw/source/ui/uiview/viewmdi.cxx |    2 --
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/sw/source/ui/uiview/view.cxx b/sw/source/ui/uiview/view.cxx
index 31d90ee..6e9e0ab 100644
--- a/sw/source/ui/uiview/view.cxx
+++ b/sw/source/ui/uiview/view.cxx
@@ -1130,6 +1130,8 @@ SwView::SwView( SfxViewFrame *_pFrame, SfxViewShell* pOldSh )
         ShowHScrollbar( FALSE );
     if( !pVScrollbar->IsVisible( TRUE ) )
         ShowVScrollbar( FALSE );
+
+    GetViewFrame()->GetWindow().AddChildEventListener( LINK( this, SwView, WindowChildEventListener ) );
 }
 
 /*--------------------------------------------------------------------
@@ -1139,6 +1141,7 @@ SwView::SwView( SfxViewFrame *_pFrame, SfxViewShell* pOldSh )
 
 SwView::~SwView()
 {
+    GetViewFrame()->GetWindow().RemoveChildEventListener( LINK( this, SwView, WindowChildEventListener ) );
     delete mpPostItMgr;
     // --> OD 2009-03-10 #i100035#
     mpPostItMgr = 0;
diff --git a/sw/source/ui/uiview/viewmdi.cxx b/sw/source/ui/uiview/viewmdi.cxx
index 34de40e..b4e6043 100644
--- a/sw/source/ui/uiview/viewmdi.cxx
+++ b/sw/source/ui/uiview/viewmdi.cxx
@@ -360,8 +360,6 @@ int SwView::_CreateScrollbar( BOOL bHori )
 
     (*ppScrollbar)->SetAuto( TRUE );
 
-    pMDI->AddChildEventListener( LINK( this, SwView, WindowChildEventListener ));
-
     if(GetWindow())
         InvalidateBorder();
 
-- 
1.7.0.1

