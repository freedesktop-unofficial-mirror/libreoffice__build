From 00c1c22610fa40954f0800885671354b596ed715 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:08:49 +0200
Subject: [PATCH 738/768] sw-auto-scrollbars-2.diff

---
 sw/source/ui/uiview/view.cxx    |    3 +++
 sw/source/ui/uiview/viewmdi.cxx |    2 --
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git sw/source/ui/uiview/view.cxx sw/source/ui/uiview/view.cxx
index 6c2d064..dd97bfa 100644
--- sw/source/ui/uiview/view.cxx
+++ sw/source/ui/uiview/view.cxx
@@ -1114,6 +1114,8 @@ SwView::SwView( SfxViewFrame *_pFrame, SfxViewShell* pOldSh )
         ShowHScrollbar( FALSE );
     if( !pVScrollbar->IsVisible( TRUE ) )
         ShowVScrollbar( FALSE );
+
+    GetViewFrame()->GetWindow().AddChildEventListener( LINK( this, SwView, WindowChildEventListener ) );
 }
 
 /*--------------------------------------------------------------------
@@ -1123,6 +1125,7 @@ SwView::SwView( SfxViewFrame *_pFrame, SfxViewShell* pOldSh )
 
 SwView::~SwView()
 {
+    GetViewFrame()->GetWindow().RemoveChildEventListener( LINK( this, SwView, WindowChildEventListener ) );
     delete mpPostItMgr;
     // --> OD 2009-03-10 #i100035#
     mpPostItMgr = 0;
diff --git sw/source/ui/uiview/viewmdi.cxx sw/source/ui/uiview/viewmdi.cxx
index 55da654..5a4b9c5 100644
--- sw/source/ui/uiview/viewmdi.cxx
+++ sw/source/ui/uiview/viewmdi.cxx
@@ -360,8 +360,6 @@ int SwView::_CreateScrollbar( BOOL bHori )
 
     (*ppScrollbar)->SetAuto( TRUE );
 
-    pMDI->AddChildEventListener( LINK( this, SwView, WindowChildEventListener ));
-
     if(GetWindow())
         InvalidateBorder();
 
-- 
1.7.0.1

