diff -r 2691de086167 icc/README
--- icc/README	Thu Nov 05 15:23:36 2009 +0000
+++ icc/README	Thu Nov 05 18:03:59 2009 +0000
@@ -31,11 +31,9 @@
 
 <build>/misc/build/SampleICC-1.3.2/IccProfLib/IccProfLibConf.h
 
-The patches:
-SampleICC-1.3.2.patch is the file to be used for Linux and Windows
-SampleICC-1.3.2-bendian.patch is the file to be used for
-big endian platform, formed from the above patch plus the big endian
-forcing.
+The patchs:
+SampleICC-1.3.2.patch tweaks the build to use the endianness
+detected in sal.
 
 beppec56@openoffice.org
 
diff -r 2691de086167 icc/SampleICC-1.3.2.patch
--- icc/SampleICC-1.3.2.patch	Thu Nov 05 15:23:36 2009 +0000
+++ icc/SampleICC-1.3.2.patch	Thu Nov 05 18:03:59 2009 +0000
@@ -1,5 +1,5 @@
 *** misc/SampleICC-1.3.2/configure	Mon Aug 20 22:10:59 2007
---- misc/build/SampleICC-1.3.2/configure	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/configure	Fri Jan 25 14:23:09 2008
 ***************
 *** 19991,19997 ****
   
@@ -60,7 +60,7 @@
     *) { { echo "$as_me:$LINENO: error: invalid argument: $ac_config_target" >&5
   echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
 *** misc/SampleICC-1.3.2/Contrib/Makefile.in	Mon Aug 20 22:10:37 2007
---- misc/build/SampleICC-1.3.2/Contrib/Makefile.in	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/Contrib/Makefile.in	Fri Jan 25 14:23:09 2008
 ***************
 *** 103,120 ****
   
@@ -95,7 +95,7 @@
   subdir = Contrib
   mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 *** misc/SampleICC-1.3.2/Contrib/CmdLine/Makefile.in	Mon Aug 20 22:10:34 2007
---- misc/build/SampleICC-1.3.2/Contrib/CmdLine/Makefile.in	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/Contrib/CmdLine/Makefile.in	Fri Jan 25 14:23:09 2008
 ***************
 *** 102,116 ****
   install_sh = @install_sh@
@@ -126,7 +126,7 @@
   subdir = Contrib/CmdLine
   mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 *** misc/SampleICC-1.3.2/Contrib/ICC_utils/Makefile.in	Mon Aug 20 22:10:35 2007
---- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Makefile.in	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Makefile.in	Fri Jan 25 14:23:09 2008
 ***************
 *** 133,139 ****
   CONFIG_CLEAN_FILES =
@@ -145,7 +145,7 @@
   	ICC_tool_exception.lo Vetters.lo
   libICC_utils_la_OBJECTS = $(am_libICC_utils_la_OBJECTS)
 *** misc/SampleICC-1.3.2/Contrib/ICC_utils/Stubs.h	Mon Aug 20 22:04:53 2007
---- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Stubs.h	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Stubs.h	Fri Jan 25 14:23:09 2008
 ***************
 *** 130,136 ****
   
@@ -164,7 +164,7 @@
       return (r_ != p.r_) ? (r_ < p.r_) : ((g_ != p.g_) ? (g_ < p.g_) : (b_ < p.b_));
     }
 *** misc/SampleICC-1.3.2/Contrib/ICC_utils/Vetters.cpp	Mon Aug 20 22:04:54 2007
---- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Vetters.cpp	Fri Jan 25 14:49:56 2008
+--- misc/build/SampleICC-1.3.2/Contrib/ICC_utils/Vetters.cpp	Fri Jan 25 14:57:06 2008
 ***************
 *** 1,322 ****
 ! /*
@@ -820,7 +820,7 @@
 !   }
 ! }
 *** misc/SampleICC-1.3.2/IccProfLib/IccIO.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccIO.cpp	Fri Jan 25 14:25:33 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccIO.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 78,84 ****
   #include "IccIO.h"
@@ -838,8 +838,20 @@
   #include <string.h>
   
   #ifndef __max
+*** misc/SampleICC-1.3.2/IccProfLib/IccIO.h	Mon Aug 20 22:05:00 2007
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccIO.h	Fri Jan 25 14:23:09 2008
+***************
+*** 79,84 ****
+--- 79,85 ----
+  #define _ICCIO_H
+  
+  #include "IccDefs.h"
++ #include "memory"
+  #include "stdio.h"
+  
+  #ifdef USESAMPLEICCNAMESPACE
 *** misc/SampleICC-1.3.2/IccProfLib/IccMpeACS.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccMpeACS.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccMpeACS.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 136,152 ****
     icChar sigBuf[30];
@@ -878,7 +890,7 @@
       icMemDump(sDescription, m_pData, m_nDataSize);
     }
 *** misc/SampleICC-1.3.2/IccProfLib/IccMpeBasic.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccMpeBasic.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccMpeBasic.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 218,249 ****
     sprintf(buf, "%.8f", m_endPoint);
@@ -1362,8 +1374,56 @@
       return icValidateCriticalError;
     }
   
+*** misc/SampleICC-1.3.2/IccProfLib/IccProfLibConf.h	Mon Aug 20 22:05:00 2007
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccProfLibConf.h	Fri Jan 25 14:23:09 2008
+***************
+*** 107,126 ****
+  
+  #else // non-PC, perhaps Mac or Linux
+  
+!   #define ICCUINT64 unsigned long long
+!   #define ICCINT64  long long
+!   #define ICUINT64TYPE unsigned long long
+!   #define ICINT64TYPE long long
+! 
+!   #if defined(__APPLE__)
+!     #if  defined(__LITTLE_ENDIAN__)
+!       #define ICC_BYTE_ORDER_LITTLE_ENDIAN
+!     #else
+!       #define ICC_BYTE_ORDER_BIG_ENDIAN
+!     #endif
+!   #else
+!     #define ICC_BYTE_ORDER_LITTLE_ENDIAN
+!   #endif
+  
+    #define ICCPROFLIB_API
+    #define ICCPROFLIB_EXTERN
+--- 107,129 ----
+  
+  #else // non-PC, perhaps Mac or Linux
+  
+! #include <sal/types.h>
+! #include <osl/endian.h>
+! 
+!   #define ICCUINT64 sal_uInt64
+!   #define ICCINT64 sal_Int64
+!   #define ICUINT64TYPE sal_uInt64
+!   #define ICINT64TYPE sal_Int64
+!   #define ICINT32TYPE sal_Int32
+!   #define ICUINT32TYPE sal_uInt32
+! 
+! #if defined(_LITTLE_ENDIAN)
+! #    define ICC_BYTE_ORDER_LITTLE_ENDIAN
+! #elif defined(_BIG_ENDIAN)
+! #    define ICC_BYTE_ORDER_BIG_ENDIAN
+! #else
+! #    error "ENDIAN unknown"
+! #endif
+  
+    #define ICCPROFLIB_API
+    #define ICCPROFLIB_EXTERN
 *** misc/SampleICC-1.3.2/IccProfLib/IccProfile.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccProfile.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccProfile.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 567,573 ****
   
@@ -1989,7 +2049,7 @@
       return NULL;
     }
 *** misc/SampleICC-1.3.2/IccProfLib/IccTagBasic.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccTagBasic.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccTagBasic.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 166,172 ****
       CIccInfo Info;
@@ -3311,7 +3371,7 @@
     }
     else {
 *** misc/SampleICC-1.3.2/IccProfLib/IccTagLut.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccTagLut.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccTagLut.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 323,345 ****
     icChar buf[128], *ptr;
@@ -4443,7 +4503,7 @@
             }
           }
 *** misc/SampleICC-1.3.2/IccProfLib/IccTagMPE.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccTagMPE.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccTagMPE.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 218,224 ****
             icGetSig(sigbuf, m_sig), m_nSize);
@@ -4615,7 +4675,7 @@
     }
   
 *** misc/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.cpp	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 234,240 ****
   {
@@ -4706,7 +4766,7 @@
   
   
 *** misc/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.h	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.h	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccTagProfSeqId.h	Fri Jan 25 14:23:09 2008
 ***************
 *** 161,164 ****
   }
@@ -4719,7 +4779,7 @@
   
 ! #endif //_ICCTAGPROFSEQID_H
 *** misc/SampleICC-1.3.2/IccProfLib/IccUtil.cpp	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/IccUtil.cpp	Fri Jan 25 14:27:16 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/IccUtil.cpp	Fri Jan 25 14:23:09 2008
 ***************
 *** 79,85 ****
   #include "IccUtil.h"
@@ -4974,7 +5034,7 @@
       rv = icMaxStatus(rv, icValidateWarning);
     }
 *** misc/SampleICC-1.3.2/IccProfLib/icProfileHeader.h	Mon Aug 20 22:05:00 2007
---- misc/build/SampleICC-1.3.2/IccProfLib/icProfileHeader.h	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/IccProfLib/icProfileHeader.h	Fri Jan 25 14:23:09 2008
 ***************
 *** 659,668 ****
   typedef enum {
@@ -5000,7 +5060,7 @@
   
   
 *** misc/SampleICC-1.3.2/Tools/CmdLine/Makefile.in	Mon Aug 20 22:10:42 2007
---- misc/build/SampleICC-1.3.2/Tools/CmdLine/Makefile.in	Fri Jan 25 14:24:00 2008
+--- misc/build/SampleICC-1.3.2/Tools/CmdLine/Makefile.in	Fri Jan 25 14:23:09 2008
 ***************
 *** 101,117 ****
   am__quote = @am__quote@
diff -r 2691de086167 icc/makefile.mk
--- icc/makefile.mk	Thu Nov 05 15:23:36 2009 +0000
+++ icc/makefile.mk	Thu Nov 05 18:03:59 2009 +0000
@@ -41,12 +41,7 @@
 # --- Files --------------------------------------------------------
 
 TARFILE_NAME=SampleICC-1.3.2
-#checking for endianess
-.IF "$(CPU)"=="I"
 PATCH_FILE_NAME=$(TARFILE_NAME).patch
-.ELSE
-PATCH_FILE_NAME=$(TARFILE_NAME)-bendian.patch
-.ENDIF
 
 CONVERTFILES= \
 	IccProfLib$/IccTagProfSeqId.h \
diff -r 2691de086167 icc/prj/build.lst
--- icc/prj/build.lst	Thu Nov 05 15:23:36 2009 +0000
+++ icc/prj/build.lst	Thu Nov 05 18:03:59 2009 +0000
@@ -1,3 +1,3 @@
-ip     icc :	solenv external NULL
+ip     icc :	solenv external sal NULL
 ip	icc		usr1	-	all	ip_mkout NULL
 ip	icc		nmake	-	all	ip_icc	NULL
