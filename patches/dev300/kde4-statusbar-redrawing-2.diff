--- vcl/unx/kde4/KDESalGraphics.cxx.old	2010-06-14 14:21:03.000000000 +0200
+++ vcl/unx/kde4/KDESalGraphics.cxx	2010-06-14 17:03:45.000000000 +0200
@@ -454,15 +454,28 @@ BOOL KDESalGraphics::drawNativeControl(
 		lcl_drawFrame(QStyle::PE_Frame, m_image, 
 					  vclStateValue2StateFlag(nControlState, value));
         
-        int size = kapp->style()->pixelMetric(QStyle::PM_LayoutLeftMargin);
+        // draw just the border, see http://qa.openoffice.org/issues/show_bug.cgi?id=107945
+        // FIXME: how to get the actual frame width? QStyle::PM_DefaultFrameWidth is "1" for Oxygen
+        //        and the frame is 2 pixels in reality
+        int nFrameWidth = kapp->style()->pixelMetric(QStyle::PM_DefaultFrameWidth) + 1;
         pTempClipRegion = XCreateRegion();
         XRectangle xRect = { widgetRect.left(), widgetRect.top(), widgetRect.width(), widgetRect.height() };
         XUnionRectWithRegion( &xRect, pTempClipRegion, pTempClipRegion );
         XLIB_Region pSubtract = XCreateRegion();
-        xRect.x += size;
-        xRect.y += size;
-        xRect.width -= 2* size;
-        xRect.height -= 2*size;
+        xRect.x += nFrameWidth;
+        xRect.y += nFrameWidth;
+
+        // do not crash for too small widgets, see http://qa.openoffice.org/issues/show_bug.cgi?id=112102
+        if ( xRect.width > 2*nFrameWidth )
+            xRect.width -= 2*nFrameWidth;
+        else
+            xRect.width = 0;
+
+        if (xRect.height > 2*nFrameWidth)
+            xRect.height -= 2*nFrameWidth;
+        else
+            xRect.height = 0;
+
         XUnionRectWithRegion( &xRect, pSubtract, pSubtract );
         XSubtractRegion( pTempClipRegion, pSubtract, pTempClipRegion );
         XDestroyRegion( pSubtract );
