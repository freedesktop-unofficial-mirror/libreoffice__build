From 93fbf755265cdb476631a1e036ca1bf1a63a15b6 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:07:12 +0200
Subject: [PATCH 751/878] unoxml-fix-empty-xmlns.diff

---
 unoxml/source/dom/node.cxx |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/unoxml/source/dom/node.cxx b/unoxml/source/dom/node.cxx
index 5f3b693..bbdcf85 100644
--- a/unoxml/source/dom/node.cxx
+++ b/unoxml/source/dom/node.cxx
@@ -68,8 +68,9 @@ namespace DOM
         // add node's namespaces to current context
         for (xmlNsPtr pNs = pNode->nsDef; pNs != 0; pNs = pNs->next) {
             const xmlChar *pPrefix = pNs->prefix;
+        // prefix can be NULL when xmlns attribute is empty (xmlns="")
             OString prefix(reinterpret_cast<const sal_Char*>(pPrefix),
-                           strlen(reinterpret_cast<const char*>(pPrefix)));
+                           pPrefix ? strlen(reinterpret_cast<const char*>(pPrefix)) : 0);
             const xmlChar *pHref = pNs->href;
             OUString val(reinterpret_cast<const sal_Char*>(pHref),
                 strlen(reinterpret_cast<const char*>(pHref)),
-- 
1.7.0.1

