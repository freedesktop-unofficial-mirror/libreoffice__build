From 5b87fc96e261d57c6bf30348f4ffa23ec90a26e9 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:54:58 +0200
Subject: [PATCH 109/768] unxsplash-finish-on-hangup.diff

---
 desktop/unx/source/start.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git desktop/unx/source/start.c desktop/unx/source/start.c
index 42c7bc3..f7b762e 100644
--- desktop/unx/source/start.c
+++ desktop/unx/source/start.c
@@ -569,7 +569,9 @@ show_splash( int status_fd )
 
         /* read from pipe if data available */
         nRetval = poll( &aPfd, 1, 50 );
-        if ( nRetval > 0 )
+        if ( aPfd.revents & ( POLLERR | POLLHUP | POLLNVAL ) )
+            bFinish = sal_True;
+        else if ( nRetval > 0 )
             bFinish = !read_percent( status_fd, &nPercent );
         else if ( nRetval < 0 )
             bFinish = sal_True;
-- 
1.7.0.1

