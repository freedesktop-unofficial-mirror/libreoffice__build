--- config_office/configure.in.old	2006-10-10 21:48:52.000000000 +0200
+++ config_office/configure.in	2006-10-11 22:43:50.000000000 +0200
@@ -573,6 +573,17 @@ AC_ARG_WITH(java,
                           no support for Java components, applets, accessibility
                           or XML filters. 
 ], if test "$withval" = "yes"; then WITH_JAVA=java; else WITH_JAVA=$withval; fi, WITH_JAVA=java)
+AC_ARG_WITH(java_target_version,
+[  --with-java-target-version   Generate class files that will work on JVMs with
+			  the specified version. For example, use
+			  --with-java-target-version=1.4 to make sure that the
+			  application will work with JVM 1.4 even when compiled
+			  with JDK 1.5.
+			  
+			  This option is ignored when you compile with gcj/gij.
+ 
+                          Usage: --with-java-target-version=<jvm version>
+],,)
 AC_ARG_ENABLE(gcjaot,
 [  --enable-gcjaot         Build with[[out]] using Ahead of Time java compilation
                           support to speed up buildsi by compiling the jars also
@@ -2308,6 +2319,44 @@
    JAVA_HOME=NO_JAVA_HOME ; export JAVA_HOME
 fi
 
+_java_target_ver="1.4"
+dnl ===================================================================
+dnl Check for target java bytecode version
+dnl ===================================================================
+if test "$SOLAR_JAVA" != ""; then
+    AC_MSG_CHECKING([for target java bytecode version])
+    if test "$JDK" = "gcj" -o "$JDK" = "kaffe"; then
+	AC_MSG_RESULT([default by $JDK])
+	if test -n "$with_java_target_version" -a "$with_java_target_version" != "no" ; then
+	    AC_MSG_WARN([Value defined by --with-java-target-version is ignored!])
+	fi
+    else
+	if test -n "$with_java_target_version" -a "$with_java_target_version" != "no" ; then
+	    _java_target_ver="$with_java_target_version"
+	    AC_MSG_RESULT([$_java_target_ver])
+	elif test $_jdk_ver -gt 10000 ; then
+	    _java_target_ver=`echo "$_jdk_ver" | $AWK '{ maj=substr($0,1,1); min=substr($0,2,2); print int(maj)"."int(min) }'`
+	    AC_MSG_RESULT([$_java_target_ver])
+	else
+    	    AC_MSG_ERROR([Unable to guess java bytecode version from java version!])
+	fi
+    fi
+
+    if ! test -z "$_java_target_ver" -o \
+	    "$_java_target_ver" = "1.1" -o \
+            "$_java_target_ver" = "1.2" -o \
+	    "$_java_target_ver" = "1.3" -o \
+	    "$_java_target_ver" = "1.4" -o \
+	    "$_java_target_ver" = "1.5" -o \
+	    "$_java_target_ver" = "1.6" -o \
+	    "$_java_target_ver" = "5" ; then
+    	AC_MSG_ERROR([$_java_target_ver is not supported java bytecode version!])
+    fi
+
+    JAVA_SOURCE_VER="$_java_target_ver"
+    JAVA_TARGET_VER="$_java_target_ver"
+fi
+
 dnl ===================================================================
 dnl Checks for javac
 dnl ===================================================================
@@ -2349,6 +2397,17 @@
 fi
 AC_SUBST(JAVACISGCJ)
 
+JAVACISKAFFE=""
+dnl ===================================================================
+dnl Checks that javac is kaffe
+dnl ===================================================================
+if test "$SOLAR_JAVA" != ""; then
+    if test `$JAVACOMPILER -version 2>&1 | grep -c "Kaffe"` -gt 0; then
+        JAVACISKAFFE="yes"
+    fi
+fi
+AC_SUBST(JAVACISKAFFE)
+
 dnl ===================================================================
 dnl Checks for javadoc
 dnl ===================================================================
@@ -2465,6 +2524,8 @@
 
 AC_SUBST(JAVA_HOME)
 AC_SUBST(JDK)
+AC_SUBST(JAVA_SOURCE_VER)
+AC_SUBST(JAVA_TARGET_VER)
 AC_SUBST(JAVAINTERPRETER)
 AC_SUBST(JAVACOMPILER)
 AC_SUBST(JAVAAOTCOMPILER)
--- config_office/set_soenv.in.old	2006-10-11 22:21:28.000000000 +0200
+++ config_office/set_soenv.in	2006-10-11 22:21:34.000000000 +0200
@@ -1872,6 +1872,7 @@
 if ( $JDK ne "gcj" ) {
    ToFile( "CLASSPATH",         $CLASSPATH,         "e" );
    ToFile( "XCLASSPATH",        $XCLASSPATH,        "e" );
+   ToFile( "JAVACISKAFFE",     '@JAVACISKAFFE@',    "e" );
 }
 else {
    ToFile( "JAVACISGCJ",       '@JAVACISGCJ@',      "e" );
@@ -1882,6 +1883,8 @@
 if ( '@JDK@' ne '' )
 { 
    ToFile( "JDK",             "@JDK@",           "e" );
+   ToFile( "JAVA_SOURCE_VER", "@JAVA_SOURCE_VER@","e" );
+   ToFile( "JAVA_TARGET_VER", "@JAVA_TARGET_VER@","e" );
    ToFile( "JAVAINTERPRETER", PathFormat("@JAVAINTERPRETER@"), "e" );
    ToFile( "JAVACOMPILER",    PathFormat("@JAVACOMPILER@"), "e" );
    ToFile( "JAVAAOTCOMPILER", PathFormat("@JAVAAOTCOMPILER@"), "e" );
--- solenv/inc/antsettings.mk.old	2006-07-05 22:59:17.000000000 +0200
+++ solenv/inc/antsettings.mk	2006-10-11 15:07:05.000000000 +0200
@@ -53,6 +53,18 @@
 ANT*:=$(ANT_HOME)$/bin$/ant
 ANT_BUILDFILE*=build.xml
 
+.IF "$(ANT_COMPILER_FLAGS)"==""
+.IF "$(JAVACISGCJ)" == "yes"
+ANT_COMPILER_FLAGS=-Dbuild.compiler=gcj
+.ENDIF
+.ENDIF
+
+.IF "$(ANT_JAVA_VER_FLAGS)"==""
+.IF "$(JAVACISGCJ)" != "yes" && $(JAVACISKAFFE) != "yes"
+ANT_JAVA_VER_FLAGS=-Djava.source.ver=$(JAVA_SOURCE_VER) -Djava.target.ver=$(JAVA_TARGET_VER)
+.ENDIF
+.ENDIF
+
 .IF "$(ANT_DEBUG)"==""
 .IF "$(debug)"==""
 ANT_DEBUG=off
@@ -74,24 +86,14 @@
 .EXPORT : JAVA_HOME
 .ENDIF
 
-.IF "$(JAVACISGCJ)" == "yes"
-ANT_FLAGS!:=-Dbuild.compiler=gcj -Dprj=$(PRJ) -Dprjname=$(PRJNAME) -Ddebug=$(ANT_DEBUG) \
- -Doptimize=$(ANT_OPT) -Dtarget=$(TARGET) -Dsolar.update=on -Dout=$(OUT) -Dinpath=$(INPATH) \
- -Dproext="$(PROEXT)" -Dsolar.bin=$(SOLARBINDIR) -Dsolar.jar=$(SOLARBINDIR) \
- -Dsolar.doc=$(SOLARDOCDIR) -Dcommon.jar=$(SOLARCOMMONBINDIR) \
+ANT_FLAGS!:=$(ANT_COMPILER_FLAGS) -Dprj=$(PRJ) -Dprjname=$(PRJNAME) $(ANT_JAVA_VER_FLAGS) \
+ -Ddebug=$(ANT_DEBUG) -Doptimize=$(ANT_OPT) -Dtarget=$(TARGET) -Dsolar.update=on \
+ -Dout=$(OUT) -Dinpath=$(INPATH) -Dproext="$(PROEXT)" -Dsolar.bin=$(SOLARBINDIR) \
+ -Dsolar.jar=$(SOLARBINDIR) -Dsolar.doc=$(SOLARDOCDIR) -Dcommon.jar=$(SOLARCOMMONBINDIR) \
  -Dcommon.doc=$(SOLARCOMMONDOCDIR) -Dsolar.sourceversion=$(SOURCEVERSION) \
  -Dsolar.lastminor=$(LAST_MINOR) -Dsolar.build=$(BUILD) -f $(ANT_BUILDFILE) $(ANT_FLAGS) -emacs
-.ELSE
-ANT_FLAGS!:=-Dprj=$(PRJ) -Dprjname=$(PRJNAME) -Ddebug=$(ANT_DEBUG) -Doptimize=$(ANT_OPT) \
- -Dtarget=$(TARGET) -Dsolar.update=on -Dout=$(OUT) -Dinpath=$(INPATH) -Dproext="$(PROEXT)" \
- -Dsolar.bin=$(SOLARBINDIR) -Dsolar.jar=$(SOLARBINDIR) -Dsolar.doc=$(SOLARDOCDIR) \
- -Dcommon.jar=$(SOLARCOMMONBINDIR) -Dcommon.doc=$(SOLARCOMMONDOCDIR) \
- -Dsolar.sourceversion=$(SOURCEVERSION) -Dsolar.lastminor=$(LAST_MINOR) \
- -Dsolar.build=$(BUILD) -f $(ANT_BUILDFILE) $(ANT_FLAGS) -emacs
-.ENDIF
+
 .ELSE # No java
 ANT=
 ANT_FLAGS=
 .ENDIF
- 
- 
--- solenv/inc/settings.mk.old	2006-10-11 19:08:41.000000000 +0200
+++ solenv/inc/settings.mk	2006-10-11 19:11:35.000000000 +0200
@@ -169,6 +169,9 @@
 .IF "$(JAVACISGCJ)" == "yes"
 JAVAC+=--encoding=UTF-8 -O2 -fno-assert -Wno-deprecated -C
 .ENDIF
+.IF "$(JAVACISGCJ)" != "yes" && $(JAVACISKAFFE) != "yes"
+JAVAC+=-source $(JAVA_SOURCE_VER) -target $(JAVA_TARGET_VER)
+.ENDIF
 
 #classpath and response
 .IF "$(JDK)" == "J++"
--- apache-commons/java/codec/makefile.mk.old	2008-04-11 13:13:47.000000000 +0200
+++ apache-commons/java/codec/makefile.mk	2008-07-02 15:31:43.000000000 +0200
@@ -61,7 +61,7 @@ JAVA_HOME=
 .EXPORT : JAVA_HOME
 BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -Dbuild.compiler=gcj -f $(ANT_BUILDFILE) jar
 .ELSE
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -f $(ANT_BUILDFILE) jar
+BUILD_ACTION=$(ANT) $(ANT_JAVA_VER_FLAGS) -Dbuild.label="build-$(RSCREVISION)" -f $(ANT_BUILDFILE) jar
 .ENDIF
 
 .ENDIF # $(SOLAR_JAVA)!= ""
--- apache-commons/patches/codec.patch.old	2008-02-04 10:02:07.000000000 +0100
+++ apache-commons/patches/codec.patch	2008-07-02 15:52:20.000000000 +0200
@@ -1,6 +1,15 @@
 --- misc/build/commons-codec-1.3/build.xml-old	2008-01-31 15:28:58.000000000 +0100
 +++ misc/build/commons-codec-1.3/build.xml	2008-01-31 15:29:21.000000000 +0100
-@@ -90,14 +90,12 @@
+@@ -54,7 +54,7 @@ limitations under the License.
+         </copy>
+     </target>
+     <target name="compile" depends="static" description="Compile shareable components">
+-        <javac srcdir="${source.home}" destdir="${build.home}/classes" debug="${compile.debug}" deprecation="${compile.deprecation}" optimize="${compile.optimize}">
++        <javac srcdir="${source.home}" destdir="${build.home}/classes" debug="${compile.debug}" deprecation="${compile.deprecation}" source="${java.source.ver}" target="${java.target.ver}" optimize="${compile.optimize}">
+             <classpath refid="compile.classpath"/>
+         </javac>
+         <copy todir="${build.home}/classes" filtering="on">
+@@ -90,14 +90,12 @@ limitations under the License.
      </target>
      <target name="dist" depends="compile,javadoc" description="Create binary distribution">
          <mkdir dir="${dist.home}"/>
--- apache-commons/java/httpclient/makefile.mk.old	2008-04-11 13:14:05.000000000 +0200
+++ apache-commons/java/httpclient/makefile.mk	2008-07-02 15:56:02.000000000 +0200
@@ -50,7 +50,7 @@ TARFILE_NAME=commons-httpclient-3.1-src
 
 TARFILE_ROOTDIR=commons-httpclient-3.1
 
-#PATCH_FILE_NAME=patches$/httpclient.patch
+PATCH_FILE_NAME=patches$/httpclient.patch
 
 #CONVERTFILES=build.xml
 				
@@ -64,7 +64,7 @@ JAVA_HOME=
 .EXPORT : JAVA_HOME
 BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -Dbuild.compiler=gcj -Dcommons-logging.jar=$(COMMONS_LOGGING_JAR) -Dcommons-codec.jar=$(COMMONS_CODEC_JAR) -f $(ANT_BUILDFILE) dist
 .ELSE
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)"  -Dcommons-logging.jar=$(COMMONS_LOGGING_JAR) -Dcommons-codec.jar=$(COMMONS_CODEC_JAR) -f $(ANT_BUILDFILE) dist
+BUILD_ACTION=$(ANT) $(ANT_JAVA_VER_FLAGS) -Dbuild.label="build-$(RSCREVISION)"  -Dcommons-logging.jar=$(COMMONS_LOGGING_JAR) -Dcommons-codec.jar=$(COMMONS_CODEC_JAR) -f $(ANT_BUILDFILE) dist
 .ENDIF
 
 .ENDIF # $(SOLAR_JAVA)!= ""
--- /dev/null	2007-09-21 21:12:45.000000000 +0200
+++ apache-commons/patches/httpclient.patch	2008-07-02 15:52:59.000000000 +0200
@@ -0,0 +1,29 @@
+--- misc/build/commons-httpclient-3.1/build.xml.old	2007-08-18 11:02:14.000000000 +0200
++++ misc/build/commons-httpclient-3.1/build.xml	2008-07-02 15:51:48.000000000 +0200
+@@ -181,6 +181,8 @@
+            destdir     ="${build.home}/classes"
+            debug       ="${compile.debug}"
+            deprecation ="${compile.deprecation}"
++	   source      ="${java.source.ver}" 
++	   target      ="${java.target.ver}" 
+            optimize    ="${compile.optimize}">
+       <classpath refid="compile.classpath"/>
+     </javac>
+@@ -188,6 +190,8 @@
+            destdir     ="${build.home}/examples"
+            debug       ="${compile.debug}"
+            deprecation ="${compile.deprecation}"
++	   source      ="${java.source.ver}" 
++	   target      ="${java.target.ver}" 
+            optimize    ="${compile.optimize}">
+       <classpath refid="compile.classpath"/>
+     </javac>
+@@ -199,6 +203,8 @@
+            destdir     ="${build.home}/tests"
+            debug       ="${compile.debug}"
+            deprecation ="${compile.deprecation}"
++	   source      ="${java.source.ver}" 
++	   target      ="${java.target.ver}" 
+            optimize    ="${compile.optimize}">
+       <classpath refid="test.classpath"/>
+     </javac>
--- beanshell/bsh-2.0b1-src.patch.old	2008-04-11 09:44:49.000000000 +0200
+++ beanshell/bsh-2.0b1-src.patch	2008-07-01 22:19:43.000000000 +0200
@@ -19,16 +19,25 @@
  	<!-- Uncomment to build without the ASM class generator code.
  	<property name="exclude-classgen" 
  		value="bsh/org/objectweb/asm/**,bsh/ClassGeneratorImpl.java,bsh/ClassGeneratorUtil.java,bsh/DelayedEvalBshMethod.java"/>
-@@ -80,6 +83,9 @@
- 	<property name="exclude-servlet" 
+@@ -81,6 +84,9 @@
  		value="bsh/servlet/*"/>
  	-->
-+
+ 
 +	<property name="exclude-servlet" 
 +		value="bsh/servlet/*"/>
- 
++
  	<!-- Legacy excludes.  Comment this *out* to build these legacy items -->
  	<property name="legacy-excludes" 
+ 		value="bsh/JThis.java"/>
+@@ -165,6 +171,8 @@
+ 			deprecation="${deprecation}"
+ 			optimize="on"
+ 			debug="off"
++			source="${java.source.ver}"
++			target="${java.target.ver}"
+ 			includes="**/*.java"
+ 			excludes="${excludes},**/bak/**"
+ 		>
 --- misc/BeanShell/makefile.mk	Fri Mar 28 15:56:40 2008
 +++ misc/build/BeanShell/makefile.mk	Fri Mar 28 15:56:06 2008
 @@ -1 +1,39 @@
--- hsqldb/makefile.mk.old	2006-07-10 21:01:25.000000000 +0200
+++ hsqldb/makefile.mk	2006-10-11 20:42:14.000000000 +0200
@@ -38,18 +38,12 @@
 PRJNAME=hsqldb
 TARGET=so_hsqldb
 
+.IF "$(SOLAR_JAVA)" != ""
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
-
-# override buildfile
-ANT_BUILDFILE=build$/build.xml
-
-.INCLUDE : antsettings.mk
-
 .INCLUDE :  version.mk
 
-.IF "$(SOLAR_JAVA)" != ""
 # --- Files --------------------------------------------------------
 
 TARFILE_NAME=hsqldb_$(HSQLDB_VERSION)
@@ -60,28 +60,24 @@
 
 PATCH_FILE_NAME=patches$/accumulated_patches.patch
 
+ADDITIONAL_FILES=makefile.mk
+
 # ADDITIONAL_FILES=   src$/org$/hsqldb$/Collation.java \
 #                     src$/org$/hsqldb$/TxManager.java \
 #                     src$/org$/hsqldb$/lib$/LongKeyIntValueHashMap.java \
 #                     src$/org$/hsqldb$/persist$/ScaledRAFileInJar.java \
 #                     src$/org$/hsqldb$/test$/TestCollation.java
 
-.IF "$(JAVACISGCJ)"=="yes"
-JAVA_HOME=
-.EXPORT : JAVA_HOME
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -Dbuild.compiler=gcj -f $(ANT_BUILDFILE) jar
-.ELSE
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -f $(ANT_BUILDFILE) jar
-.ENDIF
-
-.ENDIF # $(SOLAR_JAVA)!= ""
+BUILD_ACTION=dmake $(MFLAGS) $(CALLMACROS)
 
 # --- Targets ------------------------------------------------------
 
 .INCLUDE : set_ext.mk
 .INCLUDE : target.mk
 
-.IF "$(SOLAR_JAVA)" != ""
 .INCLUDE : tg_ext.mk
-.ENDIF
 
+.ELSE
+@all:
+	@echo java disabled
+.ENDIF
dummy line to avoid confusing diff-mode
--- hsqldb/patches/accumulated_patches.patch	2008-01-29 12:13:28.000000000 +0100
+++ hsqldb/patches/accumulated_patches.patch	2008-01-29 12:11:22.000000000 +0100
@@ -1315,3 +1315,176 @@
   
                               return false;
                           }
+diff -crN misc/hsqldb/makefile.mk misc/build/hsqldb/makefile.mk
+*** misc/hsqldb/makefile.mk	2006-11-28 12:45:49.000000000 +0100
+--- misc/build/hsqldb/makefile.mk	2006-11-28 12:31:12.000000000 +0100
+***************
+*** 1 ****
+! dummy
+--- 1,47 ----
+! #*************************************************************************
+! #
+! #   OpenOffice.org - a multi-platform office productivity suite
+! #
+! #   $RCSfile$
+! #
+! #   $Revision$
+! #
+! #   last change: $Author$ $Date$
+! #
+! #   The Contents of this file are made available subject to
+! #   the terms of GNU Lesser General Public License Version 2.1.
+! #
+! #
+! #     GNU Lesser General Public License Version 2.1
+! #     =============================================
+! #     Copyright 2005 by Sun Microsystems, Inc.
+! #     901 San Antonio Road, Palo Alto, CA 94303, USA
+! #
+! #     This library is free software; you can redistribute it and/or
+! #     modify it under the terms of the GNU Lesser General Public
+! #     License version 2.1, as published by the Free Software Foundation.
+! #
+! #     This library is distributed in the hope that it will be useful,
+! #     but WITHOUT ANY WARRANTY; without even the implied warranty of
+! #     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+! #     Lesser General Public License for more details.
+! #
+! #     You should have received a copy of the GNU Lesser General Public
+! #     License along with this library; if not, write to the Free Software
+! #     Foundation, Inc., 59 Temple Place, Suite 330, Boston,
+! #     MA  02111-1307  USA
+! #
+! #*************************************************************************
+! 
+! PRJ=..$/..$/..$/..
+! PRJNAME=so_hsqldb
+! TARGET=so_hsqldb
+! 
+! # buildfile is in a subdirectory
+! ANT_BUILDFILE=build$/build.xml
+! 
+! .INCLUDE : ant.mk
+! 
+! ANT_FLAGS+=-Dbuild.label="build-$(RSCREVISION)" jar
+! 
+! ALLTAR : ANTBUILD
+diff -crN misc/hsqldb/build/build.xml misc/build/hsqldb/build/build.xml
+*** misc/hsqldb/build/build.xml.orig	2007-10-22 16:17:31.000000000 +0200
+--- misc/build/hsqldb/build/build.xml	2008-01-29 12:10:02.000000000 +0100
+***************
+*** 132,138 ****
+  
+      <target name="codeswitcher" depends="-prepare"
+              description="uses +-JDBC2 +-JDBC2 +-JAVA2 +-JDBC4">
+!       <javac destdir="classes">
+           <src path="${src}"/>
+           <include name="org/hsqldb/util/CodeSwitcher.java"/>
+         </javac>
+--- 132,138 ----
+  
+      <target name="codeswitcher" depends="-prepare"
+              description="uses +-JDBC2 +-JDBC2 +-JAVA2 +-JDBC4">
+!       <javac destdir="classes" source="${java.source.ver}" target="${java.target.ver}">
+           <src path="${src}"/>
+           <include name="org/hsqldb/util/CodeSwitcher.java"/>
+         </javac>
+***************
+*** 258,263 ****
+--- 258,265 ----
+              description="compiles the /store folder">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+        >
+***************
+*** 269,274 ****
+--- 271,278 ----
+              description="compiles the /lib folder">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+        >
+***************
+*** 281,286 ****
+--- 285,292 ----
+              description="compiles all the classes">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+         >
+***************
+*** 315,320 ****
+--- 321,328 ----
+             description="compiles 1.2 specific classes">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+         >
+***************
+*** 327,332 ****
+--- 335,342 ----
+             description="compiles 1.4 specific classes">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+         >
+***************
+*** 343,348 ****
+--- 353,360 ----
+             description="compiles 1.4-specific test classes">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+               debug="${build.debug}"
+               optimize="${build.optimize}"
+               classpath="lib/junit.jar"
+***************
+*** 357,362 ****
+--- 369,376 ----
+              description="compiles the /util folder">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+        >
+***************
+*** 373,378 ****
+--- 387,394 ----
+             description="compiles the swing based classes in the /util folder">
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+         >
+***************
+*** 388,393 ****
+--- 404,411 ----
+              message="'junit.jar' must reside in the /lib directory in order to use this target"/>
+        <javac srcdir="${src}"
+               destdir="classes"
++              source="${java.source.ver}"
++              target="${java.target.ver}"
+                   debug="${build.debug}"
+                   optimize="${build.optimize}"
+           >
dummy line to avoid confusing diff-mode
--- jfreereport/java/sac/makefile.mk.old	2008-01-11 09:27:31.000000000 +0100
+++ jfreereport/java/sac/makefile.mk	2008-01-29 17:56:18.000000000 +0100
@@ -38,16 +38,12 @@ PRJ=..$/..
 PRJNAME=jfreereport
 TARGET=sac-1.3
 
+.IF "$(SOLAR_JAVA)" != ""
+
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
 
-# override buildfile
-ANT_BUILDFILE=build.xml
-
-.INCLUDE : antsettings.mk
-
-.IF "$(SOLAR_JAVA)" != ""
 # --- Files --------------------------------------------------------
 
 TARFILE_NAME=sacjava-1.3
@@ -56,31 +52,26 @@ TARFILE_ROOTDIR=$(TARGET)
 
 PATCH_FILE_NAME=patches$/sac.patch
 
-ADDITIONAL_FILES=build.xml
+ADDITIONAL_FILES=build.xml \
+		 makefile.mk
 
 # CONVERTFILES=build.xml
 
-.IF "$(JAVACISGCJ)"=="yes"
-JAVA_HOME=
-.EXPORT : JAVA_HOME
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -Dbuild.compiler=gcj -f $(ANT_BUILDFILE) all
-.ELSE
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -f $(ANT_BUILDFILE) all
-.ENDIF
-
-.ENDIF # $(SOLAR_JAVA)!= ""
+BUILD_ACTION=dmake $(MFLAGS) $(CALLMACROS)
 
 # --- Targets ------------------------------------------------------
 
 .INCLUDE : set_ext.mk
 .INCLUDE : target.mk
 
-.IF "$(SOLAR_JAVA)" != ""
 .INCLUDE : tg_ext.mk
 
 ALLTAR : $(CLASSDIR)$/sac.jar
 
 $(CLASSDIR)$/sac.jar : $(PACKAGE_DIR)$/$(INSTALL_FLAG_FILE)
 	$(COPY) $(PACKAGE_DIR)$/$(TARFILE_ROOTDIR)$/build$/lib$/sac.jar $(CLASSDIR)$/sac.jar
-.ENDIF
 
+.ELSE
+@all:
+       @echo java disabled
+.ENDIF
dummy line to avoid confusing diff-mode
--- jfreereport/patches/sac.patch.old	2008-01-11 09:30:07.000000000 +0100
+++ jfreereport/patches/sac.patch	2008-01-29 17:58:23.000000000 +0100
@@ -1,3 +1,56 @@
+*** misc/sac-1.3/makefile.mk.dummy	2008-01-29 14:31:39.000000000 +0100
+--- misc/build/sac-1.3/makefile.mk	2008-01-29 17:35:10.000000000 +0100
+***************
+*** 1 ****
+! dummy
+--- 1,47 ----
+! #*************************************************************************
+! #
+! #   OpenOffice.org - a multi-platform office productivity suite
+! #
+! #   $RCSfile$
+! #
+! #   $Revision$
+! #
+! #   last change: $Author$ $Date$
+! #
+! #   The Contents of this file are made available subject to
+! #   the terms of GNU Lesser General Public License Version 2.1.
+! #
+! #
+! #     GNU Lesser General Public License Version 2.1
+! #     =============================================
+! #     Copyright 2005 by Sun Microsystems, Inc.
+! #     901 San Antonio Road, Palo Alto, CA 94303, USA
+! #
+! #     This library is free software; you can redistribute it and/or
+! #     modify it under the terms of the GNU Lesser General Public
+! #     License version 2.1, as published by the Free Software Foundation.
+! #
+! #     This library is distributed in the hope that it will be useful,
+! #     but WITHOUT ANY WARRANTY; without even the implied warranty of
+! #     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+! #     Lesser General Public License for more details.
+! #
+! #     You should have received a copy of the GNU Lesser General Public
+! #     License along with this library; if not, write to the Free Software
+! #     Foundation, Inc., 59 Temple Place, Suite 330, Boston,
+! #     MA  02111-1307  USA
+! #
+! #*************************************************************************
+! 
+! PRJ=..$/..$/..$/..
+! PRJNAME=jfreereport
+! TARGET=sac-1.3
+! 
+! # buildfile is in a subdirectory
+! ANT_BUILDFILE=build.xml
+! 
+! .INCLUDE : ant.mk
+! 
+! ANT_FLAGS+=-Dbuild.label="build-$(RSCREVISION)" jar
+! 
+! ALLTAR : ANTBUILD
 *** misc/sac-1.3/build.xml	Thu Oct 18 09:22:24 2007
 --- misc/build/sac-1.3/build.xml	Thu Oct 18 08:53:59 2007
 ***************
@@ -40,7 +93,7 @@
 ! 
 !   <!-- Build classes -->
 !   <target name="classes" depends="prepare">
-!     <javac srcdir="${src}" destdir="${build.classes}" debug="off" optimize="on"/>
+!     <javac srcdir="${src}" destdir="${build.classes}" source="${java.source.ver}" target="${java.target.ver}" debug="off" optimize="on"/>
 !     <copy todir="${build.classes}">
 !       <fileset dir="${src}">
 !         <include name="**/*.properties"/>
dummy line to avoid confusing diff-mode
--- rhino/makefile.mk.old	2008-01-04 13:29:01.000000000 +0100
+++ rhino/makefile.mk	2008-01-29 12:34:37.000000000 +0100
@@ -42,7 +42,6 @@ TARGET=ooo_rhino
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
-.INCLUDE :  antsettings.mk
 
 # --- Files --------------------------------------------------------
 
@@ -50,17 +49,12 @@ TARFILE_NAME=rhino1_5R5
 TARFILE_ROOTDIR=rhino1_5R5
 
 ADDITIONAL_FILES= \
+	makefile.mk \
 	toolsrc/org/mozilla/javascript/tools/debugger/OfficeScriptInfo.java
 
 PATCH_FILE_NAME=rhino1_5R5.patch
 
-.IF "$(JAVACISGCJ)"=="yes"
-JAVA_HOME=
-.EXPORT : JAVA_HOME
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" -Dbuild.compiler=gcj jar
-.ELSE
-BUILD_ACTION=$(ANT) -Dbuild.label="build-$(RSCREVISION)" jar
-.ENDIF
+BUILD_ACTION=dmake $(MFLAGS) $(CALLMACROS)
 
 # --- Targets ------------------------------------------------------
 
dummy line to avoid confusing diff-mode
--- rhino/rhino1_5R5.patch.old	2008-01-02 15:51:18.000000000 +0100
+++ rhino/rhino1_5R5.patch	2008-01-29 12:34:05.000000000 +0100
@@ -1,3 +1,82 @@
+*** misc/rhino1_5R5//makefile.mk.old	2008-01-29 12:32:48.000000000 +0100
+--- misc/build/rhino1_5R5//makefile.mk	2008-01-29 12:33:22.000000000 +0100
+***************
+*** 1 ****
+! dummy
+--- 1,47 ----
+! #*************************************************************************
+! #
+! #   OpenOffice.org - a multi-platform office productivity suite
+! #
+! #   $RCSfile$
+! #
+! #   $Revision$
+! #
+! #   last change: $Author$ $Date$
+! #
+! #   The Contents of this file are made available subject to
+! #   the terms of GNU Lesser General Public License Version 2.1.
+! #
+! #
+! #     GNU Lesser General Public License Version 2.1
+! #     =============================================
+! #     Copyright 2005 by Sun Microsystems, Inc.
+! #     901 San Antonio Road, Palo Alto, CA 94303, USA
+! #
+! #     This library is free software; you can redistribute it and/or
+! #     modify it under the terms of the GNU Lesser General Public
+! #     License version 2.1, as published by the Free Software Foundation.
+! #
+! #     This library is distributed in the hope that it will be useful,
+! #     but WITHOUT ANY WARRANTY; without even the implied warranty of
+! #     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+! #     Lesser General Public License for more details.
+! #
+! #     You should have received a copy of the GNU Lesser General Public
+! #     License along with this library; if not, write to the Free Software
+! #     Foundation, Inc., 59 Temple Place, Suite 330, Boston,
+! #     MA  02111-1307  USA
+! #
+! #*************************************************************************
+! 
+! PRJ=..$/..$/..$/..
+! PRJNAME=ooo_rhino
+! TARGET=ooo_rhino
+! 
+! # buildfile is in a subdirectory
+! ANT_BUILDFILE=build.xml
+! 
+! .INCLUDE : ant.mk
+! 
+! ANT_FLAGS+=-Dbuild.label="build-$(RSCREVISION)" jar
+! 
+! ALLTAR : ANTBUILD
+*** misc/rhino1_5R5/src/build.xml.old	2004-03-25 21:54:34.000000000 +0100
+--- misc/build/rhino1_5R5/src/build.xml	2008-01-29 12:18:05.000000000 +0100
+***************
+*** 17,22 ****
+--- 17,24 ----
+             destdir="${nest}/${classes}"
+             includes="org/**/*.java"
+             deprecation="on"
++            source="${java.source.ver}" 
++            target="${java.target.ver}"
+             debug="${debug}">
+      </javac>
+      <copy todir="${nest}/${classes}">
+*** misc/rhino1_5R5/toolsrc/build.xml.old	2008-01-29 10:51:54.000000000 +0100
+--- misc/build/rhino1_5R5/toolsrc/build.xml	2008-01-29 12:21:10.000000000 +0100
+***************
+*** 31,36 ****
+--- 31,38 ----
+             destdir="${nest}/${classes}"
+             includes="org/**/*.java"
+             deprecation="on"
++            source="${java.source.ver}" 
++            target="${java.target.ver}"
+             debug="${debug}">
+      </javac>
+      <copy todir="${nest}/${classes}">
 --- misc/rhino1_5R5/src/org/mozilla/javascript/DefiningClassLoader.java	Thu Mar 25 21:54:34 2004
 +++ misc/build/rhino1_5R5/src/org/mozilla/javascript/DefiningClassLoader.java	Fri Mar 28 17:24:23 2008
 @@ -38,6 +38,7 @@
dummy line to avoid confusing diff-mode
--- scripting/examples/java/build.xml.old	2005-09-09 03:53:51.000000000 +0200
+++ scripting/examples/java/build.xml	2006-10-11 15:30:17.000000000 +0200
@@ -55,7 +55,8 @@
 
     <javac srcdir="HelloWorld" destdir="${outdir}/HelloWorld"
            includes="**/*.java" classpathref="idlclasspath"
-           debug="${debug}" optimize="${optimize}" deprecation="on"/>
+           debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <copy file="HelloWorld/HelloWorld.java" todir="${outdir}/HelloWorld"/>
     <copy file="HelloWorld/parcel-descriptor.xml" todir="${outdir}/HelloWorld"/>
@@ -77,7 +78,8 @@
 
     <javac srcdir="Highlight" destdir="${outdir}/Highlight"
            includes="**/*.java" classpathref="idlclasspath"
-           debug="${debug}" optimize="${optimize}" deprecation="on"/>
+           debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <copy file="Highlight/HighlightText.java" todir="${outdir}/Highlight"/>
     <copy file="Highlight/parcel-descriptor.xml" todir="${outdir}/Highlight"/>
@@ -99,7 +101,8 @@
 
     <javac srcdir="MemoryUsage" destdir="${outdir}/MemoryUsage"
            includes="**/*.java" classpathref="idlclasspath"
-           debug="${debug}" optimize="${optimize}" deprecation="on"/>
+           debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <copy file="MemoryUsage/MemoryUsage.java" todir="${outdir}/MemoryUsage"/>
     <copy file="MemoryUsage/parcel-descriptor.xml" todir="${outdir}/MemoryUsage"/>
@@ -121,7 +124,8 @@
 
     <javac srcdir="selector" destdir="${outdir}/selector"
        	   includes="**/*.java" classpathref="idlclasspath"
-	       debug="${debug}" optimize="${optimize}" deprecation="on"/>
+       	   debug="${debug}" optimize="${optimize}" deprecation="on"
+       	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <copy todir="${outdir}/selector">
         <fileset dir="selector">
--- scripting/java/build.xml.old	2006-04-19 17:06:54.000000000 +0200
+++ scripting/java/build.xml	2006-10-11 15:32:20.000000000 +0200
@@ -89,16 +89,19 @@
   <target name="compile" depends="prepare">
     <javac srcdir="com" destdir="${jardir}"
          includes="**/*.java" classpathref="idlclasspath"
-         debug="${debug}" optimize="${optimize}" deprecation="off"/>
+         debug="${debug}" optimize="${optimize}" deprecation="off"
+	 source="${java.source.ver}" target="${java.target.ver}"/>
     <javac srcdir="Framework/" destdir="${jardir}"
          includes="**/*.java" classpathref="idlclasspath" debug="${debug}" 
-         optimize="${optimize}" deprecation="off">
+         optimize="${optimize}" deprecation="off"
+	 source="${java.source.ver}" target="${java.target.ver}">
     </javac>
   </target>
 
   <target name="idesupport.compile" depends="compile, prepare">
     <javac srcdir="." destdir="${jardir}"
-           debug="${debug}" deprecation="on">
+           debug="${debug}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}">
       <classpath refid="idesupport.class.path"/>
       <exclude name="${idesupport.dir}/**/.*/*"/>
       <exclude name="${idesupport.dir}/localoffice/**/*"/>
@@ -110,7 +113,8 @@
 
   <target name="localoffice.compile" depends="prepare">
     <javac srcdir="." destdir="${jardir}"
-           debug="${debug}" deprecation="on">
+           debug="${debug}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}">
       <classpath refid="idlclasspath"/>
       <exclude name="${idesupport.dir}/localoffice/.*/*"/>
       <include name="${idesupport.dir}/localoffice/*.java"/>
@@ -119,7 +123,8 @@
 
   <target name="netbeans.compile" depends="idesupport.compile, prepare">
     <javac srcdir="." destdir="${jardir}"
-           debug="${debug}" deprecation="on">
+           debug="${debug}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}">
       <classpath refid="openide.class.path"/>
       <exclude name="${netbeans.dir}/**/.*/*"/>
       <include name="${netbeans.dir}/**/*.java"/>
@@ -128,7 +133,8 @@
 
   <target name="netbeans.editor.support" depends="prepare">
     <javac srcdir="." destdir="${jardir}"
-           debug="${debug}" deprecation="on">
+           debug="${debug}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}">
       <classpath refid="netbeans.editor.support.classpath"/>
       <include name="org/openoffice/netbeans/editor/*.java"/>
     </javac>
--- scripting/workben/build.xml.old	2005-09-09 04:41:02.000000000 +0200
+++ scripting/workben/build.xml	2006-10-11 15:18:44.000000000 +0200
@@ -117,7 +117,8 @@
            destdir="${out}/class/examples/java/debugger"
        	   includes="*.java"
            classpathref="debuggerclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <copy todir="${out}/class/examples/java/debugger">
         <fileset dir="${prj}/examples/java/debugger">
@@ -141,7 +142,8 @@
     <mkdir dir="${out}/class/examples/java/Highlight"/>
     <javac srcdir="${prj}/examples/java/" destdir="${out}/class/examples/java/Highlight/"
        	   includes="**/Highlight*.java" classpathref="idlclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
     <copy todir="${out}/class/examples/java/Highlight/">
         <fileset dir="${prj}/examples/java/">
             <include name="**/Highlight*.java"/>
@@ -160,7 +162,8 @@
     <mkdir dir="${out}/class/examples/java/MemoryUsage"/>
     <javac srcdir="${prj}/examples/java/" destdir="${out}/class/examples/java/MemoryUsage/"
        	   includes="**/MemoryUsage.java" classpathref="idlclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
     <copy file="${prj}/examples/java/MemoryUsage.java" todir="${out}/class/examples/java/MemoryUsage/"/>
     <copy file="${prj}/examples/java/MemoryUsageParcel.xml" tofile="${out}/class/examples/java/MemoryUsage/parcel-descriptor.xml"/>
     <copy file="${prj}/examples/java/MemoryUsage.java" todir="${out}/class/examples/java/MemoryUsage/"/>
@@ -169,7 +172,8 @@
     <mkdir dir="${out}/class/examples/java/ScriptFrmwrkHelper"/>
     <javac srcdir="${prj}/examples/java/" destdir="${out}/class/examples/java/ScriptFrmwrkHelper/"
        	   includes="**/ScriptFrmwrkHelper.java" classpathref="scriptexampleclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
     <copy todir="${out}/class/examples/java/ScriptFrmwrkHelper/">
         <fileset dir="${prj}/examples/java/">
             <include name="**/ScriptFrmwrkHelper.java"/>
@@ -319,7 +323,8 @@
     <javac srcdir="${prj}/examples/java/debugger"
            destdir="${out}/class/jsruntimetmp"
        	   includes="rhino/Main.java" classpathref="debuggerclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
 
     <zip destfile="${out}/class/jsruntime/skip_registration/js.jar"
         basedir="${out}/class/jsruntimetmp" includes="**"/>
@@ -377,7 +382,8 @@
     <mkdir dir="${installerclasses}"/>
     <javac srcdir="installer/" destdir="${installerclasses}"
        	   includes="**/*.java" classpathref="idlclasspath"
-	   debug="${debug}" optimize="${optimize}" deprecation="on"/>
+	   debug="${debug}" optimize="${optimize}" deprecation="on"
+	   source="${java.source.ver}" target="${java.target.ver}"/>
     <copy file="installer/sidebar.jpg" todir="${out}/class/sframeworkinstall/installer"/>
   </target>
 
--- tomcat/makefile.mk.old	2008-04-11 12:04:08.000000000 +0200
+++ tomcat/makefile.mk	2008-07-02 16:13:43.000000000 +0200
@@ -51,7 +51,7 @@ TARFILE_ROOTDIR=jakarta-tomcat-5.0.30-sr
 PATCH_FILE_NAME=tomcat.patch
 
 BUILD_DIR=jakarta-servletapi-5
-BUILD_ACTION=$(ANT)
+BUILD_ACTION=$(ANT) $(ANT_JAVA_VER_FLAGS)
 
 # --- Targets ------------------------------------------------------
 
--- tomcat/tomcat.patch.old	2008-07-02 16:11:08.000000000 +0200
+++ tomcat/tomcat.patch	2008-07-02 16:10:55.000000000 +0200
@@ -34,3 +34,55 @@
 +   </target>
 + 
 + </project>
+--- misc/build/jakarta-tomcat-5.0.30-src/jakarta-servletapi-5/jsr152/build.xml.old	2004-11-24 17:54:57.000000000 +0100
++++ misc/build/jakarta-tomcat-5.0.30-src/jakarta-servletapi-5/jsr152/build.xml	2008-07-02 16:03:57.000000000 +0200
+@@ -69,6 +69,7 @@
+     <!-- Java classes -->
+     <javac srcdir="src/share" destdir="${jsp-api.build}/classes"
+            debug="${compile.debug}" deprecation="${compile.deprecation}"
++	   source="${java.source.ver}" target="${java.target.ver}"
+         optimize="${compile.optimize}"
+        classpath="${servlet-api.jar}" />
+ 
+@@ -112,6 +113,7 @@
+     <javac  srcdir="src/ant" destdir="${jsp-api.build}/ant"
+             debug="${compile.debug}" deprecation="${compile.deprecation}"
+             optimize="${compile.optimize}" 
++	    source="${java.source.ver}" target="${java.target.ver}"
+             classpath="${ant.home}/lib/ant.jar" />
+     <taskdef    name="txt2html" classname="task.Txt2Html"
+                 classpath="${jsp-api.build}/ant" />
+@@ -202,6 +204,7 @@
+     <javac   srcdir="examples/WEB-INF/classes" 
+              destdir="${jsp-api.build}/examples/WEB-INF/classes"
+              debug="${compile.debug}" deprecation="${compile.deprecation}"
++	     source="${java.source.ver}" target="${java.target.ver}"
+              optimize="${compile.optimize}"
+              excludes="**/CVS/**">
+       <classpath refid="examples.classpath" />
+@@ -210,6 +213,7 @@
+     <javac   srcdir="examples/plugin/applet" 
+              destdir="${jsp-api.build}/examples/plugin/applet"
+              debug="${compile.debug}" deprecation="${compile.deprecation}"
++	     source="${java.source.ver}" target="${java.target.ver}"
+              optimize="${compile.optimize}"
+              excludes="**/CVS/**">
+       <classpath refid="examples.classpath" />
+--- misc/build/jakarta-tomcat-5.0.30-src/jakarta-servletapi-5/jsr154/build.xml.old	2004-11-24 17:55:01.000000000 +0100
++++ misc/build/jakarta-tomcat-5.0.30-src/jakarta-servletapi-5/jsr154/build.xml	2008-07-02 16:10:05.000000000 +0200
+@@ -64,6 +64,7 @@
+     <!-- Java classes -->
+     <javac srcdir="src/share" destdir="${servlet-api.build}/classes"
+            debug="${compile.debug}" deprecation="${compile.deprecation}"
++	   source="${java.source.ver}" target="${java.target.ver}"
+         optimize="${compile.optimize}"/>
+ 
+     <!-- Associated property files -->
+@@ -110,6 +111,7 @@
+     <javac   srcdir="examples/WEB-INF/classes" 
+              destdir="${servlet-api.build}/examples/WEB-INF/classes"
+              debug="${compile.debug}" deprecation="${compile.deprecation}"
++	     source="${java.source.ver}" target="${java.target.ver}"
+              optimize="${compile.optimize}"
+              excludes="**/CVS/**">
+       <classpath refid="examples.classpath" />
--- transex3/java/l10nconv/build.xml.old	2007-05-11 11:06:43.000000000 +0200
+++ transex3/java/l10nconv/build.xml	2007-07-17 11:58:03.000000000 +0200
@@ -133,6 +133,8 @@
 	       debug="${debug}"
                deprecation="${deprication}"
 	       optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}"
 	       classpathref="classpath">
             <src path="${java.dir}"/>
 	    <include name="**/*.java"/>
--- transex3/java/receditor/build.xml.old	2007-07-10 17:42:10.000000000 +0200
+++ transex3/java/receditor/build.xml	2007-07-18 11:40:17.000000000 +0200
@@ -131,6 +131,8 @@
 	       debug="${debug}"
                deprecation="${deprication}"
 	       optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}"
 	       classpathref="classpath">
             <src path="${java.dir}"/>
 	    <include name="**/*.java"/>
--- xmerge/java/org/openoffice/xmerge/build.xml.old	2005-09-09 12:22:56.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/build.xml	2006-10-11 16:08:54.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/Convert.java"/>
             <include name="${package}/ConverterCapabilities.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/dom/build.xml.old	2005-09-09 12:24:04.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/dom/build.xml	2006-10-11 17:04:03.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/DOMDocument.java"/>
         </javac>
--- xmerge/java/org/openoffice/xmerge/converter/palm/build.xml.old	2005-09-09 12:26:39.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/palm/build.xml	2006-10-11 16:47:21.000000000 +0200
@@ -111,7 +111,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/PalmDB.java"/>
             <include name="${package}/PdbDecoder.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/build.xml.old	2005-09-09 12:45:07.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/build.xml	2006-10-11 16:47:58.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
                         <include name="${package}/EmbeddedObject.java"/>
                         <include name="${package}/EmbeddedBinaryObject.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxc/build.xml.old	2005-09-09 12:49:55.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxc/build.xml	2006-10-11 16:50:37.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/CellStyle.java"/>
             <include name="${package}/ColumnStyle.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxc/minicalc/build.xml.old	2005-09-09 12:52:54.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxc/minicalc/build.xml	2006-10-11 16:52:07.000000000 +0200
@@ -115,7 +115,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/MinicalcConstants.java"/>
             <include name="${package}/MinicalcDecoder.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/build.xml.old	2005-09-09 12:55:41.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/build.xml	2006-10-11 16:51:12.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/PocketExcelConstants.java"/>
             <include name="${package}/PocketExcelDecoder.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/records/build.xml.old	2005-09-09 13:04:31.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/records/build.xml	2006-10-11 16:51:28.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
 			<include name="${package}/BIFFRecord.java"/>
 			<include name="${package}/CellValue.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/records/formula/build.xml.old	2005-09-09 13:09:59.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxc/pexcel/records/formula/build.xml	2006-10-11 16:51:45.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
 			<include name="${package}/FormulaCompiler.java"/>
 			<include name="${package}/FormulaHelper.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxw/aportisdoc/build.xml.old	2005-09-09 13:14:23.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxw/aportisdoc/build.xml	2006-10-11 16:50:03.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/DocConstants.java"/>
             <include name="${package}/DocDecoder.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxw/build.xml.old	2005-09-09 13:11:24.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxw/build.xml	2006-10-11 16:48:59.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
 			<include name="${package}/SxwDocument.java"/>
 			<include name="${package}/SxwPluginFactory.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxw/pocketword/build.xml.old	2005-09-09 13:18:18.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxw/pocketword/build.xml	2006-10-11 16:49:16.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
 			<include name="${package}/DocumentDescriptor.java"/>
                         <include name="${package}/DocumentDeserializerImpl.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/sxw/wordsmith/build.xml.old	2005-09-09 13:23:06.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/sxw/wordsmith/build.xml	2006-10-11 16:49:34.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/DOCConstants.java"/>
             <include name="${package}/textRecord.java"/>
--- xmerge/java/org/openoffice/xmerge/converter/xml/xslt/build.xml.old	2005-09-09 13:26:09.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/converter/xml/xslt/build.xml	2006-10-11 16:48:23.000000000 +0200
@@ -115,7 +115,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/DocumentDeserializerImpl.java"/>
             <include name="${package}/DocumentSerializerImpl.java"/>
--- xmerge/java/org/openoffice/xmerge/merger/build.xml.old	2005-09-09 13:30:36.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/merger/build.xml	2006-10-11 16:44:04.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/DiffAlgorithm.java"/>
             <include name="${package}/Difference.java"/>
--- xmerge/java/org/openoffice/xmerge/merger/diff/build.xml.old	2005-09-09 13:34:42.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/merger/diff/build.xml	2006-10-11 16:46:49.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/CharacterParser.java"/>
             <include name="${package}/CharArrayLCSAlgorithm.java"/>
--- xmerge/java/org/openoffice/xmerge/merger/merge/build.xml.old	2005-09-09 13:37:05.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/merger/merge/build.xml	2006-10-11 16:46:28.000000000 +0200
@@ -114,7 +114,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/CharacterBaseParagraphMerge.java"/>
             <include name="${package}/PositionBaseRowMerge.java"/>
--- xmerge/java/org/openoffice/xmerge/test/build.xml.old	2005-09-09 13:38:44.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/test/build.xml	2006-10-11 17:07:59.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/ConverterInfoList.java"/>
             <include name="${package}/Driver.java"/>
--- xmerge/java/org/openoffice/xmerge/util/build.xml.old	2005-09-09 13:42:14.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/util/build.xml	2006-10-11 17:07:04.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/IntArrayList.java"/>
             <include name="${package}/Resources.java"/>
--- xmerge/java/org/openoffice/xmerge/util/registry/build.xml.old	2005-09-09 13:44:35.000000000 +0200
+++ xmerge/java/org/openoffice/xmerge/util/registry/build.xml	2006-10-11 17:07:18.000000000 +0200
@@ -113,7 +113,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/ConverterInfo.java"/>
             <include name="${package}/ConverterInfoMgr.java"/>
--- xmerge/source/aportisdoc/build.xml.old	2006-08-01 14:39:04.000000000 +0200
+++ xmerge/source/aportisdoc/build.xml	2006-10-11 16:07:08.000000000 +0200
@@ -55,7 +55,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/bridge/build.xml.old	2006-08-01 14:41:36.000000000 +0200
+++ xmerge/source/bridge/build.xml	2006-10-11 16:05:56.000000000 +0200
@@ -62,7 +62,9 @@
                destdir="${target.dir}"
 			   debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/minicalc/build.xml.old	2006-08-01 14:43:30.000000000 +0200
+++ xmerge/source/minicalc/build.xml	2006-10-11 16:05:30.000000000 +0200
@@ -55,7 +55,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/pexcel/build.xml.old	2006-08-01 14:56:54.000000000 +0200
+++ xmerge/source/pexcel/build.xml	2006-10-11 16:05:04.000000000 +0200
@@ -55,7 +55,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/pocketword/build.xml.old	2006-08-01 15:09:21.000000000 +0200
+++ xmerge/source/pocketword/build.xml	2006-10-11 16:02:43.000000000 +0200
@@ -55,7 +55,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/wordsmith/build.xml.old	2006-08-01 15:12:23.000000000 +0200
+++ xmerge/source/wordsmith/build.xml	2006-10-11 16:06:21.000000000 +0200
@@ -55,7 +55,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/writer2latex/build.xml.old	2006-07-13 11:16:05.000000000 +0200
+++ xmerge/source/writer2latex/build.xml	2006-10-11 16:06:43.000000000 +0200
@@ -85,7 +85,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/xmerge/build.xml.old	2006-08-01 15:16:55.000000000 +0200
+++ xmerge/source/xmerge/build.xml	2006-10-11 16:03:09.000000000 +0200
@@ -64,7 +64,9 @@
                destdir="${target.dir}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
         </javac>
     </target>
--- xmerge/source/xmerge/java/org/openoffice/xmerge/util/registry/build.xml.old	2006-08-01 15:43:18.000000000 +0200
+++ xmerge/source/xmerge/java/org/openoffice/xmerge/util/registry/build.xml	2006-10-11 16:03:48.000000000 +0200
@@ -118,7 +118,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="${package}/ConverterInfo.java"/>
             <include name="${package}/ConverterInfoMgr.java"/>
--- xmerge/workben/build.xml.old	2006-04-19 17:11:40.000000000 +0200
+++ xmerge/workben/build.xml	2006-10-11 16:01:22.000000000 +0200
@@ -116,7 +116,9 @@
                destdir="${build.class}"
                debug="${debug}"
                deprecation="${deprecation}"
-               optimize="${optimize}">
+               optimize="${optimize}"
+	       source="${java.source.ver}"
+	       target="${java.target.ver}">
             <classpath refid="classpath"/>
             <include name="XmlDiff.java"/>
         </javac>
