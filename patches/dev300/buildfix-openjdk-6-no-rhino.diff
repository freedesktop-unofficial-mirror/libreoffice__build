--- rhino/rhino1_5R5.patch.old	2008-12-03 20:22:39.000000000 +0100
+++ rhino/rhino1_5R5.patch	2008-12-03 20:22:30.000000000 +0100
@@ -1174,3 +1174,30 @@
          PermissionCollection pc = Policy.getPolicy().getPermissions(cs);
          return new ProtectionDomain(cs, pc);
      }
+--- misc/rhino1_5R5/toolsrc/build.xml	2008-12-03 20:20:21.000000000 +0100
++++ misc/build/rhino1_5R5/toolsrc/build.xml	2008-12-03 20:19:28.000000000 +0100
+@@ -6,6 +6,16 @@ Requires Ant version 1.2
+ -->
+ <project name="toolsrc" default="compile" basedir=".">
+ 
++  <!-- rhino.jar from OpenJDK breaks build -->
++  <path id="my.bootstrap.classpath">
++     <fileset dir="${java.home}/">
++       <include name="jre/lib/*.jar"/>
++       <include name="lib/*.jar"/>
++       <exclude name="jre/lib/rhino.jar"/>
++       <exclude name="lib/rhino.jar"/>
++     </fileset>
++  </path>
++
+   <target name="properties">
+     <property name="nest" value=".."/>
+     <property name="build.dir" value="./build"/>
+@@ -32,6 +42,7 @@ Requires Ant version 1.2
+            includes="org/**/*.java"
+            deprecation="on"
+            debug="${debug}">
++      <compilerarg value="-Xbootclasspath:${toString:my.bootstrap.classpath}"/>
+     </javac>
+     <copy todir="${nest}/${classes}">
+       <fileset dir="." includes="org/**/*.properties" />
--- scripting/java/build.xml.old.orig	2008-12-03 20:08:19.000000000 +0100
+++ scripting/java/build.xml	2008-12-03 20:12:57.000000000 +0100
@@ -85,6 +85,16 @@
     <pathelement path="${jardir}"/>
     <pathelement path="${netbeans.install.path}/modules/ext/nb-editor.jar"/>
   </path>
+
+  <!-- rhino.jar from OpenJDK breaks build -->
+  <path id="my.bootstrap.classpath">
+     <fileset dir="${java.home}/">
+       <include name="jre/lib/*.jar"/>
+       <include name="lib/*.jar"/>
+       <exclude name="jre/lib/rhino.jar"/>
+       <exclude name="lib/rhino.jar"/>
+     </fileset>
+  </path>
     
   <!-- ===================== Prepare Directories ========================= -->
   <target name="prepare">
@@ -95,10 +95,13 @@
   <target name="compile" depends="prepare">
     <javac srcdir="com" destdir="${jardir}"
          includes="**/*.java" classpathref="idlclasspath"
-         debug="${debug}" optimize="${optimize}" deprecation="off"/>
+         debug="${debug}" optimize="${optimize}" deprecation="off">
+      <compilerarg value="-Xbootclasspath:${toString:my.bootstrap.classpath}"/>
+    </javac>
     <javac srcdir="Framework/" destdir="${jardir}"
          includes="**/*.java" classpathref="idlclasspath" debug="${debug}" 
          optimize="${optimize}" deprecation="off">
+      <compilerarg value="-Xbootclasspath:${toString:my.bootstrap.classpath}"/>
     </javac>
   </target>
 
