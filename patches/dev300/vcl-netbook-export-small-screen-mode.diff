---
 vcl/inc/vcl/salframe.hxx             |    2 ++
 vcl/inc/vcl/window.hxx               |    2 ++
 vcl/source/window/window3.cxx        |    6 ++++++
 vcl/unx/gtk/window/gtkframe.cxx      |    9 +++++++--
 vcl/unx/inc/plugins/gtk/gtkframe.hxx |    2 ++
 5 files changed, 19 insertions(+), 2 deletions(-)

diff --git vcl/inc/vcl/salframe.hxx vcl/inc/vcl/salframe.hxx
index 4e40b3e..0aec41a 100644
--- vcl/inc/vcl/salframe.hxx
+++ vcl/inc/vcl/salframe.hxx
@@ -293,6 +293,8 @@ public:
     // (e.g. input methods, printer update handlers).
     long						CallCallback( USHORT nEvent, const void* pEvent ) const
     { return m_pProc ? m_pProc( m_pWindow, const_cast<SalFrame*>(this), nEvent, pEvent ) : 0; }
+
+    virtual BOOL GetSmallScreenMode() { return FALSE; }
 };
 
 
diff --git vcl/inc/vcl/window.hxx vcl/inc/vcl/window.hxx
index b7b5ad4..f6faf3e 100644
--- vcl/inc/vcl/window.hxx
+++ vcl/inc/vcl/window.hxx
@@ -1119,6 +1119,8 @@ public:
 
     virtual XubString GetSurroundingText() const;
     virtual Selection GetSurroundingTextSelection() const;
+
+    BOOL GetSmallScreenMode();
 };
 
 
diff --git vcl/source/window/window3.cxx vcl/source/window/window3.cxx
index 15d8d17..8918436 100644
--- vcl/source/window/window3.cxx
+++ vcl/source/window/window3.cxx
@@ -30,6 +30,7 @@
 
 #include "vcl/window.hxx"
 #include "vcl/waitobj.hxx"
+#include "vcl/salframe.hxx"
 #include "vcl/button.hxx"
 
 // -----------------------------------------------------------------------
@@ -80,5 +81,10 @@ void Window::ImplAdjustNWFSizes()
         break;
     }
 }
+
+BOOL Window::GetSmallScreenMode()
+{
+    return ImplGetFrame()->GetSmallScreenMode();
+}
 
 /* vim:set shiftwidth=4 softtabstop=4 expandtab: */
diff --git vcl/unx/gtk/window/gtkframe.cxx vcl/unx/gtk/window/gtkframe.cxx
index c26d85c..6426611 100644
--- vcl/unx/gtk/window/gtkframe.cxx
+++ vcl/unx/gtk/window/gtkframe.cxx
@@ -841,7 +841,7 @@ void GtkSalFrame::Init( SalFrame* pParent, ULONG nStyle )
             gtk_window_set_keep_above( GTK_WINDOW(m_pWindow), true );
         }
         
-    if( getDisplay()->getWMAdaptor()->getSmallScreen() && eWinType == GTK_WINDOW_TOPLEVEL && !(nStyle & SAL_FRAME_STYLE_DIALOG ) && !(nStyle & SAL_FRAME_STYLE_FLOAT_FOCUSABLE ) && !(nStyle & SAL_FRAME_STYLE_TOOLWINDOW ) )
+    if( GetSmallScreenMode() && eWinType == GTK_WINDOW_TOPLEVEL && !(nStyle & SAL_FRAME_STYLE_DIALOG ) && !(nStyle & SAL_FRAME_STYLE_FLOAT_FOCUSABLE ) && !(nStyle & SAL_FRAME_STYLE_TOOLWINDOW ) )
         bNoDecor = true;
 
         gtk_window_set_type_hint( GTK_WINDOW(m_pWindow), eType );
@@ -1623,7 +1623,7 @@ void GtkSalFrame::SetWindowState( const SalFrameState* pState )
         SAL_FRAMESTATE_MASK_MAXIMIZED_X | SAL_FRAMESTATE_MASK_MAXIMIZED_Y |
         SAL_FRAMESTATE_MASK_MAXIMIZED_WIDTH | SAL_FRAMESTATE_MASK_MAXIMIZED_HEIGHT;
     
-    if( getDisplay()->getWMAdaptor()->getSmallScreen() && !(m_nStyle & SAL_FRAME_STYLE_DIALOG) && !(m_nStyle & SAL_FRAME_STYLE_FLOAT_FOCUSABLE ) && !(m_nStyle & SAL_FRAME_STYLE_TOOLWINDOW ) )
+    if( GetSmallScreenMode() && !(m_nStyle & SAL_FRAME_STYLE_DIALOG) && !(m_nStyle & SAL_FRAME_STYLE_FLOAT_FOCUSABLE ) && !(m_nStyle & SAL_FRAME_STYLE_TOOLWINDOW ) )
       gtk_window_maximize( GTK_WINDOW(m_pWindow) );
     else {
     if( (pState->mnMask & SAL_FRAMESTATE_MASK_STATE) &&
@@ -3776,6 +3776,11 @@ gboolean GtkSalFrame::IMHandler::signalIMRetrieveSurrounding( GtkIMContext* pCon
     return FALSE;
 }
 
+BOOL GtkSalFrame::GetSmallScreenMode()
+{
+    return getDisplay()->getWMAdaptor()->getSmallScreen();
+}
+
 gboolean GtkSalFrame::IMHandler::signalIMDeleteSurrounding( GtkIMContext*, gint offset, gint nchars, 
     gpointer /*im_handler*/ )
 {
diff --git vcl/unx/inc/plugins/gtk/gtkframe.hxx vcl/unx/inc/plugins/gtk/gtkframe.hxx
index 1da7d0f..534bf9f 100644
--- vcl/unx/inc/plugins/gtk/gtkframe.hxx
+++ vcl/unx/inc/plugins/gtk/gtkframe.hxx
@@ -393,6 +393,8 @@ public:
     virtual void					EndSetClipRegion();
 
     static GtkSalFrame         *getFromWindow( GtkWindow *pWindow );
+
+    virtual BOOL GetSmallScreenMode();
 };
 
 
-- 
1.7.0.1

