From d663663b9322dd323caf8ced9ea2e1964fbbe382 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:58:00 +0200
Subject: [PATCH 258/768] default-no-startup-wizard.diff

---
 desktop/source/migration/wizard.cxx |    8 +++++++-
 scp2/source/ooo/common_brand.scp    |    7 +------
 2 files changed, 8 insertions(+), 7 deletions(-)

diff --git desktop/source/migration/wizard.cxx desktop/source/migration/wizard.cxx
index 64b135d..5a6b187 100644
--- desktop/source/migration/wizard.cxx
+++ desktop/source/migration/wizard.cxx
@@ -141,6 +141,8 @@ FirstStartWizard::FirstStartWizard( Window* pParent, sal_Bool bLicenseNeedsAccep
     ,m_bAutomaticUpdChk(sal_True)
     ,m_aLicensePath( rLicensePath )
 {
+    return;
+
     // ---
     // FreeResource();
 //	enableState(STATE_USER, sal_False);
@@ -456,7 +458,11 @@ sal_Bool FirstStartWizard::onFinish(sal_Int32 _nResult)
 
 short FirstStartWizard::Execute()
 {
-    return svt::RoadmapWizard::Execute();
+    disableWizard();
+    if ( Migration::checkMigration() )
+        Migration::doMigration();
+
+    return sal_True;
 }
 
 static OUString _makeDateTimeString (const DateTime& aDateTime, sal_Bool bUTC = sal_False)
diff --git scp2/source/ooo/common_brand.scp scp2/source/ooo/common_brand.scp
index a490130..4bbb73a 100644
--- scp2/source/ooo/common_brand.scp
+++ scp2/source/ooo/common_brand.scp
@@ -837,19 +837,14 @@ ProfileItem gid_Brand_Profileitem_Soffice_NativeProgress_So
     Value = "${NATIVEPROGRESS}";
 End
 
-#ifdef WNT
 ProfileItem gid_Brand_Profileitem_Soffice_Hideeula
     ProfileID = gid_Brand_Profile_Soffice_Ini;
     ModuleID = gid_Module_Root_Brand;
     Section = "Bootstrap";
     Order = 7;
     Key = "HideEula";
-    Value = "[HIDEEULA]";
-    Inifiletablekey = "HideEula";
-    Inifiletableaction = "1";
-    Styles = (INIFILETABLE);
+    Value = "1";
 End
-#endif
 
 #ifdef WNT
 ProfileItem gid_Brand_Profileitem_Soffice_Startlang
-- 
1.7.0.1

