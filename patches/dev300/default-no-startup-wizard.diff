From 7c0af52eaa90c41cc9450b5ebd1d8bcd7f884555 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:58:00 +0200
Subject: [PATCH 293/878] default-no-startup-wizard.diff

---
 desktop/source/migration/wizard.cxx |    8 +++++++-
 scp2/source/ooo/common_brand.scp    |    7 +------
 2 files changed, 8 insertions(+), 7 deletions(-)

diff --git a/desktop/source/migration/wizard.cxx b/desktop/source/migration/wizard.cxx
index 2bc9c1c..0d43664 100644
--- a/desktop/source/migration/wizard.cxx
+++ b/desktop/source/migration/wizard.cxx
@@ -141,6 +141,8 @@ FirstStartWizard::FirstStartWizard( Window* pParent, sal_Bool bLicenseNeedsAccep
     ,m_bAutomaticUpdChk(sal_True)
     ,m_aLicensePath( rLicensePath )
 {
+    return;
+
     // ---
     // FreeResource();
 //	enableState(STATE_USER, sal_False);
@@ -456,7 +458,11 @@ sal_Bool FirstStartWizard::onFinish(sal_Int32 _nResult)
 
 short FirstStartWizard::Execute()
 {
-    return svt::RoadmapWizard::Execute();
+    disableWizard();
+    if ( Migration::checkMigration() )
+        Migration::doMigration();
+
+    return sal_True;
 }
 
 static OUString _makeDateTimeString (const DateTime& aDateTime, sal_Bool bUTC = sal_False)
diff --git a/scp2/source/ooo/common_brand.scp b/scp2/source/ooo/common_brand.scp
index b2d6fef..894927b 100644
--- a/scp2/source/ooo/common_brand.scp
+++ b/scp2/source/ooo/common_brand.scp
@@ -959,19 +959,14 @@ ProfileItem gid_Brand_Profileitem_Soffice_NativeProgress_So
     Value = "${NATIVEPROGRESS}";
 End
 
-#ifdef WNT
 ProfileItem gid_Brand_Profileitem_Soffice_Hideeula
     ProfileID = gid_Brand_Profile_Soffice_Ini;
     ModuleID = gid_Module_Root_Brand;
     Section = "Bootstrap";
     Order = 7;
     Key = "HideEula";
-    Value = "[HIDEEULA]";
-    Inifiletablekey = "HideEula";
-    Inifiletableaction = "1";
-    Styles = (INIFILETABLE);
+    Value = "1";
 End
-#endif
 
 #ifdef WNT
 ProfileItem gid_Brand_Profileitem_Soffice_Startlang
-- 
1.7.0.1

