diff --git testshl2/source/makefile.mk testshl2/source/makefile.mk
index 0686e02..d2e8d4b 100644
--- testshl2/source/makefile.mk
+++ testshl2/source/makefile.mk
@@ -74,17 +74,20 @@ APP1STDLIBS=$(SALLIB)
 # 	$(SOLARLIBDIR)$/c5t_no_regallfkt.lib \
 # 	$(SOLARLIBDIR)$/c5t_testresult.lib
 
-.IF "$(GUI)" == "WNT" || "$(GUI)" == "OS2"
+.IF "$(GUI)$(COM)" == "WNTMSC" || "$(GUI)" == "OS2"
 APP1LIBS= \
 	$(SOLARLIBDIR)$/c5t_no_regallfkt.lib \
 	$(SOLARLIBDIR)$/c5t_testresult.lib
 APP1LIBS += $(SOLARLIBDIR)$/c5t_winstuff.lib
 .ENDIF
 
-.IF "$(GUI)" == "UNX"
+.IF "$(GUI)" == "UNX" || "$(GUI)$(COM)" == "WNTGCC"
 APP1STDLIBS+= \
 	$(SOLARLIBDIR)$/libc5t_testresult$(DLLPOSTFIX).a \
 	$(SOLARLIBDIR)$/libc5t_no_regallfkt$(DLLPOSTFIX).a
+.IF "$(GUI)$(COM)" == "WNTGCC"
+APP1STDLIBS += $(SOLARLIBDIR)$/libc5t_winstuff$(DLLPOSTFIX).a
+.ENDIF
 .ENDIF
 
 #
@@ -107,8 +110,13 @@ APP3DEPN=
 APP3LIBS= 
 
 .IF "$(GUI)"=="WNT" 
+.IF "$(COM)"=="MSC"
 APP3LIBS += $(SOLARLIBDIR)$/c5t_winstuff.lib
 .ENDIF
+.IF "$(COM)"=="GCC"
+APP3STDLIBS += $(SOLARLIBDIR)$/libc5t_winstuff$(DLLPOSTFIX).a
+.ENDIF
+.ENDIF
 
 
 # --- Targets ------------------------------------------------------
