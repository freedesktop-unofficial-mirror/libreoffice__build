--- desktop/source/app/cmdlineargs.cxx.old	2010-07-29 16:12:53.000000000 +0200
+++ desktop/source/app/cmdlineargs.cxx	2010-07-29 16:13:18.000000000 +0200
@@ -396,7 +396,7 @@ sal_Bool CommandLineArgs::InterpretComma
     }
     else if ( aArg.equalsAsciiL( RTL_CONSTASCII_STRINGPARAM( "-quickstart" )) == sal_True )
     {
-#if defined(WNT) || defined(OS2) || defined(QUARTZ)
+#if defined(ENABLE_QUICKSTART_APPLET)
         SetBoolParam_Impl( CMD_BOOLPARAM_QUICKSTART, sal_True );
 #endif
         SetBoolParam_Impl( CMD_BOOLPARAM_NOQUICKSTART, sal_False );
--- desktop/source/app/makefile.mk.old	2010-07-26 15:06:38.000000000 +0200
+++ desktop/source/app/makefile.mk	2010-07-29 16:13:18.000000000 +0200
@@ -53,6 +53,10 @@ CFLAGS+=-DGNOME_VFS_ENABLED
 # DEPLOYMENTMISCLIB = -ldeploymentmisc$(DLLPOSTFIX)
 # .ENDIF
 
+.IF "$(GUI)"=="WNT" || "$(GUI)"=="OS2" || "$(GUIBASE)"=="aqua" || "$(ENABLE_SYSTRAY_GTK)"=="TRUE"
+CFLAGS+=-DENABLE_QUICKSTART_APPLET
+.ENDIF
+
 SHL1TARGET = sofficeapp
 SHL1OBJS = \
     $(SLO)$/app.obj \
