From 62a682313a904d0590f5f93e55226d99da9e4322 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:55:04 +0200
Subject: [PATCH 114/768] desktop-quickstart-option-enable-unx.diff

---
 desktop/source/app/cmdlineargs.cxx |    2 +-
 desktop/source/app/makefile.mk     |    4 ++++
 2 files changed, 5 insertions(+), 1 deletions(-)

diff --git desktop/source/app/cmdlineargs.cxx desktop/source/app/cmdlineargs.cxx
index 427df9b..7585228 100644
--- desktop/source/app/cmdlineargs.cxx
+++ desktop/source/app/cmdlineargs.cxx
@@ -396,7 +396,7 @@ sal_Bool CommandLineArgs::InterpretCommandLineParameter( const ::rtl::OUString&
     }
     else if ( aArg.equalsAsciiL( RTL_CONSTASCII_STRINGPARAM( "-quickstart" )) == sal_True )
     {
-#if defined(WNT) || defined(OS2) || defined(QUARTZ)
+#if defined(ENABLE_QUICKSTART_APPLET)
         SetBoolParam_Impl( CMD_BOOLPARAM_QUICKSTART, sal_True );
 #endif
         SetBoolParam_Impl( CMD_BOOLPARAM_NOQUICKSTART, sal_False );
diff --git desktop/source/app/makefile.mk desktop/source/app/makefile.mk
index d9db7c1..1c99bf5 100644
--- desktop/source/app/makefile.mk
+++ desktop/source/app/makefile.mk
@@ -40,6 +40,10 @@ ENABLE_EXCEPTIONS=TRUE
 CFLAGS+=-DGNOME_VFS_ENABLED
 .ENDIF
 
+.IF "$(GUI)"=="WNT" || "$(GUI)"=="OS2" || "$(GUIBASE)"=="aqua" || "$(ENABLE_SYSTRAY_GTK)"=="TRUE"
+CFLAGS+=-DENABLE_QUICKSTART_APPLET
+.ENDIF
+
 SHL1TARGET = sofficeapp
 SHL1OBJS = \
     $(SLO)$/app.obj \
-- 
1.7.0.1

