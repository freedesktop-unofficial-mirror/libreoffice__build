From dd837f5f545bcce5a0f7bf6de8f3442be4733385 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:58:21 +0200
Subject: [PATCH 276/768] build-identification.diff

---
 scp2/source/ooo/common_brand.scp            |   18 ++++++++++++++++++
 solenv/bin/modules/installer/scriptitems.pm |    2 ++
 2 files changed, 20 insertions(+), 0 deletions(-)

diff --git scp2/source/ooo/common_brand.scp scp2/source/ooo/common_brand.scp
index b45b49d..7c1d211 100644
--- scp2/source/ooo/common_brand.scp
+++ scp2/source/ooo/common_brand.scp
@@ -988,6 +988,24 @@ ProfileItem gid_Brand_Profileitem_Version_Useragent
     Value = "<PRODUCT> (${buildid}; ${_OS}; ${_ARCH}; BundledLanguages=${AllLanguages})";
 End
 
+ProfileItem gid_Brand_Profileitem_Version_Vendor
+    ProfileID = gid_Brand_Profile_Version_Ini;
+    ModuleID = gid_Module_Root_Brand;
+    Section = "Version";
+    Order = 16;
+    Key = "Vendor";
+    Value = "<vendor>";
+End
+
+ProfileItem gid_Brand_Profileitem_Version_BuildVersion
+    ProfileID = gid_Brand_Profile_Version_Ini;
+    ModuleID = gid_Module_Root_Brand;
+    Section = "Version";
+    Order = 17;
+    Key = "BuildVersion";
+    Value = "<buildversion>";
+End
+
 ProfileItem gid_Brand_Profileitem_Version_Ooobaseversion
     ProfileID = gid_Brand_Profile_Version_Ini;
     ModuleID = gid_Module_Root_Brand;
diff --git solenv/bin/modules/installer/scriptitems.pm solenv/bin/modules/installer/scriptitems.pm
index 9934877..f5dbce2 100644
--- solenv/bin/modules/installer/scriptitems.pm
+++ solenv/bin/modules/installer/scriptitems.pm
@@ -842,6 +842,8 @@ sub replace_setup_variables
         $value =~ s/\<sourceid\>/$installer::globals::build/;
         $value =~ s/\<updateid\>/$updateid/;
         $value =~ s/\<pkgformat\>/$installer::globals::packageformat/;
+        $value =~ s/\<vendor\>/$ENV{'OOO_VENDOR'}/;
+        $value =~ s/\<buildversion\>/$ENV{'BUILD_VER_STRING'}/;
 
         $oneitem->{'Value'} = $value;
     }
-- 
1.7.0.1

