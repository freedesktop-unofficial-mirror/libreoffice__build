From 70771142d56e934a31db69391dac40179fd0a587 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:58:21 +0200
Subject: [PATCH 312/878] build-identification.diff

---
 scp2/source/ooo/common_brand.scp            |   18 ++++++++++++++++++
 solenv/bin/modules/installer/scriptitems.pm |    2 ++
 2 files changed, 20 insertions(+), 0 deletions(-)

diff --git a/scp2/source/ooo/common_brand.scp b/scp2/source/ooo/common_brand.scp
index 04acb90..cf50962 100644
--- a/scp2/source/ooo/common_brand.scp
+++ b/scp2/source/ooo/common_brand.scp
@@ -1110,6 +1110,24 @@ ProfileItem gid_Brand_Profileitem_Version_Useragent
     Value = "<PRODUCT> (${buildid}; ${_OS}; ${_ARCH}; BundledLanguages=${AllLanguages})";
 End
 
+ProfileItem gid_Brand_Profileitem_Version_Vendor
+    ProfileID = gid_Brand_Profile_Version_Ini;
+    ModuleID = gid_Module_Root_Brand;
+    Section = "Version";
+    Order = 16;
+    Key = "Vendor";
+    Value = "<vendor>";
+End
+
+ProfileItem gid_Brand_Profileitem_Version_BuildVersion
+    ProfileID = gid_Brand_Profile_Version_Ini;
+    ModuleID = gid_Module_Root_Brand;
+    Section = "Version";
+    Order = 17;
+    Key = "BuildVersion";
+    Value = "<buildversion>";
+End
+
 ProfileItem gid_Brand_Profileitem_Version_Ooobaseversion
     ProfileID = gid_Brand_Profile_Version_Ini;
     ModuleID = gid_Module_Root_Brand;
diff --git a/solenv/bin/modules/installer/scriptitems.pm b/solenv/bin/modules/installer/scriptitems.pm
index 0c0d3b5..09aeb80 100644
--- a/solenv/bin/modules/installer/scriptitems.pm
+++ b/solenv/bin/modules/installer/scriptitems.pm
@@ -842,6 +842,8 @@ sub replace_setup_variables
         $value =~ s/\<sourceid\>/$installer::globals::build/;
         $value =~ s/\<updateid\>/$updateid/;
         $value =~ s/\<pkgformat\>/$installer::globals::packageformat/;
+        $value =~ s/\<vendor\>/$ENV{'OOO_VENDOR'}/;
+        $value =~ s/\<buildversion\>/$ENV{'BUILD_VER_STRING'}/;
 
         $oneitem->{'Value'} = $value;
     }
-- 
1.7.0.1

