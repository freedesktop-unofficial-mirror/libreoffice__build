--- vcl/aqua/inc/salinst.h	9 Oct 2007 15:09:54 -0000	1.13
+++ vcl/aqua/inc/salinst.h	17 Jan 2008 09:44:37 -0000	1.13.86.1
@@ -110,7 +110,7 @@ public:
     virtual SalFrame*      	CreateChildFrame( SystemParentData* pParent, ULONG nStyle );
     virtual SalFrame*      	CreateFrame( SalFrame* pParent, ULONG nStyle );
     virtual void			DestroyFrame( SalFrame* pFrame );
-    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
     virtual void			DestroyObject( SalObject* pObject );
     virtual SalVirtualDevice*	CreateVirtualDevice( SalGraphics* pGraphics,
                                                      long nDX, long nDY,
--- vcl/aqua/source/app/salinst.cxx	7 Dec 2007 11:49:10 -0000	1.41
+++ vcl/aqua/source/app/salinst.cxx	17 Jan 2008 09:44:37 -0000	1.41.22.1
@@ -779,7 +779,7 @@ void AquaSalInstance::DestroyFrame( SalF
 
 // -----------------------------------------------------------------------
 
-SalObject* AquaSalInstance::CreateObject( SalFrame* pParent, SystemWindowData* /* pWindowData */ )
+SalObject* AquaSalInstance::CreateObject( SalFrame* pParent, SystemWindowData* /* pWindowData */, BOOL /* bShow */ )
 {
     // SystemWindowData is meaningless on Mac OS X
 	AquaSalObject *pObject = NULL;
--- vcl/inc/vcl/salinst.hxx	11 Apr 2007 18:07:19 -0000	1.2
+++ vcl/inc/vcl/salinst.hxx	10 Dec 2007 19:00:17 -0000	1.2.246.1
@@ -109,7 +109,7 @@ public:
     virtual void				DestroyFrame( SalFrame* pFrame ) = 0;
 
     // Object (System Child Window)
-    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData ) = 0;
+    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE ) = 0;
     virtual void				DestroyObject( SalObject* pObject ) = 0;
 
     // VirtualDevice
--- vcl/inc/vcl/syschild.hxx	11 Apr 2007 18:13:33 -0000	1.2
+++ vcl/inc/vcl/syschild.hxx	10 Dec 2007 19:00:17 -0000	1.2.246.1
@@ -58,7 +58,7 @@ class VCL_DLLPUBLIC SystemChildWindow : 
 {
 private:
     using Window::ImplInit;
-	SAL_DLLPRIVATE void     ImplInitSysChild( Window* pParent, WinBits nStyle, SystemWindowData *pData );
+	SAL_DLLPRIVATE void     ImplInitSysChild( Window* pParent, WinBits nStyle, SystemWindowData *pData, BOOL bShow = TRUE );
 
     // Copy assignment is forbidden and not implemented.
 	SAL_DLLPRIVATE          SystemChildWindow (const SystemChildWindow &);
@@ -67,7 +67,7 @@ private:
 public:
 							SystemChildWindow( Window* pParent, WinBits nStyle = 0 );
                             // create a SystemChildWindow using the given SystemWindowData
-							SystemChildWindow( Window* pParent, WinBits nStyle, SystemWindowData *pData );
+							SystemChildWindow( Window* pParent, WinBits nStyle, SystemWindowData *pData, BOOL bShow = TRUE );
 							SystemChildWindow( Window* pParent, const ResId& rResId );
 							~SystemChildWindow();
 
--- vcl/source/window/syschild.cxx	24 Jul 2007 10:22:04 -0000	1.11
+++ vcl/source/window/syschild.cxx	10 Dec 2007 19:00:17 -0000	1.11.144.1
@@ -128,9 +128,9 @@ long ImplSysChildProc( void* pInst, SalO
 
 // =======================================================================
 
-void SystemChildWindow::ImplInitSysChild( Window* pParent, WinBits nStyle, SystemWindowData *pData )
+void SystemChildWindow::ImplInitSysChild( Window* pParent, WinBits nStyle, SystemWindowData *pData, BOOL bShow )
 {
-	mpWindowImpl->mpSysObj = ImplGetSVData()->mpDefInst->CreateObject( pParent->ImplGetFrame(), pData );
+	mpWindowImpl->mpSysObj = ImplGetSVData()->mpDefInst->CreateObject( pParent->ImplGetFrame(), pData, bShow );
 
 	Window::ImplInit( pParent, nStyle, NULL );
 
@@ -153,10 +153,10 @@ SystemChildWindow::SystemChildWindow( Wi
 
 // -----------------------------------------------------------------------
 
-SystemChildWindow::SystemChildWindow( Window* pParent, WinBits nStyle, SystemWindowData *pData ) :
+SystemChildWindow::SystemChildWindow( Window* pParent, WinBits nStyle, SystemWindowData *pData, BOOL bShow ) :
 	Window( WINDOW_SYSTEMCHILDWINDOW )
 {
-	ImplInitSysChild( pParent, nStyle, pData );
+	ImplInitSysChild( pParent, nStyle, pData, bShow );
 }
 
 // -----------------------------------------------------------------------
--- vcl/unx/gtk/app/gtkinst.cxx	30 Aug 2007 13:55:37 -0000	1.17
+++ vcl/unx/gtk/app/gtkinst.cxx	10 Dec 2007 19:00:18 -0000	1.17.104.1
@@ -216,14 +216,14 @@ SalFrame* GtkInstance::CreateChildFrame(
 	return pFrame;
 }
 
-SalObject* GtkInstance::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData )
+SalObject* GtkInstance::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow )
 {
     // there is no method to set a visual for a GtkWidget
     // so we need the X11SalObject in that case
     if( pWindowData )
-        return X11SalObject::CreateObject( pParent, pWindowData );
+        return X11SalObject::CreateObject( pParent, pWindowData, bShow );
     
-    return new GtkSalObject( static_cast<GtkSalFrame*>(pParent) );
+    return new GtkSalObject( static_cast<GtkSalFrame*>(pParent), bShow );
 }
 
 GtkYieldMutex::GtkYieldMutex()
--- vcl/unx/gtk/window/gtkobject.cxx	6 Oct 2006 10:00:15 -0000	1.11
+++ vcl/unx/gtk/window/gtkobject.cxx	10 Dec 2007 19:00:18 -0000	1.11.392.1
@@ -41,7 +41,7 @@
 #include <plugins/gtk/gtkdata.hxx>
 #include <plugins/gtk/gtkinst.hxx>
 
-GtkSalObject::GtkSalObject( GtkSalFrame* pParent ) 
+GtkSalObject::GtkSalObject( GtkSalFrame* pParent, BOOL bShow ) 
         : m_pSocket( NULL ),
           m_pRegion( NULL )
 {
@@ -49,6 +49,7 @@ GtkSalObject::GtkSalObject( GtkSalFrame*
     {
         // our plug window
         m_pSocket = gtk_drawing_area_new();
+        Show( bShow );
         // insert into container
         gtk_fixed_put( pParent->getFixedContainer(),
                        m_pSocket,
--- vcl/unx/headless/svpinst.cxx	24 Jul 2007 10:27:49 -0000	1.2
+++ vcl/unx/headless/svpinst.cxx	10 Dec 2007 19:00:18 -0000	1.2.144.1
@@ -245,7 +245,7 @@ void SvpSalInstance::DestroyFrame( SalFr
     delete pFrame;
 }
 
-SalObject* SvpSalInstance::CreateObject( SalFrame*, SystemWindowData* )
+SalObject* SvpSalInstance::CreateObject( SalFrame*, SystemWindowData*, BOOL )
 {
     return new SvpSalObject();
 }
--- vcl/unx/headless/svpinst.hxx	24 Jul 2007 10:27:59 -0000	1.2
+++ vcl/unx/headless/svpinst.hxx	10 Dec 2007 19:00:18 -0000	1.2.144.1
@@ -139,7 +139,7 @@ public:
     virtual void			DestroyFrame( SalFrame* pFrame );
 
     // Object (System Child Window)
-    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
     virtual void			DestroyObject( SalObject* pObject );
 
     // VirtualDevice
--- vcl/unx/inc/salinst.h	27 Jun 2007 20:41:36 -0000	1.14
+++ vcl/unx/inc/salinst.h	10 Dec 2007 19:00:18 -0000	1.14.170.1
@@ -89,7 +89,7 @@ public:
     virtual SalFrame*      	CreateFrame( SalFrame* pParent, ULONG nStyle );
     virtual void				DestroyFrame( SalFrame* pFrame );
 
-    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
     virtual void				DestroyObject( SalObject* pObject );
 
     virtual SalVirtualDevice*	CreateVirtualDevice( SalGraphics* pGraphics,
--- vcl/unx/inc/salobj.h	9 Nov 2007 10:20:33 -0000	1.8
+++ vcl/unx/inc/salobj.h	10 Dec 2007 19:00:18 -0000	1.8.44.1
@@ -93,7 +93,7 @@ public:
 	BOOL			mbVisible;
 
 	static VCL_DLLPUBLIC long Dispatch( XEvent* pEvent );
-    static VCL_DLLPUBLIC X11SalObject* CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    static VCL_DLLPUBLIC X11SalObject* CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
 
     X11SalObject();
     virtual ~X11SalObject();
--- vcl/unx/inc/plugins/gtk/gtkinst.hxx	11 Aug 2006 17:47:36 -0000	1.7
+++ vcl/unx/inc/plugins/gtk/gtkinst.hxx	10 Dec 2007 19:00:18 -0000	1.7.426.1
@@ -94,7 +94,7 @@ public:
 
     virtual SalFrame*			CreateFrame( SalFrame* pParent, ULONG nStyle );
     virtual SalFrame*           CreateChildFrame( SystemParentData* pParent, ULONG nStyle );
-    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    virtual SalObject*			CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
     virtual SalSystem*			CreateSalSystem();
 };
 
--- vcl/unx/inc/plugins/gtk/gtkobject.hxx	24 Jul 2007 10:30:41 -0000	1.6
+++ vcl/unx/inc/plugins/gtk/gtkobject.hxx	10 Dec 2007 19:00:18 -0000	1.6.144.1
@@ -60,7 +60,7 @@ class GtkSalObject : public SalObject
     static gboolean		signalFocus( GtkWidget*, GdkEventFocus*, gpointer );
     static void			signalDestroy( GtkObject*, gpointer );
 public:
-    GtkSalObject( GtkSalFrame* pParent );
+    GtkSalObject( GtkSalFrame* pParent, BOOL bShow = TRUE );
     virtual ~GtkSalObject();
 
     // overload all pure virtual methods
--- vcl/unx/source/window/salobj.cxx	9 Nov 2007 10:20:46 -0000	1.22
+++ vcl/unx/source/window/salobj.cxx	10 Dec 2007 19:00:19 -0000	1.22.44.1
@@ -74,12 +74,12 @@
 // =======================================================================
 // SalInstance member to create and destroy a SalObject
 
-SalObject* X11SalInstance::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData )
+SalObject* X11SalInstance::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow )
 {
-    return X11SalObject::CreateObject( pParent, pWindowData );
+    return X11SalObject::CreateObject( pParent, pWindowData, bShow );
 }
 
-X11SalObject* X11SalObject::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData )
+X11SalObject* X11SalObject::CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow )
 {
 	int error_base, event_base;
 	X11SalObject*		pObject  = new X11SalObject();
@@ -183,8 +183,10 @@ X11SalObject* X11SalObject::CreateObject
     }
 
     pSalDisp->GetXLib()->PushXErrorLevel( true );
-    XMapWindow( pDisp, pObject->maPrimary );
+    if( bShow ) {
 	XMapWindow( pDisp, pObject->maSecondary );
+        XMapWindow( pDisp, pObject->maPrimary );
+    }
 
 	pObjData->pDisplay		= pDisp;
 	pObjData->aWindow		= pObject->maSecondary;
@@ -421,13 +423,17 @@ X11SalObject::Show( BOOL bVisible )
 	if	( ! maSystemChildData.aWindow )
 		return;
 
-	if ( bVisible ) 
+	if ( bVisible ) {
+		XMapWindow( (Display*)maSystemChildData.pDisplay,
+                    maSecondary );
 		XMapWindow( (Display*)maSystemChildData.pDisplay,
                     maPrimary );
-	else
+	} else {
 		XUnmapWindow( (Display*)maSystemChildData.pDisplay,
                     maPrimary );
-
+		XUnmapWindow( (Display*)maSystemChildData.pDisplay,
+                      maSecondary );
+    }
 	mbVisible = bVisible;
 }
 
--- vcl/win/inc/salinst.h	27 Jun 2007 20:53:41 -0000	1.13
+++ vcl/win/inc/salinst.h	15 Jan 2008 00:15:06 -0000	1.13.170.1
@@ -67,7 +67,7 @@ public:
     virtual SalFrame*      	CreateChildFrame( SystemParentData* pParent, ULONG nStyle );
     virtual SalFrame*      	CreateFrame( SalFrame* pParent, ULONG nStyle );
     virtual void			DestroyFrame( SalFrame* pFrame );
-    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData );
+    virtual SalObject*		CreateObject( SalFrame* pParent, SystemWindowData* pWindowData, BOOL bShow = TRUE );
     virtual void			DestroyObject( SalObject* pObject );
     virtual SalVirtualDevice*	CreateVirtualDevice( SalGraphics* pGraphics,
                                                      long nDX, long nDY,
--- vcl/win/source/app/salinst.cxx	2 Aug 2007 18:29:24 -0000	1.39
+++ vcl/win/source/app/salinst.cxx	15 Jan 2008 00:15:07 -0000	1.39.138.1
@@ -1089,7 +1089,8 @@ void WinSalInstance::DestroyFrame( SalFr
 // -----------------------------------------------------------------------
 
 SalObject* WinSalInstance::CreateObject( SalFrame* pParent,
-										SystemWindowData* /*pWindowData*/ ) // SystemWindowData meaningless on Windows
+                                         SystemWindowData* /*pWindowData*/, // SystemWindowData meaningless on Windows
+                                         BOOL /*bShow*/ ) 
 {
 	// Um auf Main-Thread umzuschalten
 	return (SalObject*)ImplSendMessage( mhComWnd, SAL_MSG_CREATEOBJECT, 0, (LPARAM)static_cast<WinSalFrame*>(pParent) );
