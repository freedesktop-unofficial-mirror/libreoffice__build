From 1a597414a8f73eaaecb94a4ebf6668f80a9638d7 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:04:51 +0200
Subject: [PATCH 641/878] cairo-pixman-makefile-mk.diff

---
 cairo/pixman/makefile.mk |   14 ++------------
 1 files changed, 2 insertions(+), 12 deletions(-)

diff --git a/cairo/pixman/makefile.mk b/cairo/pixman/makefile.mk
index a46545e..de35322 100644
--- a/cairo/pixman/makefile.mk
+++ b/cairo/pixman/makefile.mk
@@ -90,7 +90,7 @@ BUILD_DIR=$(CONFIGURE_DIR)
 .ELSE
 # ----------- Unix ---------------------------------------------------------
 .IF "$(OS)$(COM)"=="LINUXGCC" || "$(OS)$(COM)"=="FREEBSDGCC"
-LDFLAGS:=-Wl,-rpath,'$$$$ORIGIN:$$$$ORIGIN/../ure-link/lib' -Wl,-noinhibit-exec -Wl,-z,noexecstack
+LDFLAGS:=-Wl,-rpath,'$$$$ORIGIN:$$$$ORIGIN/../ure-link/lib' -Wl,-z,noexecstack
 .ENDIF                  # "$(OS)$(COM)"=="LINUXGCC"
 
 .IF "$(OS)$(COM)"=="SOLARISC52"
@@ -118,13 +118,7 @@ pixman_CFLAGS+=-fPIC
 
 CONFIGURE_DIR=
 CONFIGURE_ACTION=.$/configure
-.IF "$(CPUNAME)"=="X86_64"
-# static builds tend to fail on 64bit
 CONFIGURE_FLAGS=--enable-static=no --enable-shared=yes
-.ELSE
-# use static lib to avoid linking problems with older system pixman libs
-CONFIGURE_FLAGS=--enable-static=yes --enable-shared=no
-.ENDIF
 CONFIGURE_FLAGS+=CFLAGS="$(pixman_CFLAGS)"
 BUILD_ACTION=$(GNUMAKE)
 BUILD_FLAGS+= -j$(EXTMAXPROCESS)
@@ -147,11 +141,7 @@ OUT2LIB+=pixman$/.libs$/*.a
 OUT2LIB+=pixman$/release$/*.lib
 .ENDIF
 .ELSE
-.IF "$(CPUNAME)"=="X86_64"
-OUT2LIB+=pixman$/.libs$/libpixman-1.so
-.ELSE
-OUT2LIB+=pixman$/.libs$/libpixman-1.a
-.ENDIF
+OUT2LIB+=pixman$/.libs$/libpixman-1.so*
 .ENDIF
 
 # --- Targets ------------------------------------------------------
-- 
1.7.0.1

