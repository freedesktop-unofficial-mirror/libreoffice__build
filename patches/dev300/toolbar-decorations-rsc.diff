From fbf289b3cd9ee8b436c52c43ac53a6d28601941b Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:09:23 +0200
Subject: [PATCH 757/768] toolbar-decorations-rsc.diff

---
 rsc/inc/rscdb.hxx             |    1 +
 rsc/inc/vclrsc.hxx            |    6 ++++++
 rsc/source/parser/rscicpx.cxx |    1 +
 rsc/source/parser/rscinit.cxx |    2 ++
 4 files changed, 10 insertions(+), 0 deletions(-)

diff --git rsc/inc/rscdb.hxx rsc/inc/rscdb.hxx
index a5c60a3..3b6a235 100644
--- rsc/inc/rscdb.hxx
+++ rsc/inc/rscdb.hxx
@@ -97,6 +97,7 @@ class RscTypCont
     Atom				nMinimizeId;
     Atom				nMaximizeId;
     Atom				nCloseableId;
+    Atom				nStdPopupId;
     Atom				nAppId;
     Atom				nTabstopId;
     Atom				nGroupId;
diff --git rsc/inc/vclrsc.hxx rsc/inc/vclrsc.hxx
index d565984..efaaba9 100644
--- rsc/inc/vclrsc.hxx
+++ rsc/inc/vclrsc.hxx
@@ -84,6 +84,11 @@ typedef sal_Int64 WinBits;
 #define WB_AUTOVSCROLL          ((WinBits)0x40000000)
 
 #define WB_HIDE 				((WinBits)0x80000000)
+
+// system floating window
+#define WB_OWNERDRAWDECORATION  ((WinBits)0x10000000)
+#define WB_POPUP                ((WinBits)0x20000000)
+
 #define WB_HSCROLL				WB_HORZ
 #define WB_VSCROLL				WB_VERT
 #define WB_TOPIMAGE 			WB_TOP
@@ -152,6 +157,7 @@ typedef sal_Int64 WinBits;
 #define WB_STDMODAL 			(WB_STDDIALOG)
 #define WB_STDTABDIALOG 		(WB_STDDIALOG)
 #define WB_STDTABCONTROL		0
+#define WB_STDPOPUP				(WB_BORDER | WB_POPUP | WB_SYSTEMWINDOW | WB_OWNERDRAWDECORATION | WB_3DLOOK | WB_DIALOGCONTROL)
 
 // For TreeListBox
 #define WB_HASBUTTONS			((WinBits)0x00800000)
diff --git rsc/source/parser/rscicpx.cxx rsc/source/parser/rscicpx.cxx
index 3fe30fb..ccebdb8 100644
--- rsc/source/parser/rscicpx.cxx
+++ rsc/source/parser/rscicpx.cxx
@@ -2218,6 +2218,7 @@ RscTop * RscTypCont::InitClassFloatingWindow( RscTop * pSuper,
     INS_WINBIT(pClassFloatingWindow,Zoomable)
     INS_WINBIT(pClassFloatingWindow,HideWhenDeactivate)
     INS_WINBIT(pClassFloatingWindow,EnableResizing)
+    INS_WINBIT(pClassFloatingWindow,StdPopup)
 
     return pClassFloatingWindow;
 }
diff --git rsc/source/parser/rscinit.cxx rsc/source/parser/rscinit.cxx
index 0974729..7a57b4e 100644
--- rsc/source/parser/rscinit.cxx
+++ rsc/source/parser/rscinit.cxx
@@ -374,6 +374,8 @@ void RscTypCont::Init()
     aWinBits.SetConstant( nSingleLineId, sal::static_int_cast<INT32>(WB_SINGLELINE) );
     nSysWinId           = pHS->getID( "WB_SYSTEMWINDOW" );
     aWinBits.SetConstant( nSysWinId, sal::static_int_cast<INT32>(WB_SYSTEMWINDOW) );
+    nStdPopupId			= pHS->getID( "WB_STDPOPUP" );
+    aWinBits.SetConstant( nStdPopupId, sal::static_int_cast<INT32>(WB_STDPOPUP) );
 }
 {
     /********** I n i t   B a s i c   T y p e s **************************/
-- 
1.7.0.1

