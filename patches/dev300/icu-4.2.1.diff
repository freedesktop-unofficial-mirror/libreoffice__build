diff --git a/icu/createmak.cfg b/icu/createmak.cfg
index 19ef708..0f79bca 100644
--- icu/createmak.cfg
+++ icu/createmak.cfg
@@ -59,6 +59,12 @@ CPP_PROJ=-nologo -MT -Za -Zi -Ox -Ob0 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES
 [CFlags_test_iotest]
 CPP_PROJ=-nologo -MD -Za -Zi -Ox -Ob0 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
 
+[CFlags_samples_date]
+CPP_PROJ=-nologo -MD -Za -Zi -Ox -Ob0 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
+
+[CFlags_samples_cal]
+CPP_PROJ=-nologo -MD -Za -Zi -Ox -Ob0 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
+
 [CFlags_test_letest]
 CPP_PROJ=-nologo -MD -Za -Zi -Ox -Ob0 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
 
@@ -68,6 +74,9 @@ CPP_PROJ=-nologo -MD -O2 -Op -FD -Za -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES)
 [CFlags_tools_genbrk]
 CPP_PROJ=-nologo -MD -Za -O2 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
 
+[CFlags_tools_gencfu]
+CPP_PROJ=-nologo -MD -Za -O2 -W3 $(EXCEPTIONSWITCH) $(CPP_PROJ_INCLUDES) $(CDEFS) $(CPDBOBJ) -c
+
 [CFlags_tools_gencase]
 CPP_PROJ=-nologo -MD -GF -Za -Zi -W3 $(EXCEPTIONSWITCH) $(COPT) $(CPDBOBJ) -c
 
@@ -147,7 +156,7 @@ LINK32_FLAGS=icuuc.lib  $(COMMONLINKFLAGS_DLL) /base:"0x4a900000" /implib:"$(OUT
 LINK32_FLAGS=icuuc.lib icuin.lib uconvmsg.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib" /libpath:"Release"
 
 [LinkFlags_layout]
-LINK32_FLAGS=..\..\lib\icuuc.lib $(COMMONLINKFLAGS_DLL) /implib:"$(OUTDIR)\icule.lib"
+LINK32_FLAGS=..\..\lib\icuuc.lib $(COMMONLINKFLAGS_DLL) /implib:"..\..\lib\icule.lib"
 
 [LinkFlags_io]
 LINK32_FLAGS=icuuc.lib icuin.lib $(COMMONLINKFLAGS_DLL) /libpath:"..\..\lib" /implib:"$(OUTDIR)\icuio.lib"
@@ -167,6 +176,12 @@ LINK32_FLAGS=$(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib"
 [LinkFlags_test_iotest]
 LINK32_FLAGS=icuuc.lib icuin.lib icutu.lib icuio.lib icutest.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib"
 
+[LinkFlags_samples_date]
+LINK32_FLAGS=icuuc.lib icuin.lib icutu.lib icuio.lib icutest.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib"
+
+[LinkFlags_samples_cal]
+LINK32_FLAGS=icuuc.lib icuin.lib icutu.lib icuio.lib icutest.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib"
+
 [LinkFlags_test_letest]
 LINK32_FLAGS=icuuc.lib icuin.lib icutu.lib icule.lib iculx.lib icutest.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\..\..\lib"
 
@@ -176,6 +191,9 @@ LINK32_FLAGS=icuuc.lib icutu.lib $(COMMONLINKFLAGS_DLL) /implib:"$(OUTDIR)\icute
 [LinkFlags_tools_genbrk]
 LINK32_FLAGS=icuuc.lib icutu.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\toolutil\Release" /libpath:"..\..\..\lib"
 
+[LinkFlags_tools_gencfu]
+LINK32_FLAGS=icuuc.lib icutu.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\toolutil\Release" /libpath:"..\..\..\lib"
+
 [LinkFlags_tools_gencmn]
 LINK32_FLAGS=icuuc.lib icutu.lib $(COMMONLINKFLAGS_CONSOLE) /libpath:"..\toolutil\Release" /libpath:"..\..\..\lib"
 
@@ -255,15 +273,15 @@ LINK32_FLAGS=kernel32.lib ..\..\..\lib\icuin.lib $(COMMONLINKFLAGS_DLL) /NODEFAU
 	"..\..\..\lib\icuin.lib"
 
 [AdditionalLinkObjects_layout]
-	"$(OUTDIR)\icuuc.lib"
+	"..\..\lib\icuuc.lib"
 
 [AdditionalLinkObjects_io]
-	"$(OUTDIR)\icuuc.lib"
+	"..\..\lib\icuuc.lib"
 
 [AdditionalLinkObjects_layoutex]
-	"$(OUTDIR)\icuuc.lib" \
-	"$(OUTDIR)\icuin.lib" \
-	"$(OUTDIR)\icule.lib"
+	"..\..\lib\icuuc.lib" \
+	"..\..\lib\icuin.lib" \
+	"..\..\lib\icule.lib"
 
 [AdditionalLinkObjects_test_cintltst]
 	"..\..\..\lib\icuuc.lib" \
@@ -289,6 +307,11 @@ LINK32_FLAGS=kernel32.lib ..\..\..\lib\icuin.lib $(COMMONLINKFLAGS_DLL) /NODEFAU
     "..\..\..\lib\icuuc.lib" \
 	"..\..\..\lib\icutu.lib"
 
+[AdditionalLinkObjects_tools_gencfu]
+    "..\..\..\lib\icuuc.lib" \
+    "..\..\..\lib\icuin.lib" \
+	"..\..\..\lib\icutu.lib" \
+
 [AdditionalLinkObjects_tools_genccode]
     "..\..\..\lib\icuuc.lib" \
 	"..\..\..\lib\icutu.lib"
diff --git a/icu/createmak.pl b/icu/createmak.pl
index c6412f1..7a2dc63 100644
--- icu/createmak.pl
+++ icu/createmak.pl
@@ -302,6 +302,7 @@ sub createCopySection		#01.04.2008 11:37
         $line =~ s/<INPUTPATH>/$inputpath/g;
         $line =~ s/<TARGET>/$target/g;
         $line =~ s/<TARGETPATH>/$targetpath/;
+        next if $target eq $header;
         push @{$ref_make_file}, $line;           # from template
         $$ref_all_target_hash{$target} = 1;       # "\"$target\" ";
      # save for target ALL:
@@ -562,11 +563,15 @@ sub print_all_target        #26.06.2008 13:27
     {
         if ( $target =~ /\.exe/ ) {
             my $out = $target;
-            $out =~ s/.\\Release/\.\.\\\.\.\\\.\.\\bin/;
             $out =~ s/\$\(OutDir\)/\.\.\\\.\.\\\.\.\\bin/;
             $out =~ s/\//\\/; # convert / to \
             $target = $out;
         }
+        elsif ( $target =~ /\.dll/ ) {
+            my $out = $target;
+            $out =~ s/\//\\/; # convert / to \
+            $target = $out;
+        }
         print MAKFILE "\"$target\" ";
     }
 
@@ -1056,12 +1061,28 @@ sub start_handler
             }
         }
         if ( $att eq "OutputDirectory" ) {
+           $val =~ s/\.\\x86\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x86\\Debug/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Debug/..\\..\\..\\bin/;
            $configelements{$config}{$att} = $val;
         }
         if ( $att eq "OutputFile" && $LinkerSection ) {
+           $val =~ s/\.\\x86\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x86\\Debug/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Debug/..\\..\\..\\bin/;
+           $val =~ s/\.\.\\\.\.\\bin64/..\\..\\bin/;
+           $val =~ s/\.\\Release/..\\..\\..\\bin/;
            $configelements{$config}{$att} = $val;
         }
         if ( $att eq "ProgramDatabaseFile" ) {
+           $val =~ s/\.\\x86\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Release/..\\..\\..\\bin/;
+           $val =~ s/\.\\x86\\Debug/..\\..\\..\\bin/;
+           $val =~ s/\.\\x64\\Debug/..\\..\\..\\bin/;
+           $val =~ s/\.\.\\\.\.\\bin64/..\\..\\bin/;
+           $val =~ s/\.\\Release/..\\..\\..\\bin/;
            $configelements{$config}{$att} = $val;
         }
         if ( $att eq "ImportLibrary" && $LinkerSection ) {
diff --git icu/icu4c-4_0_1-src.patch icu/icu4c-4_0_1-src.patch
deleted file mode 100644
index 172d624..0000000
--- icu/icu4c-4_0_1-src.patch
+++ /dev/null
@@ -1,247 +0,0 @@
---- misc/icu/source/common/putil.c	2008-07-01 03:41:12.000000000 +0200
-+++ misc/build/icu/source/common/putil.c	2008-09-02 07:01:29.335795765 +0200
-@@ -52,7 +52,7 @@
- Poorly upgraded Solaris machines can't have this defined.
- Cleanly installed Solaris can use this #define.
- */
--#if !defined(_XOPEN_SOURCE_EXTENDED) && (!defined(__STDC_VERSION__) || __STDC_VERSION__ >= 199901L)
-+#if !defined(_XOPEN_SOURCE_EXTENDED) && (!defined(__STDC_VERSION__) || __STDC_VERSION__ < 199901L)
- #define _XOPEN_SOURCE_EXTENDED 1
- #endif
- 
---- misc/icu/source/common/unicode/pwin32.h	2008-07-01 10:41:12.000000000 +0900
-+++ misc/build/icu/source/common/unicode/pwin32.h	2008-11-05 22:37:21.479250000 +0900
-@@ -32,6 +32,10 @@
- #define __STDC_CONSTANT_MACROS
- #endif
- 
-+#if defined(__MINGW32__)
-+#define U_HAVE_INTTYPES_H 1
-+#endif
-+
- /* _MSC_VER is used to detect the Microsoft compiler. */
- #if defined(_MSC_VER)
- #define U_INT64_IS_LONG_LONG 0
---- misc/icu/source/config/mh-darwin	Tue Jul  1 03:41:24 2008
-+++ misc/build/icu/source/config/mh-darwin	Tue Jan 20 18:33:16 2009
-@@ -25,7 +25,7 @@
- SHLIB.cc=	$(CXX) -dynamiclib -dynamic $(CXXFLAGS) $(LDFLAGS)
- 
- ## Compiler switches to embed a library name and version information
--LD_SONAME = -Wl,-compatibility_version -Wl,$(SO_TARGET_VERSION_MAJOR) -Wl,-current_version -Wl,$(SO_TARGET_VERSION) -install_name $(notdir $(MIDDLE_SO_TARGET))
-+LD_SONAME = -Wl,-compatibility_version -Wl,$(SO_TARGET_VERSION_MAJOR) -Wl,-current_version -Wl,$(SO_TARGET_VERSION) -install_name @executable_path/$(notdir $(FINAL_SO_TARGET))
- 
- ## Compiler switch to embed a runtime search path
- LD_RPATH=
-@@ -41,10 +41,6 @@
- ## Non-shared intermediate object suffix
- STATIC_O = ao
- 
--## Override Versioned target for a shared library.
--FINAL_SO_TARGET=  $(basename $(SO_TARGET)).$(SO_TARGET_VERSION).$(SO)
--MIDDLE_SO_TARGET= $(basename $(SO_TARGET)).$(SO_TARGET_VERSION_MAJOR).$(SO)
--
- ## Compilation rules
- %.$(STATIC_O): $(srcdir)/%.c
- 	$(COMPILE.c) $(STATICCPPFLAGS) $(STATICCFLAGS) -o $@ $<
-@@ -76,15 +72,9 @@
- 
- ## Versioned libraries rules
- 
--%.$(SO_TARGET_VERSION_MAJOR).$(SO): %.$(SO_TARGET_VERSION).$(SO)
-+%.$(SO).$(SO_TARGET_VERSION_MAJOR): %.$(SO).$(SO_TARGET_VERSION)
- 	$(RM) $@ && ln -s ${<F} $@
--%.$(SO): %.$(SO_TARGET_VERSION_MAJOR).$(SO)
--	$(RM) $@ && ln -s ${*F}.$(SO_TARGET_VERSION).$(SO) $@
--
--# tzcode option
--TZORIG_EXTRA_CFLAGS=-DSTD_INSPIRED
--
--# genren opts
--GENREN_PL_OPTS=-x Mach-O -n '-g' -p '| c++filt'
-+%.$(SO): %.$(SO).$(SO_TARGET_VERSION_MAJOR)
-+	$(RM) $@ && ln -s ${*F}.$(SO).$(SO_TARGET_VERSION) $@
- 
- ## End Darwin-specific setup
---- misc/icu/source/config/mh-linux	2007-12-12 19:57:36.000000000 +0100
-+++ misc/build/icu/source/config/mh-linux	2008-05-21 18:59:13.000000000 +0200
-@@ -20,6 +20,14 @@
- LD_RPATH=	
- LD_RPATH_PRE = -Wl,-rpath,
- 
-+## Force RPATH=$ORIGIN to locate own dependencies w/o need for LD_LIBRARY_PATH
-+## (incl. the C++ runtime libs potentially found in the URE lib dir):
-+ENABLE_RPATH=YES
-+RPATHLDFLAGS=${LD_RPATH_PRE}'$$ORIGIN:$$ORIGIN/../ure-link/lib'
-+
-+#SH#  ENABLE_RPATH=YES
-+#SH#  RPATHLDFLAGS="${LD_RPATH_PRE}'$$ORIGIN:$$ORIGIN/../ure-link/lib'"
-+
- ## These are the library specific LDFLAGS
- LDFLAGSICUDT=-nodefaultlibs -nostdlib
- 
---- misc/icu/source/config/mh-mingw	2008-07-01 10:41:24.000000000 +0900
-+++ misc/build/icu/source/config/mh-mingw	2008-11-06 00:18:30.261250000 +0900
-@@ -72,10 +72,12 @@
- # The #M# is used to delete lines for icu-config
- # Current full path directory.
- #CURR_FULL_DIR=$(shell pwd -W)#M# for MSYS
--CURR_FULL_DIR=$(subst \,/,$(shell cmd /c cd | tail --bytes=+3))#M# for Cygwin shell
-+CURR_FULL_DIR=$(subst \,/,$(shell cmd /c cd))#M# for Cygwin shell
- # Current full path directory for use in source code in a -D compiler option.
- #CURR_SRCCODE_FULL_DIR=$(subst /,\\\\,$(shell pwd -W))#M# for MSYS
--CURR_SRCCODE_FULL_DIR=$(subst \,/,$(shell cmd /c cd | tail --bytes=+3))#M# for Cygwin shell
-+CURR_SRCCODE_FULL_DIR=$(subst \,/,$(shell cmd /c cd))#M# for Cygwin shell
-+SRCDIR_DEPEND=$(shell cd $(SRCDIR) && pwd)
-+DATAFILEPATHS_DEPEND=$(foreach p,$(DATAFILEPATHS),$(shell cd $(dir $(p)) && pwd)/$(notdir $(p)))
- 
- ## Compilation rules
- %.$(STATIC_O): $(srcdir)/%.c
---- misc/icu/source/config/mh-solaris	2008-07-01 03:41:26.000000000 +0200
-+++ misc/build/icu/source/config/mh-solaris	2009-02-17 11:54:45.105890123 +0100
-@@ -18,17 +18,24 @@
- 
- ## Commands to link
- ## For Sun Workshop, use CC to link to bring in C++ runtime
--LINK.c=		$(CXX) $(CXXFLAGS) $(LDFLAGS)
--LINK.cc=	$(CXX) $(CXXFLAGS) $(LDFLAGS)
-+LINK.c=     $(CXX) $(CXXFLAGS) $(LDFLAGS) -norunpath
-+LINK.cc=    $(CXX) $(CXXFLAGS) $(LDFLAGS) -norunpath
- 
- ## Commands to make a shared library
- SHLIB.c=	$(CC) $(CFLAGS) $(LDFLAGS) -G
--SHLIB.cc=	$(CXX) $(CXXFLAGS) $(LDFLAGS) -G
-+SHLIB.cc=   $(CXX) $(CXXFLAGS) $(LDFLAGS) -G -norunpath
- 
- ## Compiler switch to embed a runtime search path
- LD_RPATH=	-R
- LD_RPATH_PRE=	
- 
-+## Force RPATH=$ORIGIN to locate own dependencies w/o need for LD_LIBRARY_PATH
-+ENABLE_RPATH=YES
-+RPATHLDFLAGS=${LD_RPATH}'$$ORIGIN'
-+
-+#SH#  ENABLE_RPATH=YES
-+#SH#  RPATHLDFLAGS="${LD_RPATH}'$$ORIGIN'"
-+
- #LIBRARY_PATH_PREFIX=/usr/lib/lwp:
- 
- ## Compiler switch to embed a library name
---- misc/icu/source/layout/ArabicShaping.cpp	2008-07-01 03:42:04.000000000 +0200
-+++ misc/build/icu/source/layout/ArabicShaping.cpp	2009-02-17 12:04:34.264869737 +0100
-@@ -79,7 +79,6 @@
- #define markFeatureMask 0x00040000UL
- #define mkmkFeatureMask 0x00020000UL
- 
--#define NO_FEATURES   0
- #define ISOL_FEATURES (isolFeatureMask | ligaFeatureMask | msetFeatureMask | markFeatureMask | ccmpFeatureMask | rligFeatureMask | caltFeatureMask | dligFeatureMask | cswhFeatureMask | cursFeatureMask | kernFeatureMask | mkmkFeatureMask)
- 
- #define SHAPE_MASK 0xF0000000UL
-@@ -174,11 +173,7 @@
-         LEUnicode c = chars[in];
-         ShapeType t = getShapeType(c);
- 
--        if (t == ST_NOSHAPE_NONE) {
--            glyphStorage.setAuxData(out, NO_FEATURES, success);
--        } else {
--            glyphStorage.setAuxData(out, ISOL_FEATURES, success);
--        }
-+        glyphStorage.setAuxData(out, ISOL_FEATURES, success);
- 
-         if ((t & MASK_TRANSPARENT) != 0) {
-             continue;
---- misc/icu/source/layoutex/ParagraphLayout.cpp	2008-07-01 03:42:02.000000000 +0200
-+++ misc/build/icu/source/layoutex/ParagraphLayout.cpp	2008-12-01 19:32:58.000000000 +0100
-@@ -868,7 +868,7 @@
- 
-     return nullLanguageCode;
- }
--#elif
-+#else
- 
- // TODO - dummy implementation for right now...
- le_int32 ParagraphLayout::getLanguageCode(const Locale *locale)
---- misc/icu/source/tools/pkgdata/cmnmode.c	2008-07-01 10:41:20.000000000 +0900
-+++ misc/build/icu/source/tools/pkgdata/cmnmode.c	2008-11-07 00:03:32.393500000 +0900
-@@ -69,7 +69,11 @@
-   sprintf(tmp, "# List file for gencmn:\n"
-           "CMNLIST=%s%s%s_common.lst\n\n",
-           o->tmpDir,
-+#ifdef __MINGW32__
-+          U_FILE_ALT_SEP_STRING,
-+#else
-           U_FILE_SEP_STRING,
-+#endif
-           o->shortName);
-   T_FileStream_writeLine(makefile, tmp);
- 
---- misc/icu/source/tools/pkgdata/dllmode.c	2008-07-01 10:41:20.000000000 +0900
-+++ misc/build/icu/source/tools/pkgdata/dllmode.c	2008-11-07 06:08:36.016750000 +0900
-@@ -139,7 +139,11 @@
-     sprintf(tmp, "# List file for gencmn:\n"
-                  "CMNLIST=%s%s$(NAME)_dll.lst\n\n",
-                  o->tmpDir,
-+#ifdef __MINGW32__
-+                 U_FILE_ALT_SEP_STRING);
-+#else
-                  U_FILE_SEP_STRING);
-+#endif
-     T_FileStream_writeLine(makefile, tmp);
-     
-     if(o->hadStdin == FALSE) { /* shortcut */
---- misc/icu/source/tools/pkgdata/make.c	2008-07-01 10:41:20.000000000 +0900
-+++ misc/build/icu/source/tools/pkgdata/make.c	2008-11-06 23:23:04.096625000 +0900
-@@ -313,8 +313,13 @@
-       uprv_strcpy(cfile+uprv_strlen(cfile)-uprv_strlen(objSuffix), ".c" ); /* replace .o with .c */
-       
-       /* Make up parents.. */
-+#ifdef __MINGW32__
-+      parentPath = uprv_malloc(1+uprv_strlen(baseName) + uprv_strlen("$(SRCDIR_DEPEND)/"));
-+      sprintf(parentPath, "$(SRCDIR_DEPEND)/%s", baseName);
-+#else
-       parentPath = uprv_malloc(1+uprv_strlen(baseName) + uprv_strlen("$(SRCDIR)/"));
-       sprintf(parentPath, "$(SRCDIR)/%s", baseName);
-+#endif
-       parents = pkg_appendToList(parents, NULL, parentPath);
-       
-       /* make up commands.. */
-@@ -379,7 +384,11 @@
-     T_FileStream_writeLine(f, "\n");
-     T_FileStream_writeLine(f, "BASE_OBJECTS=$(NAME)_dat.o\n");
-     T_FileStream_writeLine(f, "\n");
-+#ifdef __MINGW32__
-+    T_FileStream_writeLine(f, "$(TEMP_DIR)/$(NAME).dat: $(CMNLIST) $(DATAFILEPATHS_DEPEND)\n");
-+#else
-     T_FileStream_writeLine(f, "$(TEMP_DIR)/$(NAME).dat: $(CMNLIST) $(DATAFILEPATHS)\n");
-+#endif
-     T_FileStream_writeLine(f, "\t$(INVOKE) $(ICUPKG) -t$(ICUDATA_CHAR) -c -s $(SRCDIR) -a $(CMNLIST) new $(TEMP_DIR)/$(CNAME).dat\n");
-     T_FileStream_writeLine(f, "\n");
-     T_FileStream_writeLine(f, "$(TEMP_DIR)/$(NAME)_dat.o : $(TEMP_DIR)/$(NAME).dat\n");
---- misc/icu/source/tools/pkgdata/pkgdata.c	2008-07-01 10:41:20.000000000 +0900
-+++ misc/build/icu/source/tools/pkgdata/pkgdata.c	2008-11-07 05:59:27.110500000 +0900
-@@ -594,7 +594,11 @@
-                     exit(U_ILLEGAL_ARGUMENT_ERROR);
-                 }		
-                 uprv_strcpy(tmp, o->srcDir);
-+#ifdef __MINGW32__
-+                uprv_strcat(tmp, o->srcDir[uprv_strlen(o->srcDir)-1]==U_FILE_SEP_CHAR?"":U_FILE_ALT_SEP_STRING);
-+#else
-                 uprv_strcat(tmp, o->srcDir[uprv_strlen(o->srcDir)-1]==U_FILE_SEP_CHAR?"":U_FILE_SEP_STRING);
-+#endif
-                 uprv_strcat(tmp, s);
-                 o->filePaths = pkg_appendToList(o->filePaths, &tail2, uprv_strdup(tmp));
-                 linePtr = lineNext;
---- misc/icu/source/tools/pkgdata/sttcmode.c	2008-07-01 10:41:20.000000000 +0900
-+++ misc/build/icu/source/tools/pkgdata/sttcmode.c	2008-11-07 00:30:05.690375000 +0900
-@@ -172,7 +172,11 @@
-     sprintf(tmp, "# List file for gencmn:\n"
-         "CMNLIST=%s%s$(NAME)_static.lst\n\n",
-         o->tmpDir,
-+#ifdef __MINGW32__
-+        U_FILE_ALT_SEP_STRING);
-+#else
-         U_FILE_SEP_STRING);
-+#endif
-     T_FileStream_writeLine(makefile, tmp);
- 
-     if(o->hadStdin == FALSE) { /* shortcut */
--- /dev/null
+++ icu/icu4c-4_2_1-src.patch
@@ -0,0 +1,474 @@
+--- misc/icu/source/common/putil.c
++++ misc/build/icu/source/common/putil.c
+@@ -52,7 +52,7 @@
+ Poorly upgraded Solaris machines can't have this defined.
+ Cleanly installed Solaris can use this #define.
+ */
+-#if !defined(_XOPEN_SOURCE_EXTENDED) && (!defined(__STDC_VERSION__) || __STDC_VERSION__ >= 199901L)
++#if !defined(_XOPEN_SOURCE_EXTENDED) && (!defined(__STDC_VERSION__) || __STDC_VERSION__ < 199901L)
+ #define _XOPEN_SOURCE_EXTENDED 1
+ #endif
+ 
+--- misc/icu/source/common/unicode/pwin32.h
++++ misc/build/icu/source/common/unicode/pwin32.h
+@@ -31,6 +31,10 @@
+ #define __STDC_CONSTANT_MACROS
+ #endif
+ 
++#if defined(__MINGW32__)
++#define U_HAVE_INTTYPES_H 1
++#endif
++
+ /** _MSC_VER is used to detect the Microsoft compiler. */
+ #if defined(_MSC_VER)
+ #define U_INT64_IS_LONG_LONG 0
+--- misc/icu/source/config/mh-darwin
++++ misc/build/icu/source/config/mh-darwin
+@@ -25,7 +25,7 @@ SHLIB.c=	$(CC) -dynamiclib -dynamic $(CFLAGS) $(LDFLAGS)
+ SHLIB.cc=	$(CXX) -dynamiclib -dynamic $(CXXFLAGS) $(LDFLAGS)
+ 
+ ## Compiler switches to embed a library name and version information
+-LD_SONAME = -Wl,-compatibility_version -Wl,$(SO_TARGET_VERSION_MAJOR) -Wl,-current_version -Wl,$(SO_TARGET_VERSION) -install_name $(notdir $(MIDDLE_SO_TARGET))
++LD_SONAME = -Wl,-compatibility_version -Wl,$(SO_TARGET_VERSION_MAJOR) -Wl,-current_version -Wl,$(SO_TARGET_VERSION) -install_name @executable_path/$(notdir $(FINAL_SO_TARGET))
+ 
+ ## Compiler switch to embed a runtime search path
+ LD_RPATH=
+@@ -41,10 +41,6 @@ SO=		dylib
+ ## Non-shared intermediate object suffix
+ STATIC_O = ao
+ 
+-## Override Versioned target for a shared library.
+-FINAL_SO_TARGET=  $(basename $(SO_TARGET)).$(SO_TARGET_VERSION).$(SO)
+-MIDDLE_SO_TARGET= $(basename $(SO_TARGET)).$(SO_TARGET_VERSION_MAJOR).$(SO)
+-
+ ## Compilation rules
+ %.$(STATIC_O): $(srcdir)/%.c
+ 	$(COMPILE.c) $(STATICCPPFLAGS) $(STATICCFLAGS) -o $@ $<
+@@ -76,15 +72,9 @@ MIDDLE_SO_TARGET= $(basename $(SO_TARGET)).$(SO_TARGET_VERSION_MAJOR).$(SO)
+ 
+ ## Versioned libraries rules
+ 
+-%.$(SO_TARGET_VERSION_MAJOR).$(SO): %.$(SO_TARGET_VERSION).$(SO)
++%.$(SO).$(SO_TARGET_VERSION_MAJOR): %.$(SO).$(SO_TARGET_VERSION)
+ 	$(RM) $@ && ln -s ${<F} $@
+-%.$(SO): %.$(SO_TARGET_VERSION_MAJOR).$(SO)
+-	$(RM) $@ && ln -s ${*F}.$(SO_TARGET_VERSION).$(SO) $@
+-
+-# tzcode option
+-TZORIG_EXTRA_CFLAGS=-DSTD_INSPIRED
+-
+-# genren opts
+-GENREN_PL_OPTS=-x Mach-O -n '-g' -p '| c++filt'
++%.$(SO): %.$(SO).$(SO_TARGET_VERSION_MAJOR)
++	$(RM) $@ && ln -s ${*F}.$(SO).$(SO_TARGET_VERSION) $@
+ 
+ ## End Darwin-specific setup
+--- misc/icu/source/config/mh-linux
++++ misc/build/icu/source/config/mh-linux
+@@ -20,6 +20,14 @@ LIBCPPFLAGS =
+ LD_RPATH=
+ LD_RPATH_PRE = -Wl,-rpath,
+ 
++## Force RPATH=$ORIGIN to locate own dependencies w/o need for LD_LIBRARY_PATH
++## (incl. the C++ runtime libs potentially found in the URE lib dir):
++ENABLE_RPATH=YES
++RPATHLDFLAGS=${LD_RPATH_PRE}'$$ORIGIN:$$ORIGIN/../ure-link/lib'
++
++#SH#  ENABLE_RPATH=YES
++#SH#  RPATHLDFLAGS="${LD_RPATH_PRE}'$$ORIGIN:$$ORIGIN/../ure-link/lib'"
++
+ ## These are the library specific LDFLAGS
+ LDFLAGSICUDT=-nodefaultlibs -nostdlib
+ 
+--- misc/icu/source/config/mh-mingw
++++ misc/build/icu/source/config/mh-mingw
+@@ -76,6 +76,8 @@ CURR_FULL_DIR=$(subst \,/,$(shell cmd /c cd))#M# for Cygwin shell
+ # Current full path directory for use in source code in a -D compiler option.
+ #CURR_SRCCODE_FULL_DIR=$(subst /,\\\\,$(shell pwd -W))#M# for MSYS
+ CURR_SRCCODE_FULL_DIR=$(subst \,/,$(shell cmd /c cd))#M# for Cygwin shell
++SRCDIR_DEPEND=$(shell cd $(SRCDIR) && pwd)
++DATAFILEPATHS_DEPEND=$(foreach p,$(DATAFILEPATHS),$(shell cd $(dir $(p)) && pwd)/$(notdir $(p)))
+ 
+ ## Compilation rules
+ %.$(STATIC_O): $(srcdir)/%.c
+--- misc/icu/source/config/mh-solaris
++++ misc/build/icu/source/config/mh-solaris
+@@ -18,17 +18,24 @@ THREADSCXXFLAGS += -mt
+ 
+ ## Commands to link
+ ## For Sun Workshop, use CC to link to bring in C++ runtime
+-LINK.c=		$(CXX) $(CXXFLAGS) $(LDFLAGS)
+-LINK.cc=	$(CXX) $(CXXFLAGS) $(LDFLAGS)
++LINK.c=     $(CXX) $(CXXFLAGS) $(LDFLAGS) -norunpath
++LINK.cc=    $(CXX) $(CXXFLAGS) $(LDFLAGS) -norunpath
+ 
+ ## Commands to make a shared library
+ SHLIB.c=	$(CC) $(CFLAGS) $(LDFLAGS) -G
+-SHLIB.cc=	$(CXX) $(CXXFLAGS) $(LDFLAGS) -G
++SHLIB.cc=   $(CXX) $(CXXFLAGS) $(LDFLAGS) -G -norunpath
+ 
+ ## Compiler switch to embed a runtime search path
+ LD_RPATH=	-R
+ LD_RPATH_PRE=	
+ 
++## Force RPATH=$ORIGIN to locate own dependencies w/o need for LD_LIBRARY_PATH
++ENABLE_RPATH=YES
++RPATHLDFLAGS=${LD_RPATH}'$$ORIGIN'
++
++#SH#  ENABLE_RPATH=YES
++#SH#  RPATHLDFLAGS="${LD_RPATH}'$$ORIGIN'"
++
+ #LIBRARY_PATH_PREFIX=/usr/lib/lwp:
+ 
+ ## Compiler switch to embed a library name
+--- misc/icu/source/layout/ArabicShaping.cpp
++++ misc/build/icu/source/layout/ArabicShaping.cpp
+@@ -79,7 +79,6 @@ ArabicShaping::ShapeType ArabicShaping::getShapeType(LEUnicode c)
+ #define markFeatureMask 0x00040000UL
+ #define mkmkFeatureMask 0x00020000UL
+ 
+-#define NO_FEATURES   0
+ #define ISOL_FEATURES (isolFeatureMask | ligaFeatureMask | msetFeatureMask | markFeatureMask | ccmpFeatureMask | rligFeatureMask | caltFeatureMask | dligFeatureMask | cswhFeatureMask | cursFeatureMask | kernFeatureMask | mkmkFeatureMask)
+ 
+ #define SHAPE_MASK 0xF0000000UL
+@@ -174,11 +173,7 @@ void ArabicShaping::shape(const LEUnicode *chars, le_int32 offset, le_int32 char
+         LEUnicode c = chars[in];
+         ShapeType t = getShapeType(c);
+ 
+-        if (t == ST_NOSHAPE_NONE) {
+-            glyphStorage.setAuxData(out, NO_FEATURES, success);
+-        } else {
+-            glyphStorage.setAuxData(out, ISOL_FEATURES, success);
+-        }
++        glyphStorage.setAuxData(out, ISOL_FEATURES, success);
+ 
+         if ((t & MASK_TRANSPARENT) != 0) {
+             continue;
+--- misc/build/icu/source/data/makedata.mak
++++ misc/build/icu/source/data/makedata.mak
+@@ -398,7 +398,7 @@
+ #
+ # testdata - nmake will invoke pkgdata, which will create testdata.dat
+ #
+-"$(TESTDATAOUT)\testdata.dat": "$(TESTDATA)\*" "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu" $(TRANSLIT_RES_FILES) $(MISC_FILES) $(RB_FILES) {"$(ICUTOOLS)\genrb\$(CFG)"}genrb.exe
++"$(TESTDATAOUT)\testdata.dat": "$(TESTDATA)\*" "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu" $(TRANSLIT_RES_FILES) $(MISC_FILES) $(RB_FILES) {"$(ICUPBIN)"}genrb.exe
+ 	@cd "$(TESTDATA)"
+ 	@echo building testdata...
+ 	nmake /nologo /f "$(TESTDATA)\testdata.mak" TESTDATA=. ICUTOOLS="$(ICUTOOLS)" ICUPBIN="$(ICUPBIN)" ICUP="$(ICUP)" CFG=$(CFG) TESTDATAOUT="$(TESTDATAOUT)" TESTDATABLD="$(TESTDATABLD)"
+@@ -526,175 +526,175 @@
+ # RBBI .brk file generation.
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUBRK)}.txt.brk:
+ 	@echo Creating $@
+-	@"$(ICUTOOLS)\genbrk\$(CFG)\genbrk" -c -r $< -o $@ -d"$(ICUBLD_PKG)" -i "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\genbrk" -c -r $< -o $@ -d"$(ICUBLD_PKG)" -i "$(ICUBLD_PKG)"
+ 
+ # RBBI .ctd file generation.
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUBRK)}.txt.ctd:
+ 	@echo Creating $@
+-	@"$(ICUTOOLS)\genctd\$(CFG)\genctd" -c -o $@ -d"$(ICUBLD_PKG)" -i "$(ICUBLD_PKG)" $<
++	@"$(ICUPBIN)\genctd" -c -o $@ -d"$(ICUBLD_PKG)" -i "$(ICUBLD_PKG)" $<
+ 
+ # Batch inference rule for creating converters
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUUCM)}.ucm.cnv::
+ 	@echo Making Charset Conversion tables
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" -c -d"$(ICUBLD_PKG)" $<
++	@"$(ICUPBIN)\makeconv" -c -d"$(ICUBLD_PKG)" $<
+ 
+ # Batch inference rule for creating miscellaneous resource files
+ # TODO: -q option is specified to squelch the 120+ warnings about
+ #       empty intvectors and binary elements.  Unfortunately, this may
+ #       squelch other legitimate warnings.  When there is a better
+ #       way, remove the -q.
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUMISC2)}.txt.res::
+ 	@echo Making Miscellaneous Resource Bundle files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -q -d"$(ICUBLD_PKG)" $<
++	@"$(ICUPBIN)\genrb" -k -q -d"$(ICUBLD_PKG)" $<
+ 
+ # Inference rule for creating resource bundle files
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICULOC)}.txt.res::
+ 	@echo Making Locale Resource Bundle files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -d"$(ICUBLD_PKG)" $<
++	@"$(ICUPBIN)\genrb" -k -d"$(ICUBLD_PKG)" $<
+ 
+ res_index.res:
+ 	@echo Generating <<res_index.txt
+ // Warning this file is automatically generated
+ res_index:table(nofallback) {
+     InstalledLocales {
+         $(GENRB_SOURCE:.txt= {""}
+        )
+     }
+ }
+ <<KEEP
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -d"$(ICUBLD_PKG)" .\res_index.txt
++	@"$(ICUPBIN)\genrb" -k -d"$(ICUBLD_PKG)" .\res_index.txt
+ 	
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUCOL)}.txt{$(ICUCOL)}.res::
+ 	@echo Making Collation files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUCOL)" $<
++	@"$(ICUPBIN)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUCOL)" $<
+ 
+ $(ICUCOL)\res_index.res:
+ 	@echo Generating <<$(ICUCOL)\res_index.txt
+ // Warning this file is automatically generated
+ res_index:table(nofallback) {
+     InstalledLocales {
+         $(COLLATION_SOURCE:.txt= {""}
+        )
+     }
+ }
+ <<KEEP
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -d"$(ICUBLD_PKG)\$(ICUCOL)" .\$(ICUCOL)\res_index.txt
++	@"$(ICUPBIN)\genrb" -k -d"$(ICUBLD_PKG)\$(ICUCOL)" .\$(ICUCOL)\res_index.txt
+ 
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICURBNF)}.txt{$(ICURBNF)}.res::
+ 	@echo Making RBNF files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICURBNF)" $<
++	@"$(ICUPBIN)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICURBNF)" $<
+ 
+ $(ICURBNF)\res_index.res:
+ 	@echo Generating <<$(ICURBNF)\res_index.txt
+ // Warning this file is automatically generated
+ res_index:table(nofallback) {
+     InstalledLocales {
+         $(RBNF_SOURCE:.txt= {""}
+        )
+     }
+ }
+ <<KEEP
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -d"$(ICUBLD_PKG)\$(ICURBNF)" .\$(ICURBNF)\res_index.txt
++	@"$(ICUPBIN)\genrb" -k -d"$(ICUBLD_PKG)\$(ICURBNF)" .\$(ICURBNF)\res_index.txt
+ 
+ $(ICUBRK)\res_index.res:
+ 	@echo Generating <<$(ICUBRK)\res_index.txt
+ // Warning this file is automatically generated
+ res_index:table(nofallback) {
+     InstalledLocales {
+         $(BRK_RES_SOURCE:.txt= {""}
+        )
+     }
+ }
+ <<KEEP
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -d"$(ICUBLD_PKG)\$(ICUBRK)" .\$(ICUBRK)\res_index.txt
++	@"$(ICUPBIN)\genrb" -k -d"$(ICUBLD_PKG)\$(ICUBRK)" .\$(ICUBRK)\res_index.txt
+ 
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUBRK)}.txt{$(ICUBRK)}.res::
+ 	@echo Making Break Iterator Resource files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUBRK)" $<
++	@"$(ICUPBIN)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUBRK)" $<
+ 
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUTRNS)}.txt{$(ICUTRNS)}.res::
+ 	@echo Making Transliterator files
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUTRNS)" $<
++	@"$(ICUPBIN)\genrb" -k -i "$(ICUBLD_PKG)" -d"$(ICUBLD_PKG)\$(ICUTRNS)" $<
+ 
+ 
+ # DLL version information
+ # If you modify this, modify winmode.c in pkgdata.
+ "$(ICUTMP)\icudata.res": "$(ICUMISC)\icudata.rc"
+ 	@echo Creating data DLL version information from $**
+ 	@rc.exe /i "..\..\..\..\common" /r /fo $@ $**
+ 
+ # Targets for unames.icu
+-"$(ICUBLD_PKG)\unames.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\gennames\$(CFG)\gennames.exe"
++"$(ICUBLD_PKG)\unames.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\gennames.exe"
+ 	@echo Creating data file for Unicode Names
+-	@"$(ICUTOOLS)\gennames\$(CFG)\gennames" -1 -u $(UNICODE_VERSION) -d "$(ICUBLD_PKG)" "$(ICUUNIDATA)\UnicodeData.txt"
++	@"$(ICUPBIN)\gennames" -1 -u $(UNICODE_VERSION) -d "$(ICUBLD_PKG)" "$(ICUUNIDATA)\UnicodeData.txt"
+ 
+ # Targets for pnames.icu
+ # >> Depends on the Unicode data as well as uchar.h and uscript.h <<
+-"$(ICUBLD_PKG)\pnames.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\genpname\$(CFG)\genpname.exe" "$(ICUP)\source\common\unicode\uchar.h" "$(ICUP)\source\common\unicode\uscript.h"
++"$(ICUBLD_PKG)\pnames.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\genpname.exe" "$(ICUP)\source\common\unicode\uchar.h" "$(ICUP)\source\common\unicode\uscript.h"
+ 	@echo Creating data file for Unicode Property Names
+-	@"$(ICUTOOLS)\genpname\$(CFG)\genpname" -d "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\genpname" -d "$(ICUBLD_PKG)"
+ 
+ # Targets for uprops.icu
+-"$(ICUBLD_PKG)\uprops.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\genprops\$(CFG)\genprops.exe" "$(ICUBLD_PKG)\pnames.icu"
++"$(ICUBLD_PKG)\uprops.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\genprops.exe" "$(ICUBLD_PKG)\pnames.icu"
+ 	@echo Creating data file for Unicode Character Properties
+-	@"$(ICUTOOLS)\genprops\$(CFG)\genprops" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\genprops" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
+-	@"$(ICUTOOLS)\genprops\$(CFG)\genprops" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
++	@"$(ICUPBIN)\genprops" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
+ 
+ # Targets for ubidi.icu
+-"$(ICUBLD_PKG)\ubidi.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\genbidi\$(CFG)\genbidi.exe"
++"$(ICUBLD_PKG)\ubidi.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\genbidi.exe"
+ 	@echo Creating data file for Unicode BiDi/Shaping Properties
+-	@"$(ICUTOOLS)\genbidi\$(CFG)\genbidi" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\genbidi" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
+-	@"$(ICUTOOLS)\genbidi\$(CFG)\genbidi" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
++	@"$(ICUPBIN)\genbidi" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
+ 
+ # Targets for ucase.icu
+-"$(ICUBLD_PKG)\ucase.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\gencase\$(CFG)\gencase.exe"
++"$(ICUBLD_PKG)\ucase.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\gencase.exe"
+ 	@echo Creating data file for Unicode Case Mapping Properties
+-	@"$(ICUTOOLS)\gencase\$(CFG)\gencase" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\gencase" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
+-	@"$(ICUTOOLS)\gencase\$(CFG)\gencase" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
++	@"$(ICUPBIN)\gencase" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
+ 
+ # Targets for unorm.icu
+-"$(ICUBLD_PKG)\unorm.icu": "$(ICUUNIDATA)\*.txt" "$(ICUTOOLS)\gennorm\$(CFG)\gennorm.exe" "$(ICUBLD_PKG)\pnames.icu" "$(ICUBLD_PKG)\uprops.icu" "$(ICUBLD_PKG)\ucase.icu"
++"$(ICUBLD_PKG)\unorm.icu": "$(ICUUNIDATA)\*.txt" "$(ICUPBIN)\gennorm.exe" "$(ICUBLD_PKG)\pnames.icu" "$(ICUBLD_PKG)\uprops.icu" "$(ICUBLD_PKG)\ucase.icu"
+ 	@echo Creating data file for Unicode Normalization
+-	@"$(ICUTOOLS)\gennorm\$(CFG)\gennorm" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\gennorm" -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUBLD_PKG)"
+-	@"$(ICUTOOLS)\gennorm\$(CFG)\gennorm" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
++	@"$(ICUPBIN)\gennorm" --csource -u $(UNICODE_VERSION) -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)" -d "$(ICUTMP)"
+ 
+ # Targets for converters
+-"$(ICUBLD_PKG)\cnvalias.icu" : {"$(ICUSRCDATA)\$(ICUUCM)"}\convrtrs.txt "$(ICUTOOLS)\gencnval\$(CFG)\gencnval.exe"
++"$(ICUBLD_PKG)\cnvalias.icu" : {"$(ICUSRCDATA)\$(ICUUCM)"}\convrtrs.txt "$(ICUPBIN)\gencnval.exe"
+ 	@echo Creating data file for Converter Aliases
+-	@"$(ICUTOOLS)\gencnval\$(CFG)\gencnval" -d "$(ICUBLD_PKG)" "$(ICUSRCDATA)\$(ICUUCM)\convrtrs.txt"
++	@"$(ICUPBIN)\gencnval" -d "$(ICUBLD_PKG)" "$(ICUSRCDATA)\$(ICUUCM)\convrtrs.txt"
+ 
+ # Targets for ucadata.icu & invuca.icu
+ # used to depend on "$(ICUBLD_PKG)\uprops.icu" "$(ICUBLD_PKG)\ucase.icu" "$(ICUBLD_PKG)\unorm.icu"
+ # see Jitterbug 4497
+-"$(ICUBLD_PKG)\$(ICUCOL)\invuca.icu" "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu": "$(ICUUNIDATA)\FractionalUCA.txt" "$(ICUTOOLS)\genuca\$(CFG)\genuca.exe"
++"$(ICUBLD_PKG)\$(ICUCOL)\invuca.icu" "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu": "$(ICUUNIDATA)\FractionalUCA.txt" "$(ICUPBIN)\genuca.exe"
+ 	@echo Creating UCA data files
+-	@"$(ICUTOOLS)\genuca\$(CFG)\genuca" -d "$(ICUBLD_PKG)\$(ICUCOL)" -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)"
++	@"$(ICUPBIN)\genuca" -d "$(ICUBLD_PKG)\$(ICUCOL)" -i "$(ICUBLD_PKG)" -s "$(ICUUNIDATA)"
+ 
+ # Stringprep .spp file generation.
+ {$(ICUSRCDATA_RELATIVE_PATH)\$(ICUSPREP)}.txt.spp:
+ 	@echo Creating $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s $(<D) -d "$(ICUBLD_PKG)" -b $(@B) -m "$(ICUUNIDATA)" -u 3.2.0 $(<F)
++	@"$(ICUPBIN)\gensprep" -s $(<D) -d "$(ICUBLD_PKG)" -b $(@B) -m "$(ICUUNIDATA)" -u 3.2.0 $(<F)
+ 
+ # Confusables .cfu file generation
+ #     Can't use an inference rule because two .txt source files combine to produce a single .cfu output file
+-"$(ICUBLD_PKG)\confusables.cfu": "$(ICUUNIDATA)\confusables.txt" "$(ICUUNIDATA)\confusablesWholeScript.txt" "$(ICUTOOLS)\gencfu\$(CFG)\gencfu.exe"
++"$(ICUBLD_PKG)\confusables.cfu": "$(ICUUNIDATA)\confusables.txt" "$(ICUUNIDATA)\confusablesWholeScript.txt" "$(ICUPBIN)\gencfu.exe"
+ 	@echo Creating $@
+-	@"$(ICUTOOLS)\gencfu\$(CFG)\gencfu" -c -r "$(ICUUNIDATA)\confusables.txt" -w "$(ICUUNIDATA)\confusablesWholeScript.txt" -o $@ -i "$(ICUBLD_PKG)"
++	@"$(ICUPBIN)\gencfu" -c -r "$(ICUUNIDATA)\confusables.txt" -w "$(ICUUNIDATA)\confusablesWholeScript.txt" -o $@ -i "$(ICUBLD_PKG)"
+ 
+ !IFDEF ICUDATA_ARCHIVE
+-"$(ICUDATA_SOURCE_ARCHIVE)": CREATE_DIRS $(ICUDATA_ARCHIVE) "$(ICUTOOLS)\icupkg\$(CFG)\icupkg.exe"
++"$(ICUDATA_SOURCE_ARCHIVE)": CREATE_DIRS $(ICUDATA_ARCHIVE) "$(ICUPBIN)\icupkg.exe"
+-	"$(ICUTOOLS)\icupkg\$(CFG)\icupkg" -t$(U_ICUDATA_ENDIAN_SUFFIX) "$(ICUDATA_ARCHIVE)" "$(ICUDATA_SOURCE_ARCHIVE)"
++	"$(ICUPBIN)\icupkg" -t$(U_ICUDATA_ENDIAN_SUFFIX) "$(ICUDATA_ARCHIVE)" "$(ICUDATA_SOURCE_ARCHIVE)"
+ !ENDIF
+ 
+ # Dependencies on the tools for the batch inference rules
+ 
+ !IFNDEF ICUDATA_SOURCE_ARCHIVE
+-$(UCM_SOURCE) : {"$(ICUTOOLS)\makeconv\$(CFG)"}makeconv.exe
++$(UCM_SOURCE) : {"$(ICUPBIN)"}makeconv.exe
+ 
+ # This used to depend on "$(ICUBLD_PKG)\uprops.icu" "$(ICUBLD_PKG)\ucase.icu" "$(ICUBLD_PKG)\ubidi.icu" "$(ICUBLD_PKG)\unorm.icu"
+ # This data is now hard coded as a part of the library.
+ # See Jitterbug 4497 for details.
+-$(MISC_SOURCE) $(RB_FILES) $(COL_COL_FILES) $(RBNF_RES_FILES) $(BRK_RES_FILES) $(TRANSLIT_RES_FILES): {"$(ICUTOOLS)\genrb\$(CFG)"}genrb.exe "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu"
++$(MISC_SOURCE) $(RB_FILES) $(COL_COL_FILES) $(RBNF_RES_FILES) $(BRK_RES_FILES) $(TRANSLIT_RES_FILES): {"$(ICUPBIN)"}genrb.exe "$(ICUBLD_PKG)\$(ICUCOL)\ucadata.icu"
+ 
+ # This used to depend on "$(ICUBLD_PKG)\uprops.icu" "$(ICUBLD_PKG)\ucase.icu" "$(ICUBLD_PKG)\ubidi.icu" "$(ICUBLD_PKG)\unorm.icu"
+ # This data is now hard coded as a part of the library.
+--- misc/build/icu/source/test/testdata/testdata.mak
++++ misc/build/icu/source/test/testdata/testdata.mak
+@@ -75,74 +75,74 @@
+ # The -q option is there on purpose, so we don't see it normally.
+ {$(TESTDATA)}.txt.res:: 
+ 	@echo Making Test Resource Bundle files $<
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -q -s"$(TESTDATA)" -d"$(TESTDATABLD)" $<
++	@"$(ICUPBIN)\genrb" -q -s"$(TESTDATA)" -d"$(TESTDATABLD)" $<
+ 
+ "$(TESTDATABLD)\iscii.res": "$(TESTDATA)\iscii.bin"
+ 	@echo Making Test Resource Bundle file with encoding ISCII,version=0
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -s"$(TESTDATA)" -eISCII,version=0 -d"$(TESTDATABLD)" iscii.bin
++	@"$(ICUPBIN)\genrb" -s"$(TESTDATA)" -eISCII,version=0 -d"$(TESTDATABLD)" iscii.bin
+ 
+ "$(TESTDATABLD)\idna_rules.res": "$(TESTDATA)\idna_rules.txt"
+ 	@echo Making Test Resource Bundle file for IDNA reference implementation
+-	@"$(ICUTOOLS)\genrb\$(CFG)\genrb" -s"$(TESTDATA)" -d"$(TESTDATABLD)" idna_rules.txt
++	@"$(ICUPBIN)\genrb" -s"$(TESTDATA)" -d"$(TESTDATABLD)" idna_rules.txt
+ 
+ 
+-"$(TESTDATABLD)\test.icu" : {"$(ICUTOOLS)\gentest\$(CFG)"}gentest.exe
++"$(TESTDATABLD)\test.icu" : {"$(ICUPBIN)"}gentest.exe
+-	"$(ICUTOOLS)\gentest\$(CFG)\gentest" -d"$(TESTDATABLD)"
++	"$(ICUPBIN)\gentest" -d"$(TESTDATABLD)"
+ 
+ # testtable32 resource file
+-"$(TESTDATABLD)\testtable32.txt" : {"$(ICUTOOLS)\gentest\$(CFG)"}gentest.exe
++"$(TESTDATABLD)\testtable32.txt" : {"$(ICUPBIN)"}gentest.exe
+-	"$(ICUTOOLS)\gentest\$(CFG)\gentest" -r -d"$(TESTDATABLD)"
++	"$(ICUPBIN)\gentest" -r -d"$(TESTDATABLD)"
+ 
+ "$(TESTDATABLD)\testtable32.res": "$(TESTDATABLD)\testtable32.txt"
+-	"$(ICUTOOLS)\genrb\$(CFG)\genrb" -s"$(TESTDATABLD)" -d"$(TESTDATABLD)" testtable32.txt
++	"$(ICUPBIN)\genrb" -s"$(TESTDATABLD)" -d"$(TESTDATABLD)" testtable32.txt
+ 
+ # Targets for nfscsi.spp
+-"$(TESTDATABLD)\nfscsi.spp" : {"$(ICUTOOLS)\gensprep\$(CFG)"}gensprep.exe "$(TESTDATA)\nfs4_cs_prep_ci.txt"
++"$(TESTDATABLD)\nfscsi.spp" : {"$(ICUPBIN)"}gensprep.exe "$(TESTDATA)\nfs4_cs_prep_ci.txt"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscsi -u 3.2.0 nfs4_cs_prep_ci.txt
++	@"$(ICUPBIN)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscsi -u 3.2.0 nfs4_cs_prep_ci.txt
+ 
+ # Targets for nfscss.spp
+-"$(TESTDATABLD)\nfscss.spp" : {"$(ICUTOOLS)\gensprep\$(CFG)"}gensprep.exe "$(TESTDATA)\nfs4_cs_prep_cs.txt"
++"$(TESTDATABLD)\nfscss.spp" : {"$(ICUPBIN)"}gensprep.exe "$(TESTDATA)\nfs4_cs_prep_cs.txt"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscss -u 3.2.0 nfs4_cs_prep_cs.txt
++	@"$(ICUPBIN)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscss -u 3.2.0 nfs4_cs_prep_cs.txt
+ 
+ # Targets for nfscis.spp
+-"$(TESTDATABLD)\nfscis.spp" : {"$(ICUTOOLS)\gensprep\$(CFG)"}gensprep.exe "$(TESTDATA)\nfs4_cis_prep.txt"
++"$(TESTDATABLD)\nfscis.spp" : {"$(ICUPBIN)"}gensprep.exe "$(TESTDATA)\nfs4_cis_prep.txt"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscis -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_cis_prep.txt
++	@"$(ICUPBIN)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfscis -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_cis_prep.txt
+ 
+ # Targets for nfsmxs.spp
+-"$(TESTDATABLD)\nfsmxs.spp" : {"$(ICUTOOLS)\gensprep\$(CFG)"}gensprep.exe "$(TESTDATA)\nfs4_mixed_prep_s.txt"
++"$(TESTDATABLD)\nfsmxs.spp" : {"$(ICUPBIN)"}gensprep.exe "$(TESTDATA)\nfs4_mixed_prep_s.txt"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfsmxs -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_mixed_prep_s.txt
++	@"$(ICUPBIN)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfsmxs -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_mixed_prep_s.txt
+ 
+ # Targets for nfsmxp.spp
+-"$(TESTDATABLD)\nfsmxp.spp" : {"$(ICUTOOLS)\gensprep\$(CFG)"}gensprep.exe "$(TESTDATA)\nfs4_mixed_prep_p.txt"
++"$(TESTDATABLD)\nfsmxp.spp" : {"$(ICUPBIN)"}gensprep.exe "$(TESTDATA)\nfs4_mixed_prep_p.txt"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\gensprep\$(CFG)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfsmxp -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_mixed_prep_p.txt
++	@"$(ICUPBIN)\gensprep" -s "$(TESTDATA)" -d "$(TESTDATABLD)\\" -b nfsmxp -u 3.2.0 -k -n "$(ICUTOOLS)\..\data\unidata" nfs4_mixed_prep_p.txt
+ 
+ 
+ # Targets for test converter data
+ "$(TESTDATABLD)\test1.cnv": "$(TESTDATA)\test1.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
+ 
+ "$(TESTDATABLD)\test1bmp.cnv": "$(TESTDATA)\test1bmp.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
+ 
+ "$(TESTDATABLD)\test3.cnv": "$(TESTDATA)\test3.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
+ 
+ "$(TESTDATABLD)\test4.cnv": "$(TESTDATA)\test4.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
+ 
+ "$(TESTDATABLD)\test4x.cnv": "$(TESTDATA)\test4x.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
+ 
+ "$(TESTDATABLD)\ibm9027.cnv": "$(TESTDATA)\ibm9027.ucm"
+ 	@echo Building $@
+-	@"$(ICUTOOLS)\makeconv\$(CFG)\makeconv" --small -d"$(TESTDATABLD)" $**
++	@"$(ICUPBIN)\makeconv" --small -d"$(TESTDATABLD)" $**
diff --git icu/icuversion.mk icu/icuversion.mk
index eedf627..1fc9ecb 100755
--- icu/icuversion.mk
+++ icu/icuversion.mk
@@ -27,7 +27,7 @@
 # major 
 ICU_MAJOR=4
 # minor 
-ICU_MINOR=0
+ICU_MINOR=2
 # micro 
 ICU_MICRO=1
 
diff --git icu/makefile.mk icu/makefile.mk
index 2fafcfa..acf0630 100644
--- icu/makefile.mk
+++ icu/makefile.mk
@@ -39,7 +39,7 @@ TARGET=so_icu
 
 .IF "$(ICU_MICRO)"!="0"
 TARFILE_NAME=icu4c-$(ICU_MAJOR)_$(ICU_MINOR)_$(ICU_MICRO)-src
-TARFILE_MD5=2f6ecca935948f7db92d925d88d0d078
+TARFILE_MD5=e3738abd0d3ce1870dc1fd1f22bba5b1
 .ELSE
 TARFILE_NAME=icu4c-$(ICU_MAJOR)_$(ICU_MINOR)-src
 TARFILE_MD5=
@@ -234,7 +234,7 @@ OUT2BIN= \
     $(BUILD_DIR)$/..$/bin$/icuin$(ICU_MAJOR)$(ICU_MINOR)$(ICU_BUILD_LIBPOST).dll \
     $(BUILD_DIR)$/..$/bin$/icuuc$(ICU_MAJOR)$(ICU_MINOR)$(ICU_BUILD_LIBPOST).dll \
     $(BUILD_DIR)$/..$/bin$/icule$(ICU_MAJOR)$(ICU_MINOR)$(ICU_BUILD_LIBPOST).dll \
-    $(BUILD_DIR)$/..$/bin$/icutu$(ICU_MAJOR)$(ICU_MINOR)$(ICU_BUILD_LIBPOST).dll \
+    $(BUILD_DIR)$/..$/bin$/icutu41$(ICU_BUILD_LIBPOST).dll \
     $(BUILD_DIR)$/..$/bin$/genccode.exe \
     $(BUILD_DIR)$/..$/bin$/genbrk.exe \
     $(BUILD_DIR)$/..$/bin$/gencmn.exe
--- icu/prj/d.lst
+++ icu/prj/d.lst
@@ -9,11 +9,7 @@
 ..\%__SRC%\lib\*.a %_DEST%\lib%_EXT%\*.a
 ..\%__SRC%\lib\*.lib %_DEST%\lib%_EXT%\*.lib
 
-..\%__SRC%\bin\icudt40.dll %_DEST%\bin%_EXT%\icudt40.dll
-..\%__SRC%\bin\icuin40.dll %_DEST%\bin%_EXT%\icuin40.dll
-..\%__SRC%\bin\icule40.dll %_DEST%\bin%_EXT%\icule40.dll
-..\%__SRC%\bin\icutu40.dll %_DEST%\bin%_EXT%\icutu40.dll
-..\%__SRC%\bin\icuuc40.dll %_DEST%\bin%_EXT%\icuuc40.dll
+..\%__SRC%\bin\icu*.dll %_DEST%\bin%_EXT%\icu*.dll
 
 ..\%__SRC%\bin\genccode     %_DEST%\bin%_EXT%\genccode
 ..\%__SRC%\bin\genccode.exe %_DEST%\bin%_EXT%\genccode.exe
diff --git ooo.lst ooo.lst
index 3e379fa..68105a8 100755
--- ooo.lst
+++ ooo.lst
@@ -14,7 +14,6 @@ http://hg.services.openoffice.org/binaries
 2a177023f9ea8ec8bd00837605c5df1b-jakarta-tomcat-5.0.30-src.tar.gz
 2ae988b339daec234019a7066f96733e-commons-lang-2.3-src.tar.gz
 2c9b0f83ed5890af02c0df1c1776f39b-commons-httpclient-3.1-src.tar.gz
-2f6ecca935948f7db92d925d88d0d078-icu4c-4_0_1-src.tgz
 ca4870d899fd7e943ffc310a5421ad4d-liberation-fonts-ttf-1.06.0.20100721.tar.gz
 35c94d2df8893241173de1d16b6034c0-swingExSrc.zip
 35efabc239af896dfb79be7ebdd6e6b9-gentiumbasic-fonts-1.10.zip
@@ -75,6 +74,7 @@ http://download.go-oo.org/src
 47e1edaa44269bc537ae8cabebb0f638-JLanguageTool-1.0.0.tar.bz2
 90401bca927835b6fbae4a707ed187c8-nlpsolver-0.9.tar.bz2
 debc62758716a169df9f62e6ab2bc634-zlib-1.2.3.tar.gz
+e3738abd0d3ce1870dc1fd1f22bba5b1-icu4c-4_2_1-src.tgz
 http://download.go-oo.org/SRC680
 799fc3b835a79adce8c88a3fee0150c1-libwps-0.1.2.tar.gz
 db556b750bf3eac8481a4cc5e29e5af1-libwpg-0.1.3.tar.gz
