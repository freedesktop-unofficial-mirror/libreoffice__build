From 84d41326002e32d55a5d529ac2c5c02923ebdaa0 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 16:58:35 +0200
Subject: [PATCH 325/878] stlport-solaris-fileno.diff

---
 stlport/STLport-4.0.patch |   17 +++++++++++++++++
 1 files changed, 17 insertions(+), 0 deletions(-)

diff --git a/stlport/STLport-4.0.patch b/stlport/STLport-4.0.patch
index 0d262b5..ea21ff9 100644
--- a/stlport/STLport-4.0.patch
+++ b/stlport/STLport-4.0.patch
@@ -3321,6 +3321,23 @@
   inline char* _FILE_I_next(const FILE& __f) { return (char*) __f._ptr; }  
   inline char* _FILE_I_end(const FILE& __f)
 ***************
+*** 92,98 ****
+  typedef  unsigned char* _File_ptr_type;
+  #endif
+
+! inline int   _FILE_fd(const FILE& __f) { return __f._file; }
+  inline char* _FILE_I_begin(const FILE& __f) { return (char*) __f._base; }
+  inline char* _FILE_I_next(const FILE& __f) { return (char*) __f._ptr; }
+  inline char* _FILE_I_end(const FILE& __f)
+--- 92,98 ----
+  typedef  unsigned char* _File_ptr_type;
+  #endif
+
+! inline int   _FILE_fd(const FILE& __f) { return fileno(__CONST_CAST(FILE*,&__f)); }
+  inline char* _FILE_I_begin(const FILE& __f) { return (char*) __f._base; }
+  inline char* _FILE_I_next(const FILE& __f) { return (char*) __f._ptr; }
+  inline char* _FILE_I_end(const FILE& __f)
+***************
 *** 377,382 ****
 --- 380,388 ----
   # endif
-- 
1.7.0.1

