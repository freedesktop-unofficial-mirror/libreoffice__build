From 9c681ef44718e7300755f3ff9b71589fb48fc93c Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:04:52 +0200
Subject: [PATCH 564/768] cairo-cairo-makefile-mk.diff

---
 cairo/cairo/makefile.mk |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

diff --git cairo/cairo/makefile.mk cairo/cairo/makefile.mk
index e0b12cc..04e5af3 100644
--- cairo/cairo/makefile.mk
+++ cairo/cairo/makefile.mk
@@ -122,7 +122,7 @@ OUT2INC+=src$/cairo-quartz.h
 .ELSE
 # ----------- Unix ---------------------------------------------------------
 .IF "$(OS)$(COM)"=="LINUXGCC" || "$(OS)$(COM)"=="FREEBSDGCC"
-cairo_LDFLAGS+=-Wl,-rpath,'$$$$ORIGIN:$$$$ORIGIN/../ure-link/lib' -Wl,-noinhibit-exec -Wl,-z,noexecstack
+cairo_LDFLAGS+=-Wl,-rpath,'$$$$ORIGIN:$$$$ORIGIN/../ure-link/lib' -Wl,-z,noexecstack
 .ELIF "$(OS)$(COM)"=="SOLARISC52"
 cairo_LDFLAGS+=-Wl,-R'$$$$ORIGIN:$$$$ORIGIN/../ure-link/lib'
 .ENDIF  # "$(OS)$(COM)"=="LINUXGCC" || "$(OS)$(COM)"=="FREEBSDGCC"
@@ -171,6 +171,11 @@ OUT2INC+=src$/cairo-xlib.h \
 CONFIGURE_FLAGS+=pixman_CFLAGS="-I$(SRC_ROOT)$/$(PRJNAME)$/$(INPATH)$/inc" pixman_LIBS="-L$(SRC_ROOT)$/$(PRJNAME)$/$(INPATH)$/lib -lpixman-1"
 .ENDIF
 
+.IF "$(debug)"!=""
+cairo_CFLAGS+=-g
+CONFIGURE_FLAGS+= STRIP=" "
+.ENDIF
+
 CONFIGURE_FLAGS+=CFLAGS="-I$(SRC_ROOT)$/$(PRJNAME)$/$(INPATH)$/inc $(cairo_CFLAGS)" LDFLAGS="-L$(SRC_ROOT)$/$(PRJNAME)$/$(INPATH)$/lib $(cairo_LDFLAGS)" CPPFLAGS="$(cairo_CPPFLAGS)"
 
 .ENDIF
-- 
1.7.0.1

