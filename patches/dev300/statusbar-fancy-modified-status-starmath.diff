From c22b740ec80bc79148553af9c0682faf72eebcdd Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:02:40 +0200
Subject: [PATCH 528/878] statusbar-fancy-modified-status-starmath.diff

---
 starmath/source/smmod.cxx                       |    3 +++
 starmath/uiconfig/smath/statusbar/statusbar.xml |    2 +-
 2 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/starmath/source/smmod.cxx b/starmath/source/smmod.cxx
index e6c82a5..e4646d5 100644
--- a/starmath/source/smmod.cxx
+++ b/starmath/source/smmod.cxx
@@ -55,6 +55,7 @@
 #include "edit.hxx"
 #include "view.hxx"
 #include "starmath.hrc"
+#include "svx/modctrl.hxx"
 
 TYPEINIT1( SmModule, SfxModule );
 
@@ -242,6 +243,8 @@ SmModule::SmModule(SfxObjectFactory* pObjFact) :
     pVirtualDev( 0 )
 {
     SetName( C2S("StarMath" ));
+
+    SvxModifyControl::RegisterControl(SID_DOC_MODIFIED, this);
 }
 
 
diff --git a/starmath/uiconfig/smath/statusbar/statusbar.xml b/starmath/uiconfig/smath/statusbar/statusbar.xml
index 7d95fbb..33e4e48 100644
--- a/starmath/uiconfig/smath/statusbar/statusbar.xml
+++ b/starmath/uiconfig/smath/statusbar/statusbar.xml
@@ -3,6 +3,6 @@
 <statusbar:statusbar xmlns:statusbar="http://openoffice.org/2001/statusbar" xmlns:xlink="http://www.w3.org/1999/xlink">
  <statusbar:statusbaritem xlink:href=".uno:TextStatus" statusbar:align="left" statusbar:width="300" statusbar:helpid="helpid:30367"/>
  <statusbar:statusbaritem xlink:href=".uno:Zoom" statusbar:align="center" statusbar:width="54" statusbar:helpid="helpid:10000"/>
- <statusbar:statusbaritem xlink:href=".uno:ModifiedStatus" statusbar:align="center" statusbar:width="14" statusbar:helpid="helpid:5584"/>
+ <statusbar:statusbaritem xlink:href=".uno:ModifiedStatus" statusbar:align="center" statusbar:ownerdraw="true" statusbar:width="14" statusbar:helpid="helpid:5584"/>
  <statusbar:statusbaritem xlink:href=".uno:Signature" statusbar:align="center" statusbar:ownerdraw="true" statusbar:width="16" statusbar:helpid="helpid:5699"/>
 </statusbar:statusbar>
\ No newline at end of file
-- 
1.7.0.1

