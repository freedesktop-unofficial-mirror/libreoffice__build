From d55460c3791d10f21e4e53cd8de45b8e45a5edc6 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:08:20 +0200
Subject: [PATCH 809/878] calc-insert-current-time-vcl.diff

---
 vcl/inc/vcl/keycodes.hxx        |    1 +
 vcl/unx/gtk/window/gtkframe.cxx |    1 +
 vcl/unx/source/app/saldisp.cxx  |    7 +++++++
 vcl/win/source/app/salinst.cxx  |    1 +
 4 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/vcl/inc/vcl/keycodes.hxx b/vcl/inc/vcl/keycodes.hxx
index cbc283b..c137296 100644
--- a/vcl/inc/vcl/keycodes.hxx
+++ b/vcl/inc/vcl/keycodes.hxx
@@ -157,6 +157,7 @@
 #define KEY_QUOTELEFT   ((USHORT)::com::sun::star::awt::Key::QUOTELEFT)
 #define KEY_BRACKETLEFT ((USHORT)::com::sun::star::awt::Key::BRACKETLEFT)
 #define KEY_BRACKETRIGHT ((USHORT)::com::sun::star::awt::Key::BRACKETRIGHT)
+#define KEY_SEMICOLON   ((USHORT)::com::sun::star::awt::Key::SEMICOLON)
 
 #define KEY_CAPSLOCK    ((USHORT)::com::sun::star::awt::Key::CAPSLOCK)
 #define KEY_NUMLOCK     ((USHORT)::com::sun::star::awt::Key::NUMLOCK)
diff --git a/vcl/unx/gtk/window/gtkframe.cxx b/vcl/unx/gtk/window/gtkframe.cxx
index 16a703c..9ef4f33 100644
--- a/vcl/unx/gtk/window/gtkframe.cxx
+++ b/vcl/unx/gtk/window/gtkframe.cxx
@@ -213,6 +213,7 @@ static USHORT GetKeyCode( guint keyval )
             case GDK_quoteleft:	nCode = KEY_QUOTELEFT;		break;           
             case GDK_bracketleft:  nCode = KEY_BRACKETLEFT;  break;
             case GDK_bracketright: nCode = KEY_BRACKETRIGHT; break;
+            case GDK_semicolon:    nCode = KEY_SEMICOLON;   break;
             // some special cases, also see saldisp.cxx
             // - - - - - - - - - - - - -  Apollo - - - - - - - - - - - - - 0x1000
             case 0x1000FF02: // apXK_Copy
diff --git a/vcl/unx/source/app/saldisp.cxx b/vcl/unx/source/app/saldisp.cxx
index 8f79a8c..d4d6b04 100644
--- a/vcl/unx/source/app/saldisp.cxx
+++ b/vcl/unx/source/app/saldisp.cxx
@@ -1341,6 +1341,9 @@ XubString SalDisplay::GetKeyName( USHORT nKeyCode ) const
         case KEY_BRACKETRIGHT:
             nKeySym = XK_bracketright;
             break;
+        case KEY_SEMICOLON:
+            nKeySym = XK_semicolon;
+            break;
 
         default:
             nKeySym = 0;
@@ -1679,6 +1682,10 @@ USHORT SalDisplay::GetKeyCode( KeySym keysym, char*pcPrintable ) const
              nKey = KEY_BRACKETRIGHT;
              *pcPrintable = ']';
              break;
+        case XK_semicolon:
+            nKey = KEY_SEMICOLON;
+            *pcPrintable = ';';
+            break;
 //      case XK_Linefeed:
 //          *pcPrintable = '\n';
 //          break;
diff --git a/vcl/win/source/app/salinst.cxx b/vcl/win/source/app/salinst.cxx
index 0c4376b..9d85b4b 100644
--- a/vcl/win/source/app/salinst.cxx
+++ b/vcl/win/source/app/salinst.cxx
@@ -377,6 +377,7 @@ void SalData::initKeyCodeMap()
     initKey( '`', KEY_QUOTELEFT );
     initKey( '[', KEY_BRACKETLEFT );
     initKey( ']', KEY_BRACKETRIGHT );
+    initKey( ';', KEY_SEMICOLON );
 }
 
 // =======================================================================
-- 
1.7.0.1

