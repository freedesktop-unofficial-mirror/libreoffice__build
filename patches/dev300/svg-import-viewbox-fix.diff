From af101ccabccf0a17ef24aba10d78dbc0786f05a2 Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:01:59 +0200
Subject: [PATCH 490/878] svg-import-viewbox-fix.diff

---
 filter/source/svg/parserfragments.cxx |    3 ++-
 filter/source/svg/svgreader.cxx       |    1 +
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/filter/source/svg/parserfragments.cxx b/filter/source/svg/parserfragments.cxx
index 996f912..8c5eeb2 100644
--- a/filter/source/svg/parserfragments.cxx
+++ b/filter/source/svg/parserfragments.cxx
@@ -510,7 +510,8 @@ bool parseDashArray( const char* sDashArray, std::vector<double>& rOutputVector
             list_p.direct
             (
                 real_p[push_back_a(rOutputVector)],
-                ','
+                // list delimiter is either ',' or space
+                ',' | eps_p
             )
         ) >> end_p,
         //  End grammar
diff --git a/filter/source/svg/svgreader.cxx b/filter/source/svg/svgreader.cxx
index 0edcce8..6846227 100644
--- a/filter/source/svg/svgreader.cxx
+++ b/filter/source/svg/svgreader.cxx
@@ -254,6 +254,7 @@ struct AnnotatingVisitor
                 // init state. inherit defaults from parent.
                 maCurrState = maParentStates.back();
                 maCurrState.maTransform.identity();
+                maCurrState.maViewBox.reset();
 
                 // scan for style info
                 const sal_Int32 nNumAttrs( xAttributes->getLength() );
-- 
1.7.0.1

