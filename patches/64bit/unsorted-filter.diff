--- filter/source/flash/swfwriter1.cxx	21 Apr 2004 14:00:55 -0000	1.15
+++ filter/source/flash/swfwriter1.cxx	21 Jan 2005 16:49:00 -0000	1.15.40.1
@@ -872,7 +872,7 @@ sal_uInt16 Writer::defineBitmap( const B
 
 	getBitmapData( bmpSource, pImageData, pAlphaData, width, height );
 	sal_uInt32 raw_size = width * height * 4;
-	sal_uInt32 compressed_size = raw_size + (sal_uInt32)(raw_size/100) + 12;
+	uLongf compressed_size = uLongf( raw_size + (sal_uInt32)(raw_size/100) + 12 );
 	sal_uInt8 *pCompressed = new sal_uInt8[ compressed_size ];
 	
 	if(compress2(pCompressed, &compressed_size, pImageData, raw_size, Z_BEST_COMPRESSION) != Z_OK)
@@ -880,11 +880,11 @@ sal_uInt16 Writer::defineBitmap( const B
 
 	// AS: SWF files let you provide an Alpha mask for JPEG images, but we have 
 	//  to ZLIB compress the alpha channel seperately.
-	sal_uInt32 alpha_compressed_size = 0;
+	uLongf alpha_compressed_size = 0;
 	sal_uInt8 *pAlphaCompressed = NULL;
 	if (bmpSource.IsAlpha() || bmpSource.IsTransparent())
 	{
-		alpha_compressed_size = width * height + (sal_uInt32)(raw_size/100) + 12;
+		alpha_compressed_size = uLongf( width * height + (sal_uInt32)(raw_size/100) + 12 );
 		pAlphaCompressed = new sal_uInt8[ compressed_size ];
 		
 		if(compress2(pAlphaCompressed, &alpha_compressed_size, pAlphaData, width * height, Z_BEST_COMPRESSION) != Z_OK)
