--- forms/source/component/imgprod.cxx	23 Jul 2004 10:48:03 -0000	1.9
+++ forms/source/component/imgprod.cxx	19 Oct 2004 16:45:30 -0000	1.8.16.2
@@ -148,8 +148,11 @@ ErrCode ImgProdLockBytes::ReadAt( sal_uI
 {
 	if( GetStream() )
 	{
+		sal_Size	temp_read;
 		( (SvStream*) GetStream() )->ResetError();
-		const ErrCode nErr = SvLockBytes::ReadAt( nPos, pBuffer, nCount, pRead );
+		const ErrCode nErr = SvLockBytes::ReadAt( svstream_u32_to_Size(nPos), pBuffer,
+							svstream_u32_to_Size(nCount), &temp_read );
+		*pRead = svstream_Size_to_u32( temp_read );
 		( (SvStream*) GetStream() )->ResetError();
 		return nErr;
 	}
@@ -178,7 +181,15 @@ ErrCode ImgProdLockBytes::ReadAt( sal_uI
 ErrCode ImgProdLockBytes::WriteAt( sal_uInt32 nPos, const void* pBuffer, sal_uInt32 nCount, sal_uInt32* pWritten )
 {
 	if( GetStream() )
-		return SvLockBytes::WriteAt( nPos, pBuffer, nCount, pWritten );
+	{
+		ErrCode	err;
+		sal_Size	temp_written;
+
+		err = SvLockBytes::WriteAt( svstream_u32_to_Size(nPos), pBuffer,
+						svstream_u32_to_Size(nCount), &temp_written );
+		*pWritten = svstream_Size_to_u32( temp_written );
+		return err;
+	}
 	else
 	{
 		DBG_ASSERT( xStmRef.is(), "ImgProdLockBytes::WriteAt: xInputStream has no reference..." );
