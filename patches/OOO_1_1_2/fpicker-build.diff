Index: fpicker/prj/build.lst
===================================================================
RCS file: /cvs/gsl/fpicker/prj/build.lst,v
retrieving revision 1.6
diff -u -p -r1.6 build.lst
--- fpicker/prj/build.lst	14 Feb 2002 13:30:37 -0000	1.6
+++ fpicker/prj/build.lst	15 Jun 2004 09:22:42 -0000
@@ -2,4 +2,6 @@ fp	fpicker	:	rdbmaker svtools NULL
 fp	fpicker\source\win32\filepicker		nmake	-	w	fp_win32_filepicker NULL
 fp	fpicker\source\win32\folderpicker	nmake	-	w	fp_win32_folderpicker NULL
 fp  fpicker\source\win32\misc			nmake	-	w	fp_win32_misc fp_win32_filepicker.w fp_win32_folderpicker.w NULL
-fp	fpicker\util						nmake	-	w	fp_util fp_win32_filepicker.w fp_win32_misc.w fp_win32_folderpicker.w NULL
+fp	fpicker\source\unx					nmake	-	u	fp_unx_common NULL
+fp	fpicker\source\unx\kde				nmake	-	u	fp_unx_kde_filepicker NULL
+fp	fpicker\util						nmake	-	all	fp_util fp_win32_filepicker.w fp_win32_misc.w fp_win32_folderpicker.w fp_unx_common.u fp_unx_kde_filepicker.u NULL
Index: fpicker/prj/d.lst
===================================================================
RCS file: /cvs/gsl/fpicker/prj/d.lst,v
retrieving revision 1.1
diff -u -p -r1.1 d.lst
--- fpicker/prj/d.lst	28 Jun 2001 11:06:44 -0000	1.1
+++ fpicker/prj/d.lst	15 Jun 2004 09:22:42 -0000
@@ -1,4 +1,8 @@
 ..\%__SRC%\bin\*.dll %_DEST%\bin%_EXT%\*.dll
+..\%__SRC%\lib\*.lib %_DEST%\lib%_EXT%\*
+..\%__SRC%\lib\*.so %_DEST%\lib%_EXT%\*
+..\%__SRC%\bin\kdefilepicker %_DEST%\bin%_EXT%\kdefilepicker
 
 ..\source\win32\filepicker\*.xml %_DEST%\xml%_EXT%\*.xml
 ..\source\win32\folderpicker\*.xml %_DEST%\xml%_EXT%\*.xml
+..\source\unx\*.xml %_DEST%\xml%_EXT%\*.xml
Index: fpicker/util/makefile.mk
===================================================================
RCS file: /cvs/gsl/fpicker/util/makefile.mk,v
retrieving revision 1.3
diff -u -p -r1.3 makefile.mk
--- fpicker/util/makefile.mk	26 Aug 2002 14:03:30 -0000	1.3
+++ fpicker/util/makefile.mk	15 Jun 2004 09:22:43 -0000
@@ -143,6 +143,52 @@ DEF2EXPORTFILE=	exports.dxp
 # "$(GUI)"=="WNT"
 .ENDIF			
 
+# --- unx -----------------------------------------------------
+
+.IF "$(GUIBASE)" == "unx"
+
+.IF "$(ENABLE_FPICKER_KDE)" == "TRUE"
+
+SHL1TARGET=$(TARGET1)
+
+SHL1STDLIBS=$(CPPULIB)\
+			$(CPPUHELPERLIB)\
+			$(SALLIB)\
+			$(VCLLIB)\
+			$(TOOLSLIB)\
+			$(SVTOOLLIB)
+
+SHL1DEPN=
+SHL1IMPLIB=i$(SHL1TARGET)
+
+SHL1LIBS=$(SLB)$/fps.lib
+
+SHL1OBJS=$(SLOFILES)
+			
+#SHL1RES=$(RES)$/$(TARGET1).res
+SHL1DEF=$(MISC)$/$(SHL1TARGET).def
+
+DEF1NAME=$(SHL1TARGET)
+DEF1EXPORTFILE=	exports.dxp
+
+# kdefilepicker binary
+
+APP2TARGET=kdefilepicker
+
+APP2STDLIBS=\
+			$(SALLIB) \
+			$(FPICKER_KDE_LIBS) -lkio
+
+APP2OBJS=\
+			$(SLO)$/kdecommandthread.obj \
+			$(SLO)$/kdefilepicker.obj \
+			$(SLO)$/kdefilepicker.moc.obj \
+			$(SLO)$/kdefpmain.obj \
+			$(SLO)$/kdemodalityfilter.obj
+
+.ENDIF # "$(ENABLE_FPICKER_KDE)" == "TRUE"
+
+.ENDIF # "$(GUIBASE)" == "unx"
 
 .INCLUDE :  target.mk
 
