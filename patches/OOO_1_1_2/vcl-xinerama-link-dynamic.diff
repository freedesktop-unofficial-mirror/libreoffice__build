Index: vcl/unx/source/app/makefile.mk
===================================================================
--- vcl/unx/source/app/makefile.mk.orig	2004-08-13 21:12:07.124680944 +0200
+++ vcl/unx/source/app/makefile.mk	2004-08-14 01:13:03.649346528 +0200
@@ -116,6 +116,11 @@ CDEFS+=-DHAVE_LIBSN
 CFLAGS+=$(LIBSN_CFLAGS)
 .ENDIF
 
+
+.IF "$(USE_XINERAMA)" != "NO"
+CDEFS+=-DUSE_XINERAMA
+.ENDIF
+
 .IF "$(OS)$(CPU)" == "SOLARISS"
 .IF "$(COM)"!="GCC"
 SLOFILES+=$(SLO)$/getfpsols.obj
Index: vcl/unx/source/app/saldisp.cxx
===================================================================
--- vcl/unx/source/app/saldisp.cxx.orig	2004-08-13 21:12:07.142678208 +0200
+++ vcl/unx/source/app/saldisp.cxx	2004-08-14 01:13:03.670343336 +0200
@@ -235,7 +235,7 @@ extern "C" { int gethostname(char*,int);
 
 #include <X11/Xatom.h>
 #ifndef SOLARIS
-#if defined(X86) || defined(MACOSX)
+#ifdef USE_XINERAMA
 #include <X11/extensions/Xinerama.h>
 #endif
 #endif
@@ -3029,6 +3029,7 @@ void SalDisplay::GetScreenFontResolution
 
 void SalDisplay::InitXinerama()
 {
+#ifdef USE_XINERAMA
 #if defined( SOLARIS )
     // do this load on call for benefit of Solaris < 8
     rtl::OUString aLib( RTL_CONSTASCII_USTRINGPARAM( "libXext.so" ) );
@@ -3088,6 +3089,7 @@ void SalDisplay::InitXinerama()
     }
 #endif
 #endif
+#endif
 #ifdef DEBUG
     if( m_bXinerama )
     {
Index: vcl/util/makefile.mk
===================================================================
--- vcl/util/makefile.mk.orig	2004-08-14 01:12:59.544970488 +0200
+++ vcl/util/makefile.mk	2004-08-14 01:13:03.672343032 +0200
@@ -298,9 +298,13 @@ SHL1STDLIBS += -lXext -lSM -lICE -lX11
 .IF "$(USE_XPRINT)" == "TRUE"
 SHL1STDLIBS += -lXp -lXext -lSM -lICE -lX11
 .ELSE
-.IF "$(CPU)" == "I"
+.IF "$(USE_XINERAMA)" != "NO"
+.IF "$(XINERAMA_LINK)" == "dynamic"
+SHL1STDLIBS += -lXinerama
+.ELSE
 SHL1STDLIBS += -Wl,-Bstatic -lXinerama -Wl,-Bdynamic 
-.ENDIF
+.ENDIF          # $(XINERAMA_LINK)
+.ENDIF          # $(USE_XINERAMA)
 SHL1STDLIBS += -lXext -lSM -lICE -lX11
 .ENDIF          # "$(USE_XPRINT)" == "TRUE"
 .ENDIF          # "$(OS)"=="SOLARIS"
