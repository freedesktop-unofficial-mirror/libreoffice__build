Index: instsetoo/util/makefile.mk
===================================================================
RCS file: /cvs/installation/instsetoo/util/makefile.mk,v
retrieving revision 1.18.4.2
diff -u -p -u -r1.18.4.2 makefile.mk
--- instsetoo/util/makefile.mk	9 Feb 2004 10:47:12 -0000	1.18.4.2
+++ instsetoo/util/makefile.mk	15 Mar 2004 23:04:28 -0000
@@ -92,21 +92,29 @@ SEARCH_DIR=r:\solenv\inst\ooo\$(OUTPATH)
 ALLTAR : pack
 
 .IF "$(alllangext)"!=""
-
-.IF "$(BUILD_SPECIAL)"!=""  
+.IF "$(BUILD_MINIMAL)"!=""
+pack: $(foreach,i,$(alllangext) packnofiles_$i) re_clean_$(BUILD_MINIMAL) pack_$(BUILD_MINIMAL)
+.ELSE
 .IF "$(OOO_RELEASE_BUILD)"==""
 pack: pack_01
 .ELSE
 pack: $(foreach,i,$(alllangext) pack_$i)
 .ENDIF
-.ELSE
-pack: $(foreach,i,$(alllangext) pack_$i)
 .ENDIF
+LZIP_FLAGS=-p ${SEARCH_DIR} -p ${SHARED_COM_SDK_PATH} $(LZIPFLAGS) -f openoffice.lst -n OfficeOSL 
+
+clean_%:
+	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/clean_//)$/normal
+	+-$(RM) $(INSTALLDIR)$/$(@:s/clean_//)$/normal$/*	
+re_clean_%:
+	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/re_clean_//)$/normal
+	+-$(RM) $(INSTALLDIR)$/$(@:s/re_clean_//)$/normal$/*
+
+pack_%: clean_%
+	+-$(LZIP) $(LZIP_FLAGS) -l $(@:s/pack_//) -d $(INSTALLDIR)$/$(@:s/pack_//) 
 
-pack_%:
-	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/pack_//)$/normal
-	+-$(RM) $(INSTALLDIR)$/$(@:s/pack_//)$/normal$/*
-	+-$(LZIP) -p ${SEARCH_DIR} $(LZIPFLAGS) -l $(@:s/pack_//) -f openoffice.lst -d $(INSTALLDIR)$/$(@:s/pack_//) -n OfficeOSL 
+packnofiles_%: clean_%
+	+-$(LZIP) $(LZIP_FLAGS) -O -l $(@:s/packnofiles_//) -d $(INSTALLDIR)$/$(@:s/packnofiles_//)
 
 test:
 	+-$(LZIP) $(LZIPFLAGS) -p ${SEARCH_DIR} -l 01 -f openoffice.lst -o -n OfficeOSL 
