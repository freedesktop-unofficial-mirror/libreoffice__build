From dce024717a7cb9613a46aa85f607f078fbd0935e Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:02:49 +0200
Subject: [PATCH 535/878] unittesting-bridges.diff

---
 bridges/prj/tests.lst                              |    9 +++++++++
 bridges/test/java_uno/nativethreadpool/Relay.java  |    2 +-
 .../testnativethreadpoolclient.cxx                 |    6 +++---
 .../testnativethreadpoolserver.cxx                 |    4 ++--
 bridges/test/java_uno/nativethreadpool/types.idl   |    2 +-
 5 files changed, 16 insertions(+), 7 deletions(-)
 create mode 100644 bridges/prj/tests.lst

diff --git a/bridges/prj/tests.lst b/bridges/prj/tests.lst
new file mode 100644
index 0000000..fb363d6
--- /dev/null
+++ b/bridges/prj/tests.lst
@@ -0,0 +1,9 @@
+#does not build: br   bridges\test\com\sun\star\lib\uno\bridges\java_remote nmake - all br_test_com_sun_star_lib_uno_bridges_java_remote NULL
+#does not build: br   bridges\test\com\sun\star\lib                      nmake - all br_test_com_sun_star_lib NULL
+br   bridges\test                                       nmake - all br_test NULL
+br   bridges\test\inter_libs_exc                        nmake - all br_test_inter_libs_exc NULL
+#does not build: br   bridges\test\java_uno\acquire                      nmake - all br_test_java_uno_acquire NULL
+#does not build: br   bridges\test\java_uno\any                          nmake - all br_test_java_uno_any NULL
+#does not build: br   bridges\test\java_uno\equals                       nmake - all br_test_java_uno_equals NULL
+#depends on javaunohelper: br   bridges\test\java_uno\nativethreadpool             nmake - all br_test_java_uno_nativethreadpool NULL
+#does not build: br   bridges\test\performance                           nmake - all br_test_performance NULL
diff --git a/bridges/test/java_uno/nativethreadpool/Relay.java b/bridges/test/java_uno/nativethreadpool/Relay.java
index 50e198a..b55d115 100644
--- a/bridges/test/java_uno/nativethreadpool/Relay.java
+++ b/bridges/test/java_uno/nativethreadpool/Relay.java
@@ -98,7 +98,7 @@ public final class Relay implements XRelay, XSource {
         }
     }
 
-    public int get() {
+    public long get() {
         return source.get();
     }
 
diff --git a/bridges/test/java_uno/nativethreadpool/testnativethreadpoolclient.cxx b/bridges/test/java_uno/nativethreadpool/testnativethreadpoolclient.cxx
index 1964a73..14803c6 100644
--- a/bridges/test/java_uno/nativethreadpool/testnativethreadpoolclient.cxx
+++ b/bridges/test/java_uno/nativethreadpool/testnativethreadpoolclient.cxx
@@ -74,7 +74,7 @@ private:
     virtual sal_Int32 SAL_CALL run(css::uno::Sequence< rtl::OUString > const &)
         throw (css::uno::RuntimeException);
 
-    virtual sal_Int32 SAL_CALL get() throw (css::uno::RuntimeException);
+    virtual sal_Int64 SAL_CALL get() throw (css::uno::RuntimeException);
 
     css::uno::Reference< css::uno::XComponentContext > context;
     osl::ThreadData data;
@@ -142,8 +142,8 @@ sal_Int32 Client::run(css::uno::Sequence< rtl::OUString > const &)
     return success ? 0 : 1;
 }
 
-sal_Int32 Client::get() throw (css::uno::RuntimeException) {
-    return reinterpret_cast< sal_Int32 >(data.getData());
+sal_Int64 Client::get() throw (css::uno::RuntimeException) {
+    return static_cast< sal_Int64 >(reinterpret_cast< sal_IntPtr >(data.getData()));
 }
 
 css::uno::Reference< css::uno::XInterface > SAL_CALL create(
diff --git a/bridges/test/java_uno/nativethreadpool/testnativethreadpoolserver.cxx b/bridges/test/java_uno/nativethreadpool/testnativethreadpoolserver.cxx
index 0e3b30e..f82f1d6 100644
--- a/bridges/test/java_uno/nativethreadpool/testnativethreadpoolserver.cxx
+++ b/bridges/test/java_uno/nativethreadpool/testnativethreadpoolserver.cxx
@@ -66,12 +66,12 @@ public:
 private:
     virtual ~Server() {}
 
-    virtual sal_Int32 SAL_CALL get() throw (css::uno::RuntimeException);
+    virtual sal_Int64 SAL_CALL get() throw (css::uno::RuntimeException);
 
     css::uno::Reference< css::uno::XComponentContext > context;
 };
 
-sal_Int32 Server::get() throw (css::uno::RuntimeException) {
+sal_Int64 Server::get() throw (css::uno::RuntimeException) {
     css::uno::Reference< css::lang::XMultiComponentFactory > factory(
         context->getServiceManager());
     if (!factory.is()) {
diff --git a/bridges/test/java_uno/nativethreadpool/types.idl b/bridges/test/java_uno/nativethreadpool/types.idl
index 36ca44a..b675a10 100644
--- a/bridges/test/java_uno/nativethreadpool/types.idl
+++ b/bridges/test/java_uno/nativethreadpool/types.idl
@@ -30,7 +30,7 @@
 module test { module javauno { module nativethreadpool {
 
 interface XSource: com::sun::star::uno::XInterface {
-    long get();
+    hyper get();
 };
 
 interface XRelay: com::sun::star::uno::XInterface {
-- 
1.7.0.1

