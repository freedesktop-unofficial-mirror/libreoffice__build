From b242bc6f1d333efd7c6b47549da62f6f35e15fbe Mon Sep 17 00:00:00 2001
From: Jan Holesovsky <kendy@suse.cz>
Date: Fri, 14 May 2010 17:02:59 +0200
Subject: [PATCH 542/878] unittesting-cppuhelper.diff

---
 cppuhelper/prj/tests.lst                   |   11 +++++++++++
 cppuhelper/qa/propertysetmixin/makefile.mk |    6 +++++-
 2 files changed, 16 insertions(+), 1 deletions(-)
 create mode 100644 cppuhelper/prj/tests.lst

diff --git a/cppuhelper/prj/tests.lst b/cppuhelper/prj/tests.lst
new file mode 100644
index 0000000..c02e4e7
--- /dev/null
+++ b/cppuhelper/prj/tests.lst
@@ -0,0 +1,11 @@
+ch   cppuhelper\qa\ifcontainer                          nmake - all ch_qa_ifcontainer ch_source NULL
+#test fails: ch   cppuhelper\qa\propertysetmixin                     nmake - all ch_qa_propertysetmixin ch_source NULL
+ch   cppuhelper\qa\unourl                               nmake - all ch_qa_unourl ch_source NULL
+#segfaults: ch   cppuhelper\qa\weak                                 nmake - all ch_qa_weak ch_source NULL
+
+# older tests:
+ch   cppuhelper\test\bootstrap                          nmake - all ch_test_bootstrap ch_source NULL
+#does not compile: ch   cppuhelper\test                                    nmake - all ch_test NULL
+ch   cppuhelper\test\loader                             nmake - all ch_test_loader ch_test_testcmp ch_source NULL
+ch   cppuhelper\test\testcmp                            nmake - all ch_test_testcmp ch_source NULL
+#does not link: ch   cppuhelper\test\testlib                            nmake - all ch_test_testlib NULL
diff --git a/cppuhelper/qa/propertysetmixin/makefile.mk b/cppuhelper/qa/propertysetmixin/makefile.mk
index 9e116e2..3b7ef11 100644
--- a/cppuhelper/qa/propertysetmixin/makefile.mk
+++ b/cppuhelper/qa/propertysetmixin/makefile.mk
@@ -127,7 +127,11 @@ $(MISC)$/$(TARGET)$/$(TARGET).uno.jar: $(JAVACLASSFILES) \
     jar cfm $@ manifest -C $(CLASSDIR) test/cppuhelper/propertysetmixin
 
 test .PHONY: $(SHL1TARGETN) $(MISC)$/$(TARGET)$/uno.rdb
-.IF "$(GUI)" == "WNT"
+.IF "$(USE_SHELL)" == "bash"
+    CLASSPATH=$(CLASSPATH) \
+    URE_INTERNAL_JAVA_DIR=$(MY_URE_INTERNAL_JAVA_DIR) \
+    testshl2 $(SHL1TARGETN) -forward "$(MISC)$/$(TARGET)$/uno.rdb#$(SOLARLIBDIR)"
+.ELIF "$(GUI)" == "WNT"
     set CLASSPATH=$(CLASSPATH) && \
     set URE_INTERNAL_JAVA_DIR=$(MY_URE_INTERNAL_JAVA_DIR) && \
     testshl2 $(SHL1TARGETN) -forward "$(MISC)$/$(TARGET)$/uno.rdb#$(SOLARBINDIR)"
-- 
1.7.0.1

