--- solenv/bin/deliver.pl
+++ solenv/bin/deliver.pl
@@ -798,6 +798,21 @@
     }
 }
 
+sub slurp {
+    my $from = shift;
+    my $save = $/;
+    my $FROM;
+
+    undef $/;
+    open ($FROM, "<$from");
+    # slurp whole file in one big string
+    my $content = <$FROM>;
+    close ($FROM);
+    $/ = $save;
+
+    return $content;
+}
+
 sub hedabu_if_newer 
 {
     my $from = shift;
@@ -821,13 +836,7 @@
             return 0;
         }
         
-        my $save = $/;
-        undef $/;
-        open(FROM, "<$from");
-        # slurp whole file in one big string
-        my $content = <FROM>;
-        close(FROM);
-        $/ = $save;
+        my $content = slurp ($from);
 
         # strip any carriage returns
         $content =~ tr/\r//d;
@@ -843,6 +852,16 @@
         # __SOLAR_PRIVATE hack
         $content =~ s/#if _SOLAR__PRIVATE/#if 0 \/\/ _SOLAR__PRIVATE/g;
 
+	my $to_content = slurp ("$to");
+
+	if (length ($content) == length ($to_content) &&
+	    $content eq $to_content) {
+	    print "HEDABU: skipping identical header $to\n";
+	    return 1;
+	} else {
+	    print "Header content different $a $b\n";
+	}
+
         open(TO, ">$to");
         print TO $content;
         close(TO);
