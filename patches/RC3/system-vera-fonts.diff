Index: bitstream_vera_fonts/makefile.mk
===================================================================
RCS file: /cvs/external/addons/bitstream_vera_fonts/makefile.mk,v
retrieving revision 1.1
diff -u -r1.1 makefile.mk
--- bitstream_vera_fonts/makefile.mk	28 May 2003 13:24:47 -0000	1.1
+++ bitstream_vera_fonts/makefile.mk	13 Aug 2003 07:07:07 -0000
@@ -69,6 +69,8 @@
 
 .INCLUDE :	settings.mk
 
+.IF "$(WITH_FONTS)"!="NO"
+
 # --- Files --------------------------------------------------------
 
 TARFILE_NAME=ttf-bitstream-vera-1.10
@@ -101,4 +103,8 @@
 	$(REMOVE_PACKAGE_COMMAND)
 	+$(TOUCH) $(MISC)$/remove_build.flag
 
+.ELSE
+
+all:
 
+.ENDIF # "$(WITH_FONTS)"!="NO"
cvs server: Diffing download
cvs server: Diffing prj
Index: config_office/configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.55.2.5
diff -u -r1.55.2.5 configure.in
--- config_office/configure.in	29 Jul 2003 14:30:12 -0000	1.55.2.5
+++ config_office/configure.in	12 Aug 2003 21:40:48 -0000
@@ -46,4 +46,10 @@
 ],,)
+AC_ARG_WITH(fonts,
+[  --without-fonts        Removes Bitstream Vera fonts from
+                          openoffice.org installation set, for people building
+                          for specific distributions where the fonts are known 
+                          to be already available
+],,)
 AC_ARG_ENABLE(gcc3,
 [  --enable-gcc3           Deprecated: Now has no effect, checks compiler version
 ],,)
@@ -1460,3 +1460,16 @@
  
+dnl ===================================================================
+dnl Test whether to include fonts
+dnl ===================================================================
+AC_MSG_CHECKING([whether to include Bitstream Vera fonts])
+if test "$with_fonts" != "no" ; then
+  AC_MSG_RESULT([yes])
+  WITH_FONTS=YES
+else
+  AC_MSG_RESULT([no])
+  WITH_FONTS=NO
+fi
+AC_SUBST(WITH_FONTS)
+ 
 dnl ===================================================================
 dnl Test for the presence of Ant and that it works
Index: config_office/set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.10.2.8
diff -u -r1.10.2.8 set_soenv.in
--- config_office/set_soenv.in	29 Jul 2003 14:30:13 -0000	1.10.2.8
+++ config_office/set_soenv.in	12 Aug 2003 21:40:53 -0000
@@ -1714,6 +1714,7 @@
 ToFile( "WITH_LIBSN",        "@WITH_LIBSN@",       "e" );
 ToFile( "LIBSN_CFLAGS",      "@LIBSN_CFLAGS@",     "e" );
 ToFile( "LIBSN_LIBS",        "@LIBSN_LIBS@",       "e" );
+ToFile( "WITH_FONTS",        "@WITH_FONTS@",       "e" );
 ToFile( "GXX_INCLUDE_PATH",  "@GXX_INCLUDE_PATH@", "e" );
 ToFile( "COMMON_BUILD_TOOLS",$COMMON_BUILD_TOOLS,  "e" );
 if ($platform ne "$Winnt")
Index: scp/source/global/setupzip.scp
===================================================================
RCS file: /cvs/installation/scp/source/global/setupzip.scp,v
retrieving revision 1.112
diff -u -r1.112 setupzip.scp
--- scp/source/global/setupzip.scp	16 Jul 2003 18:15:06 -0000	1.112
+++ scp/source/global/setupzip.scp	12 Aug 2003 21:34:37 -0000
@@ -571,7 +571,7 @@
 End
 #endif
 
-#ifdef OSL_PRODUCT
+#if defined(OSL_PRODUCT) && defined(WITH_FONTS)
 STD_FONTUNX_FILE( GID_FILE_FNT_VERA, Vera.ttf, Vera Sans)
 #endif
 
cvs server: Diffing scp/source/gnome
cvs server: Diffing scp/source/grafikfilter
cvs server: Diffing scp/source/impress
cvs server: Diffing scp/source/javafilter
cvs server: Diffing scp/source/kde
cvs server: Diffing scp/source/lingu
cvs server: Diffing scp/source/math
cvs server: Diffing scp/source/office
Index: scp/source/office/files.scp
===================================================================
RCS file: /cvs/installation/scp/source/office/files.scp,v
retrieving revision 1.367
diff -u -r1.367 files.scp
--- scp/source/office/files.scp	17 Jul 2003 08:54:46 -0000	1.367
+++ scp/source/office/files.scp	12 Aug 2003 21:34:43 -0000
@@ -2609,11 +2620,14 @@
 
 STD_FONTUNX_FILE( GID_FILE_FNT_STARSYMB, starsymb.ttf, StarSymbol)
 
+#else
+
+STD_FONTUNX_FILE( GID_FILE_FNT_OPENSYMB, opens___.ttf, OpenSymbol)
+
 #endif
 
-#ifdef OSL_PRODUCT
+#if defined(OSL_PRODUCT) && defined(WITH_FONTS)
 
-STD_FONTUNX_FILE( GID_FILE_FNT_OPENSYMB, opens___.ttf, OpenSymbol)
 STD_FONTUNX_FILE( GID_FILE_FNT_VERABD, VeraBd.ttf, Vera Sans Bold)
 STD_FONTUNX_FILE( GID_FILE_FNT_VERABI, VeraBI.ttf, Vera Sans Bold Oblique)
 STD_FONTUNX_FILE( GID_FILE_FNT_VERAIT, VeraIt.ttf, Vera Sans Oblique)
Index: scp/source/office/makefile.mk
===================================================================
RCS file: /cvs/installation/scp/source/office/makefile.mk,v
retrieving revision 1.12
diff -u -r1.12 makefile.mk
--- scp/source/office/makefile.mk	16 Jul 2003 18:17:16 -0000	1.12
+++ scp/source/office/makefile.mk	12 Aug 2003 21:34:44 -0000
@@ -72,5 +72,9 @@
 .ENDIF
 
+.IF "$(WITH_FONTS)"!="NO"
+SCPDEFS+=-DWITH_FONTS
+.ENDIF
+
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :  svpre.mk
