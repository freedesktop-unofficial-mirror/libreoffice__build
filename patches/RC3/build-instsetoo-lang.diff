Index: instsetoo/util/makefile.mk
===================================================================
RCS file: /cvs/installation/instsetoo/util/makefile.mk,v
retrieving revision 1.15
diff -u -p -u -r1.15 makefile.mk
--- instsetoo/util/makefile.mk	30 Jun 2003 17:46:49 -0000	1.15
+++ instsetoo/util/makefile.mk	18 Aug 2003 10:42:50 -0000
@@ -101,16 +101,30 @@ ALLTAR : pack
 
 .IF "$(alllangext)"!=""
 
+.IF "$(BUILD_MINIMAL)"!=""
+pack: $(foreach,i,$(alllangext) packnofiles_$i) re_clean_$(BUILD_MINIMAL) pack_$(BUILD_MINIMAL)
+.ELSE
 .IF "$(BUILD_SPECIAL)"!=""
 pack: pack_01 
 .ELSE
 pack: $(foreach,i,$(alllangext) pack_$i)
 .ENDIF
+.ENDIF
+
+LZIP_FLAGS=-p ${SEARCH_DIR} -p ${SHARED_COM_SDK_PATH} $(LZIPFLAGS) -f openoffice.lst -n OfficeOSL 
 
-pack_%:
-	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/pack_//)$/normal
-	+-$(RM) $(INSTALLDIR)$/$(@:s/pack_//)$/normal$/*
-	+-$(LZIP) -p ${SEARCH_DIR} -p ${SHARED_COM_SDK_PATH} $(LZIPFLAGS) -l $(@:s/pack_//) -f openoffice.lst -d $(INSTALLDIR)$/$(@:s/pack_//) -n OfficeOSL 
+clean_%:
+	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/clean_//)$/normal
+	+-$(RM) $(INSTALLDIR)$/$(@:s/clean_//)$/normal$/*	
+re_clean_%:
+	+-$(MKDIRHIER) $(INSTALLDIR)$/$(@:s/re_clean_//)$/normal
+	+-$(RM) $(INSTALLDIR)$/$(@:s/re_clean_//)$/normal$/*
+
+pack_%: clean_%
+	+-$(LZIP) $(LZIP_FLAGS) -l $(@:s/pack_//) -d $(INSTALLDIR)$/$(@:s/pack_//) 
+
+packnofiles_%: clean_%
+	+-$(LZIP) $(LZIP_FLAGS) -O -l $(@:s/packnofiles_//) -d $(INSTALLDIR)$/$(@:s/packnofiles_//)
 
 test:
 	+-$(LZIP) $(LZIPFLAGS) -p ${SEARCH_DIR} -p ${SHARED_COM_SDK_PATH} -l 01 -f openoffice.lst -o -n OfficeOSL 
@@ -120,5 +134,3 @@ pack:
 	@+echo cannot pack nothing...
 
 .ENDIF			# "$(alllangext)"!=""
-
-	
