Index: STLport-4.0.patch
===================================================================
RCS file: /cvs/external/stlport/STLport-4.0.patch,v
retrieving revision 1.5.20.1
retrieving revision 1.6
diff -u -p -u -r1.5.20.1 -r1.6
Index: STLport-4.5-0119.patch
===================================================================
RCS file: /cvs/external/stlport/STLport-4.5-0119.patch,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -p -u -r1.2 -r1.3
--- stlport/STLport-4.5-0119.patch	27 Mar 2003 11:54:46 -0000	1.2
+++ stlport/STLport-4.5-0119.patch	7 Oct 2003 11:54:24 -0000	1.3
@@ -1,7 +1,11 @@
 *** misc/STLport-4.5-0119/src/vc7.mak	Sun Jul 29 22:02:16 2001
---- misc/build/STLport-4.5-0119/src/vc7.mak	Tue Feb 25 09:56:27 2003
+--- misc/build/STLport-4.5-0119/src/vc7.mak	Mon Sep 15 16:43:15 2003
 ***************
-*** 10,16 ****
+*** 6,20 ****
+  CC=cl.exe
+  RC=rc
+  
+  LIB_BASENAME=stlport_vc7
   COMP=VC7
   
   # EXTRA_COMMON_FLAGS=/D "_MBCS"
@@ -9,7 +13,19 @@
   EXTRA_DEBUG_FLAGS=
   EXTRA_NDEBUG_FLAGS=
   
---- 10,16 ----
+! all: platform all_static all_dynamic 
+  
+  !INCLUDE vc_common.mak
+  
+--- 6,24 ----
+  CC=cl.exe
+  RC=rc
+  
++ !IF "$(COMEX)"=="10"
++ LIB_BASENAME=stlport_vc71
++ !ELSE
+  LIB_BASENAME=stlport_vc7
++ !ENDIF
   COMP=VC7
   
   # EXTRA_COMMON_FLAGS=/D "_MBCS"
@@ -17,11 +33,102 @@
   EXTRA_DEBUG_FLAGS=
   EXTRA_NDEBUG_FLAGS=
   
+! all: platform all_static all_dynamic
+  
+  !INCLUDE vc_common.mak
+  
+*** misc/STLport-4.5-0119/stlport/config/stl_msvc.h	Sat Dec 28 07:12:58 2002
+--- misc/build/STLport-4.5-0119/stlport/config/stl_msvc.h	Mon Sep 15 16:40:36 2003
+***************
+*** 66,75 ****
+  #   define _STLP_DEFAULTCHAR __stl_char
+  #  endif /* (_STLP_MSVC < 1100 ) */
+  
+! #  define _STLP_NO_TYPENAME_ON_RETURN_TYPE 1 
+  //  using ::func_name results in ambiguity
+  
+! # if (_STLP_MSVC <= 1300) 
+  
+  // boris : not defining this macro for SP5 causes other problems
+  // #  if !defined (_MSC_FULL_VER) || (_MSC_FULL_VER < 12008804 )
+--- 66,80 ----
+  #   define _STLP_DEFAULTCHAR __stl_char
+  #  endif /* (_STLP_MSVC < 1100 ) */
+  
+! # if (_STLP_MSVC <= 1300)
+! #  define _STLP_NO_TYPENAME_ON_RETURN_TYPE 1
+! # endif
+! # if (_STLP_MSVC > 1300)
+! #    define _STLP_NO_METHOD_SPECIALIZATION 1
+! # endif
+  //  using ::func_name results in ambiguity
+  
+! # if (_STLP_MSVC <= 1310)
+  
+  // boris : not defining this macro for SP5 causes other problems
+  // #  if !defined (_MSC_FULL_VER) || (_MSC_FULL_VER < 12008804 )
+***************
+*** 94,100 ****
+  # endif /* _STLP_MSVC */
+  
+  
+! # if (_MSC_VER <= 1300) 
+  
+  #  define _STLP_VENDOR_GLOBAL_CSTD
+  // They included the necessary coding,
+--- 99,105 ----
+  # endif /* _STLP_MSVC */
+  
+  
+! # if (_MSC_VER <= 1310)
+  
+  #  define _STLP_VENDOR_GLOBAL_CSTD
+  // They included the necessary coding,
+***************
+*** 129,135 ****
+  # if defined (_STLP_MSVC) && ( _STLP_MSVC < 1200 ) /* VC++ 6.0 */
+  // #  define _STLP_NO_MEMBER_TEMPLATES 1
+  // #  define _STLP_NO_EXPLICIT_FUNCTION_TMPL_ARGS 1
+! #  define _STLP_NON_TYPE_TMPL_PARAM_BUG 1 
+  #  define _STLP_THROW_RETURN_BUG 1
+  # endif
+  
+--- 134,140 ----
+  # if defined (_STLP_MSVC) && ( _STLP_MSVC < 1200 ) /* VC++ 6.0 */
+  // #  define _STLP_NO_MEMBER_TEMPLATES 1
+  // #  define _STLP_NO_EXPLICIT_FUNCTION_TMPL_ARGS 1
+! #  define _STLP_NON_TYPE_TMPL_PARAM_BUG 1
+  #  define _STLP_THROW_RETURN_BUG 1
+  # endif
+  
+***************
+*** 178,185 ****
+  # ifdef __ICL
+  #  define _STLP_LIB_BASENAME "stlport_icl"
+  # else
+! # if (_MSC_VER >= 1300) 
+  #   define _STLP_LIB_BASENAME "stlport_vc7"
+  # elif (_MSC_VER >= 1200)
+  //#   ifdef _UNICODE
+  //#    define _STLP_LIB_BASENAME "stlport_vc6_unicode"
+--- 183,194 ----
+  # ifdef __ICL
+  #  define _STLP_LIB_BASENAME "stlport_icl"
+  # else
+! # if (_MSC_VER >= 1300)
+! #  if (_MSC_VER == 1300)
+  #   define _STLP_LIB_BASENAME "stlport_vc7"
++ #  else
++ #   define _STLP_LIB_BASENAME "stlport_vc71"
++ # endif
+  # elif (_MSC_VER >= 1200)
+  //#   ifdef _UNICODE
+  //#    define _STLP_LIB_BASENAME "stlport_vc6_unicode"
 *** misc/STLport-4.5-0119/stlport/list	Wed Apr 10 05:55:34 2002
---- misc/build/STLport-4.5-0119/stlport/list	Tue Feb 25 09:56:27 2003
+--- misc/build/STLport-4.5-0119/stlport/list	Mon Sep 15 16:40:36 2003
 ***************
-*** 37,43 ****
---- 37,50 ----
+*** 37,42 ****
+--- 37,49 ----
   
   #ifndef _STLP_INTERNAL_LIST_H
   # include <stl/_list.h>
@@ -31,13 +138,12 @@
 + _STLP_EXPORT_TEMPLATE_CLASS allocator<void*>;
 + # endif
 + _STLP_END_NAMESPACE
-  #endif
 + #endif
+  #endif
   
   #if defined (_STLP_WHOLE_VENDOR_STD)
-  # include _STLP_NATIVE_HEADER(list)
 *** misc/STLport-4.5-0119/stlport/stl/_hashtable.h	Thu Sep 12 22:46:59 2002
---- misc/build/STLport-4.5-0119/stlport/stl/_hashtable.h	Wed Feb  5 14:01:28 2003
+--- misc/build/STLport-4.5-0119/stlport/stl/_hashtable.h	Mon Sep 15 16:40:36 2003
 ***************
 *** 9,21 ****
    * Copyright (c) 1997
