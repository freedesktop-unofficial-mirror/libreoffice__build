--- solenv/inc/libs.mk.system-zlib	2003-08-25 07:49:17.000000000 -0400
+++ solenv/inc/libs.mk	2003-08-25 08:07:01.000000000 -0400
@@ -173,7 +173,7 @@ LINGULIB=$(HM2LIBST)
 LNGLIB=-llng$(OFFICEUPD)$(DLLPOSTFIX)
 EXPAT3RDLIB=-lexpat_xmlparse -lexpat_xmltok
 EXPATASCII3RDLIB=-lascii_expat_xmlparse -lexpat_xmltok
-ZLIB3RDLIB=-lzlib
+ZLIB3RDLIB=-lz
 JPEG3RDLIB=-ljpeglib
 NEON3RDLIB=-lneon
 CURLLIB=-lcurl
--- tools/prj/build.lst.system-zlib	2003-04-24 09:27:35.000000000 -0400
+++ tools/prj/build.lst	2003-08-25 08:07:17.000000000 -0400
@@ -1,4 +1,4 @@
-tl	tools	:	cppu external offuh vos zlib expat ucbhelper NULL
+tl	tools	:	cppu external offuh vos expat ucbhelper NULL
 tl	tools								usr1	-	all	tl_mkout NULL
 tl	tools\bootstrp\isdll				get		-	all	tl_bsisdll NULL
 tl	tools\bootstrp\addexes				get		-	all	tl_bsexes NULL
--- tools/source/zcodec/zcodec.cxx.system-zlib	2000-09-18 13:03:10.000000000 -0400
+++ tools/source/zcodec/zcodec.cxx	2003-08-25 08:07:01.000000000 -0400
@@ -63,7 +63,7 @@
 #include "stream.hxx"
 #endif
 #ifndef _ZLIB_H
-#include "zlib/zlib.h"
+#include "zlib.h"
 #endif 
 #ifndef _ZCODEC_HXX
 #include "zcodec.hxx"
--- package/source/zipapi/Adler32.cxx.system-zlib	2001-11-15 15:07:35.000000000 -0500
+++ package/source/zipapi/Adler32.cxx	2003-08-25 08:07:04.000000000 -0400
@@ -62,7 +62,7 @@
 #include <Adler32.hxx>
 #endif
 #ifndef _ZLIB_H
-#include <external/zlib/zlib.h>
+#include <zlib.h>
 #endif
 
 /**
--- package/source/zipapi/CRC32.cxx.system-zlib	2001-12-04 12:48:19.000000000 -0500
+++ package/source/zipapi/CRC32.cxx	2003-08-25 08:07:04.000000000 -0400
@@ -62,7 +62,7 @@
 #include <CRC32.hxx>
 #endif
 #ifndef _ZLIB_H
-#include <external/zlib/zlib.h>
+#include <zlib.h>
 #endif
 #ifndef _PACKAGE_CONSTANTS_HXX_
 #include <PackageConstants.hxx>
--- package/source/zipapi/Deflater.cxx.system-zlib	2001-11-15 15:16:11.000000000 -0500
+++ package/source/zipapi/Deflater.cxx	2003-08-25 08:07:04.000000000 -0400
@@ -62,7 +62,7 @@
 #include <Deflater.hxx>
 #endif
 #ifndef _ZLIB_H
-#include <external/zlib/zlib.h>
+#include <zlib.h>
 #endif
 #ifndef _VOS_DIAGNOSE_H_
 #include <vos/diagnose.hxx>
@@ -150,7 +150,7 @@ sal_Int32 Deflater::doDeflateBytes (uno:
 		pStream->avail_in  = nLength;
 		pStream->avail_out = nNewLength;
 
-		nResult = z_deflateParams(pStream, nLevel, nStrategy);
+		nResult = deflateParams(pStream, nLevel, nStrategy);
 		switch (nResult)
 		{
 			case Z_OK:
@@ -174,7 +174,7 @@ sal_Int32 Deflater::doDeflateBytes (uno:
 		pStream->avail_in  = nLength;
 		pStream->avail_out = nNewLength;
 
-		nResult = z_deflate(pStream, bFinish ? Z_FINISH : Z_NO_FLUSH);
+		nResult = deflate(pStream, bFinish ? Z_FINISH : Z_NO_FLUSH);
 		switch (nResult)
 		{
 			case Z_STREAM_END:
@@ -220,7 +220,7 @@ void SAL_CALL Deflater::setDictionarySeg
 	{
 		// do error handling
 	}
-	sal_Int32 nResult = z_deflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray()+nOffset, nLength);
+	sal_Int32 nResult = deflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray()+nOffset, nLength);
 }
 void SAL_CALL Deflater::setDictionary( const uno::Sequence< sal_Int8 >& rBuffer ) 
 {
@@ -230,7 +230,7 @@ void SAL_CALL Deflater::setDictionary( c
 		VOS_DEBUG_ONLY("No stream!");
 		
 	}
-	sal_Int32 nResult = z_deflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray(), rBuffer.getLength());
+	sal_Int32 nResult = deflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray(), rBuffer.getLength());
 }
 void SAL_CALL Deflater::setStrategy( sal_Int32 nNewStrategy ) 
 {
@@ -295,7 +295,7 @@ sal_Int32 SAL_CALL Deflater::getTotalOut
 }
 void SAL_CALL Deflater::reset(  ) 
 {
-	z_deflateReset(pStream);
+	deflateReset(pStream);
 	bFinish = sal_False;
 	bFinished = sal_False;
 	nOffset = nLength = 0;
@@ -304,7 +304,7 @@ void SAL_CALL Deflater::end(  ) 
 {
 	if (pStream != NULL)
 	{
-		z_deflateEnd(pStream);
+		deflateEnd(pStream);
 		delete pStream;
 	}
 	pStream = NULL;
--- package/source/zipapi/Inflater.cxx.system-zlib	2001-11-15 15:17:02.000000000 -0500
+++ package/source/zipapi/Inflater.cxx	2003-08-25 08:07:04.000000000 -0400
@@ -62,7 +62,7 @@
 #include <Inflater.hxx>
 #endif
 #ifndef _ZLIB_H
-#include <external/zlib/zlib.h>
+#include <zlib.h>
 #endif
 #ifndef _VOS_DIAGNOSE_H_
 #include <vos/diagnose.hxx>
@@ -133,7 +133,7 @@ void SAL_CALL Inflater::setDictionarySeg
 	{
 		// do error handling
 	}
-	z_inflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray() + nNewOffset, 
+	inflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray() + nNewOffset, 
 				  nNewLength);
 }
 
@@ -143,7 +143,7 @@ void SAL_CALL Inflater::setDictionary( c
 	{
 		// do error handling
 	}
-	z_inflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray(), 
+	inflateSetDictionary(pStream, (const unsigned char*)rBuffer.getConstArray(), 
 				   rBuffer.getLength());
 }
 
@@ -202,7 +202,7 @@ sal_Int32 SAL_CALL Inflater::getTotalOut
 
 void SAL_CALL Inflater::reset(  ) 
 {
-	z_inflateReset(pStream);
+	inflateReset(pStream);
 	bFinish = bNeedDict = bFinished = sal_False;
 	nOffset = nLength = 0;
 }
@@ -211,7 +211,7 @@ void SAL_CALL Inflater::end(  ) 
 {
 	if (pStream != NULL)
 	{
-		z_inflateEnd(pStream);
+		inflateEnd(pStream);
 		delete pStream;
 	}
 	pStream = NULL;
@@ -225,7 +225,7 @@ sal_Int32 Inflater::doInflateBytes (Sequ
 	pStream->next_out  = reinterpret_cast < unsigned char* > ( rBuffer.getArray() + nNewOffset );
 	pStream->avail_out = nNewLength;
 
-	nResult = ::z_inflate(pStream, bFinish ? Z_SYNC_FLUSH : Z_PARTIAL_FLUSH);
+	nResult = ::inflate(pStream, bFinish ? Z_SYNC_FLUSH : Z_PARTIAL_FLUSH);
 
 	switch (nResult)
 	{
--- filter/source/flash/swfwriter1.cxx.system-zlib	2003-07-11 06:22:41.000000000 -0400
+++ filter/source/flash/swfwriter1.cxx	2003-08-25 08:08:59.000000000 -0400
@@ -88,7 +88,7 @@
 #include <svtools/graphictools.hxx>
 #endif
 
-#include <external/zlib/zlib.h>
+#include <zlib.h>
 
 #ifndef _SV_SALBTYPE_HXX
 #include <vcl/salbtype.hxx>
--- crashrep/source/unx/makefile.mk	2003-08-21 11:46:32.000000000 +0200
+++ crashrep/source/unx/makefile.mk	2003-10-05 19:24:15.000000000 +0200
@@ -118,12 +118,12 @@
 APP2TARGET=$(TARGET2)
 APP2OBJS=$(OBJFILES)
 
-APP2STDLIBS=$(STATIC) `pkg-config --only-mod-libs --libs gtk+-2.0` -lpng -lzlib -ljpeg -ltiff $(DYNAMIC) -lXext -lX11 -ldl -lnsl
+APP2STDLIBS=$(STATIC) `pkg-config --only-mod-libs --libs gtk+-2.0` -lpng -$(ZLIB3RDLIB) -ljpeg -ltiff $(DYNAMIC) -lXext -lX11 -ldl -lnsl
 .IF "$(OS)" == "SOLARIS"
 APP2STDLIBS+=-lsocket
 .ENDIF
 .IF "$(OS)" == "FREEBSD"
-APP2STDLIBS=$(STATIC) `pkg-config --libs gtk+-2.0` -lpng -lzlib -ljpeg -ltiff $(DYNAMIC) -lXext -lX11
+APP2STDLIBS=$(STATIC) `pkg-config --libs gtk+-2.0` -lpng -$(ZLIB3RDLIB) -ljpeg -ltiff $(DYNAMIC) -lXext -lX11
 .ENDIF
 
 .ENDIF
