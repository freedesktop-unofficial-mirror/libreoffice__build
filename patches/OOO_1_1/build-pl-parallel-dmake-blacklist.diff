--- solenv/bin/build.pl	2004-08-17 15:09:17.280989912 +0200
+++ solenv/bin/build.pl	2004-08-18 10:23:10.319968184 +0200
@@ -397,7 +397,11 @@ sub dmake_dir {
 	if (!$cmd_file && !$show) {
 		chdir $BuildDir;
 		cwd();
-        $error_code = system ("$dmake");
+        $dmake_command = $dmake;
+        if (DoNotDmakeInParallel($BuildDir) ) {
+            $dmake_command =~ s/-P *[0-9]+//g;
+        }
+        $error_code = system ("$dmake_command");
         if ($error_code && $ignore) {
             push(@ignored_errors, &CorrectPath($StandDir . $PathHash{$folder_nick}));
             $error_code = 0;
@@ -414,6 +418,29 @@ sub dmake_dir {
 };
 
 #
+# Some of the projects hate dmake -P
+#
+sub DoNotDmakeInParallel {
+    my $dir = shift;
+    if ($dir =~ /\/dtrans\// ||
+        $dir =~ /\/fileaccess\// ||
+        $dir =~ /\/fpicker\// ||
+        $dir =~ /\/i18npool\// ||
+        $dir =~ /\/io\// ||
+        $dir =~ /\/offmgr\// ||
+        $dir =~ /\/rsc\/source\/parser/ ||
+        $dir =~ /\/shell\// ||
+        $dir =~ /\/scptools\/source\/compiler/ ||
+        $dir =~ /\/stoc\// ||
+        $dir =~ /\/remotebridges\// ||
+        $dir =~ /\/util$/)
+    {
+        return 1;
+    }
+    return 0;
+};
+
+#
 # Get string (list) of parent projects to build
 #
 sub GetParentsString {
