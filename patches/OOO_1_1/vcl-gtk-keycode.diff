--- vcl/unx/gtk/window/gtkframe.cxx.bak	2004-08-25 13:32:10.000000000 +0530
+++ vcl/unx/gtk/window/gtkframe.cxx	2004-08-25 19:17:15.357437856 +0530
@@ -164,40 +164,6 @@
     return nCode;
 }
 
-static USHORT GetCharCodeFromUnicode( sal_Unicode cCode )
-{
-    USHORT nRet = 0;
-    
-    if( cCode >= '0' && cCode <= '9' )
-        nRet = KEY_0 + (cCode - '0');
-    else if( cCode >= 'a' && cCode <= 'z' )
-        nRet = KEY_A + (cCode -'a' );
-    else if( cCode >= 'A' && cCode <= 'Z' )
-        nRet = KEY_A + (cCode -'A' );
-    else if( cCode == ' ' )
-        nRet = KEY_SPACE;
-    else if( cCode == '+' )
-        nRet = KEY_ADD;
-    else if( cCode == '-' )
-        nRet = KEY_SUBTRACT;
-    else if( cCode == '*' )
-        nRet = KEY_MULTIPLY;
-    else if( cCode == '/' )
-        nRet = KEY_DIVIDE;
-    else if( cCode == '.' )
-        nRet = KEY_POINT;
-    else if( cCode == ',' )
-        nRet = KEY_COMMA;
-    else if( cCode == '<' )
-        nRet = KEY_LESS;
-    else if( cCode == '>' )
-        nRet = KEY_GREATER;
-    else if( cCode == '=' )
-        nRet = KEY_EQUAL;
-    
-    return nRet;
-}
-
 GtkSalFrame::GraphicsHolder::~GraphicsHolder()
 {
     delete pGraphics;
@@ -1728,21 +1694,17 @@
      */
     if( ! pThis->m_bWasPreedit && aTextEvent.maText.Len() == 1 )
     {
-        USHORT nCharCode = GetCharCodeFromUnicode( aTextEvent.maText.GetChar( 0 ) );
-        if( nCharCode != 0 )
-        {
-            SalKeyEvent aEvent;
-            
-            aEvent.mnTime			= 0;
-            aEvent.mnCode			= nCharCode;
-            aEvent.mnCharCode		= aTextEvent.maText.GetChar(0);
-            aEvent.mnRepeat			= 0;
-
-            pThis->m_bWasPreedit = false;
-            pThis->CallCallback( SALEVENT_KEYINPUT, &aEvent );
-            pThis->CallCallback( SALEVENT_KEYUP, &aEvent );
-            return;
-        }
+       SalKeyEvent aEvent;
+           
+       aEvent.mnTime			= 0;
+       aEvent.mnCode			= GetKeyCode( gdk_unicode_to_keyval( aTextEvent.maText.GetChar( 0 ) ) );
+       aEvent.mnCharCode		= aTextEvent.maText.GetChar(0);
+       aEvent.mnRepeat			= 0;
+
+       pThis->m_bWasPreedit = false;
+       pThis->CallCallback( SALEVENT_KEYINPUT, &aEvent );
+       pThis->CallCallback( SALEVENT_KEYUP, &aEvent );
+       return;
     }
 
     pThis->m_bWasPreedit = false;
