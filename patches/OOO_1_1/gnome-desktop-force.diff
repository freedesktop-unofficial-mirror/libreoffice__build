Index: vcl/unx/source/gdi/dtint.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/gdi/dtint.cxx,v
retrieving revision 1.16
diff -u -p -u -r1.16 dtint.cxx
--- vcl/unx/source/gdi/dtint.cxx	28 May 2003 12:33:47 -0000	1.16
+++ vcl/unx/source/gdi/dtint.cxx	3 Nov 2003 15:59:48 -0000
@@ -161,7 +161,9 @@ DtIntegrator* DtIntegrator::CreateDtInte
     // but there currently does not seem to be a better one
     nDtAtom = XInternAtom( pDisplay, "GNOME_SM_PROXY", True );
 	Atom nDtAtom2 = XInternAtom( pDisplay, "NAUTILUS_DESKTOP_WINDOW_ID", True );
-    if( nDtAtom || nDtAtom2 )
+	const char *pEnv = getenv ("OOO_GNOME_DESKTOP");
+	bool bIsGnome = pEnv && atoi (pEnv);
+    if( nDtAtom || nDtAtom2 || bIsGnome )
     {
         int nProperties = 0;
         Atom* pProperties = XListProperties( pDisplay, pSalDisplay->GetRootWindow(), &nProperties );
