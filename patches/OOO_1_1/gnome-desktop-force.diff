Index: vcl/unx/source/gdi/dtint.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/gdi/dtint.cxx,v
retrieving revision 1.16
diff -u -p -u -r1.16 dtint.cxx
--- vcl/unx/source/gdi/dtint.cxx	28 May 2003 12:33:47 -0000	1.16
+++ vcl/unx/source/gdi/dtint.cxx	3 Nov 2003 15:59:48 -0000
@@ -138,6 +138,24 @@ DtIntegrator* DtIntegrator::CreateDtInte
 		if( pIntegrator->mpDisplay == pDisplay )
 			return pIntegrator;
 	}
+    /*
+     *  #i22061# override desktop detection
+     *  if environment variable OOO_FORCE_DESKTOP is set
+     *  to one of "cde" "kde" "gnome" then autodetection
+     *  is overridden.
+     */
+    static const char* pOverride = getenv( "OOO_FORCE_DESKTOP" );
+    if( pOverride )
+    {
+#if USE_CDE
+        if( strncasecmp( pOverride, "cde", 3 ) == 0 )
+            return new CDEIntegrator( pFrame );
+#endif
+        if( strncasecmp( pOverride, "kde", 3 ) == 0 )
+            return new KDEIntegrator( pFrame );
+        if( strncasecmp( pOverride, "gnome", 5 ) == 0 )
+            return new GNOMEIntegrator( pFrame );
+    }
 
 	Atom nDtAtom = None;
 
