Index: berkeleydb/makefile.mk
===================================================================
RCS file: /cvs/external/berkeleydb/makefile.mk,v
retrieving revision 1.13.12.1
diff -u -p -u -r1.13.12.1 makefile.mk
--- berkeleydb/makefile.mk	9 Jan 2004 13:44:31 -0000	1.13.12.1
+++ berkeleydb/makefile.mk	3 Apr 2004 03:01:38 -0000
@@ -104,29 +104,9 @@ OUT2BIN=java$/classes$/db.jar
 .IF "$(GUI)"=="WNT"
 # make use of stlport headerfiles
 EXT_USE_STLPORT=TRUE
-
 BUILD_DIR=build_win32
-.IF "$(COMEX)"=="8"
-CONFIGURE_DIR=build_win32
-CONFIGURE_ACTION=wdevenv Berkeley_DB Release
-.IF "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=;
-.ELSE # "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=^
-.ENDIF # "$(USE_SHELL)"!="4nt"
-BUILD_ACTION=devenv Berkeley_DB.sln /build Release /project db_buildall /useenv $(BUILD_ACTION_SEP) devenv Berkeley_DB.sln /build Release /project db_java /useenv
-.ELSE
-BUILD_ACTION=msdev Berkeley_DB.dsw /useenv /MAKE "db_buildall - RELEASE" /MAKE "db_java - RELEASE"
-.ENDIF
-
-OUT2BIN=java$/classes$/db.jar \
-	$(BUILD_DIR)$/Release$/libdb_java32.dll \
-	$(BUILD_DIR)$/Release$/libdb32.dll
-
-OUT2LIB= \
-	$(BUILD_DIR)$/Release$/libdb_java32.lib \
-	$(BUILD_DIR)$/Release$/libdb32.lib
-
+PATCH_FILE_NAME=win32-berkeleydb-make.diff
+BUILD_ACTION=dmake
 .ENDIF			# "$(GUI)"=="WNT"
 
 OUT2INC= \
--- berkeleydb/prj/d.lst	2004-03-11 11:29:46.000000000 +0000
+++ /share/d.lst	2004-04-07 12:35:17.000000000 +0100
@@ -1,12 +1,10 @@
 mkdir: %_DEST%\inc%_EXT%\berkeleydb
 
-..\%__SRC%\inc\cxx_common.h %_DEST%\inc%_EXT%\berkeleydb\cxx_common.h
-..\%__SRC%\inc\cxx_except.h %_DEST%\inc%_EXT%\berkeleydb\cxx_exc
 ..\%__SRC%\inc\db_cxx.h %_DEST%\inc%_EXT%\berkeleydb\db_cxx.h
 ..\%__SRC%\inc\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
 ..\%__SRC%\inc\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
 
-..\%__SRC%\lib\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
+..\%__SRC%\slb\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
 ..\%__SRC%\lib\libdb_java32.lib %_DEST%\lib%_EXT%\libdb_java32.lib
 
 ..\%__SRC%\lib\libdb-3.2.so %_DEST%\lib%_EXT%\libdb-3.2.so
