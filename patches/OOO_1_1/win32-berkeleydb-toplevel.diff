Index: berkeleydb/makefile.mk
===================================================================
RCS file: /cvs/external/berkeleydb/makefile.mk,v
retrieving revision 1.13.12.1
diff -u -p -u -r1.13.12.1 makefile.mk
--- berkeleydb/makefile.mk	9 Jan 2004 13:44:31 -0000	1.13.12.1
+++ berkeleydb/makefile.mk	3 Apr 2004 03:01:38 -0000
@@ -104,29 +104,9 @@ OUT2BIN=java$/classes$/db.jar
 .IF "$(GUI)"=="WNT"
 # make use of stlport headerfiles
 EXT_USE_STLPORT=TRUE
-
-BUILD_DIR=build_win32
+BUILD_DIR=
-.IF "$(COMEX)"=="8"
-CONFIGURE_DIR=build_win32
-CONFIGURE_ACTION=wdevenv Berkeley_DB Release
-.IF "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=;
-.ELSE # "$(USE_SHELL)"!="4nt"
-BUILD_ACTION_SEP=^
-.ENDIF # "$(USE_SHELL)"!="4nt"
-BUILD_ACTION=devenv Berkeley_DB.sln /build Release /project db_buildall /useenv $(BUILD_ACTION_SEP) devenv Berkeley_DB.sln /build Release /project db_java /useenv
-.ELSE
-BUILD_ACTION=msdev Berkeley_DB.dsw /useenv /MAKE "db_buildall - RELEASE" /MAKE "db_java - RELEASE"
-.ENDIF
-
-OUT2BIN=java$/classes$/db.jar \
-	$(BUILD_DIR)$/Release$/libdb_java32.dll \
-	$(BUILD_DIR)$/Release$/libdb32.dll
-
-OUT2LIB= \
-	$(BUILD_DIR)$/Release$/libdb_java32.lib \
-	$(BUILD_DIR)$/Release$/libdb32.lib
-
+PATCH_FILE_NAME=win32-berkeleydb-make.diff
+BUILD_ACTION=dmake
 .ENDIF			# "$(GUI)"=="WNT"
 
 OUT2INC= \
Index: berkeleydb/prj/d.lst
===================================================================
RCS file: /cvs/external/berkeleydb/prj/d.lst,v
retrieving revision 1.4
diff -u -p -u -r1.4 d.lst
--- berkeleydb/prj/d.lst	16 Jul 2003 17:13:20 -0000	1.4
+++ berkeleydb/prj/d.lst	8 Apr 2004 08:45:35 -0000
@@ -4,7 +4,7 @@ mkdir: %_DEST%\inc%_EXT%\berkeleydb
 ..\%__SRC%\inc\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
 ..\%__SRC%\inc\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
 
-..\%__SRC%\lib\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
+..\%__SRC%\slb\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
 ..\%__SRC%\lib\libdb_java32.lib %_DEST%\lib%_EXT%\libdb_java32.lib
 
 ..\%__SRC%\lib\libdb-3.2.so %_DEST%\lib%_EXT%\libdb-3.2.so
