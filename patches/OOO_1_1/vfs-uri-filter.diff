Index: ucb/source/regexp/regexp.cxx
===================================================================
RCS file: /cvs/ucb/ucb/source/regexp/regexp.cxx,v
retrieving revision 1.3
diff -u -p -u -r1.3 regexp.cxx
--- ucb/source/regexp/regexp.cxx	7 Nov 2001 08:15:54 -0000	1.3
+++ ucb/source/regexp/regexp.cxx	30 Mar 2005 15:22:46 -0000
@@ -77,6 +77,7 @@
 #ifndef _VOS_DIAGNOSE_H_ 
 #include <vos/diagnose.hxx>
 #endif
+#include <tools/urlobj.hxx>
 
 namespace unnamed_ucb_regexp {} using namespace unnamed_ucb_regexp;
 	// unnamed namespaces don't work well yet...
@@ -196,6 +197,13 @@ bool Regexp::matches(rtl::OUString const
 				break;
 		}
 
+		if (bMatches && isDefault())
+		{ // Gnome VFS matching eg. slot:.* in error
+			INetURLObject aURL( rString );
+			if( aURL.GetProtocol() < INET_PROT_END )
+				bMatches = false;
+		}
+
 		if (bMatches)
 			if (m_bTranslation)
 			{

Index: ucb/source/core/makefile.mk
===================================================================
RCS file: /cvs/ucb/ucb/source/core/makefile.mk,v
retrieving revision 1.14.82.1
diff -u -p -u -r1.14.82.1 makefile.mk
--- ucb/source/core/makefile.mk	28 Jan 2004 10:13:13 -0000	1.14.82.1
+++ ucb/source/core/makefile.mk	30 Mar 2005 15:22:46 -0000
@@ -92,7 +92,8 @@ SHL1STDLIBS=\
 	$(CPPUHELPERLIB) \
 	$(CPPULIB) \
 	$(SALLIB) \
-        $(UCBHELPERLIB)
+        $(UCBHELPERLIB) \
+	$(TOOLSLIB)
 SHL1LIBS=\
 	$(LIB1TARGET) \
 	$(SLB)$/regexp.lib


Index: ucb/source/ucp/remote/makefile.mk
===================================================================
RCS file: /cvs/ucb/ucb/source/ucp/remote/Attic/makefile.mk,v
retrieving revision 1.10.30.1
diff -u -p -u -r1.10.30.1 makefile.mk
--- ucb/source/ucp/remote/makefile.mk	28 Jan 2004 10:15:11 -0000	1.10.30.1
+++ ucb/source/ucp/remote/makefile.mk	30 Mar 2005 15:22:46 -0000
@@ -101,7 +101,8 @@ SHL1STDLIBS = \
     $(CPPUHELPERLIB) \
     $(CPPULIB) \
     $(SALHELPERLIB) \
-    $(SALLIB)
+    $(SALLIB) \
+    $(TOOLSLIB)
 SHL1DEPN = \
     $(L)$/iucbhelper.lib \
     $(L)$/icppuhelper.lib \
