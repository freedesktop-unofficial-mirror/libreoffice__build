Index: padmin/source/makefile.mk
===================================================================
RCS file: /cvs/gsl/padmin/source/makefile.mk,v
retrieving revision 1.10
diff -u -3 -p -r1.10 makefile.mk
--- padmin/source/makefile.mk	28 Apr 2003 17:06:44 -0000	1.10
+++ padmin/source/makefile.mk	2 Sep 2003 22:52:55 -0000
@@ -65,11 +65,16 @@ PRJNAME=padmin
 TARGET=padmin
 ENABLE_EXCEPTIONS=TRUE
 LIBTARGET=NO
+FONTCONFIG_FONTS=yes
 
 # --- Settings -----------------------------------------------------
 
 .INCLUDE: settings.mk
 
+.IF "$(FONTCONFIG_FONTS)" != ""
+CFLAGS+=-DFONTCONFIG_FONTS
+.ENDIF
+
 # --- Files --------------------------------------------------------
 
 SRCFILES=padialog.src rtsetup.src
@@ -95,11 +100,13 @@ SLOFILES=\
 	$(SLO)$/newppdlg.obj		\
 	$(SLO)$/prtsetup.obj		\
 	$(SLO)$/prgsbar.obj			\
-	$(SLO)$/fontentry.obj		\
 	$(SLO)$/helper.obj			\
 	$(SLO)$/adddlg.obj			\
 	$(SLO)$/titlectrl.obj
 
+.IF "$(FONTCONFIG_FONTS)" == ""
+SLOFILES+= $(SLO)$/fontentry.obj
+.ENDIF
 
 OBJFILES=\
 	$(OBJ)/pamain.obj
Index: padmin/source/padialog.cxx
===================================================================
RCS file: /cvs/gsl/padmin/source/padialog.cxx,v
retrieving revision 1.10
diff -u -3 -p -r1.10 padialog.cxx
--- padmin/source/padialog.cxx	15 Apr 2003 17:22:07 -0000	1.10
+++ padmin/source/padialog.cxx	2 Sep 2003 22:52:55 -0000
@@ -89,12 +89,19 @@
 #ifndef _TOOLS_COLOR_HXX
 #include <tools/color.hxx>
 #endif
+#ifndef _URLOBJ_HXX
+#include <tools/urlobj.hxx>
+#endif
 #ifndef _PAD_PADIALOG_HRC_
 #include <padialog.hrc>
 #endif
+
+#ifndef FONTCONFIG_FONTS
 #ifndef _PAD_FONTENTRY_HXX_
 #include <fontentry.hxx>
 #endif
+#endif
+
 #ifndef _PAD_HELPER_HXX_
 #include <helper.hxx>
 #endif
@@ -135,7 +142,9 @@ PADialog::PADialog( Window* pParent, BOO
 		m_aStdPB( this, PaResId( RID_PA_BTN_STD ) ),
 		m_aRemPB( this, PaResId( RID_PA_BTN_DEL ) ),
 		m_aPrintersFL( this, PaResId( RID_PA_FL_PRINTERS ) ),
+#ifndef FONTCONFIG_FONTS
 		m_aFontsPB( this, PaResId( RID_PA_BTN_FONTS ) ),
+#endif
 		m_aConfPB( this, PaResId( RID_PA_BTN_CONF ) ),
 		m_aRenamePB( this, PaResId( RID_PA_BTN_RENAME ) ),
 		m_aTestPagePB( this, PaResId( RID_PA_TESTPAGE ) ),
@@ -174,13 +183,15 @@ void PADialog::Init()
 	m_aConfPB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
 	m_aRenamePB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
 	m_aTestPagePB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
-	m_aFontsPB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
 	m_aAddPB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
 	m_aDevicesLB.setDelPressedLink( LINK( this, PADialog, DelPressedHdl ) );
 
+#ifndef FONTCONFIG_FONTS
+	m_aFontsPB.SetClickHdl( LINK( this, PADialog, ClickBtnHdl ) );
 	::psp::PrintFontManager& rFontManager( ::psp::PrintFontManager::get() );
 	if( ! rFontManager.checkImportPossible() )
 		m_aFontsPB.Enable( FALSE );
+#endif
 }
 
 PADialog::~PADialog()
@@ -217,11 +228,13 @@ IMPL_LINK( PADialog, ClickBtnHdl, PushBu
 		PrintTestPage();
 	else if( pButton == &m_aAddPB )
 		AddDevice();
+#ifndef FONTCONFIG_FONTS
 	else if( pButton == &m_aFontsPB )
 	{
 		FontNameDlg aDialog( this );
 		aDialog.Execute();
 	}
+#endif
 
 	return 0;
 }
Index: padmin/source/padialog.hxx
===================================================================
RCS file: /cvs/gsl/padmin/source/padialog.hxx,v
retrieving revision 1.4
diff -u -3 -p -r1.4 padialog.hxx
--- padmin/source/padialog.hxx	19 Jun 2001 13:47:44 -0000	1.4
+++ padmin/source/padialog.hxx	2 Sep 2003 22:52:55 -0000
@@ -118,7 +118,9 @@ namespace padmin {
 
         FixedLine							m_aSepButtonFL;
 		PushButton							m_aAddPB;
+#ifndef FONTCONFIG_FONTS
 		PushButton							m_aFontsPB;
+#endif
 		CancelButton  						m_aCancelButton;
 
 		String								m_aDefPrt;
