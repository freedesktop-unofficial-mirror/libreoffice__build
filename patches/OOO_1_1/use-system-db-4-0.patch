--- setup2/script/linux/1.0.0/webinstdb.inf.systemdb	2001-05-24 02:45:47.000000000 -0400
+++ setup2/script/linux/1.0.0/webinstdb.inf	2003-10-16 16:58:18.000000000 -0400
@@ -6687,7 +6687,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0352";
 	Size		 = 458008;
 	Dir			 = gid_Dir_Program;
@@ -6700,7 +6700,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0353";
 	Size		 = 506820;
 	Dir			 = gid_Dir_Program;
--- setup2/script/linux/1.0.1/webinstdb.inf.systemdb	2001-05-17 10:46:41.000000000 -0400
+++ setup2/script/linux/1.0.1/webinstdb.inf	2003-10-16 16:58:18.000000000 -0400
@@ -7474,7 +7474,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0358";
 	Size		 = 458008;
 	DownloadSize = 196814;
@@ -7488,7 +7488,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0359";
 	Size		 = 506820;
 	DownloadSize = 212931;
--- setup2/script/linux/1.1.1/webinstdb.inf.systemdb	2001-09-19 08:58:58.000000000 -0400
+++ setup2/script/linux/1.1.1/webinstdb.inf	2003-10-16 16:58:18.000000000 -0400
@@ -7512,7 +7512,7 @@
 End
 
 File gid_File_Lib_Db31
-	Name		 = "libdb-3.1.so";
+	Name		 = "libdb-4.0.so";
 	PackedName	 = "f_0361";
 	Size		 = 458008;
 	DownloadSize = 196814;
@@ -7526,7 +7526,7 @@
 End
 
 File gid_File_Lib_Dbjava31
-	Name		 = "libdb_java-3.1.so";
+	Name		 = "libdb_java-4.0.so";
 	PackedName	 = "f_0362";
 	Size		 = 506820;
 	DownloadSize = 212931;
--- scp/source/office/files.scp.systemdb	2003-10-16 16:58:18.000000000 -0400
+++ scp/source/office/files.scp	2003-10-16 16:58:18.000000000 -0400
@@ -965,7 +965,7 @@
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
         #ifdef UNX
-        Name            = STRING(CONCAT2(libdb-3.2,UNXSUFFIX));
+        Name            = STRING(CONCAT2(libdb-4.0,UNXSUFFIX));
         #else
         Name            = "libdb32.dll";
         #endif
@@ -978,7 +978,7 @@
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
         #ifdef UNX
-        Name            = STRING(CONCAT2(libdb_java-3.2,UNXSUFFIX));
+        Name            = STRING(CONCAT2(libdb_java-4.0,UNXSUFFIX));
         #else
         Name            = "libdb_java32.dll";
         #endif
@@ -992,7 +992,7 @@
         TXT_FILE_BODY;
         Styles          = (PACKED);
         Dir             = GID_DIR_PROGRAM;
-        Name            = STRING(CONCAT2(libdb_cxx-3.2,UNXSUFFIX));
+        Name            = STRING(CONCAT2(libdb_cxx-4.0,UNXSUFFIX));
 End
 
 #endif
--- solenv/inc/libs.mk.systemdb	2003-07-02 09:43:33.000000000 -0400
+++ solenv/inc/libs.mk	2003-10-16 16:58:18.000000000 -0400
@@ -176,8 +176,8 @@
 ZLIB3RDLIB=-lzlib
 JPEG3RDLIB=-ljpeglib
 NEON3RDLIB=-lneon
-BERKELEYLIB=-ldb-3.2
-BERKELEYCPPLIB=-ldb_cxx-3.2
+BERKELEYLIB=-ldb-4.0
+BERKELEYCPPLIB=-ldb_cxx-4.0
 CURLLIB=-lcurl
 SFX2LIB=-lsfx$(OFFICEUPD)$(DLLPOSTFIX)
 SFXLIB=-lsfx$(OFFICEUPD)$(DLLPOSTFIX)
--- berkeleydb/prj/d.lst.systemdb	2003-07-16 13:13:20.000000000 -0400
+++ berkeleydb/prj/d.lst	2003-10-16 17:10:53.000000000 -0400
@@ -1,16 +1,14 @@
 mkdir: %_DEST%\inc%_EXT%\berkeleydb
 
-..\%__SRC%\inc\db_cxx.h %_DEST%\inc%_EXT%\berkeleydb\db_cxx.h
-..\%__SRC%\inc\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
-..\%__SRC%\inc\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
+\usr\include\db4\db_cxx.h %_DEST%\inc%_EXT%\berkeleydb\db_cxx.h
+\usr\include\db4\cxx_common.h %_DEST%\inc%_EXT%\berkeleydb\cxx_common.h
+\usr\include\db4\cxx_except.h %_DEST%\inc%_EXT%\berkeleydb\cxx_except.h
+\usr\include\db4\db_185.h %_DEST%\inc%_EXT%\berkeleydb\db_185.h
+\usr\include\db4\db.h %_DEST%\inc%_EXT%\berkeleydb\db.h
 
 ..\%__SRC%\lib\libdb32.lib %_DEST%\lib%_EXT%\libdb32.lib
 ..\%__SRC%\lib\libdb_java32.lib %_DEST%\lib%_EXT%\libdb_java32.lib
 
-..\%__SRC%\lib\libdb-3.2.so %_DEST%\lib%_EXT%\libdb-3.2.so
-..\%__SRC%\lib\libdb_java-3.2.so %_DEST%\lib%_EXT%\libdb_java-3.2.so
-..\%__SRC%\lib\libdb_cxx-3.2.so %_DEST%\lib%_EXT%\libdb_cxx-3.2.so
-
 ..\%__SRC%\lib\libdb-3.2.dylib %_DEST%\lib%_EXT%\libdb-3.2.dylib
 ..\%__SRC%\lib\libdb_java-3.2.dylib %_DEST%\lib%_EXT%\libdb_java-3.2.dylib
 ..\%__SRC%\lib\libdb_cxx-3.2.dylib %_DEST%\lib%_EXT%\libdb_cxx-3.2.dylib
@@ -18,5 +16,5 @@
 ..\%__SRC%\bin\libdb32.dll %_DEST%\bin%_EXT%\libdb32.dll
 ..\%__SRC%\bin\libdb_java32.dll %_DEST%\bin%_EXT%\libdb_java32.dll
 
-..\%__SRC%\bin\db.jar %_DEST%\bin%_EXT%\db.jar
+\usr\share\java\db.jar %_DEST%\bin%_EXT%\db.jar
 
--- berkeleydb/makefile.mk.systemdb	2003-06-12 05:50:38.000000000 -0400
+++ berkeleydb/makefile.mk	2003-10-16 17:10:24.000000000 -0400
@@ -65,6 +65,12 @@
 PRJNAME=so_berkeleydb
 TARGET=so_berkeleydb
 
+# --- Hack to get system db libraries ------------------------------
+.IF "$(GUI)"=="UNX"
+all:
+	@echo "Since you're running a real OS, we're assuming you have db..."
+.ENDIF
+
 # --- Settings -----------------------------------------------------
 
 .INCLUDE :	settings.mk
