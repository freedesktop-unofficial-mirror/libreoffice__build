Index: vcl/inc/svids.hrc
===================================================================
RCS file: /cvs/gsl/vcl/inc/svids.hrc,v
retrieving revision 1.8
diff -u -r1.8 svids.hrc
--- vcl/inc/svids.hrc	27 Mar 2003 17:57:34 -0000	1.8
+++ vcl/inc/svids.hrc	9 Jan 2004 10:42:12 -0000
@@ -151,5 +151,14 @@
 #define SV_SHORTCUT_TODOCUMENT              10606
 #define SV_SHORTCUT_MENUBAR                 10607
 
+#define IL_SYM_TO_IMAGES_L	1090
+#define IL_SYM_TO_IMAGES_S	1095
+
+#define IMGS_FOR_IL_START	10000
+#define	ID_ARROW_UP		(IMGS_FOR_IL_START + 150)
+#define	ID_ARROW_DOWN		(IMGS_FOR_IL_START + 151)
+#define	ID_ARROW_LEFT		(IMGS_FOR_IL_START + 152)
+#define	ID_ARROW_RIGHT		(IMGS_FOR_IL_START + 153)
+
 #define SV_FUNIT_STRINGS                    10700
 #endif	// _SV_SVIDS_HRC
Index: vcl/source/src/images.src
===================================================================
RCS file: /cvs/gsl/vcl/source/src/images.src,v
retrieving revision 1.2
diff -u -r1.2 images.src
--- vcl/source/src/images.src	1 Oct 2002 16:23:24 -0000	1.2
+++ vcl/source/src/images.src	9 Jan 2004 10:42:18 -0000
@@ -177,3 +177,27 @@
 	File = "splvarw.bmp";
 };
 
+#define IMG_IDLIST \
+	IdList =			   \
+	{					   \
+		ID_ARROW_UP;             \
+		ID_ARROW_DOWN;           \
+		ID_ARROW_LEFT;           \
+		ID_ARROW_RIGHT;          \
+	};					   \
+	IdCount = { 4 ; };
+
+ImageList IL_SYM_TO_IMAGES_L
+{
+      ImageBitmap = Bitmap { File = "lc_imgs.bmp" ; };
+      MaskColor = Color { Red = 0xFFFF ; Green = 0x0000 ; Blue = 0xFFFF ; };
+	IMG_IDLIST
+};
+
+ImageList IL_SYM_TO_IMAGES_S
+{
+      ImageBitmap = Bitmap { File = "sc_imgs.bmp" ; };
+      MaskColor = Color { Red = 0xFFFF ; Green = 0x0000 ; Blue = 0xFFFF ; };
+	IMG_IDLIST
+};
+
Index: vcl/source/src/makefile.mk
===================================================================
RCS file: /cvs/gsl/vcl/source/src/makefile.mk,v
retrieving revision 1.3
diff -u -r1.3 makefile.mk
--- vcl/source/src/makefile.mk	25 Oct 2002 11:45:39 -0000	1.3
+++ vcl/source/src/makefile.mk	9 Jan 2004 10:42:53 -0000
@@ -72,6 +72,7 @@
 .INCLUDE :	settings.mk
 .INCLUDE :	sv.mk
 
+IMGLST_SRS=$(SRS)$/svsrc.srs
 # --- Files --------------------------------------------------------
 
 SRCFILES=			images.src			\
Index: vcl/inc/image.hxx
===================================================================
RCS file: /cvs/gsl/vcl/inc/image.hxx,v
retrieving revision 1.4
diff -u -r1.4 image.hxx
--- vcl/inc/image.hxx	22 Aug 2002 13:54:48 -0000	1.4
+++ vcl/inc/image.hxx	9 Jan 2004 10:43:05 -0000
@@ -111,6 +111,8 @@
 
 private:
 	ImplImage*		mpImplData;
+  static const USHORT symbol_to_image_table[];
+  static const int table_entry_size;
 
 public:
 					Image();
@@ -140,6 +142,7 @@
 	BOOL			operator!=( const Image& rImage ) const { return !(Image::operator==( rImage )); }
 
     void            ClearCaches();
+  static BOOL GetImageForSymbol(const USHORT nSymbolId, const Size objSize, Image& objImage);
 };
 
 inline BOOL Image::operator!() const
Index: vcl/source/gdi/image.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/gdi/image.cxx,v
retrieving revision 1.8
diff -u -r1.8 image.cxx
--- vcl/source/gdi/image.cxx	27 Mar 2003 17:57:57 -0000	1.8
+++ vcl/source/gdi/image.cxx	9 Jan 2004 10:43:14 -0000
@@ -70,6 +70,13 @@
 #include <tools/stream.hxx>
 #endif
 
+#ifndef _SV_SVIDS_HRC
+#include <svids.hrc>
+#endif
+#ifndef _SV_SVDATA_HXX
+#include <svdata.hxx>
+#endif
+
 #ifndef _SV_RC_H
 #include <rc.h>
 #endif
@@ -196,6 +219,38 @@
 
 // =======================================================================
 
+static const USHORT Image::symbol_to_image_table[] = 
+  {
+    NULL,
+    NULL,
+    ID_ARROW_UP,
+    ID_ARROW_DOWN,
+    ID_ARROW_LEFT,
+    ID_ARROW_RIGHT
+  };
+
+static const int Image::table_entry_size = sizeof(symbol_to_image_table) / sizeof(symbol_to_image_table[0]);
+
+static BOOL Image::GetImageForSymbol(const USHORT nSymbolId, const Size objSize, Image& objImage)
+{
+  if (nSymbolId >= table_entry_size)
+    return FALSE;
+
+  long lHeight = objSize.getHeight();
+  long lWidth = objSize.getWidth();
+  long lMin = lHeight < lWidth ? lHeight : lWidth;
+
+  if (lMin < 16)
+    return FALSE;
+
+  ImageList objImageList = ImageList(ResId(lMin >= 24 ? IL_SYM_TO_IMAGES_L : IL_SYM_TO_IMAGES_S, ImplGetResMgr()));
+  objImage = objImageList.GetImage(symbol_to_image_table[nSymbolId]);
+
+    return TRUE;
+}
+
+// -----------------------------------------------------------------------
+
 Image::Image()
 {
 	DBG_CTOR( Image, NULL );
Index: vcl/source/control/button.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/control/button.cxx,v
retrieving revision 1.21
diff -u -r1.21 button.cxx
--- vcl/source/control/button.cxx	17 Apr 2003 17:55:28 -0000	1.21
+++ vcl/source/control/button.cxx	9 Jan 2004 10:43:24 -0000
@@ -3303,7 +3318,20 @@
     }
 
     if ( RSC_IMAGEBUTTON_SYMBOL & nObjMask )
-        SetSymbol( (SymbolType)ReadShortRes() );
+    {
+	SymbolType s = (SymbolType)ReadShortRes();
+
+	Image objImage;
+
+	if ( Image::GetImageForSymbol(s, GetSizePixel(), objImage) )
+	{
+	  SetImage(objImage);
+	}
+	else
+	{
+	  SetSymbol(s);
+	}
+    }
 
     if ( RSC_IMAGEBUTTON_STATE & nObjMask )
         SetState( (TriState)ReadShortRes() );
