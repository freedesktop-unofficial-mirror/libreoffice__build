Index: vcl/source/control/button.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/control/button.cxx,v
retrieving revision 1.21
diff -u -p -u -r1.21 button.cxx
--- vcl/source/control/button.cxx	17 Apr 2003 17:55:28 -0000	1.21
+++ vcl/source/control/button.cxx	28 May 2003 14:02:16 -0000
@@ -689,6 +689,11 @@ void PushButton::ImplDrawPushButtonConte
             }
             else
             {
+		if ( mnButtonState & (BUTTON_DRAW_CHECKED | BUTTON_DRAW_DONTKNOW) )
+			pDev->SetFillColor( rStyleSettings.GetCheckedColor() );
+		else
+			pDev->SetFillColor( rStyleSettings.GetFaceColor() );
+
                 if ( IsZoom() )
                     pDev->DrawImage( aImagePos, aImageSize, *pImage, nStyle );
                 else
Index: vcl/source/control/ilstbox.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/control/ilstbox.cxx,v
retrieving revision 1.41
diff -u -p -u -r1.41 ilstbox.cxx
--- vcl/source/control/ilstbox.cxx	24 Apr 2003 16:31:26 -0000	1.41
+++ vcl/source/control/ilstbox.cxx	28 May 2003 14:03:57 -0000
@@ -1550,6 +1550,7 @@ void ImplListBoxWindow::ImplPaint( USHOR
 	long nY = ( nPos - mnTop ) * mnMaxHeight;
 	Rectangle aRect( Point( 0, nY ), Size( nWidth, mnMaxHeight ) );
 
+	SetFillColor( GetBackground().GetColor() );
     if( ! bLayout )
     {
         if( IsEnabled() )
@@ -2452,6 +2453,7 @@ void ImplWin::ImplDraw( bool bLayout )
 {
 	const StyleSettings& rStyleSettings = GetSettings().GetStyleSettings();
 
+	SetFillColor( GetBackground().GetColor() );
     if( ! bLayout )
     {
         if( IsEnabled() )
Index: vcl/source/control/fixed.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/control/fixed.cxx,v
retrieving revision 1.10
diff -u -p -u -r1.10 fixed.cxx
--- vcl/source/control/fixed.cxx	17 Oct 2002 14:47:00 -0000	1.10
+++ vcl/source/control/fixed.cxx	5 Aug 2003 14:34:10 -0000
@@ -73,6 +73,9 @@
 #ifndef _VCL_CONTROLLAYOUT_HXX
 #include <controllayout.hxx>
 #endif
+#ifndef _SV_BITMAPEX_HXX
+#include <bitmapex.hxx>
+#endif
 
 #include <rc.h>
 
@@ -791,9 +800,14 @@ void FixedBitmap::ImplDraw( OutputDevice
 		//if( aCol.IsBright() )
 		//	nStyle |= IMAGE_DRAW_COLORTRANSFORM;
 	}
+	
+	Color aOldFillColor = pDev->GetFillColor();
+	const StyleSettings& rStyleSettings = GetSettings().GetStyleSettings();
+	pDev->SetFillColor( rStyleSettings.GetFaceColor() ); // FIXME: this sucks
 
 	if( nStyle & IMAGE_DRAW_COLORTRANSFORM )
 	{
+
 		// only images support IMAGE_DRAW_COLORTRANSFORM
 		Image aImage( maBitmap );
 		if ( !(!aImage) )
@@ -812,15 +826,20 @@ void FixedBitmap::ImplDraw( OutputDevice
 		// Haben wir ueberhaupt eine Bitmap
 		if ( !(!(*pBitmap)) )
 		{
+			BitmapEx aEx( *pBitmap );
+
 			if ( GetStyle() & WB_SCALE )
-				pDev->DrawBitmap( rPos, rSize, *pBitmap );
+				pDev->DrawBitmapEx( rPos, rSize, aEx );
 			else
 			{
 				Point aPos = ImplCalcPos( GetStyle(), rPos, pBitmap->GetSizePixel(), rSize );
-				pDev->DrawBitmap( aPos, *pBitmap );
+				pDev->DrawBitmapEx( aPos, aEx );
 			}
+
 		}
 	}
+
+	pDev->SetFillColor( aOldFillColor );
 }
 
 // -----------------------------------------------------------------------
@@ -1046,6 +1065,12 @@ void FixedImage::ImplDraw( OutputDevice*
 		//	nStyle |= IMAGE_DRAW_COLORTRANSFORM;
 	}
 
+	Color aOldFillColor = pDev->GetFillColor();
+	const StyleSettings& rStyleSettings = GetSettings().GetStyleSettings();
+	
+	pDev->SetFillColor( rStyleSettings.GetFaceColor() ); // FIXME: this sucks
+		
+
 	// Haben wir ueberhaupt ein Image
 	if ( !(!(*pImage)) )
 	{
@@ -1057,6 +1082,8 @@ void FixedImage::ImplDraw( OutputDevice*
 			pDev->DrawImage( aPos, *pImage, nStyle );
 		}
 	}
+
+	pDev->SetFillColor( aOldFillColor );
 
 	mbInUserDraw = TRUE;
 	UserDrawEvent aUDEvt( pDev, Rectangle( rPos, rSize ), 0, nStyle );
