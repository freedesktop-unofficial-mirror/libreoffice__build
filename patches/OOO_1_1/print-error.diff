Index: vcl/source/gdi/impprn.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/gdi/impprn.cxx,v
retrieving revision 1.5
diff -u -p -u -r1.5 impprn.cxx
--- vcl/source/gdi/impprn.cxx	27 Mar 2003 17:57:57 -0000	1.5
+++ vcl/source/gdi/impprn.cxx	29 May 2003 16:37:41 -0000
@@ -350,7 +350,8 @@ IMPL_LINK( ImplQPrinter, ImplPrintHdl, T
 	{
 		maTimer.Stop();
 		delete pActPage;
-		EndJob();
+		if (!EndJob())
+			mpParent->Error();
 		mpParent->ImplEndPrint();
 	}
 	else
Index: sfx2/source/view/prnmon.cxx
===================================================================
RCS file: /cvs/framework/sfx2/source/view/prnmon.cxx,v
retrieving revision 1.8
diff -u -p -u -r1.8 prnmon.cxx
--- sfx2/source/view/prnmon.cxx	4 Apr 2003 17:40:22 -0000	1.8
+++ sfx2/source/view/prnmon.cxx	29 May 2003 16:37:59 -0000
@@ -387,9 +387,6 @@ IMPL_LINK_INLINE_START( SfxPrintProgress
 	pImp->pPrinter->AbortJob();
 	InfoBox( pImp->GetViewShell()->GetWindow(),
 			 String( SfxResId(STR_ERROR_PRINT) ) ).Execute();
-    if ( pImp->bRestoreFlag && pImp->pViewShell->GetObjectShell()->IsEnableSetModified() != pImp->bOldFlag )
-        pImp->pViewShell->GetObjectShell()->EnableSetModified( pImp->bOldFlag );
-	pImp->GetViewShell()->GetObjectShell()->Broadcast( SfxPrintingHint( com::sun::star::view::PrintableState_JOB_FAILED, NULL, NULL ) );
 	return 0;
 }
 IMPL_LINK_INLINE_END( SfxPrintProgress, PrintErrorNotify, void *, pvoid )
