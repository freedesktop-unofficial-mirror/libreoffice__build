Index: unx/source/gdi/makefile.mk
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/gdi/makefile.mk,v
retrieving revision 1.9
diff -u -r1.9 makefile.mk
--- vcl/unx/source/gdi/makefile.mk	27 Aug 2002 14:52:35 -0000	1.9
+++ vcl/unx/source/gdi/makefile.mk	9 Jun 2004 04:26:15 -0000
@@ -106,6 +106,10 @@
 SLOFILES+=$(SLO)$/salprnpsp.obj
 .ENDIF
 
+.IF "$(FONTCONFIG_FONTS)" == "YES"
+CFLAGS+=$(FONTCONFIG_CFLAGS) -DFONTCONFIG_FONTS
+.ENDIF
+
 .IF "$(OS)"=="SOLARIS"
 SLOFILES+=$(SLO)$/cdeint.obj
 ENVCFLAGS+=-DUSE_CDE
Index: unx/source/gdi/salgdi3.cxx
===================================================================
RCS file: /cvs/gsl/vcl/unx/source/gdi/salgdi3.cxx,v
retrieving revision 1.105.46.5
diff -u -r1.105.46.5 salgdi3.cxx
--- vcl/unx/source/gdi/salgdi3.cxx	13 Feb 2004 14:03:54 -0000	1.105.46.5
+++ vcl/unx/source/gdi/salgdi3.cxx	9 Jun 2004 04:26:15 -0000
@@ -1741,6 +1741,7 @@
 
 void X11SalGraphics::GetDevFontList( ImplDevFontList *pList )
 {
+#if defined(NASTY_X_FONTS) || !defined(FONTCONFIG_FONTS)
     XlfdStorage* pFonts = GetDisplay()->GetXlfdList();
     
     for ( int nIdx = 0; nIdx < pFonts->GetCount(); nIdx++ )
@@ -1759,5 +1760,6 @@
         pList->Add( pFontData );
     }
+#endif
     
     aX11GlyphPeer.SetDisplay( GetXDisplay(),
                               GetDisplay()->GetVisual()->GetVisual() );
