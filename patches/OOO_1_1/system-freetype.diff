--- solenv/inc/libs.mk	31 Oct 2003 16:23:21 -0000	1.66.14.1
+++ solenv/inc/libs.mk	9 Dec 2003 11:50:20 -0000
@@ -135,8 +135,8 @@
 BSTRPLIB=-lbtstrp
 VCLLIBST=-lvcl
 VCLLIB=$(SVLIB)
-FREETYPELIB=-lfreetype
-FREETYPELIBST=$(STATIC) -lfreetype $(DYNAMIC)
+FREETYPELIB=$(FREETYPE_LIBS)
+FREETYPELIBST=$(STATIC) $(FREETYPE_LIBS) $(DYNAMIC)
 XPLIB=-l_xp
 TKLIB=-ltk$(OFFICEUPD)$(DLLPOSTFIX)
 SVTOOLLIB=-lsvt$(OFFICEUPD)$(DLLPOSTFIX)
--- vcl/source/glyphs/makefile.mk	15 Feb 2002 15:52:27 -0000	1.5
+++ vcl/source/glyphs/makefile.mk	9 Dec 2003 11:50:47 -0000
@@ -73,6 +73,7 @@
 # --- Files --------------------------------------------------------
 
 .IF "$(USE_BUILTIN_RASTERIZER)" != ""
+CFLAGS += $(FREETYPE_CFLAGS)
 SLOFILES=\
 		$(SLO)$/glyphcache.obj		\
 		$(SLO)$/gcach_rbmp.obj		\
--- freetype/makefile.mk	28 May 2003 12:41:19 -0000	1.14
+++ freetype/makefile.mk	9 Dec 2003 11:53:10 -0000
@@ -75,12 +75,12 @@
 # the X11 port because there are some header conflicts
 # and linktime conflicts as well.  It is simply less of
 # a headache to use the one provided.
-.IF "$(OS)" == "MACOSX"
+.IF "$(OS)" == "MACOSX" || "$(SYSTEM_FREETYPE)" == "YES"
 
 dummy:
-	@echo "Nothing to build for MACOSX"
+	@echo "Nothing to build for OS $(OS)"
 
-.ELSE	# "$(OS)" == "MACOSX"
+.ELSE	# "$(OS)" == "MACOSX" || "$(SYSTEM_FREETYPE)" == "YES"
 
 TARFILE_NAME=freetype-2.1.4
 
Index: gcach_ftyp.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/glyphs/gcach_ftyp.cxx,v
retrieving revision 1.98
diff -u -r1.98 gcach_ftyp.cxx
--- vcl/source/glyphs/gcach_ftyp.cxx	16 Jul 2003 17:46:21 -0000	1.98
+++ vcl/source/glyphs/gcach_ftyp.cxx	18 Nov 2003 01:35:57 -0000
@@ -77,7 +77,8 @@
 #include <osl/file.hxx>
 #include <osl/thread.hxx>
 
-#include "freetype/freetype.h"
+#include "ft2build.h"
+#include FT_FREETYPE_H
 #include "freetype/ftglyph.h"
 #include "freetype/ftoutln.h"
 #include "freetype/tttables.h"
Index: gcach_layout.cxx
===================================================================
RCS file: /cvs/gsl/vcl/source/glyphs/gcach_layout.cxx,v
retrieving revision 1.23
diff -u -r1.23 gcach_layout.cxx
--- vcl/source/glyphs/gcach_layout.cxx	16 Jul 2003 17:46:32 -0000	1.23
+++ vcl/source/glyphs/gcach_layout.cxx	18 Nov 2003 01:49:35 -0000
@@ -68,7 +68,8 @@
 #endif
 
 #ifndef _SV_GCACHFTYP_HXX
-#include <freetype/freetype.h>
+#include <ft2build.h>
+#include FT_FREETYPE_H
 #include <gcach_ftyp.hxx>
 #endif
 
--- scp/source/global/setupzip.scp	31 Oct 2003 20:07:44 -0000	1.114.10.2.12.3
+++ scp/source/global/setupzip.scp	9 Dec 2003 23:18:47 -0000
@@ -556,6 +556,8 @@
 
 #ifdef UNX
 
+#ifndef SYSTEM_FREETYPE
+
 #ifndef MACOSX
 File GID_FILE_LIB_FREETYPE
     #if defined (LINUX)  &&  ( defined (CLASSIC_FAT_PRODUCT) || defined (OSL_PRODUCT) || defined (FAM_PRODUCT) )
@@ -573,6 +575,8 @@
 End
 #endif
 
+#endif
+
 #if defined (OSL_PRODUCT) && defined(WITH_FONTS)
 STD_FONTUNX_FILE( GID_FILE_FNT_VERA, Vera.ttf, Vera Sans)
 #endif
@@ -653,4 +657,4 @@
         Name (99)       = "fontunxpsprint.zip";
 End
 
-#endif
\ No newline at end of file
+#endif
