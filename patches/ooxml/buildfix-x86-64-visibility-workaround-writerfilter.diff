diff -u -r writerfilter/inc/doctok/WW8Document.hxx writerfilter/inc/doctok/WW8Document.hxx
--- writerfilter/inc/doctok/WW8Document.hxx	2007-12-10 15:51:35.000000000 +0100
+++ writerfilter/inc/doctok/WW8Document.hxx	2008-01-14 11:12:27.000000000 +0100
@@ -36,7 +36,14 @@
 #ifndef INCLUDED_WW8_DOCUMENT_HXX
 #define INCLUDED_WW8_DOCUMENT_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <boost/shared_ptr.hpp>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #ifndef _SAL_TYPES_H_
 #include <sal/types.h>
 #endif // _SAL_TYPES_H_
diff -u -r writerfilter/inc/odiapi/core/Node.hxx writerfilter/inc/odiapi/core/Node.hxx
--- writerfilter/inc/odiapi/core/Node.hxx	2007-12-10 15:51:35.000000000 +0100
+++ writerfilter/inc/odiapi/core/Node.hxx	2008-01-14 10:53:43.000000000 +0100
@@ -46,9 +46,15 @@
 #include <odiapi/props/Properties.hxx>
 #endif
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <memory>
 #include <string>
 #include <boost/shared_ptr.hpp>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace odiapi { namespace core {
 
diff -u -r writerfilter/inc/odiapi/props/Logger.hxx writerfilter/inc/odiapi/props/Logger.hxx
--- writerfilter/inc/odiapi/props/Logger.hxx	2007-12-10 15:51:35.000000000 +0100
+++ writerfilter/inc/odiapi/props/Logger.hxx	2008-01-14 10:53:49.000000000 +0100
@@ -38,7 +38,13 @@
 #ifndef INCLUDED_LOGGER_HXX
 #define INCLUDED_LOGGER_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace util {
 
diff -u -r writerfilter/inc/odiapi/props/Properties.hxx writerfilter/inc/odiapi/props/Properties.hxx
--- writerfilter/inc/odiapi/props/Properties.hxx	2007-12-10 15:51:35.000000000 +0100
+++ writerfilter/inc/odiapi/props/Properties.hxx	2008-01-14 10:53:54.000000000 +0100
@@ -46,8 +46,14 @@
 
 #include "Iterator.hxx"
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <boost/shared_ptr.hpp>
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace util { class Logger; }
 
diff -u -r writerfilter/inc/odiapi/xxml/ContentHandler.hxx writerfilter/inc/odiapi/xxml/ContentHandler.hxx
--- writerfilter/inc/odiapi/xxml/ContentHandler.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/odiapi/xxml/ContentHandler.hxx	2008-01-14 10:53:59.000000000 +0100
@@ -40,7 +40,14 @@
 #include <odiapi/qname/QName.hxx>
 #include <WriterFilterDllApi.hxx>
 #include <rtl/ustring.hxx>
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 
 namespace writerfilter { namespace xxml {
diff -u -r writerfilter/inc/resourcemodel/exceptions.hxx writerfilter/inc/resourcemodel/exceptions.hxx
--- writerfilter/inc/resourcemodel/exceptions.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/resourcemodel/exceptions.hxx	2008-01-14 09:01:24.000000000 +0100
@@ -36,7 +36,14 @@
 #ifndef _DOCTOK_EXCEPTIONS_HXX
 #define _DOCTOK_EXCEPTIONS_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <WriterFilterDllApi.hxx>
 
 namespace writerfilter {
diff -u -r writerfilter/inc/resourcemodel/OutputWithDepth.hxx writerfilter/inc/resourcemodel/OutputWithDepth.hxx
--- writerfilter/inc/resourcemodel/OutputWithDepth.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/resourcemodel/OutputWithDepth.hxx	2008-01-14 11:07:09.000000000 +0100
@@ -36,8 +36,14 @@
 #ifndef INCLUDED_OUTPUT_WITH_DEPTH
 #define INCLUDED_OUTPUT_WITH_DEPTH
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <vector>
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace writerfilter
 {
diff -u -r writerfilter/inc/resourcemodel/QNameToString.hxx writerfilter/inc/resourcemodel/QNameToString.hxx
--- writerfilter/inc/resourcemodel/QNameToString.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/resourcemodel/QNameToString.hxx	2008-01-14 09:01:13.000000000 +0100
@@ -35,10 +35,17 @@
 #ifndef INCLUDED_QNAME_TO_STRING_HXX
 #define INCLUDED_QNAME_TO_STRING_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <boost/shared_ptr.hpp>
 #include <map>
 #include <string>
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <resourcemodel/WW8ResourceModel.hxx>
 
 namespace writerfilter
diff -u -r writerfilter/inc/resourcemodel/SubSequence.hxx writerfilter/inc/resourcemodel/SubSequence.hxx
--- writerfilter/inc/resourcemodel/SubSequence.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/resourcemodel/SubSequence.hxx	2008-01-14 09:01:07.000000000 +0100
@@ -40,8 +40,15 @@
 #include <com/sun/star/uno/Sequence.hxx>
 #endif
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <boost/shared_ptr.hpp>
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <ctype.h>
 #include "exceptions.hxx"
 #include <WriterFilterDllApi.hxx>
diff -u -r writerfilter/inc/resourcemodel/WW8ResourceModel.hxx writerfilter/inc/resourcemodel/WW8ResourceModel.hxx
--- writerfilter/inc/resourcemodel/WW8ResourceModel.hxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/inc/resourcemodel/WW8ResourceModel.hxx	2008-01-14 09:00:56.000000000 +0100
@@ -36,10 +36,16 @@
 #ifndef INCLUDED_WW8_EVENT_HANDLER_HXX
 #define INCLUDED_WW8_EVENT_HANDLER_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
-#include <memory>
 #include <boost/shared_ptr.hpp>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
+#include <memory>
 #ifndef _SAL_TYPES_H_
 #include <sal/types.h>
 #endif // _SAL_TYPES_H_
diff -u -r writerfilter/qa/cppunittests/odiapi/ExternalViewLogger.cxx writerfilter/qa/cppunittests/odiapi/ExternalViewLogger.cxx
--- writerfilter/qa/cppunittests/odiapi/ExternalViewLogger.cxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/qa/cppunittests/odiapi/ExternalViewLogger.cxx	2008-01-14 10:43:04.000000000 +0100
@@ -1,7 +1,15 @@
 /*  Copyright 2005 Sun Microsystems, Inc. */
 
 #include "ExternalViewLogger.hxx"
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <boost/assert.hpp>
 #include <stdio.h>
 
diff -u -r writerfilter/qa/cppunittests/odiapi/FileLoggerImpl.cxx writerfilter/qa/cppunittests/odiapi/FileLoggerImpl.cxx
--- writerfilter/qa/cppunittests/odiapi/FileLoggerImpl.cxx	2007-12-10 15:51:36.000000000 +0100
+++ writerfilter/qa/cppunittests/odiapi/FileLoggerImpl.cxx	2008-01-14 10:42:49.000000000 +0100
@@ -1,7 +1,14 @@
 /*  Copyright 2005 Sun Microsystems, Inc. */
 
 #include "FileLoggerImpl.hxx"
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 using namespace std;
 
diff -u -r writerfilter/source/doctok/resources.xsl writerfilter/source/doctok/resources.xsl
--- writerfilter/source/doctok/resources.xsl	2007-12-10 15:51:39.000000000 +0100
+++ writerfilter/source/doctok/resources.xsl	2008-01-14 10:37:45.000000000 +0100
@@ -84,8 +84,14 @@
 #ifndef INCLUDED_RESOURCES_HXX
 #define INCLUDED_RESOURCES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #ifndef INCLUDED_OUTPUT_WITH_DEPTH_HXX
 #include &lt;resourcemodel/OutputWithDepth.hxx&gt;
diff -u -r writerfilter/source/doctok/util.hxx writerfilter/source/doctok/util.hxx
--- writerfilter/source/doctok/util.hxx	2007-12-10 15:51:39.000000000 +0100
+++ writerfilter/source/doctok/util.hxx	2008-01-14 09:49:09.000000000 +0100
@@ -36,8 +36,14 @@
 #ifndef INCLUDED_UTIL_HXX
 #define INCLUDED_UTIL_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace writerfilter {
 namespace doctok {
diff -u -r writerfilter/source/doctok/WW8BinTable.hxx writerfilter/source/doctok/WW8BinTable.hxx
--- writerfilter/source/doctok/WW8BinTable.hxx	2007-12-10 15:51:38.000000000 +0100
+++ writerfilter/source/doctok/WW8BinTable.hxx	2008-01-14 09:49:16.000000000 +0100
@@ -36,8 +36,14 @@
 #ifndef INCLUDED_WW8_BIN_TABLE_HXX
 #define INCLUDED_WW8_BIN_TABLE_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <boost/shared_ptr.hpp>
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #ifndef INCLUDED_WW8_FKP_HXX
 #include <WW8FKP.hxx>
diff -u -r writerfilter/source/doctok/WW8CpAndFc.cxx writerfilter/source/doctok/WW8CpAndFc.cxx
--- writerfilter/source/doctok/WW8CpAndFc.cxx	2007-12-10 15:51:38.000000000 +0100
+++ writerfilter/source/doctok/WW8CpAndFc.cxx	2008-01-14 09:49:23.000000000 +0100
@@ -35,10 +35,16 @@
 
 #include <WW8CpAndFc.hxx>
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <iterator>
 #include <algorithm>
 #include <string>
 #include <map>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace writerfilter {
 namespace doctok
diff -u -r writerfilter/source/doctok/WW8OutputWithDepth.hxx writerfilter/source/doctok/WW8OutputWithDepth.hxx
--- writerfilter/source/doctok/WW8OutputWithDepth.hxx	2007-12-10 15:51:38.000000000 +0100
+++ writerfilter/source/doctok/WW8OutputWithDepth.hxx	2008-01-14 09:49:28.000000000 +0100
@@ -40,7 +40,13 @@
 #include <resourcemodel/OutputWithDepth.hxx>
 #endif
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 using namespace ::std;
 
diff -u -r writerfilter/source/odiapi/core/NodeImpl.hxx writerfilter/source/odiapi/core/NodeImpl.hxx
--- writerfilter/source/odiapi/core/NodeImpl.hxx	2007-12-10 15:51:39.000000000 +0100
+++ writerfilter/source/odiapi/core/NodeImpl.hxx	2008-01-14 10:57:14.000000000 +0100
@@ -40,8 +40,14 @@
 
 #include <odiapi/core/Node.hxx>
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
 #include <boost/shared_ptr.hpp>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 namespace odiapi { namespace core {
 
diff -u -r writerfilter/source/odiapi/qname/QName.cxx writerfilter/source/odiapi/qname/QName.cxx
--- writerfilter/source/odiapi/qname/QName.cxx	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/odiapi/qname/QName.cxx	2008-01-14 10:57:47.000000000 +0100
@@ -42,7 +42,15 @@
 #include <stack>
 #include <assert.h>
 #include <stdexcept>
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <stdio.h>
 
 namespace writerfilter
diff -u -r writerfilter/source/ooxml/fastresources_dml-baseStylesheet.xsl writerfilter/source/ooxml/fastresources_dml-baseStylesheet.xsl
--- writerfilter/source/ooxml/fastresources_dml-baseStylesheet.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-baseStylesheet.xsl	2008-01-14 10:08:49.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_BASESTYLESHEET_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_BASESTYLESHEET_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-baseTypes.xsl writerfilter/source/ooxml/fastresources_dml-baseTypes.xsl
--- writerfilter/source/ooxml/fastresources_dml-baseTypes.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-baseTypes.xsl	2008-01-14 10:08:42.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_BASETYPES_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_BASETYPES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-chartDrawing.xsl writerfilter/source/ooxml/fastresources_dml-chartDrawing.xsl
--- writerfilter/source/ooxml/fastresources_dml-chartDrawing.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-chartDrawing.xsl	2008-01-14 10:08:35.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_CHARTDRAWING_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_CHARTDRAWING_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-documentProperties.xsl writerfilter/source/ooxml/fastresources_dml-documentProperties.xsl
--- writerfilter/source/ooxml/fastresources_dml-documentProperties.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-documentProperties.xsl	2008-01-14 10:08:29.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_DOCUMENTPROPERTIES_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_DOCUMENTPROPERTIES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-graphicalObject.xsl writerfilter/source/ooxml/fastresources_dml-graphicalObject.xsl
--- writerfilter/source/ooxml/fastresources_dml-graphicalObject.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-graphicalObject.xsl	2008-01-14 10:08:23.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_GRAPHICALOBJECT_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_GRAPHICALOBJECT_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shape3DCamera.xsl writerfilter/source/ooxml/fastresources_dml-shape3DCamera.xsl
--- writerfilter/source/ooxml/fastresources_dml-shape3DCamera.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shape3DCamera.xsl	2008-01-14 10:08:14.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DCAMERA_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DCAMERA_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shape3DLighting.xsl writerfilter/source/ooxml/fastresources_dml-shape3DLighting.xsl
--- writerfilter/source/ooxml/fastresources_dml-shape3DLighting.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shape3DLighting.xsl	2008-01-14 10:08:08.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DLIGHTING_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DLIGHTING_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shape3DScene.xsl writerfilter/source/ooxml/fastresources_dml-shape3DScene.xsl
--- writerfilter/source/ooxml/fastresources_dml-shape3DScene.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shape3DScene.xsl	2008-01-14 10:08:02.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DSCENE_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DSCENE_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shape3DStyles.xsl writerfilter/source/ooxml/fastresources_dml-shape3DStyles.xsl
--- writerfilter/source/ooxml/fastresources_dml-shape3DStyles.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shape3DStyles.xsl	2008-01-14 10:07:55.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DSTYLES_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPE3DSTYLES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shapeEffects.xsl writerfilter/source/ooxml/fastresources_dml-shapeEffects.xsl
--- writerfilter/source/ooxml/fastresources_dml-shapeEffects.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shapeEffects.xsl	2008-01-14 10:07:47.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEEFFECTS_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEEFFECTS_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shapeGeometry.xsl writerfilter/source/ooxml/fastresources_dml-shapeGeometry.xsl
--- writerfilter/source/ooxml/fastresources_dml-shapeGeometry.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shapeGeometry.xsl	2008-01-14 10:07:40.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEGEOMETRY_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEGEOMETRY_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shapeLineProperties.xsl writerfilter/source/ooxml/fastresources_dml-shapeLineProperties.xsl
--- writerfilter/source/ooxml/fastresources_dml-shapeLineProperties.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shapeLineProperties.xsl	2008-01-14 10:07:34.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPELINEPROPERTIES_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPELINEPROPERTIES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-shapeProperties.xsl writerfilter/source/ooxml/fastresources_dml-shapeProperties.xsl
--- writerfilter/source/ooxml/fastresources_dml-shapeProperties.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-shapeProperties.xsl	2008-01-14 10:07:28.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEPROPERTIES_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_SHAPEPROPERTIES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-styleDefaults.xsl writerfilter/source/ooxml/fastresources_dml-styleDefaults.xsl
--- writerfilter/source/ooxml/fastresources_dml-styleDefaults.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-styleDefaults.xsl	2008-01-14 10:07:22.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_STYLEDEFAULTS_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_STYLEDEFAULTS_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-stylesheet.xsl writerfilter/source/ooxml/fastresources_dml-stylesheet.xsl
--- writerfilter/source/ooxml/fastresources_dml-stylesheet.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-stylesheet.xsl	2008-01-14 10:07:14.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_STYLESHEET_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_STYLESHEET_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-textCharacter.xsl writerfilter/source/ooxml/fastresources_dml-textCharacter.xsl
--- writerfilter/source/ooxml/fastresources_dml-textCharacter.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-textCharacter.xsl	2008-01-14 10:07:08.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_TEXTCHARACTER_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_TEXTCHARACTER_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_dml-wordprocessingDrawing.xsl writerfilter/source/ooxml/fastresources_dml-wordprocessingDrawing.xsl
--- writerfilter/source/ooxml/fastresources_dml-wordprocessingDrawing.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_dml-wordprocessingDrawing.xsl	2008-01-14 10:07:00.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_DML_WORDPROCESSINGDRAWING_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_DML_WORDPROCESSINGDRAWING_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresourcesimpl.xsl writerfilter/source/ooxml/fastresourcesimpl.xsl
--- writerfilter/source/ooxml/fastresourcesimpl.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresourcesimpl.xsl	2008-01-14 10:06:51.000000000 +0100
@@ -75,7 +75,14 @@
     <out xml:space="preserve">
       <xsl:call-template name="licenseheader"/>
       <xsl:text>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include &lt;doctok/sprmids.hxx&gt;
 #include "OOXMLFastHelper.hxx"
 #include "OOXMLfastresources.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_shared-math.xsl writerfilter/source/ooxml/fastresources_shared-math.xsl
--- writerfilter/source/ooxml/fastresources_shared-math.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_shared-math.xsl	2008-01-14 10:06:45.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_SHARED_MATH_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_SHARED_MATH_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_shared-relationshipReference.xsl writerfilter/source/ooxml/fastresources_shared-relationshipReference.xsl
--- writerfilter/source/ooxml/fastresources_shared-relationshipReference.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_shared-relationshipReference.xsl	2008-01-14 10:06:38.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_SHARED_RELATIONSHIPREFERENCE_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_SHARED_RELATIONSHIPREFERENCE_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_sml-customXmlMappings.xsl writerfilter/source/ooxml/fastresources_sml-customXmlMappings.xsl
--- writerfilter/source/ooxml/fastresources_sml-customXmlMappings.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_sml-customXmlMappings.xsl	2008-01-14 10:06:29.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_SML_CUSTOMXMLMAPPINGS_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_SML_CUSTOMXMLMAPPINGS_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_wml.xsl writerfilter/source/ooxml/fastresources_wml.xsl
--- writerfilter/source/ooxml/fastresources_wml.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_wml.xsl	2008-01-14 10:06:21.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_WML_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_WML_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources_.xsl writerfilter/source/ooxml/fastresources_.xsl
--- writerfilter/source/ooxml/fastresources_.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources_.xsl	2008-01-14 10:06:14.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_FASTRESOURCES_WML_HXX
 #define INCLUDED_OOXML_FASTRESOURCES_WML_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include "OOXMLFastContextHandler.hxx"
diff -u -r writerfilter/source/ooxml/fastresources.xsl writerfilter/source/ooxml/fastresources.xsl
--- writerfilter/source/ooxml/fastresources.xsl	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/fastresources.xsl	2008-01-14 10:06:08.000000000 +0100
@@ -77,9 +77,15 @@
 #ifndef INCLUDED_OOXML_RESOURCES_HXX
 #define INCLUDED_OOXML_RESOURCES_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 #include &lt;doctok/resourceids.hxx&gt;
diff -u -r writerfilter/source/ooxml/fasttokens.xsl writerfilter/source/ooxml/fasttokens.xsl
--- writerfilter/source/ooxml/fasttokens.xsl	2007-12-10 15:51:43.000000000 +0100
+++ writerfilter/source/ooxml/fasttokens.xsl	2008-01-14 10:25:37.000000000 +0100
@@ -78,10 +78,16 @@
 #ifndef INCLUDED_OOXML_FAST_TOKENS_HXX
 #define INCLUDED_OOXML_FAST_TOKENS_HXX
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include &lt;map&gt;
 #include &lt;vector&gt;
 #include &lt;boost/shared_ptr.hpp&gt;
 #include &lt;string&gt;
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 #include &lt;resourcemodel/WW8ResourceModel.hxx&gt;
 
diff -u -r writerfilter/source/ooxml/OOXMLFastContextHandler.hxx writerfilter/source/ooxml/OOXMLFastContextHandler.hxx
--- writerfilter/source/ooxml/OOXMLFastContextHandler.hxx	2007-12-10 15:51:42.000000000 +0100
+++ writerfilter/source/ooxml/OOXMLFastContextHandler.hxx	2008-01-14 09:49:35.000000000 +0100
@@ -40,7 +40,14 @@
 #include <com/sun/star/xml/sax/XFastShapeContextHandler.hpp>
 #endif
 
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include "sal/config.h"
 #include "com/sun/star/uno/XComponentContext.hpp"
 #include "cppuhelper/implbase1.hxx"
diff -u -r writerfilter/unocomponent/debugservices/rtftok/XMLScanner.cxx writerfilter/unocomponent/debugservices/rtftok/XMLScanner.cxx
--- writerfilter/unocomponent/debugservices/rtftok/XMLScanner.cxx	2007-12-10 15:51:45.000000000 +0100
+++ writerfilter/unocomponent/debugservices/rtftok/XMLScanner.cxx	2008-01-14 10:49:16.000000000 +0100
@@ -54,7 +54,15 @@
 #include <rtl/string.hxx>
 #include <hash_set>
 #include <assert.h>
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <string>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
+
 #include <cppuhelper/implbase2.hxx>
 #include <com/sun/star/embed/XTransactedObject.hpp>
 #include <com/sun/star/embed/XStorage.hpp>
@@ -66,7 +74,14 @@
 #include <comphelper/seqstream.hxx>
 
 #include <ctype.h>
+
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility push(default)
+#endif
 #include <iostream>
+#ifdef GCC_VISIBILITY_BROKEN
+#pragma GCC visibility pop
+#endif
 
 using namespace ::com::sun::star;
 using namespace ::std;
